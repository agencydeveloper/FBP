var JSON;!function(P,M){function d(e){return $.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}function g(e){if(!ct[e]){var t=O.body,i=$("<"+e+">").appendTo(t),n=i.css("display");i.remove(),"none"!==n&&""!==n||(ot||((ot=O.createElement("iframe")).frameBorder=ot.width=ot.height=0),t.appendChild(ot),rt&&ot.createElement||((rt=(ot.contentWindow||ot.contentDocument).document).write(($.support.boxModel?"<!doctype html>":"")+"<html><body>"),rt.close()),i=rt.createElement(e),rt.body.appendChild(i),n=$.css(i,"display"),t.removeChild(ot)),ct[e]=n}return ct[e]}function s(e,t){var i={};return $.each(pt.concat.apply([],pt.slice(0,t)),function(){i[this]=e}),i}function e(){lt=M}function l(){return setTimeout(e,0),lt=$.now()}function t(){try{return new P.XMLHttpRequest}catch(e){}}function o(i,e,n,a){if($.isArray(e))$.each(e,function(e,t){n||je.test(i)?a(i,t):o(i+"["+("object"==typeof t?e:"")+"]",t,n,a)});else if(n||"object"!==$.type(e))a(i,e);else for(var t in e)o(i+"["+t+"]",e[t],n,a)}function i(e,t){var i,n,a=$.ajaxSettings.flatOptions||{};for(i in t)t[i]!==M&&((a[i]?e:n||(n={}))[i]=t[i]);n&&$.extend(!0,e,n)}function k(e,t,i,n,a,o){(o=o||{})[a=a||t.dataTypes[0]]=!0;for(var r,s=e[a],l=0,c=s?s.length:0,d=e===Ge;l<c&&(d||!r);l++)"string"==typeof(r=s[l](t,i,n))&&(!d||o[r]?r=M:(t.dataTypes.unshift(r),r=k(e,t,i,n,r,o)));return(d||!r)&&!o["*"]&&(r=k(e,t,i,n,"*",o)),r}function n(s){return function(e,t){if("string"!=typeof e&&(t=e,e="*"),$.isFunction(t))for(var i,n,a=e.toLowerCase().split(Be),o=0,r=a.length;o<r;o++)i=a[o],(n=/^\+/.test(i))&&(i=i.substr(1)||"*"),(s[i]=s[i]||[])[n?"unshift":"push"](t)}}function a(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,a="width"===t?1:0;if(0<n){if("border"!==i)for(;a<4;a+=2)i||(n-=parseFloat($.css(e,"padding"+Pe[a]))||0),"margin"===i?n+=parseFloat($.css(e,i+Pe[a]))||0:n-=parseFloat($.css(e,"border"+Pe[a]+"Width"))||0;return n+"px"}if(((n=Ae(e,t))<0||null==n)&&(n=e.style[t]),Te.test(n))return n;if(n=parseFloat(n)||0,i)for(;a<4;a+=2)n+=parseFloat($.css(e,"padding"+Pe[a]))||0,"padding"!==i&&(n+=parseFloat($.css(e,"border"+Pe[a]+"Width"))||0),"margin"===i&&(n+=parseFloat($.css(e,i+Pe[a]))||0);return n+"px"}function y(e){var t=(e.nodeName||"").toLowerCase();"input"===t?r(e):"script"!==t&&void 0!==e.getElementsByTagName&&$.grep(e.getElementsByTagName("input"),r)}function r(e){"checkbox"!==e.type&&"radio"!==e.type||(e.defaultChecked=e.checked)}function c(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function u(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(i=t.nodeName.toLowerCase())?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute($.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function p(e,t){if(1===t.nodeType&&$.hasData(e)){var i,n,a,o=$._data(e),r=$._data(t,o),s=o.events;if(s)for(i in delete r.handle,r.events={},s)for(n=0,a=s[i].length;n<a;n++)$.event.add(t,i,s[i][n]);r.data&&(r.data=$.extend({},r.data))}}function A(e){var t=re.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function h(e,i,n){if(i=i||0,$.isFunction(i))return $.grep(e,function(e,t){return!!i.call(e,t,e)===n});if(i.nodeType)return $.grep(e,function(e,t){return e===i===n});if("string"==typeof i){var t=$.grep(e,function(e){return 1===e.nodeType});if(ie.test(i))return $.filter(i,t,!n);i=$.filter(i,t)}return $.grep(e,function(e,t){return 0<=$.inArray(e,i)===n})}function f(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function m(){return!0}function v(){return!1}function b(e,t,i){var n=t+"defer",a=t+"queue",o=t+"mark",r=$._data(e,n);r&&("queue"===i||!$._data(e,a))&&("mark"===i||!$._data(e,o))&&setTimeout(function(){!$._data(e,a)&&!$._data(e,o)&&($.removeData(e,n,!0),r.fire())},0)}function _(e){for(var t in e)if(("data"!==t||!$.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function w(e,t,i){if(i===M&&1===e.nodeType){var n="data-"+t.replace(D,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:$.isNumeric(i)?+i:T.test(i)?$.parseJSON(i):i)}catch(e){}$.data(e,t,i)}else i=M}return i}var O=P.document,N=P.navigator,x=P.location,$=function(){function t(){if(!u.isReady){try{O.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}u.ready()}}var i,e,n,a,u=function(e,t){return new u.fn.init(e,t,i)},o=P.jQuery,r=P.$,s=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,c=/^\s+/,d=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/^[\],:{}\s]*$/,f=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,v=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,_=/(msie) ([\w.]+)/,y=/(mozilla)(?:.*? rv:([\w.]+))?/,A=/-([a-z]|[0-9])/gi,w=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},k=N.userAgent,$=Object.prototype.toString,C=Object.prototype.hasOwnProperty,S=Array.prototype.push,T=Array.prototype.slice,D=String.prototype.trim,E=Array.prototype.indexOf,I={};return u.fn=u.prototype={constructor:u,init:function(e,t,i){var n,a,o,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!t&&O.body)return this.context=O,this[0]=O.body,this.selector=e,this.length=1,this;if("string"==typeof e){if((n="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?s.exec(e):[null,e,null])&&(n[1]||!t)){if(n[1])return r=(t=t instanceof u?t[0]:t)?t.ownerDocument||t:O,(o=p.exec(e))?u.isPlainObject(t)?(e=[O.createElement(o[1])],u.fn.attr.call(e,t,!0)):e=[r.createElement(o[1])]:e=((o=u.buildFragment([n[1]],[r])).cacheable?u.clone(o.fragment):o.fragment).childNodes,u.merge(this,e);if((a=O.getElementById(n[2]))&&a.parentNode){if(a.id!==n[2])return i.find(e);this.length=1,this[0]=a}return this.context=O,this.selector=e,this}return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e)}return u.isFunction(e)?i.ready(e):(e.selector!==M&&(this.selector=e.selector,this.context=e.context),u.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return T.call(this,0)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return u.isArray(e)?S.apply(n,e):u.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return u.each(this,e,t)},ready:function(e){return u.bindReady(),n.add(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(T.apply(this,arguments),"slice",T.call(arguments).join(","))},map:function(i){return this.pushStack(u.map(this,function(e,t){return i.call(e,t,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:S,sort:[].sort,splice:[].splice},u.fn.init.prototype=u.fn,u.extend=u.fn.extend=function(){var e,t,i,n,a,o,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[1]||{},s=2),"object"!=typeof r&&!u.isFunction(r)&&(r={}),l===s&&(r=this,--s);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=r[t],r!==(n=e[t])&&(c&&n&&(u.isPlainObject(n)||(a=u.isArray(n)))?(a?(a=!1,o=i&&u.isArray(i)?i:[]):o=i&&u.isPlainObject(i)?i:{},r[t]=u.extend(c,o,n)):n!==M&&(r[t]=n));return r},u.extend({noConflict:function(e){return P.$===u&&(P.$=r),e&&P.jQuery===u&&(P.jQuery=o),u},isReady:!1,readyWait:1,holdReady:function(e){e?u.readyWait++:u.ready(!0)},ready:function(e){if(!0===e&&!--u.readyWait||!0!==e&&!u.isReady){if(!O.body)return setTimeout(u.ready,1);if((u.isReady=!0)!==e&&0<--u.readyWait)return;n.fireWith(O,[u]),u.fn.trigger&&u(O).trigger("ready").off("ready")}},bindReady:function(){if(!n){if(n=u.Callbacks("once memory"),"complete"===O.readyState)return setTimeout(u.ready,1);if(O.addEventListener)O.addEventListener("DOMContentLoaded",a,!1),P.addEventListener("load",u.ready,!1);else if(O.attachEvent){O.attachEvent("onreadystatechange",a),P.attachEvent("onload",u.ready);var e=!1;try{e=null==P.frameElement}catch(e){}O.documentElement.doScroll&&e&&t()}}},isFunction:function(e){return"function"===u.type(e)},isArray:Array.isArray||function(e){return"array"===u.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):I[$.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==u.type(e)||e.nodeType||u.isWindow(e))return!1;try{if(e.constructor&&!C.call(e,"constructor")&&!C.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return t===M||C.call(e,t)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(e){return"string"==typeof e&&e?(e=u.trim(e),P.JSON&&P.JSON.parse?P.JSON.parse(e):h.test(e.replace(f,"@").replace(m,"]").replace(g,""))?new Function("return "+e)():void u.error("Invalid JSON: "+e)):null},parseXML:function(e){if("string"!=typeof e||!e)return null;var t;try{P.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=M}return(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)&&u.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&l.test(e)&&(P.execScript||function(e){P.eval.call(P,e)})(e)},camelCase:function(e){return e.replace(w,"ms-").replace(A,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,t,i){var n,a=0,o=e.length,r=o===M||u.isFunction(e);if(i)if(r){for(n in e)if(!1===t.apply(e[n],i))break}else for(;a<o&&!1!==t.apply(e[a++],i););else if(r){for(n in e)if(!1===t.call(e[n],n,e[n]))break}else for(;a<o&&!1!==t.call(e[a],a,e[a++]););return e},trim:D?function(e){return null==e?"":D.call(e)}:function(e){return null==e?"":(e+"").replace(c,"").replace(d,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=u.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||u.isWindow(e)?S.call(i,e):u.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(E)return E.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){var i=e.length,n=0;if("number"==typeof t.length)for(var a=t.length;n<a;n++)e[i++]=t[n];else for(;t[n]!==M;)e[i++]=t[n++];return e.length=i,e},grep:function(e,t,i){var n=[];i=!!i;for(var a=0,o=e.length;a<o;a++)i!==!!t(e[a],a)&&n.push(e[a]);return n},map:function(e,t,i){var n,a,o=[],r=0,s=e.length;if(e instanceof u||s!==M&&"number"==typeof s&&(0<s&&e[0]&&e[s-1]||0===s||u.isArray(e)))for(;r<s;r++)null!=(n=t(e[r],r,i))&&(o[o.length]=n);else for(a in e)null!=(n=t(e[a],a,i))&&(o[o.length]=n);return o.concat.apply([],o)},guid:1,proxy:function(e,t){if("string"==typeof t){var i=e[t];t=e,e=i}if(!u.isFunction(e))return M;var n=T.call(arguments,2),a=function(){return e.apply(t,n.concat(T.call(arguments)))};return a.guid=e.guid=e.guid||a.guid||u.guid++,a},access:function(e,t,i,n,a,o,r){var s,l=null==i,c=0,d=e.length;if(i&&"object"==typeof i){for(c in i)u.access(e,t,c,i[c],1,o,n);a=1}else if(n!==M){if(s=r===M&&u.isFunction(n),l&&(s?(s=t,t=function(e,t,i){return s.call(u(e),i)}):(t.call(e,n),t=null)),t)for(;c<d;c++)t(e[c],i,s?n.call(e[c],c,t(e[c],i)):n,r);a=1}return a?e:l?t.call(e):d?t(e[0],i):o},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=v.exec(e)||b.exec(e)||_.exec(e)||e.indexOf("compatible")<0&&y.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function i(e,t){return new i.fn.init(e,t)}u.extend(!0,i,this),i.superclass=this,((i.fn=i.prototype=this()).constructor=i).sub=this.sub,i.fn.init=function(e,t){return t&&t instanceof u&&!(t instanceof i)&&(t=i(t)),u.fn.init.call(this,e,t,n)},i.fn.init.prototype=i.fn;var n=i(O);return i},browser:{}}),u.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){I["[object "+t+"]"]=t.toLowerCase()}),(e=u.uaMatch(k)).browser&&(u.browser[e.browser]=!0,u.browser.version=e.version),u.browser.webkit&&(u.browser.safari=!0),l.test(" ")&&(c=/^[\s\xA0]+/,d=/[\s\xA0]+$/),i=u(O),O.addEventListener?a=function(){O.removeEventListener("DOMContentLoaded",a,!1),u.ready()}:O.attachEvent&&(a=function(){"complete"===O.readyState&&(O.detachEvent("onreadystatechange",a),u.ready())}),u}(),C={};$.Callbacks=function(o){o=o?C[o]||function(e){var t,i,n=C[e]={};for(t=0,i=(e=e.split(/\s+/)).length;t<i;t++)n[e[t]]=!0;return n}(o):{};var i,n,a,r,s,l,c=[],d=[],u=function(e){var t,i,n,a;for(t=0,i=e.length;t<i;t++)n=e[t],"array"===(a=$.type(n))?u(n):"function"===a&&(!o.unique||!h.has(n))&&c.push(n)},p=function(e,t){for(t=t||[],i=!o.memory||[e,t],a=n=!0,l=r||0,r=0,s=c.length;c&&l<s;l++)if(!1===c[l].apply(e,t)&&o.stopOnFalse){i=!0;break}a=!1,c&&(o.once?!0===i?h.disable():c=[]:d&&d.length&&(i=d.shift(),h.fireWith(i[0],i[1])))},h={add:function(){if(c){var e=c.length;u(arguments),a?s=c.length:i&&!0!==i&&(r=e,p(i[0],i[1]))}return this},remove:function(){if(c)for(var e=arguments,t=0,i=e.length;t<i;t++)for(var n=0;n<c.length&&(e[t]!==c[n]||(a&&n<=s&&(s--,n<=l&&l--),c.splice(n--,1),!o.unique));n++);return this},has:function(e){if(c)for(var t=0,i=c.length;t<i;t++)if(e===c[t])return!0;return!1},empty:function(){return c=[],this},disable:function(){return c=d=i=M,this},disabled:function(){return!c},lock:function(){return d=M,(!i||!0===i)&&h.disable(),this},locked:function(){return!d},fireWith:function(e,t){return d&&(a?o.once||d.push([e,t]):(!o.once||!i)&&p(e,t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h};var S=[].slice;$.extend({Deferred:function(e){var t,i=$.Callbacks("once memory"),n=$.Callbacks("once memory"),a=$.Callbacks("memory"),o="pending",r={resolve:i,reject:n,notify:a},s={done:i.add,fail:n.add,progress:a.add,state:function(){return o},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return $.Deferred(function(o){$.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,n=t[0],a=t[1];$.isFunction(n)?l[e](function(){(i=n.apply(this,arguments))&&$.isFunction(i.promise)?i.promise().then(o.resolve,o.reject,o.notify):o[a+"With"](this===l?o:this,[i])}):l[e](o[a])})}).promise()},promise:function(e){if(null==e)e=s;else for(var t in s)e[t]=s[t];return e}},l=s.promise({});for(t in r)l[t]=r[t].fire,l[t+"With"]=r[t].fireWith;return l.done(function(){o="resolved"},n.disable,a.lock).fail(function(){o="rejected"},i.disable,a.lock),e&&e.call(l,l),l},when:function(e){function t(t){return function(e){r[t]=1<arguments.length?S.call(arguments,0):e,l.notifyWith(c,r)}}function i(t){return function(e){n[t]=1<arguments.length?S.call(arguments,0):e,--s||l.resolveWith(l,n)}}var n=S.call(arguments,0),a=0,o=n.length,r=Array(o),s=o,l=o<=1&&e&&$.isFunction(e.promise)?e:$.Deferred(),c=l.promise();if(1<o){for(;a<o;a++)n[a]&&n[a].promise&&$.isFunction(n[a].promise)?n[a].promise().then(i(a),l.reject,t(a)):--s;s||l.resolveWith(l,n)}else l!==e&&l.resolveWith(l,o?[e]:[]);return c}}),$.support=function(){var u,e,t,i,n,a,o,p,r,s,h,f=O.createElement("div");O.documentElement;if(f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",e=f.getElementsByTagName("*"),t=f.getElementsByTagName("a")[0],!e||!e.length||!t)return{};n=(i=O.createElement("select")).appendChild(O.createElement("option")),a=f.getElementsByTagName("input")[0],u={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.55/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===a.value,optSelected:n.selected,getSetAttribute:"t"!==f.className,enctype:!!O.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==O.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},$.boxModel=u.boxModel="CSS1Compat"===O.compatMode,a.checked=!0,u.noCloneChecked=a.cloneNode(!0).checked,i.disabled=!0,u.optDisabled=!n.disabled;try{delete f.test}catch(e){u.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){u.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick")),(a=O.createElement("input")).value="t",a.setAttribute("type","radio"),u.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),f.appendChild(a),(o=O.createDocumentFragment()).appendChild(f.lastChild),u.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,u.appendChecked=a.checked,o.removeChild(a),o.appendChild(f),f.attachEvent)for(s in{submit:1,change:1,focusin:1})(h=(r="on"+s)in f)||(f.setAttribute(r,"return;"),h="function"==typeof f[r]),u[s+"Bubbles"]=h;return o.removeChild(f),o=i=n=f=a=null,$(function(){var e,t,i,n,a,o,r,s,l,c,d=O.getElementsByTagName("body")[0];!d||(1,l=(c="padding:0;margin:0;border:")+"0;visibility:hidden;","<div "+(r="style='"+(s="position:absolute;top:0;left:0;width:1px;height:1px;")+c+"5px solid #000;")+"display:block;'><div style='"+c+"0;display:block;overflow:hidden;'></div></div><table "+r+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",(e=O.createElement("div")).style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:1px",d.insertBefore(e,d.firstChild),f=O.createElement("div"),e.appendChild(f),f.innerHTML="<table><tr><td style='"+c+"0;display:none'></td><td>t</td></tr></table>",p=f.getElementsByTagName("td"),h=0===p[0].offsetHeight,p[0].style.display="",p[1].style.display="none",u.reliableHiddenOffsets=h&&0===p[0].offsetHeight,P.getComputedStyle&&(f.innerHTML="",(o=O.createElement("div")).style.width="0",o.style.marginRight="0",f.style.width="2px",f.appendChild(o),u.reliableMarginRight=0===(parseInt((P.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)),void 0!==f.style.zoom&&(f.innerHTML="",f.style.width=f.style.padding="1px",f.style.border=0,f.style.overflow="hidden",f.style.display="inline",f.style.zoom=1,u.inlineBlockNeedsLayout=3===f.offsetWidth,f.style.display="block",f.style.overflow="visible",f.innerHTML="<div style='width:5px;'></div>",u.shrinkWrapBlocks=3!==f.offsetWidth),f.style.cssText=s+l,f.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i=(t=f.firstChild).firstChild,n=t.nextSibling.firstChild.firstChild,a={doesNotAddBorder:5!==i.offsetTop,doesAddBorderForTableAndCells:5===n.offsetTop},i.style.position="fixed",i.style.top="20px",a.fixedPosition=20===i.offsetTop||15===i.offsetTop,i.style.position=i.style.top="",t.style.overflow="hidden",t.style.position="relative",a.subtractsBorderForOverflowNotVisible=-5===i.offsetTop,a.doesNotIncludeMarginInBodyOffset=1!==d.offsetTop,P.getComputedStyle&&(f.style.marginTop="1%",u.pixelMargin="1%"!==(P.getComputedStyle(f,null)||{marginTop:0}).marginTop),void 0!==e.style.zoom&&(e.style.zoom=1),d.removeChild(e),o=f=e=null,$.extend(u,a))}),u}();var T=/^(?:\{.*\}|\[.*\])$/,D=/([A-Z])/g;$.extend({cache:{},uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?$.cache[e[$.expando]]:e[$.expando])&&!_(e)},data:function(e,t,i,n){if($.acceptData(e)){var a,o,r,s=$.expando,l="string"==typeof t,c=e.nodeType,d=c?$.cache:e,u=c?e[s]:e[s]&&s,p="events"===t;if((!u||!d[u]||!p&&!n&&!d[u].data)&&l&&i===M)return;return u||(c?e[s]=u=++$.uuid:u=s),d[u]||(d[u]={},c||(d[u].toJSON=$.noop)),"object"!=typeof t&&"function"!=typeof t||(n?d[u]=$.extend(d[u],t):d[u].data=$.extend(d[u].data,t)),a=o=d[u],n||(o.data||(o.data={}),o=o.data),i!==M&&(o[$.camelCase(t)]=i),p&&!o[t]?a.events:(l?null==(r=o[t])&&(r=o[$.camelCase(t)]):r=o,r)}},removeData:function(e,t,i){if($.acceptData(e)){var n,a,o,r=$.expando,s=e.nodeType,l=s?$.cache:e,c=s?e[r]:r;if(!l[c])return;if(t&&(n=i?l[c]:l[c].data)){$.isArray(t)||(t in n?t=[t]:t=(t=$.camelCase(t))in n?[t]:t.split(" "));for(a=0,o=t.length;a<o;a++)delete n[t[a]];if(!(i?_:$.isEmptyObject)(n))return}if(!i&&(delete l[c].data,!_(l[c])))return;$.support.deleteExpando||!l.setInterval?delete l[c]:l[c]=null,s&&($.support.deleteExpando?delete e[r]:e.removeAttribute?e.removeAttribute(r):e[r]=null)}},_data:function(e,t,i){return $.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=$.noData[e.nodeName.toLowerCase()];if(t)return!0!==t&&e.getAttribute("classid")===t}return!0}}),$.fn.extend({data:function(i,e){var n,a,t,o,r,s=this[0],l=0,c=null;if(i===M){if(this.length&&(c=$.data(s),1===s.nodeType&&!$._data(s,"parsedAttrs"))){for(r=(t=s.attributes).length;l<r;l++)0===(o=t[l].name).indexOf("data-")&&(o=$.camelCase(o.substring(5)),w(s,o,c[o]));$._data(s,"parsedAttrs",!0)}return c}return"object"==typeof i?this.each(function(){$.data(this,i)}):((n=i.split(".",2))[1]=n[1]?"."+n[1]:"",a=n[1]+"!",$.access(this,function(t){if(t===M)return(c=this.triggerHandler("getData"+a,[n[0]]))===M&&s&&(c=$.data(s,i),c=w(s,i,c)),c===M&&n[1]?this.data(n[0]):c;n[1]=t,this.each(function(){var e=$(this);e.triggerHandler("setData"+a,n),$.data(this,i,t),e.triggerHandler("changeData"+a,n)})},null,e,1<arguments.length,null,!1))},removeData:function(e){return this.each(function(){$.removeData(this,e)})}}),$.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",$._data(e,t,($._data(e,t)||0)+1))},_unmark:function(e,t,i){if(!0!==e&&(i=t,t=e,e=!1),t){var n=(i=i||"fx")+"mark",a=e?0:($._data(t,n)||1)-1;a?$._data(t,n,a):($.removeData(t,n,!0),b(t,i,"mark"))}},queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=$._data(e,t),i&&(!n||$.isArray(i)?n=$._data(e,t,$.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=$.queue(e,t),n=i.shift(),a={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),$._data(e,t+".run",a),n.call(e,function(){$.dequeue(e,t)},a)),i.length||($.removeData(e,t+"queue "+t+".run",!0),b(e,t,"queue"))}}),$.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?$.queue(this[0],t):i===M?this:this.each(function(){var e=$.queue(this,t,i);"fx"===t&&"inprogress"!==e[0]&&$.dequeue(this,t)})},dequeue:function(e){return this.each(function(){$.dequeue(this,e)})},delay:function(n,e){return n=$.fx&&$.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=setTimeout(e,n);t.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--s||a.resolveWith(o,[o])}"string"!=typeof e&&(t=e,e=M),e=e||"fx";for(var n,a=$.Deferred(),o=this,r=o.length,s=1,l=e+"defer",c=e+"queue",d=e+"mark";r--;)(n=$.data(o[r],l,M,!0)||($.data(o[r],c,M,!0)||$.data(o[r],d,M,!0))&&$.data(o[r],l,$.Callbacks("once memory"),!0))&&(s++,n.add(i));return i(),a.promise(t)}});var E,I,j,L=/[\n\t\r]/g,R=/\s+/,F=/\r/g,z=/^(?:button|input)$/i,q=/^(?:button|input|object|select|textarea)$/i,H=/^a(?:rea)?$/i,W=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=$.support.getSetAttribute;$.fn.extend({attr:function(e,t){return $.access(this,$.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){$.removeAttr(this,e)})},prop:function(e,t){return $.access(this,$.prop,e,t,1<arguments.length)},removeProp:function(e){return e=$.propFix[e]||e,this.each(function(){try{this[e]=M,delete this[e]}catch(e){}})},addClass:function(t){var e,i,n,a,o,r,s;if($.isFunction(t))return this.each(function(e){$(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(R),i=0,n=this.length;i<n;i++)if(1===(a=this[i]).nodeType)if(a.className||1!==e.length){for(o=" "+a.className+" ",r=0,s=e.length;r<s;r++)~o.indexOf(" "+e[r]+" ")||(o+=e[r]+" ");a.className=$.trim(o)}else a.className=t;return this},removeClass:function(t){var e,i,n,a,o,r,s;if($.isFunction(t))return this.each(function(e){$(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===M)for(e=(t||"").split(R),i=0,n=this.length;i<n;i++)if(1===(a=this[i]).nodeType&&a.className)if(t){for(o=(" "+a.className+" ").replace(L," "),r=0,s=e.length;r<s;r++)o=o.replace(" "+e[r]+" "," ");a.className=$.trim(o)}else a.className="";return this},toggleClass:function(o,r){var s=typeof o,l="boolean"==typeof r;return $.isFunction(o)?this.each(function(e){$(this).toggleClass(o.call(this,e,this.className,r),r)}):this.each(function(){if("string"===s)for(var e,t=0,i=$(this),n=r,a=o.split(R);e=a[t++];)n=l?n:!i.hasClass(e),i[n?"addClass":"removeClass"](e);else"undefined"!==s&&"boolean"!==s||(this.className&&$._data(this,"__className__",this.className),this.className=this.className||!1===o?"":$._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&-1<(" "+this[i].className+" ").replace(L," ").indexOf(t))return!0;return!1},val:function(n){var a,e,o,t=this[0];return arguments.length?(o=$.isFunction(n),this.each(function(e){var t,i=$(this);1===this.nodeType&&(null==(t=o?n.call(this,e,i.val()):n)?t="":"number"==typeof t?t+="":$.isArray(t)&&(t=$.map(t,function(e){return null==e?"":e+""})),(a=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&a.set(this,t,"value")!==M||(this.value=t))})):t?(a=$.valHooks[t.type]||$.valHooks[t.nodeName.toLowerCase()])&&"get"in a&&(e=a.get(t,"value"))!==M?e:"string"==typeof(e=t.value)?e.replace(F,""):null==e?"":e:void 0}}),$.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,a,o=e.selectedIndex,r=[],s=e.options,l="select-one"===e.type;if(o<0)return null;for(i=l?o:0,n=l?o+1:s.length;i<n;i++)if((a=s[i]).selected&&($.support.optDisabled?!a.disabled:null===a.getAttribute("disabled"))&&(!a.parentNode.disabled||!$.nodeName(a.parentNode,"optgroup"))){if(t=$(a).val(),l)return t;r.push(t)}return l&&!r.length&&s.length?$(s[o]).val():r},set:function(e,t){var i=$.makeArray(t);return $(e).find("option").each(function(){this.selected=0<=$.inArray($(this).val(),i)}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,t,i,n){var a,o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return n&&t in $.attrFn?$(e)[t](i):void 0===e.getAttribute?$.prop(e,t,i):((r=1!==s||!$.isXMLDoc(e))&&(t=t.toLowerCase(),o=$.attrHooks[t]||(W.test(t)?I:E)),i!==M?null===i?void $.removeAttr(e,t):o&&"set"in o&&r&&(a=o.set(e,i,t))!==M?a:(e.setAttribute(t,""+i),i):o&&"get"in o&&r&&null!==(a=o.get(e,t))?a:null===(a=e.getAttribute(t))?M:a)},removeAttr:function(e,t){var i,n,a,o,r,s=0;if(t&&1===e.nodeType)for(o=(n=t.toLowerCase().split(R)).length;s<o;s++)(a=n[s])&&(i=$.propFix[a]||a,(r=W.test(a))||$.attr(e,a,""),e.removeAttribute(V?a:i),r&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(z.test(e.nodeName)&&e.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===t&&$.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return E&&$.nodeName(e,"button")?E.get(e,t):t in e?e.value:null},set:function(e,t,i){if(E&&$.nodeName(e,"button"))return E.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,t,i){var n,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!$.isXMLDoc(e))&&(t=$.propFix[t]||t,a=$.propHooks[t]),i!==M?a&&"set"in a&&(n=a.set(e,i,t))!==M?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):q.test(e.nodeName)||H.test(e.nodeName)&&e.href?0:M}}}}),$.attrHooks.tabindex=$.propHooks.tabIndex,I={get:function(e,t){var i,n=$.prop(e,t);return!0===n||"boolean"!=typeof n&&(i=e.getAttributeNode(t))&&!1!==i.nodeValue?t.toLowerCase():M},set:function(e,t,i){var n;return!1===t?$.removeAttr(e,i):((n=$.propFix[i]||i)in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},V||(j={name:!0,id:!0,coords:!0},E=$.valHooks.button={get:function(e,t){var i;return(i=e.getAttributeNode(t))&&(j[t]?""!==i.nodeValue:i.specified)?i.nodeValue:M},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=O.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},$.attrHooks.tabindex.set=E.set,$.each(["width","height"],function(e,i){$.attrHooks[i]=$.extend($.attrHooks[i],{set:function(e,t){if(""===t)return e.setAttribute(i,"auto"),t}})}),$.attrHooks.contenteditable={get:E.get,set:function(e,t,i){""===t&&(t="false"),E.set(e,t,i)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(e,i){$.attrHooks[i]=$.extend($.attrHooks[i],{get:function(e){var t=e.getAttribute(i,2);return null===t?M:t}})}),$.support.style||($.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||M},set:function(e,t){return e.style.cssText=""+t}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(e,t){if($.isArray(t))return e.checked=0<=$.inArray($(e).val(),t)}})});var U=/^(?:textarea|input|select)$/i,B=/^([^\.]*)?(?:\.(.+))?$/,Y=/(?:^|\s)hover(\.\S+)?\b/,K=/^key/,J=/^(?:mouse|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,X=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Q=function(e){return $.event.special.hover?e:e.replace(Y,"mouseenter$1 mouseleave$1")};$.event={add:function(e,t,i,n,a){var o,r,s,l,c,d,u,p,h,f,m,g,v;if(3!==e.nodeType&&8!==e.nodeType&&t&&i&&(o=$._data(e))){for(i.handler&&(i=(h=i).handler,a=h.selector),i.guid||(i.guid=$.guid++),(s=o.events)||(o.events=s={}),(r=o.handle)||(o.handle=r=function(e){return void 0===$||e&&$.event.triggered===e.type?M:$.event.dispatch.apply(r.elem,arguments)},r.elem=e),t=$.trim(Q(t)).split(" "),l=0;l<t.length;l++)d=(c=B.exec(t[l])||[])[1],u=(c[2]||"").split(".").sort(),m=$.event.special[d]||{},d=(a?m.delegateType:m.bindType)||d,m=$.event.special[d]||{},p=$.extend({type:d,origType:c[1],data:n,handler:i,guid:i.guid,selector:a,quick:a&&(g=a,v=void 0,v=X.exec(g),v&&(v[1]=(v[1]||"").toLowerCase(),v[3]=v[3]&&new RegExp("(?:^|\\s)"+v[3]+"(?:\\s|$)")),v),namespace:u.join(".")},h),(f=s[d])||((f=s[d]=[]).delegateCount=0,m.setup&&!1!==m.setup.call(e,n,u,r)||(e.addEventListener?e.addEventListener(d,r,!1):e.attachEvent&&e.attachEvent("on"+d,r))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),a?f.splice(f.delegateCount++,0,p):f.push(p),$.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,a){var o,r,s,l,c,d,u,p,h,f,m,g,v=$.hasData(e)&&$._data(e);if(v&&(p=v.events)){for(t=$.trim(Q(t||"")).split(" "),o=0;o<t.length;o++)if(s=l=(r=B.exec(t[o])||[])[1],c=r[2],s){for(h=$.event.special[s]||{},d=(m=p[s=(n?h.delegateType:h.bindType)||s]||[]).length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=0;u<m.length;u++)g=m[u],(a||l===g.origType)&&(!i||i.guid===g.guid)&&(!c||c.test(g.namespace))&&(!n||n===g.selector||"**"===n&&g.selector)&&(m.splice(u--,1),g.selector&&m.delegateCount--,h.remove&&h.remove.call(e,g));0===m.length&&d!==m.length&&((!h.teardown||!1===h.teardown.call(e,c))&&$.removeEvent(e,s,v.handle),delete p[s])}else for(s in p)$.event.remove(e,s+t[o],i,n,!0);$.isEmptyObject(p)&&((f=v.handle)&&(f.elem=null),$.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,t,i,n){if(!i||3!==i.nodeType&&8!==i.nodeType){var a,o,r,s,l,c,d,u,p,h,f=e.type||e,m=[];if(G.test(f+$.event.triggered))return;if(0<=f.indexOf("!")&&(f=f.slice(0,-1),o=!0),0<=f.indexOf(".")&&(f=(m=f.split(".")).shift(),m.sort()),(!i||$.event.customEvent[f])&&!$.event.global[f])return;if((e="object"==typeof e?e[$.expando]?e:new $.Event(f,e):new $.Event(f)).type=f,e.isTrigger=!0,e.exclusive=o,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=f.indexOf(":")<0?"on"+f:"",!i){for(r in a=$.cache)a[r].events&&a[r].events[f]&&$.event.trigger(e,t,a[r].handle.elem,!0);return}if(e.result=M,e.target||(e.target=i),(t=null!=t?$.makeArray(t):[]).unshift(e),(d=$.event.special[f]||{}).trigger&&!1===d.trigger.apply(i,t))return;if(p=[[i,d.bindType||f]],!n&&!d.noBubble&&!$.isWindow(i)){for(h=d.delegateType||f,s=G.test(h+f)?i:i.parentNode,l=null;s;s=s.parentNode)p.push([s,h]),l=s;l&&l===i.ownerDocument&&p.push([l.defaultView||l.parentWindow||P,h])}for(r=0;r<p.length&&!e.isPropagationStopped();r++)s=p[r][0],e.type=p[r][1],(u=($._data(s,"events")||{})[e.type]&&$._data(s,"handle"))&&u.apply(s,t),(u=c&&s[c])&&$.acceptData(s)&&!1===u.apply(s,t)&&e.preventDefault();return e.type=f,!n&&!e.isDefaultPrevented()&&(!d._default||!1===d._default.apply(i.ownerDocument,t))&&("click"!==f||!$.nodeName(i,"a"))&&$.acceptData(i)&&c&&i[f]&&("focus"!==f&&"blur"!==f||0!==e.target.offsetWidth)&&!$.isWindow(i)&&((l=i[c])&&(i[c]=null),i[$.event.triggered=f](),$.event.triggered=M,l&&(i[c]=l)),e.result}},dispatch:function(e){e=$.event.fix(e||P.event);var t,i,n,a,o,r,s,l,c,d,u,p,h,f=($._data(this,"events")||{})[e.type]||[],m=f.delegateCount,g=[].slice.call(arguments,0),v=!e.exclusive&&!e.namespace,b=$.event.special[e.type]||{},_=[];if((g[0]=e).delegateTarget=this,!b.preDispatch||!1!==b.preDispatch.call(this,e)){if(m&&(!e.button||"click"!==e.type))for((a=$(this)).context=this.ownerDocument||this,n=e.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled){for(r={},l=[],a[0]=n,t=0;t<m;t++)r[d=(c=f[t]).selector]===M&&(r[d]=c.quick?(u=n,p=c.quick,void 0,h=u.attributes||{},(!p[1]||u.nodeName.toLowerCase()===p[1])&&(!p[2]||(h.id||{}).value===p[2])&&(!p[3]||p[3].test((h.class||{}).value))):a.is(d)),r[d]&&l.push(c);l.length&&_.push({elem:n,matches:l})}for(f.length>m&&_.push({elem:this,matches:f.slice(m)}),t=0;t<_.length&&!e.isPropagationStopped();t++)for(s=_[t],e.currentTarget=s.elem,i=0;i<s.matches.length&&!e.isImmediatePropagationStopped();i++)c=s.matches[i],(v||!e.namespace&&!c.namespace||e.namespace_re&&e.namespace_re.test(c.namespace))&&(e.data=c.data,e.handleObj=c,(o=(($.event.special[c.origType]||{}).handle||c.handler).apply(s.elem,g))!==M&&(!1===(e.result=o)&&(e.preventDefault(),e.stopPropagation())));return b.postDispatch&&b.postDispatch.call(this,e),e.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,a,o=t.button,r=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=(i=e.target.ownerDocument||O).documentElement,a=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?t.toElement:r),!e.which&&o!==M&&(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[$.expando])return e;var t,i,n=e,a=$.event.fixHooks[e.type]||{},o=a.props?this.props.concat(a.props):this.props;for(e=$.Event(n),t=o.length;t;)e[i=o[--t]]=n[i];return e.target||(e.target=n.srcElement||O),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===M&&(e.metaKey=e.ctrlKey),a.filter?a.filter(e,n):e},special:{ready:{setup:$.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){$.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var a=$.extend(new $.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?$.event.trigger(a,null,t):$.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=O.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},$.Event=function(e,t){if(!(this instanceof $.Event))return new $.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?m:v):this.type=e,t&&$.extend(this,t),this.timeStamp=e&&e.timeStamp||$.now(),this[$.expando]=!0},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=m;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=m;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m,this.stopPropagation()},isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,a){$.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;n.selector;return i&&(i===this||$.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=a),t}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){if($.nodeName(this,"form"))return!1;$.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=$.nodeName(t,"input")||$.nodeName(t,"button")?t.form:M;i&&!i._submit_attached&&($.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),i._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&$.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if($.nodeName(this,"form"))return!1;$.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){if(U.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||($.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,$.event.simulate("change",this,e,!0))})),!1;$.event.add(this,"beforeactivate._change",function(e){var t=e.target;U.test(t.nodeName)&&!t._change_attached&&($.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&$.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return $.event.remove(this,"._change"),U.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){$.event.simulate(t,e.target,$.event.fix(e),!0)};$.event.special[t]={setup:function(){0==i++&&O.addEventListener(e,n,!0)},teardown:function(){0==--i&&O.removeEventListener(e,n,!0)}}}),$.fn.extend({on:function(e,t,i,n,a){var o,r;if("object"==typeof e){for(r in"string"!=typeof t&&(i=i||t,t=M),e)this.on(r,t,i,e[r],a);return this}if(null==i&&null==n?(n=t,i=t=M):null==n&&("string"==typeof t?(n=i,i=M):(n=i,i=t,t=M)),!1===n)n=v;else if(!n)return this;return 1===a&&(o=n,(n=function(e){return $().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=$.guid++)),this.each(function(){$.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){if(e&&e.preventDefault&&e.handleObj){var n=e.handleObj;return $(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this}if("object"==typeof e){for(var a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=M),!1===i&&(i=v),this.each(function(){$.event.remove(this,e,i,t)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return $(this.context).on(e,this.selector,t,i),this},die:function(e,t){return $(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){$.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return $.event.trigger(e,t,this[0],!0)},toggle:function(i){var n=arguments,e=i.guid||$.guid++,a=0,t=function(e){var t=($._data(this,"lastToggle"+i.guid)||0)%a;return $._data(this,"lastToggle"+i.guid,t+1),e.preventDefault(),n[t].apply(this,arguments)||!1};for(t.guid=e;a<n.length;)n[a++].guid=e;return this.click(t)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,i){$.fn[i]=function(e,t){return null==t&&(t=e,e=null),0<arguments.length?this.on(i,null,e,t):this.trigger(i)},$.attrFn&&($.attrFn[i]=!0),K.test(i)&&($.event.fixHooks[i]=$.event.keyHooks),J.test(i)&&($.event.fixHooks[i]=$.event.mouseHooks)}),function(){function r(e,t,i,n,a,o){for(var r=0,s=n.length;r<s;r++){var l=n[r];if(l){var c=!1;for(l=l[e];l;){if(l[d]===i){c=n[l.sizset];break}if(1===l.nodeType)if(o||(l[d]=i,l.sizset=r),"string"!=typeof t){if(l===t){c=!0;break}}else if(0<_.filter(t,[l]).length){c=l;break}l=l[e]}n[r]=c}}}function s(e,t,i,n,a,o){for(var r=0,s=n.length;r<s;r++){var l=n[r];if(l){var c=!1;for(l=l[e];l;){if(l[d]===i){c=n[l.sizset];break}if(1===l.nodeType&&!o&&(l[d]=i,l.sizset=r),l.nodeName.toLowerCase()===t){c=l;break}l=l[e]}n[r]=c}}}var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),l=0,b=Object.prototype.toString,u=!1,i=!0,c=/\\/g,o=/\r\n/g,p=/\W/;[0,0].sort(function(){return i=!1,0});var _=function(e,t,i,n){i=i||[];var a=t=t||O;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var o,r,s,l,c,d,u,p,h=!0,f=_.isXML(t),m=[],g=e;do{if(v.exec(""),(o=v.exec(g))&&(g=o[3],m.push(o[1]),o[2])){l=o[3];break}}while(o);if(1<m.length&&A.exec(e))if(2===m.length&&y.relative[m[0]])r=k(m[0]+m[1],t,n);else for(r=y.relative[m[0]]?[t]:_(m.shift(),t);m.length;)e=m.shift(),y.relative[e]&&(e+=m.shift()),r=k(e,r,n);else if(!n&&1<m.length&&9===t.nodeType&&!f&&y.match.ID.test(m[0])&&!y.match.ID.test(m[m.length-1])&&(t=(c=_.find(m.shift(),t,f)).expr?_.filter(c.expr,c.set)[0]:c.set[0]),t)for(r=(c=n?{expr:m.pop(),set:x(n)}:_.find(m.pop(),1!==m.length||"~"!==m[0]&&"+"!==m[0]||!t.parentNode?t:t.parentNode,f)).expr?_.filter(c.expr,c.set):c.set,0<m.length?s=x(r):h=!1;m.length;)u=d=m.pop(),y.relative[d]?u=m.pop():d="",null==u&&(u=t),y.relative[d](s,u,f);else s=m=[];if(s||(s=r),s||_.error(d||e),"[object Array]"===b.call(s))if(h)if(t&&1===t.nodeType)for(p=0;null!=s[p];p++)s[p]&&(!0===s[p]||1===s[p].nodeType&&_.contains(t,s[p]))&&i.push(r[p]);else for(p=0;null!=s[p];p++)s[p]&&1===s[p].nodeType&&i.push(r[p]);else i.push.apply(i,s);else x(s,i);return l&&(_(l,a,i,n),_.uniqueSort(i)),i};_.uniqueSort=function(e){if(n&&(u=i,e.sort(n),u))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},_.matches=function(e,t){return _(e,null,null,t)},_.matchesSelector=function(e,t){return 0<_(t,null,null,[e]).length},_.find=function(e,t,i){var n,a,o,r,s,l;if(!e)return[];for(a=0,o=y.order.length;a<o;a++)if(s=y.order[a],(r=y.leftMatch[s].exec(e))&&(l=r[1],r.splice(1,1),"\\"!==l.substr(l.length-1)&&(r[1]=(r[1]||"").replace(c,""),null!=(n=y.find[s](r,t,i))))){e=e.replace(y.match[s],"");break}return n||(n=void 0!==t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},_.filter=function(e,t,i,n){for(var a,o,r,s,l,c,d,u,p,h=e,f=[],m=t,g=t&&t[0]&&_.isXML(t[0]);e&&t.length;){for(r in y.filter)if(null!=(a=y.leftMatch[r].exec(e))&&a[2]){if(c=y.filter[r],d=a[1],o=!1,a.splice(1,1),"\\"===d.substr(d.length-1))continue;if(m===f&&(f=[]),y.preFilter[r])if(a=y.preFilter[r](a,m,i,f,n,g)){if(!0===a)continue}else o=s=!0;if(a)for(u=0;null!=(l=m[u]);u++)l&&(p=n^(s=c(l,a,u,m)),i&&null!=s?p?o=!0:m[u]=!1:p&&(f.push(l),o=!0));if(s!==M){if(i||(m=f),e=e.replace(y.match[r],""),!o)return[];break}}if(e===h){if(null!=o)break;_.error(e)}h=e}return m},_.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var h=_.getText=function(e){var t,i,n=e.nodeType,a="";if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(o,"");for(e=e.firstChild;e;e=e.nextSibling)a+=h(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(a+=h(i));return a},y=_.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!p.test(t),a=i&&!n;n&&(t=t.toLowerCase());for(var o,r=0,s=e.length;r<s;r++)if(o=e[r]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[r]=a||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}a&&_.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,a=0,o=e.length;if(n&&!p.test(t)){for(t=t.toLowerCase();a<o;a++)if(i=e[a]){var r=i.parentNode;e[a]=r.nodeName.toLowerCase()===t&&r}}else{for(;a<o;a++)(i=e[a])&&(e[a]=n?i.parentNode:i.parentNode===t);n&&_.filter(t,e,!0)}},"":function(e,t,i){var n,a=l++,o=r;"string"==typeof t&&!p.test(t)&&(n=t=t.toLowerCase(),o=s),o("parentNode",t,a,e,n,i)},"~":function(e,t,i){var n,a=l++,o=r;"string"==typeof t&&!p.test(t)&&(n=t=t.toLowerCase(),o=s),o("previousSibling",t,a,e,n,i)}},find:{ID:function(e,t,i){if(void 0!==t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if(void 0!==t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),a=0,o=n.length;a<o;a++)n[a].getAttribute("name")===e[1]&&i.push(n[a]);return 0===i.length?null:i}},TAG:function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,i,n,a,o){if(e=" "+e[1].replace(c,"")+" ",o)return e;for(var r,s=0;null!=(r=t[s]);s++)r&&(a^(r.className&&0<=(" "+r.className+" ").replace(/[\t\n\r]/g," ").indexOf(e))?i||n.push(r):i&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e,t){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||_.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===e[2]?"2n":"odd"===e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&_.error(e[0]);return e[0]=l++,e},ATTR:function(e,t,i,n,a,o){var r=e[1]=e[1].replace(c,"");return!o&&y.attrMap[r]&&(e[1]=y.attrMap[r]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,n,a){if("not"===e[1]){if(!(1<(v.exec(e[3])||"").length||/^\w/.test(e[3]))){var o=_.filter(e[3],t,i,!0^a);return i||n.push.apply(n,o),!1}e[3]=_(e[3],null,null,t)}else if(y.match.POS.test(e[0])||y.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!_(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var a=t[1],o=y.filters[a];if(o)return o(e,i,t,n);if("contains"===a)return 0<=(e.textContent||e.innerText||h([e])||"").indexOf(t[3]);if("not"===a){for(var r=t[3],s=0,l=r.length;s<l;s++)if(r[s]===e)return!1;return!0}_.error(a)},CHILD:function(e,t){var i,n,a,o,r,s,l=t[1],c=e;switch(l){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===l)return!0;c=e;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(a=t[0],(o=e.parentNode)&&(o[d]!==a||!e.nodeIndex)){for(r=0,c=o.firstChild;c;c=c.nextSibling)1===c.nodeType&&(c.nodeIndex=++r);o[d]=a}return s=e.nodeIndex-n,0===i?0===s:s%i==0&&0<=s/i}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return-1<(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)},ATTR:function(e,t){var i=t[1],n=_.attr?_.attr(e,i):y.attrHandle[i]?y.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),a=n+"",o=t[2],r=t[4];return null==n?"!="===o:!o&&_.attr?null!=n:"="===o?a===r:"*="===o?0<=a.indexOf(r):"~="===o?0<=(" "+a+" ").indexOf(r):r?"!="===o?a!==r:"^="===o?0===a.indexOf(r):"$="===o?a.substr(a.length-r.length)===r:"|="===o&&(a===r||a.substr(0,r.length+1)===r+"-"):a&&!1!==n},POS:function(e,t,i,n){var a=t[2],o=y.setFilters[a];if(o)return o(e,i,t,n)}}},A=y.match.POS,e=function(e,t){return"\\"+(t-0+1)};for(var t in y.match)y.match[t]=new RegExp(y.match[t].source+/(?![^\[]*\])(?![^\(]*\))/.source),y.leftMatch[t]=new RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[t].source.replace(/\\(\d+)/g,e));y.match.globalPOS=A;var n,f,a,m,g,w,x=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(O.documentElement.childNodes,0)[0].nodeType}catch(e){x=function(e,t){var i=0,n=t||[];if("[object Array]"===b.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var a=e.length;i<a;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}O.documentElement.compareDocumentPosition?n=function(e,t){return e===t?(u=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(n=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,a=[],o=[],r=e.parentNode,s=t.parentNode,l=r;if(r===s)return f(e,t);if(!r)return-1;if(!s)return 1;for(;l;)a.unshift(l),l=l.parentNode;for(l=s;l;)o.unshift(l),l=l.parentNode;i=a.length,n=o.length;for(var c=0;c<i&&c<n;c++)if(a[c]!==o[c])return f(a[c],o[c]);return c===i?f(e,o[c],-1):f(a[c],t,1)},f=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),m=O.createElement("div"),g="script"+(new Date).getTime(),w=O.documentElement,m.innerHTML="<a name='"+g+"'/>",w.insertBefore(m,w.firstChild),O.getElementById(g)&&(y.find.ID=function(e,t,i){if(void 0!==t.getElementById&&!i){var n=t.getElementById(e[1]);return n?n.id===e[1]||void 0!==n.getAttributeNode&&n.getAttributeNode("id").nodeValue===e[1]?[n]:M:[]}},y.filter.ID=function(e,t){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),w.removeChild(m),w=m=null,(a=O.createElement("div")).appendChild(O.createComment("")),0<a.getElementsByTagName("*").length&&(y.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],a=0;i[a];a++)1===i[a].nodeType&&n.push(i[a]);i=n}return i}),a.innerHTML="<a href='#'></a>",a.firstChild&&void 0!==a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(y.attrHandle.href=function(e){return e.getAttribute("href",2)}),a=null,O.querySelectorAll&&function(){var u=_,e=O.createElement("div");if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){for(var t in _=function(e,t,i,n){if(t=t||O,!n&&!_.isXML(t)){var a=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(a&&(1===t.nodeType||9===t.nodeType)){if(a[1])return x(t.getElementsByTagName(e),i);if(a[2]&&y.find.CLASS&&t.getElementsByClassName)return x(t.getElementsByClassName(a[2]),i)}if(9===t.nodeType){if("body"===e&&t.body)return x([t.body],i);if(a&&a[3]){var o=t.getElementById(a[3]);if(!o||!o.parentNode)return x([],i);if(o.id===a[3])return x([o],i)}try{return x(t.querySelectorAll(e),i)}catch(e){}}else if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){var r=t,s=t.getAttribute("id"),l=s||"__sizzle__",c=t.parentNode,d=/^\s*[+~]/.test(e);s?l=l.replace(/'/g,"\\$&"):t.setAttribute("id",l),d&&c&&(t=t.parentNode);try{if(!d||c)return x(t.querySelectorAll("[id='"+l+"'] "+e),i)}catch(e){}finally{s||r.removeAttribute("id")}}}return u(e,t,i,n)},u)_[t]=u[t];e=null}}(),function(){var e=O.documentElement,n=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(n){var a=!n.call(O.createElement("div"),"div"),o=!1;try{n.call(O.documentElement,"[test!='']:sizzle")}catch(e){o=!0}_.matchesSelector=function(e,t){if(t=t.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!_.isXML(e))try{if(o||!y.match.PSEUDO.test(t)&&!/!=/.test(t)){var i=n.call(e,t);if(i||!a||e.document&&11!==e.document.nodeType)return i}}catch(e){}return 0<_(t,null,null,[e]).length}}}(),function(){var e=O.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;y.order.splice(1,0,"CLASS"),y.find.CLASS=function(e,t,i){if(void 0!==t.getElementsByClassName&&!i)return t.getElementsByClassName(e[1])},e=null}}(),O.documentElement.contains?_.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))}:O.documentElement.compareDocumentPosition?_.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:_.contains=function(){return!1},_.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var k=function(e,t,i){for(var n,a=[],o="",r=t.nodeType?[t]:t;n=y.match.PSEUDO.exec(e);)o+=n[0],e=e.replace(y.match.PSEUDO,"");e=y.relative[e]?e+"*":e;for(var s=0,l=r.length;s<l;s++)_(e,r[s],a,i);return _.filter(o,a)};_.attr=$.attr,_.selectors.attrMap={},$.find=_,$.expr=_.selectors,$.expr[":"]=$.expr.filters,$.unique=_.uniqueSort,$.text=_.getText,$.isXMLDoc=_.isXML,$.contains=_.contains}();var Z=/Until$/,ee=/^(?:parents|prevUntil|prevAll)/,te=/,/,ie=/^.[^:#\[\.,]*$/,ne=Array.prototype.slice,ae=$.expr.match.globalPOS,oe={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return $(e).filter(function(){for(t=0,i=n.length;t<i;t++)if($.contains(n[t],this))return!0});var a,o,r,s=this.pushStack("","find",e);for(t=0,i=this.length;t<i;t++)if(a=s.length,$.find(e,this[t],s),0<t)for(o=a;o<s.length;o++)for(r=0;r<a;r++)if(s[r]===s[o]){s.splice(o--,1);break}return s},has:function(e){var i=$(e);return this.filter(function(){for(var e=0,t=i.length;e<t;e++)if($.contains(this,i[e]))return!0})},not:function(e){return this.pushStack(h(this,e,!1),"not",e)},filter:function(e){return this.pushStack(h(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ae.test(e)?0<=$(e,this.context).index(this[0]):0<$.filter(e,this).length:0<this.filter(e).length)},closest:function(e,t){var i,n,a=[],o=this[0];if($.isArray(e)){for(var r=1;o&&o.ownerDocument&&o!==t;){for(i=0;i<e.length;i++)$(o).is(e[i])&&a.push({selector:e[i],elem:o,level:r});o=o.parentNode,r++}return a}var s=ae.test(e)||"string"!=typeof e?$(e,t||this.context):0;for(i=0,n=this.length;i<n;i++)for(o=this[i];o;){if(s?-1<s.index(o):$.find.matchesSelector(o,e)){a.push(o);break}if(!(o=o.parentNode)||!o.ownerDocument||o===t||11===o.nodeType)break}return a=1<a.length?$.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?$.inArray(this[0],$(e)):$.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?$(e,t):$.makeArray(e&&e.nodeType?[e]:e),n=$.merge(this.get(),i);return this.pushStack(f(i[0])||f(n[0])?n:$.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),$.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return $.dir(e,"parentNode")},parentsUntil:function(e,t,i){return $.dir(e,"parentNode",i)},next:function(e){return $.nth(e,2,"nextSibling")},prev:function(e){return $.nth(e,2,"previousSibling")},nextAll:function(e){return $.dir(e,"nextSibling")},prevAll:function(e){return $.dir(e,"previousSibling")},nextUntil:function(e,t,i){return $.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return $.dir(e,"previousSibling",i)},siblings:function(e){return $.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return $.sibling(e.firstChild)},contents:function(e){return $.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:$.makeArray(e.childNodes)}},function(n,a){$.fn[n]=function(e,t){var i=$.map(this,a,e);return Z.test(n)||(t=e),t&&"string"==typeof t&&(i=$.filter(t,i)),i=1<this.length&&!oe[n]?$.unique(i):i,(1<this.length||te.test(t))&&ee.test(n)&&(i=i.reverse()),this.pushStack(i,n,ne.call(arguments).join(","))}}),$.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?$.find.matchesSelector(t[0],e)?[t[0]]:[]:$.find.matches(e,t)},dir:function(e,t,i){for(var n=[],a=e[t];a&&9!==a.nodeType&&(i===M||1!==a.nodeType||!$(a).is(i));)1===a.nodeType&&n.push(a),a=a[t];return n},nth:function(e,t,i,n){t=t||1;for(var a=0;e&&(1!==e.nodeType||++a!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var re="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",se=/ jQuery\d+="(?:\d+|null)"/g,le=/^\s+/,ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,de=/<([\w:]+)/,ue=/<tbody/i,pe=/<|&#?\w+;/,he=/<(?:script|style)/i,fe=/<(?:script|object|embed|option|style)/i,me=new RegExp("<(?:"+re+")[\\s/>]","i"),ge=/checked\s*(?:[^=]|=\s*.checked.)/i,ve=/\/(java|ecma)script/i,be=/^\s*<!(?:\[CDATA\[|\-\-)/,_e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ye=A(O);_e.optgroup=_e.option,_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,$.support.htmlSerialize||(_e._default=[1,"div<div>","</div>"]),$.fn.extend({text:function(e){return $.access(this,function(e){return e===M?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||O).createTextNode(e))},null,e,arguments.length)},wrapAll:function(t){if($.isFunction(t))return this.each(function(e){$(this).wrapAll(t.call(this,e))});if(this[0]){var e=$(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(i){return $.isFunction(i)?this.each(function(e){$(this).wrapInner(i.call(this,e))}):this.each(function(){var e=$(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=$.isFunction(t);return this.each(function(e){$(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=$.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,$.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)e&&!$.filter(e,[i]).length||(!t&&1===i.nodeType&&($.cleanData(i.getElementsByTagName("*")),$.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&$.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return $.clone(this,e,t)})},html:function(e){return $.access(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===M)return 1===t.nodeType?t.innerHTML.replace(se,""):null;if("string"==typeof e&&!he.test(e)&&($.support.leadingWhitespace||!le.test(e))&&!_e[(de.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ce,"<$1></$2>");try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&($.cleanData(t.getElementsByTagName("*")),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(n){return this[0]&&this[0].parentNode?$.isFunction(n)?this.each(function(e){var t=$(this),i=t.html();t.replaceWith(n.call(this,e,i))}):("string"!=typeof n&&(n=$(n).detach()),this.each(function(){var e=this.nextSibling,t=this.parentNode;$(this).remove(),e?$(e).before(n):$(t).append(n)})):this.length?this.pushStack($($.isFunction(n)?n():n),"replaceWith",n):this},detach:function(e){return this.remove(e,!0)},domManip:function(i,n,a){var e,t,o,r,s,l=i[0],c=[];if(!$.support.checkClone&&3===arguments.length&&"string"==typeof l&&ge.test(l))return this.each(function(){$(this).domManip(i,n,a,!0)});if($.isFunction(l))return this.each(function(e){var t=$(this);i[0]=l.call(this,e,n?t.html():M),t.domManip(i,n,a)});if(this[0]){if(r=l&&l.parentNode,t=1===(o=(e=$.support.parentNode&&r&&11===r.nodeType&&r.childNodes.length===this.length?{fragment:r}:$.buildFragment(i,this,c)).fragment).childNodes.length?o=o.firstChild:o.firstChild){n=n&&$.nodeName(t,"tr");for(var d=0,u=this.length,p=u-1;d<u;d++)a.call(n?(s=this[d],$.nodeName(s,"table")?s.getElementsByTagName("tbody")[0]||s.appendChild(s.ownerDocument.createElement("tbody")):s):this[d],e.cacheable||1<u&&d<p?$.clone(o,!0,!0):o)}c.length&&$.each(c,function(e,t){t.src?$.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):$.globalEval((t.text||t.textContent||t.innerHTML||"").replace(be,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),$.buildFragment=function(e,t,i){var n,a,o,r,s=e[0];return t&&t[0]&&(r=t[0].ownerDocument||t[0]),r.createDocumentFragment||(r=O),1===e.length&&"string"==typeof s&&s.length<512&&r===O&&"<"===s.charAt(0)&&!fe.test(s)&&($.support.checkClone||!ge.test(s))&&($.support.html5Clone||!me.test(s))&&(a=!0,(o=$.fragments[s])&&1!==o&&(n=o)),n||(n=r.createDocumentFragment(),$.clean(e,r,n,i)),a&&($.fragments[s]=o?n:1),{fragment:n,cacheable:a}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,l){$.fn[s]=function(e){var t=[],i=$(e),n=1===this.length&&this[0].parentNode;if(n&&11===n.nodeType&&1===n.childNodes.length&&1===i.length)return i[l](this[0]),this;for(var a=0,o=i.length;a<o;a++){var r=(0<a?this.clone(!0):this).get();$(i[a])[l](r),t=t.concat(r)}return this.pushStack(t,s,i.selector)}}),$.extend({clone:function(e,t,i){var n,a,o,r,s,l=$.support.html5Clone||$.isXMLDoc(e)||!me.test("<"+e.nodeName+">")?e.cloneNode(!0):(r=e,s=O.createElement("div"),ye.appendChild(s),s.innerHTML=r.outerHTML,s.firstChild);if(!($.support.noCloneEvent&&$.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||$.isXMLDoc(e)))for(u(e,l),n=c(e),a=c(l),o=0;n[o];++o)a[o]&&u(n[o],a[o]);if(t&&(p(e,l),i))for(n=c(e),a=c(l),o=0;n[o];++o)p(n[o],a[o]);return n=a=null,l},clean:function(e,t,i,n){var a,o,r,s=[];void 0===(t=t||O).createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||O);for(var l,c=0;null!=(l=e[c]);c++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(pe.test(l)){l=l.replace(ce,"<$1></$2>");var d,u=(de.exec(l)||["",""])[1].toLowerCase(),p=_e[u]||_e._default,h=p[0],f=t.createElement("div"),m=ye.childNodes;for(t===O?ye.appendChild(f):A(t).appendChild(f),f.innerHTML=p[1]+l+p[2];h--;)f=f.lastChild;if(!$.support.tbody){var g=ue.test(l),v="table"!==u||g?"<table>"!==p[1]||g?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes;for(r=v.length-1;0<=r;--r)$.nodeName(v[r],"tbody")&&!v[r].childNodes.length&&v[r].parentNode.removeChild(v[r])}!$.support.leadingWhitespace&&le.test(l)&&f.insertBefore(t.createTextNode(le.exec(l)[0]),f.firstChild),l=f.childNodes,f&&(f.parentNode.removeChild(f),0<m.length&&((d=m[m.length-1])&&d.parentNode&&d.parentNode.removeChild(d)))}else l=t.createTextNode(l);var b;if(!$.support.appendChecked)if(l[0]&&"number"==typeof(b=l.length))for(r=0;r<b;r++)y(l[r]);else y(l);l.nodeType?s.push(l):s=$.merge(s,l)}if(i)for(a=function(e){return!e.type||ve.test(e.type)},c=0;s[c];c++)if(o=s[c],n&&$.nodeName(o,"script")&&(!o.type||ve.test(o.type)))n.push(o.parentNode?o.parentNode.removeChild(o):o);else{if(1===o.nodeType){var _=$.grep(o.getElementsByTagName("script"),a);s.splice.apply(s,[c+1,0].concat(_))}i.appendChild(o)}return s},cleanData:function(e){for(var t,i,n,a=$.cache,o=$.event.special,r=$.support.deleteExpando,s=0;null!=(n=e[s]);s++)if((!n.nodeName||!$.noData[n.nodeName.toLowerCase()])&&(i=n[$.expando])){if((t=a[i])&&t.events){for(var l in t.events)o[l]?$.event.remove(n,l):$.removeEvent(n,l,t.handle);t.handle&&(t.handle.elem=null)}r?delete n[$.expando]:n.removeAttribute&&n.removeAttribute($.expando),delete a[i]}}});var Ae,we,xe,ke=/alpha\([^)]*\)/i,$e=/opacity=([^)]*)/,Ce=/([A-Z]|^ms)/g,Se=/^[\-+]?(?:\d*\.)?\d+$/i,Te=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,De=/^([\-+])=([\-+.\de]+)/,Ee=/^margin/,Ie={position:"absolute",visibility:"hidden",display:"block"},Pe=["Top","Right","Bottom","Left"];$.fn.css=function(e,t){return $.access(this,function(e,t,i){return i!==M?$.style(e,t,i):$.css(e,t)},e,t,1<arguments.length)},$.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ae(e,"opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:$.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,r=$.camelCase(t),s=e.style,l=$.cssHooks[r];if(t=$.cssProps[r]||r,i===M)return l&&"get"in l&&(a=l.get(e,!1,n))!==M?a:s[t];if("string"===(o=typeof i)&&(a=De.exec(i))&&(i=+(a[1]+1)*+a[2]+parseFloat($.css(e,t)),o="number"),null==i||"number"===o&&isNaN(i))return;if("number"===o&&!$.cssNumber[r]&&(i+="px"),!(l&&"set"in l&&(i=l.set(e,i))===M))try{s[t]=i}catch(e){}}},css:function(e,t,i){var n,a;return t=$.camelCase(t),a=$.cssHooks[t],"cssFloat"===(t=$.cssProps[t]||t)&&(t="float"),a&&"get"in a&&(n=a.get(e,!0,i))!==M?n:Ae?Ae(e,t):void 0},swap:function(e,t,i){var n,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in n=i.call(e),t)e.style[a]=o[a];return n}}),$.curCSS=$.css,O.defaultView&&O.defaultView.getComputedStyle&&(we=function(e,t){var i,n,a,o,r=e.style;return t=t.replace(Ce,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(a=n.getComputedStyle(e,null))&&(""===(i=a.getPropertyValue(t))&&!$.contains(e.ownerDocument.documentElement,e)&&(i=$.style(e,t))),!$.support.pixelMargin&&a&&Ee.test(t)&&Te.test(i)&&(o=r.width,r.width=i,i=a.width,r.width=o),i}),O.documentElement.currentStyle&&(xe=function(e,t){var i,n,a,o=e.currentStyle&&e.currentStyle[t],r=e.style;return null==o&&r&&(a=r[t])&&(o=a),Te.test(o)&&(i=r.left,(n=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":o,o=r.pixelLeft+"px",r.left=i,n&&(e.runtimeStyle.left=n)),""===o?"auto":o}),Ae=we||xe,$.each(["height","width"],function(e,n){$.cssHooks[n]={get:function(e,t,i){if(t)return 0!==e.offsetWidth?a(e,n,i):$.swap(e,Ie,function(){return a(e,n,i)})},set:function(e,t){return Se.test(t)?t+"px":t}}}),$.support.opacity||($.cssHooks.opacity={get:function(e,t){return $e.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=$.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";(i.zoom=1)<=t&&""===$.trim(o.replace(ke,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=ke.test(o)?o.replace(ke,a):o+" "+a)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(e,t){return $.swap(e,{display:"inline-block"},function(){return t?Ae(e,"margin-right"):e.style.marginRight})}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!$.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||$.css(e,"display"))},$.expr.filters.visible=function(e){return!$.expr.filters.hidden(e)}),$.each({margin:"",padding:"",border:"Width"},function(a,o){$.cssHooks[a+o]={expand:function(e){var t,i="string"==typeof e?e.split(" "):[e],n={};for(t=0;t<4;t++)n[a+Pe[t]+o]=i[t]||i[t-2]||i[0];return n}}});var Me,Oe,Ne=/%20/g,je=/\[\]$/,Le=/\r?\n/g,Re=/#.*$/,Fe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ze=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,qe=/^(?:GET|HEAD)$/,He=/^\/\//,We=/\?/,Ve=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ue=/^(?:select|textarea)/i,Be=/\s+/,Ye=/([?&])_=[^&]*/,Ke=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Je=$.fn.load,Ge={},Xe={},Qe=["*/"]+["*"];try{Me=x.href}catch(e){(Me=O.createElement("a")).href="",Me=Me.href}Oe=Ke.exec(Me.toLowerCase())||[],$.fn.extend({load:function(e,t,n){if("string"!=typeof e&&Je)return Je.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(0<=i){var a=e.slice(i,e.length);e=e.slice(0,i)}var o="GET";t&&($.isFunction(t)?(n=t,t=M):"object"==typeof t&&(t=$.param(t,$.ajaxSettings.traditional),o="POST"));var r=this;return $.ajax({url:e,type:o,dataType:"html",data:t,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),r.html(a?$("<div>").append(i.replace(Ve,"")).find(a):i)),n&&r.each(n,[i,t,e])}}),this},serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ue.test(this.nodeName)||ze.test(this.type))}).map(function(e,i){var t=$(this).val();return null==t?null:$.isArray(t)?$.map(t,function(e,t){return{name:i.name,value:e.replace(Le,"\r\n")}}):{name:i.name,value:t.replace(Le,"\r\n")}}).get()}}),$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){$.fn[t]=function(e){return this.on(t,e)}}),$.each(["get","post"],function(e,a){$[a]=function(e,t,i,n){return $.isFunction(t)&&(n=n||i,i=t,t=M),$.ajax({type:a,url:e,data:t,success:i,dataType:n})}}),$.extend({getScript:function(e,t){return $.get(e,M,t,"script")},getJSON:function(e,t,i){return $.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?i(e,$.ajaxSettings):(t=e,e=$.ajaxSettings),i(e,t),e},ajaxSettings:{url:Me,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Oe[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Qe},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":P.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:n(Ge),ajaxTransport:n(Xe),ajax:function(e,t){function i(e,t,i,n){if(2!==w){w=2,f&&clearTimeout(f),h=M,p=n||"",x.readyState=0<e?4:0;var a,o,r,s,l,c=t,d=i?function(e,t,i){var n,a,o,r,s=e.contents,l=e.dataTypes,c=e.responseFields;for(a in c)a in i&&(t[c[a]]=i[a]);for(;"*"===l[0];)l.shift(),n===M&&(n=e.mimeType||t.getResponseHeader("content-type"));if(n)for(a in s)if(s[a]&&s[a].test(n)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),i[o]}(g,x,i):M;if(200<=e&&e<300||304===e)if(g.ifModified&&((s=x.getResponseHeader("Last-Modified"))&&($.lastModified[u]=s),(l=x.getResponseHeader("Etag"))&&($.etag[u]=l)),304===e)c="notmodified",a=!0;else try{o=function(e,t){e.dataFilter&&(t=e.dataFilter(t,e.dataType));var i,n,a,o,r,s,l,c,d=e.dataTypes,u={},p=d.length,h=d[0];for(i=1;i<p;i++){if(1===i)for(n in e.converters)"string"==typeof n&&(u[n.toLowerCase()]=e.converters[n]);if(o=h,"*"===(h=d[i]))h=o;else if("*"!==o&&o!==h){if(!(s=u[r=o+" "+h]||u["* "+h]))for(l in c=M,u)if(((a=l.split(" "))[0]===o||"*"===a[0])&&(c=u[a[1]+" "+h])){!0===(l=u[l])?s=c:!0===c&&(s=l);break}!s&&!c&&$.error("No conversion from "+r.replace(" "," to ")),!0!==s&&(t=s?s(t):c(l(t)))}}return t}(g,d),c="success",a=!0}catch(e){c="parsererror",r=e}else(r=c)&&!e||(c="error",e<0&&(e=0));x.status=e,x.statusText=""+(t||c),a?_.resolveWith(v,[o,c,x]):_.rejectWith(v,[x,c,r]),x.statusCode(A),A=M,m&&b.trigger("ajax"+(a?"Success":"Error"),[x,g,a?o:r]),y.fireWith(v,[x,c]),m&&(b.trigger("ajaxComplete",[x,g]),--$.active||$.event.trigger("ajaxStop"))}}"object"==typeof e&&(t=e,e=M),t=t||{};var u,p,n,h,f,a,m,o,g=$.ajaxSetup({},t),v=g.context||g,b=v!==g&&(v.nodeType||v instanceof $)?$(v):$.event,_=$.Deferred(),y=$.Callbacks("once memory"),A=g.statusCode||{},r={},s={},w=0,x={readyState:0,setRequestHeader:function(e,t){if(!w){var i=e.toLowerCase();e=s[i]=s[i]||e,r[e]=t}return this},getAllResponseHeaders:function(){return 2===w?p:null},getResponseHeader:function(e){var t;if(2===w){if(!n)for(n={};t=Fe.exec(p);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return t===M?null:t},overrideMimeType:function(e){return w||(g.mimeType=e),this},abort:function(e){return e=e||"abort",h&&h.abort(e),i(0,e),this}};if(_.promise(x),x.success=x.done,x.error=x.fail,x.complete=y.add,x.statusCode=function(e){var t;if(e)if(w<2)for(t in e)A[t]=[A[t],e[t]];else t=e[x.status],x.then(t,t);return this},g.url=((e||g.url)+"").replace(Re,"").replace(He,Oe[1]+"//"),g.dataTypes=$.trim(g.dataType||"*").toLowerCase().split(Be),null==g.crossDomain&&(a=Ke.exec(g.url.toLowerCase()),g.crossDomain=!(!a||a[1]==Oe[1]&&a[2]==Oe[2]&&(a[3]||("http:"===a[1]?80:443))==(Oe[3]||("http:"===Oe[1]?80:443)))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=$.param(g.data,g.traditional)),k(Ge,g,t,x),2===w)return!1;if(m=g.global,g.type=g.type.toUpperCase(),g.hasContent=!qe.test(g.type),m&&0==$.active++&&$.event.trigger("ajaxStart"),!g.hasContent&&(g.data&&(g.url+=(We.test(g.url)?"&":"?")+g.data,delete g.data),u=g.url,!1===g.cache)){var l=$.now(),c=g.url.replace(Ye,"$1_="+l);g.url=c+(c===g.url?(We.test(g.url)?"&":"?")+"_="+l:"")}for(o in(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&x.setRequestHeader("Content-Type",g.contentType),g.ifModified&&(u=u||g.url,$.lastModified[u]&&x.setRequestHeader("If-Modified-Since",$.lastModified[u]),$.etag[u]&&x.setRequestHeader("If-None-Match",$.etag[u])),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Qe+"; q=0.01":""):g.accepts["*"]),g.headers)x.setRequestHeader(o,g.headers[o]);if(g.beforeSend&&(!1===g.beforeSend.call(v,x,g)||2===w))return x.abort(),!1;for(o in{success:1,error:1,complete:1})x[o](g[o]);if(h=k(Xe,g,t,x)){x.readyState=1,m&&b.trigger("ajaxSend",[x,g]),g.async&&0<g.timeout&&(f=setTimeout(function(){x.abort("timeout")},g.timeout));try{w=1,h.send(r,i)}catch(e){if(!(w<2))throw e;i(-1,e)}}else i(-1,"No Transport");return x},param:function(e,t){var i=[],n=function(e,t){t=$.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===M&&(t=$.ajaxSettings.traditional),$.isArray(e)||e.jquery&&!$.isPlainObject(e))$.each(e,function(){n(this.name,this.value)});else for(var a in e)o(a,e[a],t,n);return i.join("&").replace(Ne,"+")}}),$.extend({active:0,lastModified:{},etag:{}});var Ze=$.now(),et=/(\=)\?(&|$)|\?\?/i;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return $.expando+"_"+Ze++}}),$.ajaxPrefilter("json jsonp",function(e,t,i){var n="string"==typeof e.data&&/^application\/x\-www\-form\-urlencoded/.test(e.contentType);if("jsonp"===e.dataTypes[0]||!1!==e.jsonp&&(et.test(e.url)||n&&et.test(e.data))){var a,o=e.jsonpCallback=$.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r=P[o],s=e.url,l=e.data,c="$1"+o+"$2";return!1!==e.jsonp&&(s=s.replace(et,c),e.url===s&&(n&&(l=l.replace(et,c)),e.data===l&&(s+=(/\?/.test(s)?"&":"?")+e.jsonp+"="+o))),e.url=s,e.data=l,P[o]=function(e){a=[e]},i.always(function(){P[o]=r,a&&$.isFunction(r)&&P[o](a[0])}),e.converters["script json"]=function(){return a||$.error(o+" was not called"),a[0]},e.dataTypes[0]="json","script"}}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return $.globalEval(e),e}}}),$.ajaxPrefilter("script",function(e){e.cache===M&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),$.ajaxTransport("script",function(t){if(t.crossDomain){var n,a=O.head||O.getElementsByTagName("head")[0]||O.documentElement;return{send:function(e,i){(n=O.createElement("script")).async="async",t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),n=M,t||i(200,"success"))},a.insertBefore(n,a.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var tt,it,nt=!!P.ActiveXObject&&function(){for(var e in tt)tt[e](0,1)},at=0;$.ajaxSettings.xhr=P.ActiveXObject?function(){return!this.isLocal&&t()||function(){try{return new P.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:t,it=$.ajaxSettings.xhr(),$.extend($.support,{ajax:!!it,cors:!!it&&"withCredentials"in it}),$.support.ajax&&$.ajaxTransport(function(d){var u;if(!d.crossDomain||$.support.cors)return{send:function(e,s){var l,t,c=d.xhr();if(d.username?c.open(d.type,d.url,d.async,d.username,d.password):c.open(d.type,d.url,d.async),d.xhrFields)for(t in d.xhrFields)c[t]=d.xhrFields[t];d.mimeType&&c.overrideMimeType&&c.overrideMimeType(d.mimeType),!d.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(t in e)c.setRequestHeader(t,e[t])}catch(e){}c.send(d.hasContent&&d.data||null),u=function(e,t){var i,n,a,o,r;try{if(u&&(t||4===c.readyState))if(u=M,l&&(c.onreadystatechange=$.noop,nt&&delete tt[l]),t)4!==c.readyState&&c.abort();else{i=c.status,a=c.getAllResponseHeaders(),o={},(r=c.responseXML)&&r.documentElement&&(o.xml=r);try{o.text=c.responseText}catch(e){}try{n=c.statusText}catch(e){n=""}i||!d.isLocal||d.crossDomain?1223===i&&(i=204):i=o.text?200:404}}catch(e){t||s(-1,e)}o&&s(i,n,o,a)},d.async&&4!==c.readyState?(l=++at,nt&&(tt||(tt={},$(P).unload(nt)),tt[l]=u),c.onreadystatechange=u):u()},abort:function(){u&&u(0,1)}}});var ot,rt,st,lt,ct={},dt=/^(?:toggle|show|hide)$/,ut=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,pt=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];$.fn.extend({show:function(e,t,i){var n,a;if(e||0===e)return this.animate(s("show",3),e,t,i);for(var o=0,r=this.length;o<r;o++)(n=this[o]).style&&(a=n.style.display,!$._data(n,"olddisplay")&&"none"===a&&(a=n.style.display=""),(""===a&&"none"===$.css(n,"display")||!$.contains(n.ownerDocument.documentElement,n))&&$._data(n,"olddisplay",g(n.nodeName)));for(o=0;o<r;o++)(n=this[o]).style&&(""!==(a=n.style.display)&&"none"!==a||(n.style.display=$._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(s("hide",3),e,t,i);for(var n,a,o=0,r=this.length;o<r;o++)(n=this[o]).style&&("none"!==(a=$.css(n,"display"))&&!$._data(n,"olddisplay")&&$._data(n,"olddisplay",a));for(o=0;o<r;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:$.fn.toggle,toggle:function(t,e,i){var n="boolean"==typeof t;return $.isFunction(t)&&$.isFunction(e)?this._toggle.apply(this,arguments):null==t||n?this.each(function(){var e=n?t:$(this).is(":hidden");$(this)[e?"show":"hide"]()}):this.animate(s("toggle",3),t,e,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(f,e,t,i){function n(){!1===m.queue&&$._mark(this);var e,t,i,n,a,o,r,s,l,c,d,u=$.extend({},m),p=1===this.nodeType,h=p&&$(this).is(":hidden");for(i in u.animatedProperties={},f)if(i!==(e=$.camelCase(i))&&(f[e]=f[i],delete f[i]),(a=$.cssHooks[e])&&"expand"in a)for(i in o=a.expand(f[e]),delete f[e],o)i in f||(f[i]=o[i]);for(e in f){if(t=f[e],$.isArray(t)?(u.animatedProperties[e]=t[1],t=f[e]=t[0]):u.animatedProperties[e]=u.specialEasing&&u.specialEasing[e]||u.easing||"swing","hide"===t&&h||"show"===t&&!h)return u.complete.call(this);p&&("height"===e||"width"===e)&&(u.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===$.css(this,"display")&&"none"===$.css(this,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==g(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}for(i in null!=u.overflow&&(this.style.overflow="hidden"),f)n=new $.fx(this,u,i),t=f[i],dt.test(t)?(d=$._data(this,"toggle"+i)||("toggle"===t?h?"show":"hide":0))?($._data(this,"toggle"+i,"show"===d?"hide":"show"),n[d]()):n[t]():(r=ut.exec(t),s=n.cur(),r?(l=parseFloat(r[2]),"px"!==(c=r[3]||($.cssNumber[i]?"":"px"))&&($.style(this,i,(l||1)+c),s=(l||1)/n.cur()*s,$.style(this,i,s+c)),r[1]&&(l=("-="===r[1]?-1:1)*l+s),n.custom(s,l,c)):n.custom(s,t,""));return!0}var m=$.speed(e,t,i);return $.isEmptyObject(f)?this.each(m.complete,[!1]):(f=$.extend({},f),!1===m.queue?this.each(n):this.queue(m.queue,n))},stop:function(o,e,r){return"string"!=typeof o&&(r=e,e=o,o=M),e&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){function e(e,t,i){var n=t[i];$.removeData(e,i,!0),n.stop(r)}var t,i=!1,n=$.timers,a=$._data(this);if(r||$._unmark(!0,this),null==o)for(t in a)a[t]&&a[t].stop&&t.indexOf(".run")===t.length-4&&e(this,a,t);else a[t=o+".run"]&&a[t].stop&&e(this,a,t);for(t=n.length;t--;)n[t].elem===this&&(null==o||n[t].queue===o)&&(r?n[t](!0):n[t].saveState(),i=!0,n.splice(t,1));(!r||!i)&&$.dequeue(this,o)})}}),$.each({slideDown:s("show",1),slideUp:s("hide",1),slideToggle:s("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){$.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),$.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?$.extend({},e):{complete:i||!i&&t||$.isFunction(e)&&e,duration:e,easing:i&&t||t&&!$.isFunction(t)&&t};return n.duration=$.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in $.fx.speeds?$.fx.speeds[n.duration]:$.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(e){$.isFunction(n.old)&&n.old.call(this),n.queue?$.dequeue(this,n.queue):!1!==e&&$._unmark(this)},n},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),$.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),($.fx.step[this.prop]||$.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=$.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,t,i){function n(e){return a.step(e)}var a=this,o=$.fx;this.startTime=lt||l(),this.end=t,this.now=this.start=e,this.pos=this.state=0,this.unit=i||this.unit||($.cssNumber[this.prop]?"":"px"),n.queue=this.options.queue,n.elem=this.elem,n.saveState=function(){$._data(a.elem,"fxshow"+a.prop)===M&&(a.options.hide?$._data(a.elem,"fxshow"+a.prop,a.start):a.options.show&&$._data(a.elem,"fxshow"+a.prop,a.end))},n()&&$.timers.push(n)&&!st&&(st=setInterval(o.tick,o.interval))},show:function(){var e=$._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||$.style(this.elem,this.prop),this.options.show=!0,e!==M?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),$(this.elem).show()},hide:function(){this.options.orig[this.prop]=$._data(this.elem,"fxshow"+this.prop)||$.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,a=lt||l(),o=!0,r=this.elem,s=this.options;if(e||a>=s.duration+this.startTime){for(t in this.now=this.end,this.pos=this.state=1,this.update(),s.animatedProperties[this.prop]=!0,s.animatedProperties)!0!==s.animatedProperties[t]&&(o=!1);if(o){if(null!=s.overflow&&!$.support.shrinkWrapBlocks&&$.each(["","X","Y"],function(e,t){r.style["overflow"+t]=s.overflow[e]}),s.hide&&$(r).hide(),s.hide||s.show)for(t in s.animatedProperties)$.style(r,t,s.orig[t]),$.removeData(r,"fxshow"+t,!0),$.removeData(r,"toggle"+t,!0);(n=s.complete)&&(s.complete=!1,n.call(r))}return!1}return s.duration==1/0?this.now=a:(i=a-this.startTime,this.state=i/s.duration,this.pos=$.easing[s.animatedProperties[this.prop]](this.state,i,0,1,s.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},$.extend($.fx,{tick:function(){for(var e,t=$.timers,i=0;i<t.length;i++)!(e=t[i])()&&t[i]===e&&t.splice(i--,1);t.length||$.fx.stop()},interval:13,stop:function(){clearInterval(st),st=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){$.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),$.each(pt.concat.apply([],pt),function(e,t){t.indexOf("margin")&&($.fx.step[t]=function(e){$.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),$.expr&&$.expr.filters&&($.expr.filters.animated=function(t){return $.grep($.timers,function(e){return t===e.elem}).length});var ht,ft=/^t(?:able|d|h)$/i,mt=/^(?:body|html)$/i;ht="getBoundingClientRect"in O.documentElement?function(e,t,i,n){try{n=e.getBoundingClientRect()}catch(e){}if(!n||!$.contains(i,e))return n?{top:n.top,left:n.left}:{top:0,left:0};var a=t.body,o=d(t),r=i.clientTop||a.clientTop||0,s=i.clientLeft||a.clientLeft||0,l=o.pageYOffset||$.support.boxModel&&i.scrollTop||a.scrollTop,c=o.pageXOffset||$.support.boxModel&&i.scrollLeft||a.scrollLeft;return{top:n.top+l-r,left:n.left+c-s}}:function(e,t,i){for(var n,a=e.offsetParent,o=t.body,r=t.defaultView,s=r?r.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,c=e.offsetLeft;(e=e.parentNode)&&e!==o&&e!==i&&(!$.support.fixedPosition||"fixed"!==s.position);)n=r?r.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,c-=e.scrollLeft,e===a&&(l+=e.offsetTop,c+=e.offsetLeft,$.support.doesNotAddBorder&&(!$.support.doesAddBorderForTableAndCells||!ft.test(e.nodeName))&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),a,a=e.offsetParent),$.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),s=n;return"relative"!==s.position&&"static"!==s.position||(l+=o.offsetTop,c+=o.offsetLeft),$.support.fixedPosition&&"fixed"===s.position&&(l+=Math.max(i.scrollTop,o.scrollTop),c+=Math.max(i.scrollLeft,o.scrollLeft)),{top:l,left:c}},$.fn.offset=function(t){if(arguments.length)return t===M?this:this.each(function(e){$.offset.setOffset(this,t,e)});var e=this[0],i=e&&e.ownerDocument;return i?e===i.body?$.offset.bodyOffset(e):ht(e,i,i.documentElement):null},$.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat($.css(e,"marginTop"))||0,i+=parseFloat($.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=$.css(e,"position");"static"===n&&(e.style.position="relative");var a,o,r=$(e),s=r.offset(),l=$.css(e,"top"),c=$.css(e,"left"),d={},u={};("absolute"===n||"fixed"===n)&&-1<$.inArray("auto",[l,c])?(a=(u=r.position()).top,o=u.left):(a=parseFloat(l)||0,o=parseFloat(c)||0),$.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):r.css(d)}},$.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=mt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat($.css(e,"marginTop"))||0,i.left-=parseFloat($.css(e,"marginLeft"))||0,n.top+=parseFloat($.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat($.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||O.body;e&&!mt.test(e.nodeName)&&"static"===$.css(e,"position");)e=e.offsetParent;return e})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var o=/Y/.test(a);$.fn[t]=function(e){return $.access(this,function(e,t,i){var n=d(e);if(i===M)return n?a in n?n[a]:$.support.boxModel&&n.document.documentElement[t]||n.document.body[t]:e[t];n?n.scrollTo(o?$(n).scrollLeft():i,o?i:$(n).scrollTop()):e[t]=i},t,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(e,i){var s="client"+e,l="scroll"+e,c="offset"+e;$.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat($.css(e,i,"padding")):this[i]():null},$.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat($.css(t,i,e?"margin":"border")):this[i]():null},$.fn[i]=function(e){return $.access(this,function(e,t,i){var n,a,o,r;return $.isWindow(e)?(a=(n=e.document).documentElement[s],$.support.boxModel&&a||n.body&&n.body[s]||a):9===e.nodeType?(n=e.documentElement)[s]>=n[l]?n[s]:Math.max(e.body[l],n[l],e.body[c],n[c]):i===M?(o=$.css(e,t),r=parseFloat(o),$.isNumeric(r)?r:o):void $(e).css(t,i)},i,e,arguments.length,null)}}),P.jQuery=P.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(s,e){function n(e,t){var i=e.nodeName.toLowerCase();if("area"===i){var n,a=e.parentNode,o=a.name;return!(!e.href||!o||"map"!==a.nodeName.toLowerCase())&&(!!(n=s("img[usemap=#"+o+"]")[0])&&r(n))}return(/input|select|textarea|button|object/.test(i)?!e.disabled:"a"==i&&e.href||t)&&r(e)}function r(e){return!s(e).parents().andSelf().filter(function(){return"hidden"===s.curCSS(this,"visibility")||s.expr.filters.hidden(this)}).length}s.ui=s.ui||{},s.ui.version||(s.extend(s.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),s.fn.extend({_focus:s.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){s(e).focus(),i&&i.call(e)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=s.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(s.curCSS(this,"position",1))&&/(auto|scroll)/.test(s.curCSS(this,"overflow",1)+s.curCSS(this,"overflow-y",1)+s.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(s.curCSS(this,"overflow",1)+s.curCSS(this,"overflow-y",1)+s.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?s(document):e},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,i,n=s(this[0]);n.length&&n[0]!==document;){if(("absolute"===(t=n.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0},disableSelection:function(){return this.bind((s.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),s.each(["Width","Height"],function(e,i){var a="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),o={innerWidth:s.fn.innerWidth,innerHeight:s.fn.innerHeight,outerWidth:s.fn.outerWidth,outerHeight:s.fn.outerHeight};function r(e,t,i,n){return s.each(a,function(){t-=parseFloat(s.curCSS(e,"padding"+this,!0))||0,i&&(t-=parseFloat(s.curCSS(e,"border"+this+"Width",!0))||0),n&&(t-=parseFloat(s.curCSS(e,"margin"+this,!0))||0)}),t}s.fn["inner"+i]=function(e){return void 0===e?o["inner"+i].call(this):this.each(function(){s(this).css(n,r(this,e)+"px")})},s.fn["outer"+i]=function(e,t){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){s(this).css(n,r(this,e,!0,t)+"px")})}}),s.extend(s.expr[":"],{data:function(e,t,i){return!!s.data(e,i[3])},focusable:function(e){return n(e,!isNaN(s.attr(e,"tabindex")))},tabbable:function(e){var t=s.attr(e,"tabindex"),i=isNaN(t);return(i||0<=t)&&n(e,!i)}}),s(function(){var e=document.body,t=e.appendChild(t=document.createElement("div"));s.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),s.support.minHeight=100===t.offsetHeight,s.support.selectstart="onselectstart"in t,e.removeChild(t).style.display="none"}),s.extend(s.ui,{plugin:{add:function(e,t,i){var n=s.ui[e].prototype;for(var a in i)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([t,i[a]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var a=0;a<n.length;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(e,t){if("hidden"===s(e).css("overflow"))return!1;var i,n=t&&"left"===t?"scrollLeft":"scrollTop";return 0<e[n]||(e[n]=1,i=0<e[n],e[n]=0,i)},isOverAxis:function(e,t,i){return t<e&&e<t+i},isOver:function(e,t,i,n,a,o){return s.ui.isOverAxis(e,i,a)&&s.ui.isOverAxis(t,n,o)}}))}(jQuery),function(r,e){if(r.cleanData){var n=r.cleanData;r.cleanData=function(e){for(var t,i=0;null!=(t=e[i]);i++)r(t).triggerHandler("remove");n(e)}}else{var i=r.fn.remove;r.fn.remove=function(e,t){return this.each(function(){return t||e&&!r.filter(e,[this]).length||r("*",this).add([this]).each(function(){r(this).triggerHandler("remove")}),i.call(r(this),e,t)})}}r.widget=function(t,e,i){var n,a=t.split(".")[0];n=a+"-"+(t=t.split(".")[1]),i||(i=e,e=r.Widget),r.expr[":"][n]=function(e){return!!r.data(e,t)},r[a]=r[a]||{},r[a][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new e;o.options=r.extend(!0,{},o.options),r[a][t].prototype=r.extend(!0,o,{namespace:a,widgetName:t,widgetEventPrefix:r[a][t].prototype.widgetEventPrefix||t,widgetBaseClass:n},i),r.widget.bridge(t,r[a][t])},r.widget.bridge=function(o,t){r.fn[o]=function(i){var e="string"==typeof i,n=Array.prototype.slice.call(arguments,1),a=this;return i=!e&&n.length?r.extend.apply(null,[!0,i].concat(n)):i,e&&"_"===i.charAt(0)||(e?this.each(function(){var e=r.data(this,o),t=e&&r.isFunction(e[i])?e[i].apply(e,n):e;if(t!==e&&void 0!==t)return a=t,!1}):this.each(function(){var e=r.data(this,o);e?e.option(i||{})._init():r.data(this,o,new t(i,this))})),a}},r.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},r.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,t){r.data(t,this.widgetName,this),this.element=r(t),this.options=r.extend(!0,{},this.options,this._getCreateOptions(),e);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return r.metadata&&r.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(e,t){var i=e;if(0===arguments.length)return r.extend({},this.options);if("string"==typeof e){if(void 0===t)return this.options[e];(i={})[e]=t}return this._setOptions(i),this},_setOptions:function(e){var i=this;return r.each(e,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,t,i){var n=this.options[e];if((t=r.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i=i||{},t.originalEvent)for(var a,o=r.event.props.length;o;)t[a=r.event.props[--o]]=t.originalEvent[a];return this.element.trigger(t,i),!(r.isFunction(n)&&!1===n.call(this.element[0],t,i)||t.isDefaultPrevented())}}}(jQuery),function(a,e){var o=!1;a(document).mousedown(function(e){o=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(!0===a.data(e.target,t.widgetName+".preventClickEvent"))return a.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){if(!o){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1==e.which,n="string"==typeof this.options.cancel&&a(e.target).parents().add(e.target).filter(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===a.data(e.target,this.widgetName+".preventClickEvent")&&a.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0))}},_mouseMove:function(e){return!a.browser.msie||9<=document.documentMode||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target==this._mouseDownEvent.target&&a.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(_,e){_.widget("ui.draggable",_.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||_(e.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(e),!!this.handle&&(_(!0===t.iframeFix?"iframe":t.iframeFix).each(function(){_('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(_(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._cacheHelperProportions(),_.ui.ddmanager&&(_.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},_.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),t.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),_.ui.ddmanager&&!t.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,e),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(e,!0),!0)},_mouseDrag:function(e,t){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!t){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),_.ui.ddmanager&&_.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=!1;if(_.ui.ddmanager&&!this.options.dropBehaviour&&(t=_.ui.ddmanager.drop(this,e)),this.dropped&&(t=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!t||"valid"==this.options.revert&&t||!0===this.options.revert||_.isFunction(this.options.revert)&&this.options.revert.call(this.element,t)){var i=this;_(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()})}else!1!==this._trigger("stop",e)&&this._clear();return!1},_mouseUp:function(e){return!0===this.options.iframeFix&&_("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),_.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var t=!this.options.handle||!_(this.options.handle,this.element).length;return _(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(t=!0)}),t},_createHelper:function(e){var t=this.options,i=_.isFunction(t.helper)?_(t.helper.apply(this.element[0],[e])):"clone"==t.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==t.appendTo?this.element[0].parentNode:t.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),_.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&_.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[("document"==e.containment?0:_(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,("document"==e.containment?0:_(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:_(window).scrollLeft())+_("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:_(window).scrollTop())+(_("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var t=_(e.containment),i=t[0];if(!i)return;t.offset();var n="hidden"!=_(i).css("overflow");this.containment=[(parseInt(_(i).css("borderLeftWidth"),10)||0)+(parseInt(_(i).css("paddingLeft"),10)||0),(parseInt(_(i).css("borderTopWidth"),10)||0)+(parseInt(_(i).css("paddingTop"),10)||0),(n?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(_(i).css("borderLeftWidth"),10)||0)-(parseInt(_(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(_(i).css("borderTopWidth"),10)||0)-(parseInt(_(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t}},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*i),left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*i)}},_generatePosition:function(e){var t=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName),a=e.pageX,o=e.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var s=this.relative_container.offset();r=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]}else r=this.containment;e.pageX-this.offset.click.left<r[0]&&(a=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(o=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(a=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(o=r[3]+this.offset.click.top)}if(t.grid){var l=this.originalPageY+Math.round((o-this.originalPageY)/t.grid[1])*t.grid[1];o=r&&(l-this.offset.click.top<r[1]||l-this.offset.click.top>r[3])?l-this.offset.click.top<r[1]?l+t.grid[1]:l-t.grid[1]:l;var c=this.originalPageX+Math.round((a-this.originalPageX)/t.grid[0])*t.grid[0];a=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+t.grid[0]:c-t.grid[0]:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,t,i){return i=i||this._uiHash(),_.ui.plugin.call(this,e,[t,i]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),_.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),_.extend(_.ui.draggable,{version:"1.8.13"}),_.ui.plugin.add("draggable","connectToSortable",{start:function(t,e){var i=_(this).data("draggable"),n=i.options,a=_.extend({},e,{item:i.element});i.sortables=[],_(n.connectToSortable).each(function(){var e=_.data(this,"sortable");e&&!e.options.disabled&&(i.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",t,a))})},stop:function(e,t){var i=_(this).data("draggable"),n=_.extend({},t,{item:i.element});_.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(t,i){var n=_(this).data("draggable"),a=this;_.each(n.sortables,function(e){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=_(a).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),_.ui.plugin.add("draggable","cursor",{start:function(e,t){var i=_("body"),n=_(this).data("draggable").options;i.css("cursor")&&(n._cursor=i.css("cursor")),i.css("cursor",n.cursor)},stop:function(e,t){var i=_(this).data("draggable").options;i._cursor&&_("body").css("cursor",i._cursor)}}),_.ui.plugin.add("draggable","opacity",{start:function(e,t){var i=_(t.helper),n=_(this).data("draggable").options;i.css("opacity")&&(n._opacity=i.css("opacity")),i.css("opacity",n.opacity)},stop:function(e,t){var i=_(this).data("draggable").options;i._opacity&&_(t.helper).css("opacity",i._opacity)}}),_.ui.plugin.add("draggable","scroll",{start:function(e,t){var i=_(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(e,t){var i=_(this).data("draggable"),n=i.options,a=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(e.pageY-_(document).scrollTop()<n.scrollSensitivity?a=_(document).scrollTop(_(document).scrollTop()-n.scrollSpeed):_(window).height()-(e.pageY-_(document).scrollTop())<n.scrollSensitivity&&(a=_(document).scrollTop(_(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(e.pageX-_(document).scrollLeft()<n.scrollSensitivity?a=_(document).scrollLeft(_(document).scrollLeft()-n.scrollSpeed):_(window).width()-(e.pageX-_(document).scrollLeft())<n.scrollSensitivity&&(a=_(document).scrollLeft(_(document).scrollLeft()+n.scrollSpeed)))),!1!==a&&_.ui.ddmanager&&!n.dropBehaviour&&_.ui.ddmanager.prepareOffsets(i,e)}}),_.ui.plugin.add("draggable","snap",{start:function(e,t){var i=_(this).data("draggable"),n=i.options;i.snapElements=[],_(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var e=_(this),t=e.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t){for(var i=_(this).data("draggable"),n=i.options,a=n.snapTolerance,o=t.offset.left,r=o+i.helperProportions.width,s=t.offset.top,l=s+i.helperProportions.height,c=i.snapElements.length-1;0<=c;c--){var d=i.snapElements[c].left,u=d+i.snapElements[c].width,p=i.snapElements[c].top,h=p+i.snapElements[c].height;if(d-a<o&&o<u+a&&p-a<s&&s<h+a||d-a<o&&o<u+a&&p-a<l&&l<h+a||d-a<r&&r<u+a&&p-a<s&&s<h+a||d-a<r&&r<u+a&&p-a<l&&l<h+a){if("inner"!=n.snapMode){var f=Math.abs(p-l)<=a,m=Math.abs(h-s)<=a,g=Math.abs(d-r)<=a,v=Math.abs(u-o)<=a;f&&(t.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),m&&(t.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),g&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left),v&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u}).left-i.margins.left)}var b=f||m||g||v;if("outer"!=n.snapMode){f=Math.abs(p-s)<=a,m=Math.abs(h-l)<=a,g=Math.abs(d-o)<=a,v=Math.abs(u-r)<=a;f&&(t.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),m&&(t.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),g&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left),v&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[c].snapping&&(f||m||g||v||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,_.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=f||m||g||v||b}else i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,_.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1}}}),_.ui.plugin.add("draggable","stack",{start:function(e,t){var i=_(this).data("draggable").options,n=_.makeArray(_(i.stack)).sort(function(e,t){return(parseInt(_(e).css("zIndex"),10)||0)-(parseInt(_(t).css("zIndex"),10)||0)});if(n.length){var a=parseInt(n[0].style.zIndex)||0;_(n).each(function(e){this.style.zIndex=a+e}),this[0].style.zIndex=a+n.length}}}),_.ui.plugin.add("draggable","zIndex",{start:function(e,t){var i=_(t.helper),n=_(this).data("draggable").options;i.css("zIndex")&&(n._zIndex=i.css("zIndex")),i.css("zIndex",n.zIndex)},stop:function(e,t){var i=_(this).data("draggable").options;i._zIndex&&_(t.helper).css("zIndex",i._zIndex)}})}(jQuery),function(h,e){h.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,t=e.accept;this.isover=0,this.isout=1,this.accept=h.isFunction(t)?t:function(e){return e.is(t)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},h.ui.ddmanager.droppables[e.scope]=h.ui.ddmanager.droppables[e.scope]||[],h.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var e=h.ui.ddmanager.droppables[this.options.scope],t=0;t<e.length;t++)e[t]==this&&e.splice(t,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(e,t){"accept"==e&&(this.accept=h.isFunction(t)?t:function(e){return e.is(t)}),h.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var t=h.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=h.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=h.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!=this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=h.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!=this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(t)))},_drop:function(e,t){var i=t||h.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=h.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&h.ui.intersect(i,h.extend(e,{offset:e.element.offset()}),e.options.tolerance))return!(n=!0)}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),h.extend(h.ui.droppable,{version:"1.8.13"}),h.ui.intersect=function(e,t,i){if(!t.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,a=n+e.helperProportions.width,o=(e.positionAbs||e.position.absolute).top,r=o+e.helperProportions.height,s=t.offset.left,l=s+t.proportions.width,c=t.offset.top,d=c+t.proportions.height;switch(i){case"fit":return s<=n&&a<=l&&c<=o&&r<=d;case"intersect":return s<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<l&&c<o+e.helperProportions.height/2&&r-e.helperProportions.height/2<d;case"pointer":var u=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top;return h.ui.isOver(p,u,c,s,t.proportions.height,t.proportions.width);case"touch":return(c<=o&&o<=d||c<=r&&r<=d||o<c&&d<r)&&(s<=n&&n<=l||s<=a&&a<=l||n<s&&l<a);default:return!1}},h.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i=h.ui.ddmanager.droppables[e.options.scope]||[],n=t?t.type:null,a=(e.currentItem||e.element).find(":data(droppable)").andSelf();e:for(var o=0;o<i.length;o++)if(!(i[o].options.disabled||e&&!i[o].accept.call(i[o].element[0],e.currentItem||e.element))){for(var r=0;r<a.length;r++)if(a[r]==i[o].element[0]){i[o].proportions.height=0;continue e}i[o].visible="none"!=i[o].element.css("display"),i[o].visible&&("mousedown"==n&&i[o]._activate.call(i[o],t),i[o].offset=i[o].element.offset(),i[o].proportions={width:i[o].element[0].offsetWidth,height:i[o].element[0].offsetHeight})}},drop:function(e,t){var i=!1;return h.each(h.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&h.ui.intersect(e,this,this.options.tolerance)&&(i=i||this._drop.call(this,t)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,t)))}),i},drag:function(a,o){a.options.refreshPositions&&h.ui.ddmanager.prepareOffsets(a,o),h.each(h.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=h.ui.intersect(a,this,this.options.tolerance),t=e||1!=this.isover?e&&0==this.isover?"isover":null:"isout";if(t){var i;if(this.options.greedy){var n=this.element.parents(":data(droppable):eq(0)");n.length&&((i=h.data(n[0],"droppable")).greedyChild="isover"==t?1:0)}i&&"isover"==t&&(i.isover=0,i.isout=1,i._out.call(i,o)),this[t]=1,this["isout"==t?"isover":"isout"]=0,this["isover"==t?"_over":"_out"].call(this,o),i&&"isout"==t&&(i.isout=0,i.isover=1,i._over.call(i,o))}}})}}}(jQuery),function(v,e){v.widget("ui.resizable",v.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,e=this.options;if(this.element.addClass("ui-resizable"),v.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&v.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(v('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=e.handles||(v(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var n=0;n<i.length;n++){var a=v.trim(i[n]),o=v('<div class="ui-resizable-handle '+("ui-resizable-"+a)+'"></div>');/sw|se|ne|nw/.test(a)&&o.css({zIndex:++e.zIndex}),"se"==a&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(o)}}this._renderAxis=function(e){for(var t in e=e||this.element,this.handles){if(this.handles[t].constructor==String&&(this.handles[t]=v(this.handles[t],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i,n=v(this.handles[t],this.element);i=/sw|ne|nw|se|n|s/.test(t)?n.outerHeight():n.outerWidth();var a=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("");e.css(a,i),this._proportionallyResize()}v(this.handles[t]).length}},this._renderAxis(this.element),this._handles=v(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),e.autoHide&&(this._handles.hide(),v(this.element).addClass("ui-resizable-autohide").hover(function(){e.disabled||(v(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){e.disabled||t.resizing||(v(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(e){v(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var t=this.element;t.after(this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var t=!1;for(var i in this.handles)v(this.handles[i])[0]==e.target&&(t=!0);return!this.options.disabled&&t},_mouseStart:function(e){var t=this.options,i=this.element.position(),n=this.element;this.resizing=!0,this.documentScroll={top:v(document).scrollTop(),left:v(document).scrollLeft()},(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:i.top,left:i.left}),v.browser.opera&&/relative/.test(n.css("position"))&&n.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var a=p(this.helper.css("left")),o=p(this.helper.css("top"));t.containment&&(a+=v(t.containment).scrollLeft()||0,o+=v(t.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:o},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:a,top:o},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof t.aspectRatio?t.aspectRatio:this.originalSize.width/this.originalSize.height||1;var r=v(".ui-resizable-"+this.axis).css("cursor");return v("body").css("cursor","auto"==r?this.axis+"-resize":r),n.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,a=e.pageX-i.left||0,o=e.pageY-i.top||0,r=this._change[n];if(!r)return!1;var s=r.apply(this,[e,a,o]);v.browser.msie&&v.browser.version,this.sizeDiff;return(this._aspectRatio||e.shiftKey)&&(s=this._updateRatio(s,e)),s=this._respectSize(s,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(s),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var t=this.options,i=this;if(this._helper){var n=this._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&v.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,s={width:i.helper.width()-r,height:i.helper.height()-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;t.animate||this.element.css(v.extend(s,{top:c,left:l})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!t.animate&&this._proportionallyResize()}return v("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateCache:function(e){this.options;this.offset=this.helper.offset(),h(e.left)&&(this.position.left=e.left),h(e.top)&&(this.position.top=e.top),h(e.height)&&(this.size.height=e.height),h(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){this.options;var i=this.position,n=this.size,a=this.axis;return e.height?e.width=n.height*this.aspectRatio:e.width&&(e.height=n.width/this.aspectRatio),"sw"==a&&(e.left=i.left+(n.width-e.width),e.top=null),"nw"==a&&(e.top=i.top+(n.height-e.height),e.left=i.left+(n.width-e.width)),e},_respectSize:function(e,t){this.helper;var i=this.options,n=(this._aspectRatio||t.shiftKey,this.axis),a=h(e.width)&&i.maxWidth&&i.maxWidth<e.width,o=h(e.height)&&i.maxHeight&&i.maxHeight<e.height,r=h(e.width)&&i.minWidth&&i.minWidth>e.width,s=h(e.height)&&i.minHeight&&i.minHeight>e.height;r&&(e.width=i.minWidth),s&&(e.height=i.minHeight),a&&(e.width=i.maxWidth),o&&(e.height=i.maxHeight);var l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);r&&d&&(e.left=l-i.minWidth),a&&d&&(e.left=l-i.maxWidth),s&&u&&(e.top=c-i.minHeight),o&&u&&(e.top=c-i.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,t=0;t<this._proportionallyResizeElements.length;t++){var i=this._proportionallyResizeElements[t];if(!this.borderDif){var n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],a=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=v.map(n,function(e,t){return(parseInt(e,10)||0)+(parseInt(a[t],10)||0)})}v.browser.msie&&(v(e).is(":hidden")||v(e).parents(":hidden").length)||i.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,t=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||v('<div style="overflow:hidden;"></div>');var i=v.browser.msie&&v.browser.version<7,n=i?1:0,a=i?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){this.options;var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,i){this.options;var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return v.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return v.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return v.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return v.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){v.ui.plugin.call(this,e,[t,this.ui()]),"resize"!=e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),v.extend(v.ui.resizable,{version:"1.8.13"}),v.ui.plugin.add("resizable","animate",{stop:function(t){var i=v(this).data("resizable"),e=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&v.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,s={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(v.extend(s,c&&l?{top:c,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&v(n[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),v.ui.plugin.add("resizable","containment",{start:function(){var i,n,e,t,a,o,r,s=v(this).data("resizable"),l=s.options,c=s.element,d=l.containment,u=d instanceof v?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(s.containerElement=v(u),/document/.test(d)||d===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:v(document),left:0,top:0,width:v(document).width(),height:v(document).height()||document.body.parentNode.scrollHeight}):(i=v(u),n=[],v(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=p(i.css("padding"+t))}),s.containerOffset=i.offset(),s.containerPosition=i.position(),s.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},e=s.containerOffset,t=s.containerSize.height,a=s.containerSize.width,o=v.ui.hasScroll(u,"left")?u.scrollWidth:a,r=v.ui.hasScroll(u)?u.scrollHeight:t,s.parentData={element:u,left:e.left,top:e.top,width:o,height:r}))},resize:function(e){var t,i,n,a,o=v(this).data("resizable"),r=o.options,s=o.containerOffset,l=o.position,c=o._aspectRatio||e.shiftKey,d={top:0,left:0},u=o.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(d=s),l.left<(o._helper?s.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-s.left:o.position.left-d.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?s.left:0),l.top<(o._helper?s.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-s.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?s.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,t=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),i=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-s.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(t-=Math.abs(o.parentData.left)),t+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-t,c&&(o.size.height=o.size.width/o.aspectRatio)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=v(this).data("resizable"),t=e.options,i=e.containerOffset,n=e.containerPosition,a=e.containerElement,o=v(e.helper),r=o.offset(),s=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(a.css("position"))&&v(this).css({left:r.left-n.left-i.left,width:s,height:l}),e._helper&&!t.animate&&/static/.test(a.css("position"))&&v(this).css({left:r.left-n.left-i.left,width:s,height:l})}}),v.ui.plugin.add("resizable","alsoResize",{start:function(){var e=v(this).data("resizable").options,t=function(e){v(e).each(function(){var e=v(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?t(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],t(e.alsoResize)):v.each(e.alsoResize,function(e){t(e)})},resize:function(e,o){var t=v(this).data("resizable"),i=t.options,n=t.originalSize,a=t.originalPosition,r={height:t.size.height-n.height||0,width:t.size.width-n.width||0,top:t.position.top-a.top||0,left:t.position.left-a.left||0},s=function(e,i){v(e).each(function(){var e=v(this),n=v(this).data("resizable-alsoresize"),a={},t=i&&i.length?i:e.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];v.each(t,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&0<=i&&(a[t]=i||null)}),e.css(a)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?s(i.alsoResize):v.each(i.alsoResize,function(e,t){s(e,t)})},stop:function(){v(this).removeData("resizable-alsoresize")}}),v.ui.plugin.add("resizable","ghost",{start:function(){var e=v(this).data("resizable"),t=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("resizable-ghost").addClass("string"==typeof t.ghost?t.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=v(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=v(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),v.ui.plugin.add("resizable","grid",{resize:function(){var e=v(this).data("resizable"),t=e.options,i=e.size,n=e.originalSize,a=e.originalPosition,o=e.axis,r="number"==typeof t.grid?[t.grid,t.grid]:t.grid,s=r[0]||1,l=r[1]||1,c=Math.round((i.width-n.width)/s)*s,d=Math.round((i.height-n.height)/l)*l,u=n.width+c,p=n.height+d,h=t.maxWidth&&t.maxWidth<u,f=t.maxHeight&&t.maxHeight<p,m=t.minWidth&&t.minWidth>u,g=t.minHeight&&t.minHeight>p;t.grid=r,m&&(u+=s),g&&(p+=l),h&&(u-=s),f&&(p-=l),/^(se|s|e)$/.test(o)?(e.size.width=u,e.size.height=p):/^(ne)$/.test(o)?(e.size.width=u,e.size.height=p,e.position.top=a.top-d):/^(sw)$/.test(o)?(e.size.width=u,e.size.height=p,e.position.left=a.left-c):(0<p-l?(e.size.height=p,e.position.top=a.top-d):(e.size.height=l,e.position.top=a.top+n.height-l),0<u-s?(e.size.width=u,e.position.left=a.left-c):(e.size.width=s,e.position.left=a.left+n.width-s))}});var p=function(e){return parseInt(e,10)||0},h=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(c,e){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e,t=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=c(t.options.filter,t.element[0])).each(function(){var e=c(this),t=e.offset();c.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(i){var n=this;if(this.opos=[i.pageX,i.pageY],!this.options.disabled){var e=this.options;this.selectees=c(e.filter,this.element[0]),this._trigger("start",i),c(e.appendTo).append(this.helper),this.helper.css({left:i.clientX,top:i.clientY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=c.data(this,"selectable-item");e.startselected=!0,i.metaKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",i,{unselecting:e.element}))}),c(i.target).parents().andSelf().each(function(){var e=c.data(this,"selectable-item");if(e){var t=!i.metaKey||!e.$element.hasClass("ui-selected");return e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?n._trigger("selecting",i,{selecting:e.element}):n._trigger("unselecting",i,{unselecting:e.element}),!1}})}},_mouseDrag:function(i){var n=this;if(this.dragged=!0,!this.options.disabled){var a=this.options,o=this.opos[0],r=this.opos[1],s=i.pageX,l=i.pageY;if(s<o){var e=s;s=o,o=e}if(l<r){e=l;l=r,r=e}return this.helper.css({left:o,top:r,width:s-o,height:l-r}),this.selectees.each(function(){var e=c.data(this,"selectable-item");if(e&&e.element!=n.element[0]){var t=!1;"touch"==a.tolerance?t=!(e.left>s||e.right<o||e.top>l||e.bottom<r):"fit"==a.tolerance&&(t=e.left>o&&e.right<s&&e.top>r&&e.bottom<l),t?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,n._trigger("selecting",i,{selecting:e.element}))):(e.selecting&&(i.metaKey&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),n._trigger("unselecting",i,{unselecting:e.element}))),e.selected&&(i.metaKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",i,{unselecting:e.element}))))}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return c(".ui-unselecting",this.element[0]).each(function(){var e=c.data(this,"selectable-item");e.$element.removeClass("ui-unselecting"),e.unselecting=!1,e.startselected=!1,i._trigger("unselected",t,{unselected:e.element})}),c(".ui-selecting",this.element[0]).each(function(){var e=c.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,i._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),c.extend(c.ui.selectable,{version:"1.8.13"})}(jQuery),function(p,e){p.widget("ui.sortable",p.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData("sortable-item");return this},_setOption:function(e,t){"disabled"===e?(this.options[e]=t,this.widget()[t?"addClass":"removeClass"]("ui-sortable-disabled")):p.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,t){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var i=null,n=this;p(e.target).parents().each(function(){if(p.data(this,"sortable-item")==n)return i=p(this),!1});if(p.data(e.target,"sortable-item")==n&&(i=p(e.target)),!i)return!1;if(this.options.handle&&!t){var a=!1;if(p(this.options.handle,i).find("*").andSelf().each(function(){this==e.target&&(a=!0)}),!a)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,t,i){var n=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),p.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(p("body").css("cursor")&&(this._storedCursor=p("body").css("cursor")),p("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("activate",e,this._uiHash(this));return p.ui.ddmanager&&(p.ui.ddmanager.current=this),p.ui.ddmanager&&!n.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var t=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-p(document).scrollTop()<t.scrollSensitivity?i=p(document).scrollTop(p(document).scrollTop()-t.scrollSpeed):p(window).height()-(e.pageY-p(document).scrollTop())<t.scrollSensitivity&&(i=p(document).scrollTop(p(document).scrollTop()+t.scrollSpeed)),e.pageX-p(document).scrollLeft()<t.scrollSensitivity?i=p(document).scrollLeft(p(document).scrollLeft()-t.scrollSpeed):p(window).width()-(e.pageX-p(document).scrollLeft())<t.scrollSensitivity&&(i=p(document).scrollLeft(p(document).scrollLeft()+t.scrollSpeed))),!1!==i&&p.ui.ddmanager&&!t.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;0<=n;n--){var a=this.items[n],o=a.item[0],r=this._intersectsWithPointer(a);if(r&&!(o==this.currentItem[0]||this.placeholder[1==r?"next":"prev"]()[0]==o||p.ui.contains(this.placeholder[0],o)||"semi-dynamic"==this.options.type&&p.ui.contains(this.element[0],o))){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),p.ui.ddmanager&&p.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(p.ui.ddmanager&&!this.options.dropBehaviour&&p.ui.ddmanager.drop(this,e),this.options.revert){var i=this,n=i.placeholder.offset();i.reverting=!0,p(this.helper).animate({left:n.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),p.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?p(this.domPosition.prev).after(this.currentItem):p(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},p(e).each(function(){var e=(p(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(p(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,o=e.left,r=o+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,d=this.offset.click.left,u=s<n+c&&n+c<l&&o<t+d&&t+d<r;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&s<n+this.helperProportions.height/2&&a-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t=p.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i=p.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"==o||"down"==a?2:1:a&&("down"==a?2:1))},_intersectsWithSides:function(e){var t=p.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=p.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"==a&&i||"left"==a&&!i:n&&("down"==n&&t||"up"==n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t=[],i=[],n=this._connectWith();if(n&&e)for(var a=n.length-1;0<=a;a--)for(var o=p(n[a]),r=o.length-1;0<=r;r--){var s=p.data(o[r],"sortable");s&&s!=this&&!s.options.disabled&&i.push([p.isFunction(s.options.items)?s.options.items.call(s.element):p(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}i.push([p.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):p(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=i.length-1;0<=a;a--)i[a][0].each(function(){t.push(this)});return p(t)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(e){this.items=[],this.containers=[this];var t=this.items,i=[[p.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):p(this.options.items,this.element),this]],n=this._connectWith();if(n)for(var a=n.length-1;0<=a;a--)for(var o=p(n[a]),r=o.length-1;0<=r;r--){var s=p.data(o[r],"sortable");s&&s!=this&&!s.options.disabled&&(i.push([p.isFunction(s.options.items)?s.options.items.call(s.element[0],e,{item:this.currentItem}):p(s.options.items,s.element),s]),this.containers.push(s))}for(a=i.length-1;0<=a;a--)for(var l=i[a][1],c=i[a][0],d=(r=0,c.length);r<d;r++){var u=p(c[r]);u.data("sortable-item",l),t.push({item:u,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var t=this.items.length-1;0<=t;t--){var i=this.items[t];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?p(this.options.toleranceElement,i.item):i.item;e||(i.width=n.outerWidth(),i.height=n.outerHeight());var a=n.offset();i.left=a.left,i.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--){a=this.containers[t].element.offset();this.containers[t].containerCache.left=a.left,this.containers[t].containerCache.top=a.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var a=n.placeholder;n.placeholder={element:function(){var e=p(document.createElement(i.currentItem[0].nodeName)).addClass(a||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return a||(e.style.visibility="hidden"),e},update:function(e,t){a&&!n.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=p(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var t=null,i=null,n=this.containers.length-1;0<=n;n--)if(!p.ui.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(t&&p.ui.contains(this.containers[n].element[0],t.element[0]))continue;t=this.containers[n],i=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(t)if(1===this.containers.length)this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var a=1e4,o=null,r=this.positionAbs[this.containers[i].floating?"left":"top"],s=this.items.length-1;0<=s;s--)if(p.ui.contains(this.containers[i].element[0],this.items[s].item[0])){var l=this.items[s][this.containers[i].floating?"left":"top"];Math.abs(l-r)<a&&(a=Math.abs(l-r),o=this.items[s])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[i].element,!0),this._trigger("change",e,this._uiHash()),this.containers[i]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=p.isFunction(t.helper)?p(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"==t.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||p("parent"!=t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||t.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||t.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),p.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&p.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&p.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,p("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(p("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var t=p(e.containment)[0],i=p(e.containment).offset(),n="hidden"!=p(t).css("overflow");this.containment=[i.left+(parseInt(p(t).css("borderLeftWidth"),10)||0)+(parseInt(p(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(p(t).css("borderTopWidth"),10)||0)+(parseInt(p(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(p(t).css("borderLeftWidth"),10)||0)-(parseInt(p(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(p(t).css("borderTopWidth"),10)||0)-(parseInt(p(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&p.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(p.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*i),left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(p.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*i)}},_generatePosition:function(e){var t=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&p.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var a=e.pageX,o=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),t.grid)){var r=this.originalPageY+Math.round((o-this.originalPageY)/t.grid[1])*t.grid[1];o=this.containment&&(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?r-this.offset.click.top<this.containment[1]?r+t.grid[1]:r-t.grid[1]:r;var s=this.originalPageX+Math.round((a-this.originalPageX)/t.grid[0])*t.grid[0];a=this.containment&&(s-this.offset.click.left<this.containment[0]||s-this.offset.click.left>this.containment[2])?s-this.offset.click.left<this.containment[0]?s+t.grid[0]:s-t.grid[0]:s}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(p.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(p.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this,o=this.counter;window.setTimeout(function(){o==a.counter&&a.refreshPositions(!n)},0)},_clear:function(e,t){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)"auto"!=this._storedCSS[n]&&"static"!=this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),!p.ui.contains(this.element[0],this.currentItem[0])){t||i.push(function(e){this._trigger("remove",e,this._uiHash())});for(n=this.containers.length-1;0<=n;n--)p.ui.contains(this.containers[n].element[0],this.currentItem[0])&&!t&&(i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[n])),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[n])))}for(n=this.containers.length-1;0<=n;n--)t||i.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&p("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===p.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||p([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}}),p.extend(p.ui.sortable,{version:"1.8.13"})}(jQuery),jQuery.effects||function(c,r){function n(e){var t;return e&&e.constructor==Array&&3==e.length?e:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:(t=/rgba\(0, 0, 0, 0\)/.exec(e))?i.transparent:i[c.trim(e).toLowerCase()]}c.effects={},c.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(e,t){c.fx.step[t]=function(e){e.colorInit||(e.start=function(e,t){var i;do{if(""!=(i=c.curCSS(e,t))&&"transparent"!=i||c.nodeName(e,"body"))break;t="backgroundColor"}while(e=e.parentNode);return n(i)}(e.elem,t),e.end=n(e.end),e.colorInit=!0),e.elem.style[t]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},d=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function u(){var e,t=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(t&&t.length&&t[0]&&t[t[0]])for(var n=t.length;n--;)"string"==typeof t[e=t[n]]&&(i[e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]=t[e]);else for(e in t)"string"==typeof t[e]&&(i[e]=t[e]);return i}function p(e){var t,i;for(t in e)(null==(i=e[t])||c.isFunction(i)||t in a||/scrollbar/.test(t)||!/color/i.test(t)&&isNaN(parseFloat(i)))&&delete e[t];return e}function l(e,t,i,n){return"object"==typeof e&&(n=t,i=null,e=(t=e).effect),c.isFunction(t)&&(n=t,i=null,t={}),("number"==typeof t||c.fx.speeds[t])&&(n=i,i=t,t={}),c.isFunction(i)&&(n=i,i=null),t=t||{},i=i||t.duration,[e,t,i=c.fx.off?0:"number"==typeof i?i:i in c.fx.speeds?c.fx.speeds[i]:c.fx.speeds._default,n=n||t.complete]}function o(e){return!(e&&"number"!=typeof e&&!c.fx.speeds[e])||"string"==typeof e&&!c.effects[e]}c.effects.animateClass=function(o,r,s,l){return c.isFunction(s)&&(l=s,s=null),this.queue(function(){var e,i=c(this),t=i.attr("style")||" ",n=p(u.call(this)),a=i.attr("class");c.each(d,function(e,t){o[t]&&i[t+"Class"](o[t])}),e=p(u.call(this)),i.attr("class",a),i.animate(function(e,t){var i,n={_:0};for(i in t)e[i]!=t[i]&&(n[i]=t[i]);return n}(n,e),{queue:!1,duration:r,easding:s,complete:function(){c.each(d,function(e,t){o[t]&&i[t+"Class"](o[t])}),"object"==typeof i.attr("style")?(i.attr("style").cssText="",i.attr("style").cssText=t):i.attr("style",t),l&&l.apply(this,arguments),c.dequeue(this)}})})},c.fn.extend({_addClass:c.fn.addClass,addClass:function(e,t,i,n){return t?c.effects.animateClass.apply(this,[{add:e},t,i,n]):this._addClass(e)},_removeClass:c.fn.removeClass,removeClass:function(e,t,i,n){return t?c.effects.animateClass.apply(this,[{remove:e},t,i,n]):this._removeClass(e)},_toggleClass:c.fn.toggleClass,toggleClass:function(e,t,i,n,a){return"boolean"==typeof t||t===r?i?c.effects.animateClass.apply(this,[t?{add:e}:{remove:e},i,n,a]):this._toggleClass(e,t):c.effects.animateClass.apply(this,[{toggle:e},t,i,n])},switchClass:function(e,t,i,n,a){return c.effects.animateClass.apply(this,[{add:t,remove:e},i,n,a])}}),c.extend(c.effects,{version:"1.8.13",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},e=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return i.wrap(e),e=i.parent(),"static"==i.css("position")?(e.css({position:"relative"}),i.css({position:"relative"})):(c.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),c.each(["top","left","bottom","right"],function(e,t){n[t]=i.css(t),isNaN(parseInt(n[t],10))&&(n[t]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(i,e,n,a){return a=a||{},c.each(e,function(e,t){unit=i.cssUnit(t),0<unit[0]&&(a[t]=unit[0]*n+unit[1])}),a}}),c.fn.extend({effect:function(e,t,i,n){var a=l.apply(this,arguments),o={options:a[1],duration:a[2],callback:a[3]},r=o.options.mode,s=c.effects[e];return c.fx.off||!s?r?this[r](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):s.call(this,o)},_show:c.fn.show,show:function(e){if(o(e))return this._show.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:c.fn.hide,hide:function(e){if(o(e))return this._hide.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:c.fn.toggle,toggle:function(e){if(o(e)||"boolean"==typeof e||c.isFunction(e))return this.__toggle.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="toggle",this.effect.apply(this,t)},cssUnit:function(e){var i=this.css(e),n=[];return c.each(["em","px","%","pt"],function(e,t){0<i.indexOf(t)&&(n=[parseFloat(i),t])}),n}}),c.easing.jswing=c.easing.swing,c.extend(c.easing,{def:"easeOutQuad",swing:function(e,t,i,n,a){return c.easing[c.easing.def](e,t,i,n,a)},easeInQuad:function(e,t,i,n,a){return n*(t/=a)*t+i},easeOutQuad:function(e,t,i,n,a){return-n*(t/=a)*(t-2)+i},easeInOutQuad:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,a){return n*(t/=a)*t*t+i},easeOutCubic:function(e,t,i,n,a){return n*((t=t/a-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,a){return n*(t/=a)*t*t*t+i},easeOutQuart:function(e,t,i,n,a){return-n*((t=t/a-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,a){return n*(t/=a)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,a){return n*((t=t/a-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,a){return n*Math.sin(t/a*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+i},easeInExpo:function(e,t,i,n,a){return 0==t?i:n*Math.pow(2,10*(t/a-1))+i},easeOutExpo:function(e,t,i,n,a){return t==a?i+n:n*(1-Math.pow(2,-10*t/a))+i},easeInOutExpo:function(e,t,i,n,a){return 0==t?i:t==a?i+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+i},easeOutCirc:function(e,t,i,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+i},easeInOutCirc:function(e,t,i,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,a){var o=1.70158,r=0,s=n;if(0==t)return i;if(1==(t/=a))return i+n;if(r||(r=.3*a),s<Math.abs(n)){s=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/s);return-s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/r)+i},easeOutElastic:function(e,t,i,n,a){var o=1.70158,r=0,s=n;if(0==t)return i;if(1==(t/=a))return i+n;if(r||(r=.3*a),s<Math.abs(n)){s=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*a-o)*Math.PI/r)+n+i},easeInOutElastic:function(e,t,i,n,a){var o=1.70158,r=0,s=n;if(0==t)return i;if(2==(t/=a/2))return i+n;if(r||(r=.3*a*1.5),s<Math.abs(n)){s=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/s);return t<1?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/r)+i:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-o)*Math.PI/r)*.5+n+i},easeInBack:function(e,t,i,n,a,o){return o==r&&(o=1.70158),n*(t/=a)*t*((o+1)*t-o)+i},easeOutBack:function(e,t,i,n,a,o){return o==r&&(o=1.70158),n*((t=t/a-1)*t*((o+1)*t+o)+1)+i},easeInOutBack:function(e,t,i,n,a,o){return o==r&&(o=1.70158),(t/=a/2)<1?n/2*t*t*((1+(o*=1.525))*t-o)+i:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+i},easeInBounce:function(e,t,i,n,a){return n-c.easing.easeOutBounce(e,a-t,0,n,a)+i},easeOutBounce:function(e,t,i,n,a){return(t/=a)<1/2.75?7.5625*n*t*t+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,a){return t<a/2?.5*c.easing.easeInBounce(e,2*t,0,n,a)+i:.5*c.easing.easeOutBounce(e,2*t-a,0,n,a)+.5*n+i}})}(jQuery),function(c,e){c.effects.blind=function(l){return this.queue(function(){var e=c(this),t=["position","top","bottom","left","right"],i=c.effects.setMode(e,l.options.mode||"hide"),n=l.options.direction||"vertical";c.effects.save(e,t),e.show();var a=c.effects.createWrapper(e).css({overflow:"hidden"}),o="vertical"==n?"height":"width",r="vertical"==n?a.height():a.width();"show"==i&&a.css(o,0);var s={};s[o]="show"==i?r:0,a.animate(s,l.duration,l.options.easing,function(){"hide"==i&&e.hide(),c.effects.restore(e,t),c.effects.removeWrapper(e),l.callback&&l.callback.apply(e[0],arguments),e.dequeue()})})}}(jQuery),function(f,e){f.effects.bounce=function(h){return this.queue(function(){var e=f(this),t=["position","top","bottom","left","right"],i=f.effects.setMode(e,h.options.mode||"effect"),n=h.options.direction||"up",a=h.options.distance||20,o=h.options.times||5,r=h.duration||250;/show|hide/.test(i)&&t.push("opacity"),f.effects.save(e,t),e.show(),f.effects.createWrapper(e);var s="up"==n||"down"==n?"top":"left",l="up"==n||"left"==n?"pos":"neg";a=h.options.distance||("top"==s?e.outerHeight({margin:!0})/3:e.outerWidth({margin:!0})/3);("show"==i&&e.css("opacity",0).css(s,"pos"==l?-a:a),"hide"==i&&(a/=2*o),"hide"!=i&&o--,"show"==i)&&((u={opacity:1})[s]=("pos"==l?"+=":"-=")+a,e.animate(u,r/2,h.options.easing),a/=2,o--);for(var c=0;c<o;c++){var d={};(p={})[s]=("pos"==l?"-=":"+=")+a,d[s]=("pos"==l?"+=":"-=")+a,e.animate(p,r/2,h.options.easing).animate(d,r/2,h.options.easing),a="hide"==i?2*a:a/2}if("hide"==i){var u;(u={opacity:0})[s]=("pos"==l?"-=":"+=")+a,e.animate(u,r/2,h.options.easing,function(){e.hide(),f.effects.restore(e,t),f.effects.removeWrapper(e),h.callback&&h.callback.apply(this,arguments)})}else{var p;d={};(p={})[s]=("pos"==l?"-=":"+=")+a,d[s]=("pos"==l?"+=":"-=")+a,e.animate(p,r/2,h.options.easing).animate(d,r/2,h.options.easing,function(){f.effects.restore(e,t),f.effects.removeWrapper(e),h.callback&&h.callback.apply(this,arguments)})}e.queue("fx",function(){e.dequeue()}),e.dequeue()})}}(jQuery),function(d,e){d.effects.clip=function(c){return this.queue(function(){var e=d(this),t=["position","top","bottom","left","right","height","width"],i=d.effects.setMode(e,c.options.mode||"hide"),n=c.options.direction||"vertical";d.effects.save(e,t),e.show();var a=d.effects.createWrapper(e).css({overflow:"hidden"}),o="IMG"==e[0].tagName?a:e,r={size:"vertical"==n?"height":"width",position:"vertical"==n?"top":"left"},s="vertical"==n?o.height():o.width();"show"==i&&(o.css(r.size,0),o.css(r.position,s/2));var l={};l[r.size]="show"==i?s:0,l[r.position]="show"==i?0:s/2,o.animate(l,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){"hide"==i&&e.hide(),d.effects.restore(e,t),d.effects.removeWrapper(e),c.callback&&c.callback.apply(e[0],arguments),e.dequeue()}})})}}(jQuery),function(c,e){c.effects.drop=function(l){return this.queue(function(){var e=c(this),t=["position","top","bottom","left","right","opacity"],i=c.effects.setMode(e,l.options.mode||"hide"),n=l.options.direction||"left";c.effects.save(e,t),e.show(),c.effects.createWrapper(e);var a="up"==n||"down"==n?"top":"left",o="up"==n||"left"==n?"pos":"neg",r=l.options.distance||("top"==a?e.outerHeight({margin:!0})/2:e.outerWidth({margin:!0})/2);"show"==i&&e.css("opacity",0).css(a,"pos"==o?-r:r);var s={opacity:"show"==i?1:0};s[a]=("show"==i?"pos"==o?"+=":"-=":"pos"==o?"-=":"+=")+r,e.animate(s,{queue:!1,duration:l.duration,easing:l.options.easing,complete:function(){"hide"==i&&e.hide(),c.effects.restore(e,t),c.effects.removeWrapper(e),l.callback&&l.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(c,e){c.effects.explode=function(l){return this.queue(function(){var e=l.options.pieces?Math.round(Math.sqrt(l.options.pieces)):3,t=l.options.pieces?Math.round(Math.sqrt(l.options.pieces)):3;l.options.mode="toggle"==l.options.mode?c(this).is(":visible")?"hide":"show":l.options.mode;var i=c(this).show().css("visibility","hidden"),n=i.offset();n.top-=parseInt(i.css("marginTop"),10)||0,n.left-=parseInt(i.css("marginLeft"),10)||0;for(var a=i.outerWidth(!0),o=i.outerHeight(!0),r=0;r<e;r++)for(var s=0;s<t;s++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:a/t*-s,top:o/e*-r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:a/t,height:o/e,left:n.left+s*(a/t)+("show"==l.options.mode?(s-Math.floor(t/2))*(a/t):0),top:n.top+r*(o/e)+("show"==l.options.mode?(r-Math.floor(e/2))*(o/e):0),opacity:"show"==l.options.mode?0:1}).animate({left:n.left+s*(a/t)+("show"==l.options.mode?0:(s-Math.floor(t/2))*(a/t)),top:n.top+r*(o/e)+("show"==l.options.mode?0:(r-Math.floor(e/2))*(o/e)),opacity:"show"==l.options.mode?1:0},l.duration||500);setTimeout(function(){"show"==l.options.mode?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),l.callback&&l.callback.apply(i[0]),i.dequeue(),c("div.ui-effects-explode").remove()},l.duration||500)})}}(jQuery),function(n,e){n.effects.fade=function(i){return this.queue(function(){var e=n(this),t=n.effects.setMode(e,i.options.mode||"hide");e.animate({opacity:t},{queue:!1,duration:i.duration,easing:i.options.easing,complete:function(){i.callback&&i.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(f,e){f.effects.fold=function(h){return this.queue(function(){var e=f(this),t=["position","top","bottom","left","right"],i=f.effects.setMode(e,h.options.mode||"hide"),n=h.options.size||15,a=!!h.options.horizFirst,o=h.duration?h.duration/2:f.fx.speeds._default/2;f.effects.save(e,t),e.show();var r=f.effects.createWrapper(e).css({overflow:"hidden"}),s="show"==i!=a,l=s?["width","height"]:["height","width"],c=s?[r.width(),r.height()]:[r.height(),r.width()],d=/([0-9]+)%/.exec(n);d&&(n=parseInt(d[1],10)/100*c["hide"==i?0:1]),"show"==i&&r.css(a?{height:0,width:n}:{height:n,width:0});var u={},p={};u[l[0]]="show"==i?c[0]:n,p[l[1]]="show"==i?c[1]:0,r.animate(u,o,h.options.easing).animate(p,o,h.options.easing,function(){"hide"==i&&e.hide(),f.effects.restore(e,t),f.effects.removeWrapper(e),h.callback&&h.callback.apply(e[0],arguments),e.dequeue()})})}}(jQuery),function(o,e){o.effects.highlight=function(a){return this.queue(function(){var e=o(this),t=["backgroundImage","backgroundColor","opacity"],i=o.effects.setMode(e,a.options.mode||"show"),n={backgroundColor:e.css("backgroundColor")};"hide"==i&&(n.opacity=0),o.effects.save(e,t),e.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(n,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){"hide"==i&&e.hide(),o.effects.restore(e,t),"show"==i&&!o.support.opacity&&this.style.removeAttribute("filter"),a.callback&&a.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(a,e){a.effects.pulsate=function(n){return this.queue(function(){var e=a(this),t=a.effects.setMode(e,n.options.mode||"show");times=2*(n.options.times||5)-1,duration=n.duration?n.duration/2:a.fx.speeds._default/2,isVisible=e.is(":visible"),animateTo=0,isVisible||(e.css("opacity",0).show(),animateTo=1),("hide"==t&&isVisible||"show"==t&&!isVisible)&&times--;for(var i=0;i<times;i++)e.animate({opacity:animateTo},duration,n.options.easing),animateTo=(animateTo+1)%2;e.animate({opacity:animateTo},duration,n.options.easing,function(){0==animateTo&&e.hide(),n.callback&&n.callback.apply(this,arguments)}),e.queue("fx",function(){e.dequeue()}).dequeue()})}}(jQuery),function(m,e){m.effects.puff=function(o){return this.queue(function(){var e=m(this),t=m.effects.setMode(e,o.options.mode||"hide"),i=parseInt(o.options.percent,10)||150,n=i/100,a={height:e.height(),width:e.width()};m.extend(o.options,{fade:!0,mode:t,percent:"hide"==t?i:100,from:"hide"==t?a:{height:a.height*n,width:a.width*n}}),e.effect("scale",o.options,o.duration,o.callback),e.dequeue()})},m.effects.scale=function(c){return this.queue(function(){var e=m(this),t=m.extend(!0,{},c.options),i=m.effects.setMode(e,c.options.mode||"effect"),n=parseInt(c.options.percent,10)||(0==parseInt(c.options.percent,10)?0:"hide"==i?0:100),a=c.options.direction||"both",o=c.options.origin;"effect"!=i&&(t.origin=o||["middle","center"],t.restore=!0);var r={height:e.height(),width:e.width()};e.from=c.options.from||("show"==i?{height:0,width:0}:r);var s="horizontal"!=a?n/100:1,l="vertical"!=a?n/100:1;e.to={height:r.height*s,width:r.width*l},c.options.fade&&("show"==i&&(e.from.opacity=0,e.to.opacity=1),"hide"==i&&(e.from.opacity=1,e.to.opacity=0)),t.from=e.from,t.to=e.to,t.mode=i,e.effect("size",t,c.duration,c.callback),e.dequeue()})},m.effects.size=function(f){return this.queue(function(){var e=m(this),t=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],n=["width","height","overflow"],a=["fontSize"],o=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],s=m.effects.setMode(e,f.options.mode||"effect"),l=f.options.restore||!1,c=f.options.scale||"both",d=f.options.origin,u={height:e.height(),width:e.width()};if(e.from=f.options.from||u,e.to=f.options.to||u,d){var p=m.effects.getBaseline(d,u);e.from.top=(u.height-e.from.height)*p.y,e.from.left=(u.width-e.from.width)*p.x,e.to.top=(u.height-e.to.height)*p.y,e.to.left=(u.width-e.to.width)*p.x}var h={from:{y:e.from.height/u.height,x:e.from.width/u.width},to:{y:e.to.height/u.height,x:e.to.width/u.width}};"box"!=c&&"both"!=c||(h.from.y!=h.to.y&&(t=t.concat(o),e.from=m.effects.setTransition(e,o,h.from.y,e.from),e.to=m.effects.setTransition(e,o,h.to.y,e.to)),h.from.x!=h.to.x&&(t=t.concat(r),e.from=m.effects.setTransition(e,r,h.from.x,e.from),e.to=m.effects.setTransition(e,r,h.to.x,e.to))),"content"!=c&&"both"!=c||h.from.y!=h.to.y&&(t=t.concat(a),e.from=m.effects.setTransition(e,a,h.from.y,e.from),e.to=m.effects.setTransition(e,a,h.to.y,e.to)),m.effects.save(e,l?t:i),e.show(),m.effects.createWrapper(e),e.css("overflow","hidden").css(e.from),"content"!=c&&"both"!=c||(o=o.concat(["marginTop","marginBottom"]).concat(a),r=r.concat(["marginLeft","marginRight"]),n=t.concat(o).concat(r),e.find("*[width]").each(function(){child=m(this),l&&m.effects.save(child,n);var e=child.height(),t=child.width();child.from={height:e*h.from.y,width:t*h.from.x},child.to={height:e*h.to.y,width:t*h.to.x},h.from.y!=h.to.y&&(child.from=m.effects.setTransition(child,o,h.from.y,child.from),child.to=m.effects.setTransition(child,o,h.to.y,child.to)),h.from.x!=h.to.x&&(child.from=m.effects.setTransition(child,r,h.from.x,child.from),child.to=m.effects.setTransition(child,r,h.to.x,child.to)),child.css(child.from),child.animate(child.to,f.duration,f.options.easing,function(){l&&m.effects.restore(child,n)})})),e.animate(e.to,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){0===e.to.opacity&&e.css("opacity",e.from.opacity),"hide"==s&&e.hide(),m.effects.restore(e,l?t:i),m.effects.removeWrapper(e),f.callback&&f.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(h,e){h.effects.shake=function(p){return this.queue(function(){var e=h(this),t=["position","top","bottom","left","right"],i=(h.effects.setMode(e,p.options.mode||"effect"),p.options.direction||"left"),n=p.options.distance||20,a=p.options.times||3,o=p.duration||p.options.duration||140;h.effects.save(e,t),e.show(),h.effects.createWrapper(e);var r="up"==i||"down"==i?"top":"left",s="up"==i||"left"==i?"pos":"neg",l={},c={},d={};l[r]=("pos"==s?"-=":"+=")+n,c[r]=("pos"==s?"+=":"-=")+2*n,d[r]=("pos"==s?"-=":"+=")+2*n,e.animate(l,o,p.options.easing);for(var u=1;u<a;u++)e.animate(c,o,p.options.easing).animate(d,o,p.options.easing);e.animate(c,o,p.options.easing).animate(l,o/2,p.options.easing,function(){h.effects.restore(e,t),h.effects.removeWrapper(e),p.callback&&p.callback.apply(this,arguments)}),e.queue("fx",function(){e.dequeue()}),e.dequeue()})}}(jQuery),function(c,e){c.effects.slide=function(l){return this.queue(function(){var e=c(this),t=["position","top","bottom","left","right"],i=c.effects.setMode(e,l.options.mode||"show"),n=l.options.direction||"left";c.effects.save(e,t),e.show(),c.effects.createWrapper(e).css({overflow:"hidden"});var a="up"==n||"down"==n?"top":"left",o="up"==n||"left"==n?"pos":"neg",r=l.options.distance||("top"==a?e.outerHeight({margin:!0}):e.outerWidth({margin:!0}));"show"==i&&e.css(a,"pos"==o?isNaN(r)?"-"+r:-r:r);var s={};s[a]=("show"==i?"pos"==o?"+=":"-=":"pos"==o?"-=":"+=")+r,e.animate(s,{queue:!1,duration:l.duration,easing:l.options.easing,complete:function(){"hide"==i&&e.hide(),c.effects.restore(e,t),c.effects.removeWrapper(e),l.callback&&l.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(s,e){s.effects.transfer=function(r){return this.queue(function(){var e=s(this),t=s(r.options.to),i=t.offset(),n={top:i.top,left:i.left,height:t.innerHeight(),width:t.innerWidth()},a=e.offset(),o=s('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(r.options.className).css({top:a.top,left:a.left,height:e.innerHeight(),width:e.innerWidth(),position:"absolute"}).animate(n,r.duration,r.options.easing,function(){o.remove(),r.callback&&r.callback.apply(e[0],arguments),e.dequeue()})})}}(jQuery),function(p,e){p.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,e=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e.disabled||p(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){e.disabled||p(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){e.disabled||p(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){e.disabled||p(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),e.navigation){var i=t.element.find("a").filter(e.navigationFilter).eq(0);if(i.length){var n=i.closest(".ui-accordion-header");n.length?t.active=n:t.active=i.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||e.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),p.browser.safari||t.headers.find("a").attr("tabIndex",-1),e.event&&t.headers.bind(e.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var e=this.options;e.icons&&(p("<span></span>").addClass("ui-icon "+e.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(e.icons.header).toggleClass(e.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var t=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(e.autoHeight||e.fillHeight)&&t.css("height",""),p.Widget.prototype.destroy.call(this)},_setOption:function(e,t){p.Widget.prototype._setOption.apply(this,arguments),"active"==e&&this.activate(t),"icons"==e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"==e&&this.headers.add(this.headers.next())[t?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(e){if(!(this.options.disabled||e.altKey||e.ctrlKey)){var t=p.ui.keyCode,i=this.headers.length,n=this.headers.index(e.target),a=!1;switch(e.keyCode){case t.RIGHT:case t.DOWN:a=this.headers[(n+1)%i];break;case t.LEFT:case t.UP:a=this.headers[(n-1+i)%i];break;case t.SPACE:case t.ENTER:this._clickHandler({target:e.target},e.target),e.preventDefault()}return!a||(p(e.target).attr("tabIndex",-1),p(a).attr("tabIndex",0),a.focus(),!1)}},resize:function(){var e,t=this.options;if(t.fillSpace){if(p.browser.msie){var i=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height(),p.browser.msie&&this.element.parent().css("overflow",i),this.headers.each(function(){e-=p(this).outerHeight(!0)}),this.headers.next().each(function(){p(this).height(Math.max(0,e-p(this).innerHeight()+p(this).height()))}).css("overflow","auto")}else t.autoHeight&&(e=0,this.headers.next().each(function(){e=Math.max(e,p(this).height("").height())}).height(e));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(e){return e?"number"==typeof e?this.headers.filter(":eq("+e+")"):this.headers.not(this.headers.not(e)):!1===e?p([]):this.headers.filter(":eq(0)")},_clickHandler:function(e,t){var i=this.options;if(!i.disabled)if(e.target){var n=p(e.currentTarget||t),a=n[0]===this.active[0];if(i.active=(!i.collapsible||!a)&&this.headers.index(n),!(this.running||!i.collapsible&&a)){var o=this.active,r=(c=n.next(),s=this.active.next(),l={options:i,newHeader:a&&i.collapsible?p([]):n,oldHeader:this.active,newContent:a&&i.collapsible?p([]):c,oldContent:s},this.headers.index(this.active[0])>this.headers.index(n[0]));this.active=a?p([]):n,this._toggle(c,s,l,a,r),o.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),a||(n.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(i.icons.header).addClass(i.icons.headerSelected),n.next().addClass("ui-accordion-content-active"))}}else{if(!i.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),this.active.next().addClass("ui-accordion-content-active");var s=this.active.next(),l={options:i,newHeader:p([]),oldHeader:i.active,newContent:p([]),oldContent:s},c=this.active=p([]);this._toggle(c,s,l)}},_toggle:function(e,t,i,n,a){var o=this,r=o.options;o.toShow=e,o.toHide=t,o.data=i;var s=function(){if(o)return o._completed.apply(o,arguments)};if(o._trigger("changestart",null,o.data),o.running=0===t.size()?e.size():t.size(),r.animated){var l={};l=r.collapsible&&n?{toShow:p([]),toHide:t,complete:s,down:a,autoHeight:r.autoHeight||r.fillSpace}:{toShow:e,toHide:t,complete:s,down:a,autoHeight:r.autoHeight||r.fillSpace},r.proxied||(r.proxied=r.animated),r.proxiedDuration||(r.proxiedDuration=r.duration),r.animated=p.isFunction(r.proxied)?r.proxied(l):r.proxied,r.duration=p.isFunction(r.proxiedDuration)?r.proxiedDuration(l):r.proxiedDuration;var c=p.ui.accordion.animations,d=r.duration,u=r.animated;!u||c[u]||p.easing[u]||(u="slide"),c[u]||(c[u]=function(e){this.slide(e,{easing:u,duration:d||700})}),c[u](l)}else r.collapsible&&n?e.toggle():(t.hide(),e.show()),s(!0);t.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),e.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),p.extend(p.ui.accordion,{version:"1.8.13",animations:{slide:function(n,e){if((n=p.extend({easing:"swing",duration:300},n,e)).toHide.size())if(n.toShow.size()){var t,i=n.toShow.css("overflow"),a=0,o={},r={},s=n.toShow;t=s[0].style.width,s.width(parseInt(s.parent().width(),10)-parseInt(s.css("paddingLeft"),10)-parseInt(s.css("paddingRight"),10)-(parseInt(s.css("borderLeftWidth"),10)||0)-(parseInt(s.css("borderRightWidth"),10)||0)),p.each(["height","paddingTop","paddingBottom"],function(e,t){r[t]="hide";var i=(""+p.css(n.toShow[0],t)).match(/^([\d+-.]+)(.*)$/);o[t]={value:i[1],unit:i[2]||"px"}}),n.toShow.css({height:0,overflow:"hidden"}).show(),n.toHide.filter(":hidden").each(n.complete).end().filter(":visible").animate(r,{step:function(e,t){"height"==t.prop&&(a=t.end-t.start==0?0:(t.now-t.start)/(t.end-t.start)),n.toShow[0].style[t.prop]=a*o[t.prop].value+o[t.prop].unit},duration:n.duration,easing:n.easing,complete:function(){n.autoHeight||n.toShow.css("height",""),n.toShow.css({width:t,overflow:i}),n.complete()}})}else n.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},n);else n.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},n)},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(r,e){var a=0;r.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var i,a=this,o=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!a.options.disabled&&!a.element.attr("readonly")){i=!1;var t=r.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:a._move("previousPage",e);break;case t.PAGE_DOWN:a._move("nextPage",e);break;case t.UP:a._move("previous",e),e.preventDefault();break;case t.DOWN:a._move("next",e),e.preventDefault();break;case t.ENTER:case t.NUMPAD_ENTER:a.menu.active&&(i=!0,e.preventDefault());case t.TAB:if(!a.menu.active)return;a.menu.select(e);break;case t.ESCAPE:a.element.val(a.term),a.close(e);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=a.element.val()&&(a.selectedItem=null,a.search(null,e))},a.options.delay)}}}).bind("keypress.autocomplete",function(e){i&&(i=!1,e.preventDefault())}).bind("focus.autocomplete",function(){a.options.disabled||(a.selectedItem=null,a.previous=a.element.val())}).bind("blur.autocomplete",function(e){a.options.disabled||(clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(e),a._change(e)},150))}),this._initSource(),this.response=function(){return a._response.apply(a,arguments)},this.menu=r("<ul></ul>").addClass("ui-autocomplete").appendTo(r(this.options.appendTo||"body",o)[0]).mousedown(function(e){var t=a.menu.element[0];r(e.target).closest(".ui-menu-item").length||setTimeout(function(){r(document).one("mousedown",function(e){e.target===a.element[0]||e.target===t||r.ui.contains(t,e.target)||a.close()})},1),setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(e,t){var i=t.item.data("item.autocomplete");!1!==a._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&a.element.val(i.value)},selected:function(e,t){var i=t.item.data("item.autocomplete"),n=a.previous;a.element[0]!==o.activeElement&&(a.element.focus(),a.previous=n,setTimeout(function(){a.previous=n,a.selectedItem=i},1)),!1!==a._trigger("select",e,{item:i})&&a.element.val(i.value),a.term=a.element.val(),a.close(e),a.selectedItem=i},blur:function(e,t){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),r.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),r.Widget.prototype.destroy.call(this)},_setOption:function(e,t){r.Widget.prototype._setOption.apply(this,arguments),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(r(t||"body",this.element[0].ownerDocument)[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_initSource:function(){var i,t,n=this;r.isArray(this.options.source)?(i=this.options.source,this.source=function(e,t){t(r.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(t=this.options.source,this.source=function(e,i){n.xhr&&n.xhr.abort(),n.xhr=r.ajax({url:t,data:e,dataType:"json",autocompleteRequest:++a,success:function(e,t){this.autocompleteRequest===a&&i(e)},error:function(){this.autocompleteRequest===a&&i([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),!1!==this._trigger("search",t)?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:r.map(e,function(e){return"string"==typeof e?{label:e,value:e}:r.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var t=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(t,e),this.menu.deactivate(),this.menu.refresh(),t.show(),this._resizeMenu(),t.position(r.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new r.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(i,e){var n=this;r.each(e,function(e,t){n._renderItem(i,t)})},_renderItem:function(e,t){return r("<li></li>").data("item.autocomplete",t).append(r("<a></a>").text(t.label)).appendTo(e)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element}}),r.extend(r.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(r.ui.autocomplete.escapeRegex(t),"i");return r.grep(e,function(e){return i.test(e.label||e.value||e)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){a(e.target).closest(".ui-menu-item a").length&&(e.preventDefault(),t.select(e))}),this.refresh()},refresh:function(){var t=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(e){t.activate(e,a(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.scrollTop(),a=this.element.height();i<0?this.element.scrollTop(n+i):a<=i&&this.element.scrollTop(n+i-a+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(this.active){var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))}else this.activate(i,this.element.children(t))},nextPage:function(e){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(e,this.element.children(".ui-menu-item:first"));var t=this.active.offset().top,i=this.element.height(),n=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-t-i+a(this).height();return e<10&&-10<e});n.length||(n=this.element.children(".ui-menu-item:last")),this.activate(e,n)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(e,this.element.children(".ui-menu-item:last"));var t=this.active.offset().top,i=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-t+i-a(this).height();return e<10&&-10<e}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(o,e){var r,s="ui-button ui-widget ui-state-default ui-corner-all",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(e){o(":ui-button",e.target.form).each(function(){var e=o(this).data("button");setTimeout(function(){e.refresh()},1)})},d=function(e){var t=e.name,i=e.form,n=o([]);return t&&(n=i?o(i).find("[name='"+t+"']"):o("[name='"+t+"']",e.ownerDocument).filter(function(){return!this.form})),n};o.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c),"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,e="checkbox"===this.type||"radio"===this.type,n="ui-state-hover"+(e?"":" ui-state-active"),a="ui-state-focus";null===i.label&&(i.label=this.buttonElement.html()),this.element.is(":disabled")&&(i.disabled=!0),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter.button",function(){i.disabled||(o(this).addClass("ui-state-hover"),this===r&&o(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){i.disabled||o(this).removeClass(n)}).bind("focus.button",function(){o(this).addClass(a)}).bind("blur.button",function(){o(this).removeClass(a)}).bind("click.button",function(e){i.disabled&&e.stopImmediatePropagation()}),e&&this.element.bind("change.button",function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled)return!1;o(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled)return!1;o(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed",!0);var e=t.element[0];d(e).not(e).map(function(){return o(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",!1)}):(this.buttonElement.bind("mousedown.button",function(){if(i.disabled)return!1;o(this).addClass("ui-state-active"),r=this,o(document).one("mouseup",function(){r=null})}).bind("mouseup.button",function(){if(i.disabled)return!1;o(this).removeClass("ui-state-active")}).bind("keydown.button",function(e){if(i.disabled)return!1;e.keyCode!=o.ui.keyCode.SPACE&&e.keyCode!=o.ui.keyCode.ENTER||o(this).addClass("ui-state-active")}).bind("keyup.button",function(){o(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===o.ui.keyCode.SPACE&&o(this).click()})),this._setOption("disabled",i.disabled)},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for="+this.element.attr("id")+"]";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" ui-state-hover ui-state-active  "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),o.Widget.prototype.destroy.call(this)},_setOption:function(e,t){o.Widget.prototype._setOption.apply(this,arguments),"disabled"===e&&(t?this.element.attr("disabled",!0):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var e=this.element.is(":disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?d(this.element[0]).each(function(){o(this).is(":checked")?o(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):o(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(l),t=o("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,n=i.primary&&i.secondary,a=[];i.primary||i.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),o.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),o.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),o.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.13"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){for(var i in $.extend(e,t),t)null!=t[i]&&t[i]!=undefined||(e[i]=t[i]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,n){var t=$(e);n.append=$([]),n.trigger=$([]),t.hasClass(this.markerClassName)||(this._attachments(t,n),t.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,t,i){n.settings[t]=i}).bind("getData.datepicker",function(e,t){return this._get(n,t)}),this._autoSize(n),$.data(e,PROP_NAME,n))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var a=this._get(t,"showOn");if("focus"!=a&&"both"!=a||e.focus(this._showDatepicker),"button"==a||"both"==a){var o=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?o:$("<img/>").attr({src:r,alt:o,title:o}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,n){var t=$(e);t.hasClass(this.markerClassName)||(t.addClass(this.markerClassName).append(n.dpDiv).bind("setData.datepicker",function(e,t,i){n.settings[t]=i}).bind("getData.datepicker",function(e,t){return this._get(n,t)}),$.data(e,PROP_NAME,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.dpDiv.show())},_dialogDatepicker:function(e,t,i,n,a){var o=this._dialogInst;if(!o){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(o=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=n&&"span"!=n||t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var a=e.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var a=e.children("."+this._inlineClass);a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var a=t||{};if("string"==typeof t&&((a={})[t]=i),n){this._curInst==n&&this._hideDatepicker();var o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(n,"min"),s=this._getMinMaxDate(n,"max");extendRemove(n.settings,a),null!==r&&a.dateFormat!==undefined&&a.minDate===undefined&&(n.settings.minDate=this._formatDate(n,r)),null!==s&&a.dateFormat!==undefined&&a.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,s)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,o),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var a=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);return a[0]?$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,a[0]):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||n<" "||!i||-1<i.indexOf(n)}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t))&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){if("input"!=(e=e.target||e).nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var i=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=i&&$.datepicker._curInst.dpDiv.stop(!0,!0);var t=$.datepicker._get(i,"beforeShow");extendRemove(i.settings,t?t.apply(e,[e,i]):{}),i.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(i),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var n=!1;$(e).parents().each(function(){return!(n|="fixed"==$(this).css("position"))}),n&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(i),a=$.datepicker._checkOffset(i,a,n),i.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!i.inline){var o=$.datepicker._get(i,"showAnim"),r=$.datepicker._get(i,"duration"),s=function(){var e=i.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var t=$.datepicker._getBorders(i.dpDiv);e.css({left:-t[0],top:-t[1],width:i.dpDiv.outerWidth(),height:i.dpDiv.outerHeight()})}};i.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?i.dpDiv.show(o,$.datepicker._get(i,"showOptions"),r,s):i.dpDiv[o||"show"](o?r:null,s),o&&r||s(),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),$.datepicker._curInst=i}}},_updateDatepicker:function(e){var t=$.datepicker._getBorders(e.dpDiv);(instActive=e).dpDiv.empty().append(this._generateHTML(e));var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),a=n[1];if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<a&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+$(document).scrollLeft(),l=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?n-o:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>s&&n<s?Math.abs(t.left+n-s):0),t.top-=Math.min(t.top,t.top+a>l&&a<l?Math.abs(a+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),a=function(){$.datepicker._tidyDialog(t),this._curInst=null};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,a):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,a),i||a();var o=this._get(t,"onClose");o&&o.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target);t[0].id==$.datepicker._mainDivId||0!=t.parents("#"+$.datepicker._mainDivId).length||t.hasClass($.datepicker.markerClassName)||t.hasClass($.datepicker._triggerClass)||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI||$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,t+("M"==i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),a=this._getInst(n[0]);a._selectingMonthYear=!1,a["selected"+("M"==i?"Month":"Year")]=a["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_clickMonthYear:function(e){var t=$(e),i=this._getInst(t[0]);i.input&&i._selectingMonthYear&&setTimeout(function(){i.input.focus()},0),i._selectingMonthYear=!i._selectingMonthYear},_selectDay:function(e,t,i,n){var a=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(a[0])){var o=this._getInst(a[0]);o.selectedDay=o.currentDay=$("a",n).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var a=this._get(n,"onSelect");a?a.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),a=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(a)})}},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(i,o,e){if(null==i||null==o)throw"Invalid arguments";if(""==(o="object"==typeof o?o.toString():o+""))return null;var t=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10);for(var n=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,a=(e?e.dayNames:null)||this._defaults.dayNames,r=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,s=(e?e.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,u=-1,p=!1,h=function(e){var t=b+1<i.length&&i.charAt(b+1)==e;return t&&b++,t},f=function(e){var t=h(e),i=new RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e&&t?4:"o"==e?3:2)+"}"),n=o.substring(v).match(i);if(!n)throw"Missing number at position "+v;return v+=n[0].length,parseInt(n[0],10)},m=function(e,t,i){var n=$.map(h(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),a=-1;if($.each(n,function(e,t){var i=t[1];if(o.substr(v,i.length).toLowerCase()==i.toLowerCase())return a=t[0],v+=i.length,!1}),-1!=a)return a+1;throw"Unknown name at position "+v},g=function(){if(o.charAt(v)!=i.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<i.length;b++)if(p)"'"!=i.charAt(b)||h("'")?g():p=!1;else switch(i.charAt(b)){case"d":d=f("d");break;case"D":m("D",n,a);break;case"o":u=f("o");break;case"m":c=f("m");break;case"M":c=m("M",r,s);break;case"y":l=f("y");break;case"@":l=(_=new Date(f("@"))).getFullYear(),c=_.getMonth()+1,d=_.getDate();break;case"!":var _;l=(_=new Date((f("!")-this._ticksTo1970)/1e4)).getFullYear(),c=_.getMonth()+1,d=_.getDate();break;case"'":h("'")?g():p=!0;break;default:g()}if(-1==l?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=t?0:-100)),-1<u)for(c=1,d=u;;){var y=this._getDaysInMonth(l,c-1);if(d<=y)break;c++,d-=y}if((_=this._daylightSavingAdjust(new Date(l,c-1,d))).getFullYear()!=l||_.getMonth()+1!=c||_.getDate()!=d)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(i,e,t){if(!e)return"";var n=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,a=(t?t.dayNames:null)||this._defaults.dayNames,o=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,r=(t?t.monthNames:null)||this._defaults.monthNames,s=function(e){var t=p+1<i.length&&i.charAt(p+1)==e;return t&&p++,t},l=function(e,t,i){var n=""+t;if(s(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return s(e)?n[t]:i[t]},d="",u=!1;if(e)for(var p=0;p<i.length;p++)if(u)"'"!=i.charAt(p)||s("'")?d+=i.charAt(p):u=!1;else switch(i.charAt(p)){case"d":d+=l("d",e.getDate(),2);break;case"D":d+=c("D",e.getDay(),n,a);break;case"o":d+=l("o",(e.getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5,3);break;case"m":d+=l("m",e.getMonth()+1,2);break;case"M":d+=c("M",e.getMonth(),o,r);break;case"y":d+=s("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":s("'")?d+="'":u=!0;break;default:d+=i.charAt(p)}return d},_possibleChars:function(i){for(var e="",t=!1,n=function(e){var t=a+1<i.length&&i.charAt(a+1)==e;return t&&a++,t},a=0;a<i.length;a++)if(t)"'"!=i.charAt(a)||n("'")?e+=i.charAt(a):t=!1;else switch(i.charAt(a)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":n("'")?e+="'":t=!0;break;default:e+=i.charAt(a)}return e},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,a=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{i=this.parseDate(a,o,r)||n}catch(e){this.log(e),o=t?"":o}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=o?i.getDate():0,e.currentMonth=o?i.getMonth():0,e.currentYear=o?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var i,n,a=null==e||""===e?t:"string"==typeof e?function(e){try{return $.datepicker.parseDate($.datepicker._get(s,"dateFormat"),e,$.datepicker._getFormatConfig(s))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(s):null)||new Date,i=t.getFullYear(),n=t.getMonth(),a=t.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=o.exec(e);r;){switch(r[2]||"d"){case"d":case"D":a+=parseInt(r[1],10);break;case"w":case"W":a+=7*parseInt(r[1],10);break;case"m":case"M":n+=parseInt(r[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(r[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(i,n))}r=o.exec(e)}return new Date(i,n,a)}(e):"number"==typeof e?isNaN(e)?t:(i=e,(n=new Date).setDate(n.getDate()+i),n):new Date(e.getTime());return(a=a&&"Invalid Date"==a.toString()?t:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,o=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),a==e.selectedMonth&&o==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),a=this._get(e,"hideIfNoPrevNext"),o=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=r[0]||1!=r[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),h=e.drawMonth-s,f=e.drawYear;if(h<0&&(h+=12,f--),p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-r[0]*r[1]+1,p.getDate()));for(m=u&&m<u?u:m;this._daylightSavingAdjust(new Date(f,h,1))>m;)--h<0&&(h=11,f--)}e.drawMonth=h,e.drawYear=f;var g=this._get(e,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(f,h-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,h)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', -"+l+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":a?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=o?this.formatDate(b,this._daylightSavingAdjust(new Date(f,h+l,1)),this._getFormatConfig(e)):b;var _=this._canAdjustMonth(e,1,f,h)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', +"+l+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":a?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",y=this._get(e,"currentText"),A=this._get(e,"gotoCurrent")&&e.currentDay?d:t;y=o?this.formatDate(y,A,this._getFormatConfig(e)):y;var w=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",x=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?w:"")+(this._isInRange(e,A)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+e.id+"');\">"+y+"</button>":"")+(i?"":w)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;for(var C=this._get(e,"showWeek"),S=this._get(e,"dayNames"),T=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),D=this._get(e,"monthNames"),E=this._get(e,"monthNamesShort"),I=this._get(e,"beforeShowDay"),P=this._get(e,"showOtherMonths"),M=this._get(e,"selectOtherMonths"),O=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),N="",j=0;j<r[0];j++){for(var L="",R=0;R<r[1];R++){var F=this._daylightSavingAdjust(new Date(f,h,e.selectedDay)),z=" ui-corner-all",q="";if(c){if(q+='<div class="ui-datepicker-group',1<r[1])switch(R){case 0:q+=" ui-datepicker-group-first",z=" ui-corner-"+(i?"right":"left");break;case r[1]-1:q+=" ui-datepicker-group-last",z=" ui-corner-"+(i?"left":"right");break;default:q+=" ui-datepicker-group-middle",z=""}q+='">'}q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+z+'">'+(/all|left/.test(z)&&0==j?i?_:v:"")+(/all|right/.test(z)&&0==j?i?v:_:"")+this._generateMonthYearHeader(e,h,f,u,p,0<j||0<R,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var H=C?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",W=0;W<7;W++){var V=(W+k)%7;H+="<th"+(5<=(W+k+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+S[V]+'">'+T[V]+"</span></th>"}q+=H+"</tr></thead><tbody>";var U=this._getDaysInMonth(f,h);f==e.selectedYear&&h==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,U));for(var B=(this._getFirstDayOfMonth(f,h)-k+7)%7,Y=c?6:Math.ceil((B+U)/7),K=this._daylightSavingAdjust(new Date(f,h,1-B)),J=0;J<Y;J++){q+="<tr>";var G=C?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(K)+"</td>":"";for(W=0;W<7;W++){var X=I?I.apply(e.input?e.input[0]:null,[K]):[!0,""],Q=K.getMonth()!=h,Z=Q&&!M||!X[0]||u&&K<u||p&&p<K;G+='<td class="'+(5<=(W+k+6)%7?" ui-datepicker-week-end":"")+(Q?" ui-datepicker-other-month":"")+(K.getTime()==F.getTime()&&h==e.selectedMonth&&e._keyEvent||O.getTime()==K.getTime()&&O.getTime()==F.getTime()?" "+this._dayOverClass:"")+(Z?" "+this._unselectableClass+" ui-state-disabled":"")+(Q&&!P?"":" "+X[1]+(K.getTime()==d.getTime()?" "+this._currentClass:"")+(K.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Q&&!P||!X[2]?"":' title="'+X[2]+'"')+(Z?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+e.id+"',"+K.getMonth()+","+K.getFullYear()+', this);return false;"')+">"+(Q&&!P?"&#xa0;":Z?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==t.getTime()?" ui-state-highlight":"")+(K.getTime()==d.getTime()?" ui-state-active":"")+(Q?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K)}q+=G+"</tr>"}11<++h&&(h=0,f++),L+=q+="</tbody></table>"+(c?"</div>"+(0<r[0]&&R==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}N+=L}return N+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,N},_generateMonthYearHeader:function(e,t,i,n,a,o,r,s){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',p="";if(o||!l)p+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var h=n&&n.getFullYear()==i,f=a&&a.getFullYear()==i;p+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+e.id+"');\">";for(var m=0;m<12;m++)(!h||m>=n.getMonth())&&(!f||m<=a.getMonth())&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+s[m]+"</option>");p+="</select>"}if(d||(u+=p+(!o&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},_=b(g[0]),y=Math.max(_,b(g[1]||""));for(_=n?Math.max(_,n.getFullYear()):_,y=a?Math.min(y,a.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+e.id+"');\">";_<=y;_++)e.yearshtml+='<option value="'+_+'"'+(_==i?' selected="selected"':"")+">"+_+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),d&&(u+=(!o&&l&&c?"":"&#xa0;")+p),u+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),a=e.drawMonth+("M"==i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,o)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&t<i?i:t;return a=n&&n<a?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:a[0]*a[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.13",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(s,e){var l="ui-dialog ui-widget ui-widget-content ui-corner-all ",o={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},c=s.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};s.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var t=s(this).css(e).offset().top;t<0&&s(this).css("top",e.top-t)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,i=t.options,e=i.title||"&#160;",n=s.ui.dialog.getTitleId(t.element),a=(t.uiDialog=s("<div></div>")).appendTo(document.body).hide().addClass(l+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(e){i.closeOnEscape&&e.keyCode&&e.keyCode===s.ui.keyCode.ESCAPE&&(t.close(e),e.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(e){t.moveToTop(!1,e)}),o=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(a),(t.uiDialogTitlebar=s("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(a)),r=s('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){r.addClass("ui-state-hover")},function(){r.removeClass("ui-state-hover")}).focus(function(){r.addClass("ui-state-focus")}).blur(function(){r.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(o);(t.uiDialogTitlebarCloseText=s("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(r),s("<span></span>").addClass("ui-dialog-title").attr("id",n).html(e).prependTo(o);s.isFunction(i.beforeclose)&&!s.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),o.find("*").add(o).disableSelection(),i.draggable&&s.fn.draggable&&t._makeDraggable(),i.resizable&&s.fn.resizable&&t._makeResizable(),t._createButtons(i.buttons),t._isOpen=!1,s.fn.bgiframe&&a.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){return this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),this},widget:function(){return this.uiDialog},close:function(e){var t,i,n=this;if(!1!==n._trigger("beforeClose",e))return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",e)}):(n.uiDialog.hide(),n._trigger("close",e)),s.ui.dialog.overlay.resize(),n.options.modal&&(t=0,s(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=s(this).css("z-index"),isNaN(i)||(t=Math.max(t,i)))}),s.ui.dialog.maxZ=t),n},isOpen:function(){return this._isOpen},moveToTop:function(e,t){var i,n=this,a=n.options;return a.modal&&!e||!a.stack&&!a.modal?n._trigger("focus",t):(a.zIndex>s.ui.dialog.maxZ&&(s.ui.dialog.maxZ=a.zIndex),n.overlay&&(s.ui.dialog.maxZ+=1,n.overlay.$el.css("z-index",s.ui.dialog.overlay.maxZ=s.ui.dialog.maxZ)),i={scrollTop:n.element.attr("scrollTop"),scrollLeft:n.element.attr("scrollLeft")},s.ui.dialog.maxZ+=1,n.uiDialog.css("z-index",s.ui.dialog.maxZ),n.element.attr(i),n._trigger("focus",t),n)},open:function(){if(!this._isOpen){var e=this,t=e.options,i=e.uiDialog;return e.overlay=t.modal?new s.ui.dialog.overlay(e):null,e._size(),e._position(t.position),i.show(t.show),e.moveToTop(!0),t.modal&&i.bind("keypress.ui-dialog",function(e){if(e.keyCode===s.ui.keyCode.TAB){var t=s(":tabbable",this),i=t.filter(":first"),n=t.filter(":last");return e.target!==n[0]||e.shiftKey?e.target===i[0]&&e.shiftKey?(n.focus(1),!1):void 0:(i.focus(1),!1)}}),s(e.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e}},_createButtons:function(e){var n=this,t=!1,i=s("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),a=s("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);n.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof e&&null!==e&&s.each(e,function(){return!(t=!0)}),t&&(s.each(e,function(e,t){t=s.isFunction(t)?{click:t,text:e}:t;var i=s('<button type="button"></button>').click(function(){t.click.apply(n.element[0],arguments)}).appendTo(a);s.each(t,function(e,t){"click"!==e&&(e in c?i[e](t):i.attr(e,t))}),s.fn.button&&i.button()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){var i,n=this,a=n.options,o=s(document);function r(e){return{position:e.position,offset:e.offset}}n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){i="auto"===a.height?"auto":s(this).height(),s(this).height(s(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",e,r(t))},drag:function(e,t){n._trigger("drag",e,r(t))},stop:function(e,t){a.position=[t.position.left-o.scrollLeft(),t.position.top-o.scrollTop()],s(this).removeClass("ui-dialog-dragging").height(i),n._trigger("dragStop",e,r(t)),s.ui.dialog.overlay.resize()}})},_makeResizable:function(e){e=void 0===e?this.options.resizable:e;var i=this,n=i.options,t=i.uiDialog.css("position"),a="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:i.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:i._minHeight(),handles:a,start:function(e,t){s(this).addClass("ui-dialog-resizing"),i._trigger("resizeStart",e,o(t))},resize:function(e,t){i._trigger("resize",e,o(t))},stop:function(e,t){s(this).removeClass("ui-dialog-resizing"),n.height=s(this).height(),n.width=s(this).width(),i._trigger("resizeStop",e,o(t)),s.ui.dialog.overlay.resize()}}).css("position",t).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(e){var t,i=[],n=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(1===(i=e.split?e.split(" "):[e[0],e[1]]).length&&(i[1]=i[0]),s.each(["left","top"],function(e,t){+i[e]===i[e]&&(n[e]=i[e],i[e]=t)}),e={my:i.join(" "),at:i.join(" "),offset:n.join(" ")}),e=s.extend({},s.ui.dialog.prototype.options.position,e)):e=s.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(s.extend({of:window},e)),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n={},a=!1;s.each(e,function(e,t){i._setOption(e,t),e in o&&(a=!0),e in r&&(n[e]=t)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i=this.uiDialog;switch(e){case"beforeclose":e="beforeClose";break;case"buttons":this._createButtons(t);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+t);break;case"dialogClass":i.removeClass(this.options.dialogClass).addClass(l+t);break;case"disabled":t?i.addClass("ui-dialog-disabled"):i.removeClass("ui-dialog-disabled");break;case"draggable":var n=i.is(":data(draggable)");n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable();break;case"position":this._position(t);break;case"resizable":var a=i.is(":data(resizable)");a&&!t&&i.resizable("destroy"),a&&"string"==typeof t&&i.resizable("option","handles",t),a||!1===t||this._makeResizable(t);break;case"title":s(".ui-dialog-title",this.uiDialogTitlebar).html(""+(t||"&#160;"))}s.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var e,t,i=this.options,n=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).height(),t=Math.max(0,i.minHeight-e),"auto"===i.height)if(s.support.minHeight)this.element.css({minHeight:t,height:"auto"});else{this.uiDialog.show();var a=this.element.css("height","auto").height();n||this.uiDialog.hide(),this.element.height(Math.max(a,t))}else this.element.height(Math.max(i.height-e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),s.extend(s.ui.dialog,{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(e){this.$el=s.ui.dialog.overlay.create(e)}}),s.extend(s.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:s.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){s.ui.dialog.overlay.instances.length&&s(document).bind(s.ui.dialog.overlay.events,function(e){if(s(e.target).zIndex()<s.ui.dialog.overlay.maxZ)return!1})},1),s(document).bind("keydown.dialog-overlay",function(e){t.options.closeOnEscape&&e.keyCode&&e.keyCode===s.ui.keyCode.ESCAPE&&(t.close(e),e.preventDefault())}),s(window).bind("resize.dialog-overlay",s.ui.dialog.overlay.resize));var e=(this.oldInstances.pop()||s("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return s.fn.bgiframe&&e.bgiframe(),this.instances.push(e),e},destroy:function(e){var t=s.inArray(e,this.instances);-1!=t&&this.oldInstances.push(this.instances.splice(t,1)[0]),0===this.instances.length&&s([document,window]).unbind(".dialog-overlay"),e.remove();var i=0;s.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var e;return s.browser.msie&&s.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?s(window).height()+"px":e+"px":s(document).height()+"px"},width:function(){var e;return s.browser.msie&&s.browser.version<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?s(window).width()+"px":e+"px":s(document).width()+"px"},resize:function(){var e=s([]);s.each(s.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:s.ui.dialog.overlay.width(),height:s.ui.dialog.overlay.height()})}}),s.extend(s.ui.dialog.overlay.prototype,{destroy:function(){s.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(x,e){x.ui=x.ui||{};var a,k=Math.max,$=Math.abs,C=Math.round,n=/left|center|right/,o=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,c=x.fn.position;function S(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function T(e,t){return parseInt(x.css(e,t),10)||0}x.position={scrollbarWidth:function(){if(void 0!==a)return a;var e,t,i=x("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return x("body").append(i),e=n.offsetWidth,i.css("overflow","scroll"),e===(t=n.offsetWidth)&&(t=i[0].clientWidth),i.remove(),a=e-t},getScrollInfo:function(e){var t=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth,a="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:n?x.position.scrollbarWidth():0,height:a?x.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=x(e||window),i=x.isWindow(t[0]);return{element:t,isWindow:i,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:i?t.width():t.outerWidth(),height:i?t.height():t.outerHeight()}}},x.fn.position=function(p){if(!p||!p.of)return c.apply(this,arguments);p=x.extend({},p);var h,f,m,g,v,e,t,i,b=x(p.of),_=x.position.getWithinInfo(p.within),y=x.position.getScrollInfo(_),A=(p.collision||"flip").split(" "),w={};return e=9===(i=(t=b)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:x.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()},b[0].preventDefault&&(p.at="left top"),f=e.width,m=e.height,g=e.offset,v=x.extend({},g),x.each(["my","at"],function(){var e,t,i=(p[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",e=r.exec(i[0]),t=r.exec(i[1]),w[this]=[e?e[0]:0,t?t[0]:0],p[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===A.length&&(A[1]=A[0]),"right"===p.at[0]?v.left+=f:"center"===p.at[0]&&(v.left+=f/2),"bottom"===p.at[1]?v.top+=m:"center"===p.at[1]&&(v.top+=m/2),h=S(w.at,f,m),v.left+=h[0],v.top+=h[1],this.each(function(){var i,e,r=x(this),s=r.outerWidth(),l=r.outerHeight(),t=T(this,"marginLeft"),n=T(this,"marginTop"),a=s+t+T(this,"marginRight")+y.width,o=l+n+T(this,"marginBottom")+y.height,c=x.extend({},v),d=S(w.my,r.outerWidth(),r.outerHeight());if(p.offset){var u=p.offset.split(" ");0<u.length&&(d[0]+=parseInt(u[0]),1==u.length?d[1]+=parseInt(u[0]):d[1]+=parseInt(u[1]))}"right"===p.my[0]?c.left-=s:"center"===p.my[0]&&(c.left-=s/2),"bottom"===p.my[1]?c.top-=l:"center"===p.my[1]&&(c.top-=l/2),c.left+=d[0],c.top+=d[1],x.support.offsetFractions||(c.left=C(c.left),c.top=C(c.top)),i={marginLeft:t,marginTop:n},x.each(["left","top"],function(e,t){x.ui.position[A[e]]&&x.ui.position[A[e]][t](c,{targetWidth:f,targetHeight:m,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:a,collisionHeight:o,offset:[h[0]+d[0],h[1]+d[1]],my:p.my,at:p.at,within:_,elem:r})}),p.using&&(e=function(e){var t=g.left-c.left,i=t+f-s,n=g.top-c.top,a=n+m-l,o={target:{element:b,left:g.left,top:g.top,width:f,height:m},element:{element:r,left:c.left,top:c.top,width:s,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:a<0?"top":0<n?"bottom":"middle"};f<s&&$(t+i)<f&&(o.horizontal="center"),m<l&&$(n+a)<m&&(o.vertical="middle"),k($(t),$(i))>k($(n),$(a))?o.important="horizontal":o.important="vertical",p.using.call(this,e,o)}),r.offset(x.extend(c,{using:e}))})},x.ui.position={fit:{left:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=e.left-t.collisionPosition.marginLeft,s=a-r,l=r+t.collisionWidth-o-a;t.collisionWidth>o?0<s&&l<=0?(i=e.left+s+t.collisionWidth-o-a,e.left+=s-i):e.left=0<l&&s<=0?a:l<s?a+o-t.collisionWidth:a:0<s?e.left+=s:0<l?e.left-=l:e.left=k(e.left-r,e.left)},top:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,r=e.top-t.collisionPosition.marginTop,s=a-r,l=r+t.collisionHeight-o-a;t.collisionHeight>o?0<s&&l<=0?(i=e.top+s+t.collisionHeight-o-a,e.top+=s-i):e.top=0<l&&s<=0?a:l<s?a+o-t.collisionHeight:a:0<s?e.top+=s:0<l?e.top-=l:e.top=k(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,a=t.within,o=a.offset.left+a.scrollLeft,r=a.width,s=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,c=l-s,d=l+t.collisionWidth-r-s,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];c<0?((i=e.left+u+p+h+t.collisionWidth-r-o)<0||i<$(c))&&(e.left+=u+p+h):0<d&&(0<(n=e.left-t.collisionPosition.marginLeft+u+p+h-s)||$(n)<d)&&(e.left+=u+p+h)},top:function(e,t){var i,n,a=t.within,o=a.offset.top+a.scrollTop,r=a.height,s=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-s,d=l+t.collisionHeight-r-s,u="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,h=-2*t.offset[1];c<0?(n=e.top+u+p+h+t.collisionHeight-r-o,e.top+u+p+h>c&&(n<0||n<$(c))&&(e.top+=u+p+h)):0<d&&(i=e.top-t.collisionPosition.marginTop+u+p+h-s,e.top+u+p+h>d&&(0<i||$(i)<d)&&(e.top+=u+p+h))}},flipfit:{left:function(){x.ui.position.flip.left.apply(this,arguments),x.ui.position.fit.left.apply(this,arguments)},top:function(){x.ui.position.flip.top.apply(this,arguments),x.ui.position.fit.top.apply(this,arguments)}}},function(){var e,t,i,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");for(a in e=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&x.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)e.style[a]=i[a];e.appendChild(r),(t=o||document.documentElement).insertBefore(e,t.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=x(r).offset().left,x.support.offsetFractions=10<n&&n<11,e.innerHTML="",t.removeChild(e)}()}(jQuery),function(i,e){i.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=i("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),i.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return void 0===e?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),i.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),i.extend(i.ui.progressbar,{version:"1.8.13"})}(jQuery),function(d,e){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var r=this,e=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),i=e.values&&e.values.length||1,n=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":"")),this.range=d([]),e.range&&(!0===e.range&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&2!==e.values.length&&(e.values=[e.values[0],e.values[0]])),this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:"")));for(var a=t.length;a<i;a+=1)n.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=t.add(d(n.join("")).appendTo(r.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){e.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")}),this.handles.each(function(e){d(this).data("index.ui-slider-handle",e)}),this.handles.keydown(function(e){var t,i,n,a=!0,o=d(this).data("index.ui-slider-handle");if(!r.options.disabled){switch(e.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(a=!1,!r._keySliding&&(r._keySliding=!0,d(this).addClass("ui-state-active"),!1===r._start(e,o)))return}switch(n=r.options.step,t=i=r.options.values&&r.options.values.length?r.values(o):r.value(),e.keyCode){case d.ui.keyCode.HOME:i=r._valueMin();break;case d.ui.keyCode.END:i=r._valueMax();break;case d.ui.keyCode.PAGE_UP:i=r._trimAlignValue(t+(r._valueMax()-r._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:i=r._trimAlignValue(t-(r._valueMax()-r._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(t===r._valueMax())return;i=r._trimAlignValue(t+n);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(t===r._valueMin())return;i=r._trimAlignValue(t-n)}return r._slide(e,o,i),a}}).keyup(function(e){var t=d(this).data("index.ui-slider-handle");r._keySliding&&(r._keySliding=!1,r._stop(e,t),r._change(e,t),d(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(e){var t,i,n,a,o,r,s,l,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,(o=this).handles.each(function(e){var t=Math.abs(i-o.values(e));t<n&&(n=t,a=d(this),r=e)}),!0===c.range&&this.values(1)===c.min&&(r+=1,a=d(this.handles[r])),!1!==this._start(e,r)&&(this._mouseSliding=!0,o._handleIndex=r,a.addClass("ui-state-active").focus(),s=a.offset(),l=!d(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-a.width()/2,top:e.pageY-s.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,i),this._animateOff=!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,a,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),1<(n=i/t)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),o=this._valueMin()+n*a,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,a,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n<i||1===t&&i<n)&&(i=n),i!==this.values(t)&&((a=this.values())[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),n=this.values(t?0:1),!1!==o&&this.values(t,i,!0))):i!==this.value()&&!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,n,a;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!d.isArray(e))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,n=e,a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,t){var i,n=0;switch(d.isArray(this.options.values)&&(n=this.options.values.length),d.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":t?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<n;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t;return alignValue=e-i,2*Math.abs(i)>=t&&(alignValue+=0<i?t:-t),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var i,n,e,t,a,o=this.options.range,r=this.options,s=this,l=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(e,t){i=(s.values(e)-s._valueMin())/(s._valueMax()-s._valueMin())*100,c["horizontal"===s.orientation?"left":"bottom"]=i+"%",d(this).stop(1,1)[l?"animate":"css"](c,r.animate),!0===s.options.range&&("horizontal"===s.orientation?(0===e&&s.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===e&&s.range[l?"animate":"css"]({width:i-n+"%"},{queue:!1,duration:r.animate})):(0===e&&s.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===e&&s.range[l?"animate":"css"]({height:i-n+"%"},{queue:!1,duration:r.animate}))),n=i}):(e=this.value(),t=this._valueMin(),a=this._valueMax(),i=a!==t?(e-t)/(a-t)*100:0,c["horizontal"===s.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}}),d.extend(d.ui.slider,{version:"1.8.13"})}(jQuery),function(h,e){var i=0,n=0;h.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++i},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var e=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++n);return h.cookie.apply(null,[e].concat(h.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var e=h(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},_tabify:function(e){var i,n,s=this,l=this.options,c=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=h(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return h("a",this)[0]}),this.panels=h([]),this.anchors.each(function(e,t){var i,n=h(t).attr("href"),a=n.split("#")[0];if(a&&(a===location.toString().split("#")[0]||(i=h("base")[0])&&a===i.href)&&(n=t.hash,t.href=n),c.test(n))s.panels=s.panels.add(s.element.find(s._sanitizeSelector(n)));else if(n&&"#"!==n){h.data(t,"href.tabs",n),h.data(t,"load.tabs",n.replace(/#.*$/,""));var o=s._tabId(t);t.href="#"+o;var r=s.element.find("#"+o);r.length||(r=h(l.panelTemplate).attr("id",o).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(s.panels[e-1]||s.list)).data("destroy.tabs",!0),s.panels=s.panels.add(r)}else l.disabled.push(e)}),e?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===l.selected?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return l.selected=e,!1}),"number"!=typeof l.selected&&l.cookie&&(l.selected=parseInt(s._cookie(),10)),"number"!=typeof l.selected&&this.lis.filter(".ui-tabs-selected").length&&(l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),l.selected=l.selected||(this.lis.length?0:-1)):null===l.selected&&(l.selected=-1),l.selected=0<=l.selected&&this.anchors[l.selected]||l.selected<0?l.selected:0,l.disabled=h.unique(l.disabled.concat(h.map(this.lis.filter(".ui-state-disabled"),function(e,t){return s.lis.index(e)}))).sort(),-1!=h.inArray(l.selected,l.disabled)&&l.disabled.splice(h.inArray(l.selected,l.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),0<=l.selected&&this.anchors.length&&(s.element.find(s._sanitizeSelector(s.anchors[l.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(l.selected).addClass("ui-tabs-selected ui-state-active"),s.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[l.selected],s.element.find(s._sanitizeSelector(s.anchors[l.selected].hash))[0]))}),this.load(l.selected)),h(window).bind("unload",function(){s.lis.add(s.anchors).unbind(".tabs"),s.lis=s.anchors=s.panels=null})):l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[l.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),l.cookie&&this._cookie(l.selected,l.cookie);for(var t,a=0;t=this.lis[a];a++)h(t)[-1==h.inArray(a,l.disabled)||h(t).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(!1===l.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==l.event){var o=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},r=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){o("hover",h(this))}),this.lis.bind("mouseout.tabs",function(){r("hover",h(this))}),this.anchors.bind("focus.tabs",function(){o("focus",h(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){r("focus",h(this).closest("li"))})}function d(e,t){e.css("display",""),!h.support.opacity&&t.opacity&&e[0].style.removeAttribute("filter")}l.fx&&(h.isArray(l.fx)?(i=l.fx[0],n=l.fx[1]):i=n=l.fx);var u=n?function(e,t){h(e).closest("li").addClass("ui-tabs-selected ui-state-active"),t.hide().removeClass("ui-tabs-hide").animate(n,n.duration||"normal",function(){d(t,n),s._trigger("show",null,s._ui(e,t[0]))})}:function(e,t){h(e).closest("li").addClass("ui-tabs-selected ui-state-active"),t.removeClass("ui-tabs-hide"),s._trigger("show",null,s._ui(e,t[0]))},p=i?function(e,t){t.animate(i,i.duration||"normal",function(){s.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),d(t,i),s.element.dequeue("tabs")})}:function(e,t,i){s.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),s.element.dequeue("tabs")};this.anchors.bind(l.event+".tabs",function(){var e=this,t=h(e).closest("li"),i=s.panels.filter(":not(.ui-tabs-hide)"),n=s.element.find(s._sanitizeSelector(e.hash));if(t.hasClass("ui-tabs-selected")&&!l.collapsible||t.hasClass("ui-state-disabled")||t.hasClass("ui-state-processing")||s.panels.filter(":animated").length||!1===s._trigger("select",null,s._ui(this,n[0])))return this.blur(),!1;if(l.selected=s.anchors.index(this),s.abort(),l.collapsible){if(t.hasClass("ui-tabs-selected"))return l.selected=-1,l.cookie&&s._cookie(l.selected,l.cookie),s.element.queue("tabs",function(){p(e,i)}).dequeue("tabs"),this.blur(),!1;if(!i.length)return l.cookie&&s._cookie(l.selected,l.cookie),s.element.queue("tabs",function(){u(e,n)}),s.load(s.anchors.index(this)),this.blur(),!1}if(l.cookie&&s._cookie(l.selected,l.cookie),!n.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";i.length&&s.element.queue("tabs",function(){p(e,i)}),s.element.queue("tabs",function(){u(e,n)}),s.load(s.anchors.index(this)),h.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var e=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var e=h.data(this,"href.tabs");e&&(this.href=e);var i=h(this).unbind(".tabs");h.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){h.data(this,"destroy.tabs")?h(this).remove():h(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),e.cookie&&this._cookie(null,e.cookie),this},add:function(e,t,i){void 0===i&&(i=this.anchors.length);var n=this,a=this.options,o=h(a.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,t)),r=e.indexOf("#")?this._tabId(h("a",o)[0]):e.replace("#","");o.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var s=n.element.find("#"+r);return s.length||(s=h(a.panelTemplate).attr("id",r).data("destroy.tabs",!0)),s.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(o.appendTo(this.list),s.appendTo(this.list[0].parentNode)):(o.insertBefore(this.lis[i]),s.insertBefore(this.panels[i])),a.disabled=h.map(a.disabled,function(e,t){return i<=e?++e:e}),this._tabify(),1==this.anchors.length&&(a.selected=0,o.addClass("ui-tabs-selected ui-state-active"),s.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(i){i=this._getIndex(i);var e=this.options,t=this.lis.eq(i).remove(),n=this.panels.eq(i).remove();return t.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(i+(i+1<this.anchors.length?1:-1)),e.disabled=h.map(h.grep(e.disabled,function(e,t){return e!=i}),function(e,t){return i<=e?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(t.find("a")[0],n[0])),this},enable:function(i){i=this._getIndex(i);var e=this.options;if(-1!=h.inArray(i,e.disabled))return this.lis.eq(i).removeClass("ui-state-disabled"),e.disabled=h.grep(e.disabled,function(e,t){return e!=i}),this._trigger("enable",null,this._ui(this.anchors[i],this.panels[i])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(-1==(e=this._getIndex(e))){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(n){n=this._getIndex(n);var a=this,o=this.options,r=this.anchors.eq(n)[0],e=h.data(r,"load.tabs");if(this.abort(),e&&(0===this.element.queue("tabs").length||!h.data(r,"cache.tabs"))){if(this.lis.eq(n).addClass("ui-state-processing"),o.spinner){var t=h("span",r);t.data("label.tabs",t.html()).html(o.spinner)}return this.xhr=h.ajax(h.extend({},o.ajaxOptions,{url:e,success:function(e,t){a.element.find(a._sanitizeSelector(r.hash)).html(e),a._cleanup(),o.cache&&h.data(r,"cache.tabs",!0),a._trigger("load",null,a._ui(a.anchors[n],a.panels[n]));try{o.ajaxOptions.success(e,t)}catch(e){}},error:function(e,t,i){a._cleanup(),a._trigger("load",null,a._ui(a.anchors[n],a.panels[n]));try{o.ajaxOptions.error(e,t,n,r)}catch(i){}}})),a.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),h.extend(h.ui.tabs,{version:"1.8.13"}),h.extend(h.ui.tabs.prototype,{rotation:null,rotate:function(i,e){var n=this,a=this.options,o=n._rotate||(n._rotate=function(e){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=a.selected;n.select(++e<n.anchors.length?e:0)},i),e&&e.stopPropagation()}),r=n._unrotate||(n._unrotate=e?function(e){t=a.selected,o()}:function(e){e.clientX&&n.rotate(null)});return i?(this.element.bind("tabsshow",o),this.anchors.bind(a.event+".tabs",r),o()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",o),this.anchors.unbind(a.event+".tabs",r),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(p){"use strict";p.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:p(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,sequentialUploads:!1,forceIframeTransport:!1,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},fail:function(e,t){},processData:!1,contentType:!1,cache:!1,dataType:"json"},fail:function(e,t){},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(e){var t="undefined";return!(e.forceIframeTransport||typeof XMLHttpRequestUpload===t||typeof File===t||e.multipart&&typeof FormData===t)},_getFormData:function(e){var i;return"function"==typeof e.formData?e.formData(e.form):p.isArray(e.formData)?e.formData:e.formData?(i=[],p.each(e.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(e){var i=0;return p.each(e,function(e,t){i+=t.size||1}),i},_onProgress:function(e,t){if(e.lengthComputable){var i=t.total||this._getTotal(t.files),n=parseInt(e.loaded/e.total*(t.chunkSize||i),10)+(t.uploadedBytes||0);this._loaded+=n-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=n,t.total=i,this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(t){var i=this,e=t.xhr?t.xhr():p.ajaxSettings.xhr();e.upload&&e.upload.addEventListener&&(e.upload.addEventListener("progress",function(e){i._onProgress(e,t)},!1),t.xhr=function(){return e})},_initXHRData:function(i){var n,e=i.files[0];i.multipart&&!i.blob||(i.headers=p.extend(i.headers,{"X-File-Name":e.name,"X-File-Type":e.type,"X-File-Size":e.size}),i.blob?i.multipart||(i.contentType="application/octet-stream",i.data=i.blob):(i.contentType=e.type,i.data=e)),i.multipart&&(i.formData instanceof FormData?n=i.formData:(n=new FormData,p.each(this._getFormData(i),function(e,t){n.append(t.name,t.value)})),i.blob?n.append(i.paramName,i.blob):p.each(i.files,function(e,t){t instanceof Blob&&n.append(i.paramName,t)}),i.data=n),i.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e)},_initDataSettings:function(e){this._isXHRUpload(e)?this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)):this._initIframeSettings(e)},_initFormSettings:function(e){e.form&&e.form.length||(e.form=p(e.fileInput.prop("form"))),e.paramName||(e.paramName=e.fileInput.prop("name")||"files[]"),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&(e.type="POST")},_getAJAXSettings:function(e){var t=p.extend({},this.options,e);return this._initFormSettings(t),this._initDataSettings(t),t},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(e,t){var i=p.Deferred(),n=i.promise();return t=t||this.options.context||n,!0===e?i.resolveWith(t):!1===e&&i.rejectWith(t),n.abort=i.promise,this._enhancePromise(n)},_chunkedUpload:function(i,e){var n,t,a,o,r=this,s=i.files[0],l=s.size,c=i.uploadedBytes=i.uploadedBytes||0,d=i.maxChunkSize||l,u=s.webkitSlice||s.mozSlice||s.slice;return!(!(this._isXHRUpload(i)&&u&&(c||d<l))||i.data)&&(!!e||(l<=c?(s.error="uploadedBytes",this._getXHRPromise(!1)):(t=Math.ceil((l-c)/d),(o=(n=function(t){return t?n(t-=1).pipe(function(){var e=p.extend({},i);return e.blob=u.call(s,c+t*d,c+(t+1)*d),e.chunkSize=e.blob.size,r._initXHRData(e),r._initProgressListener(e),a=(proboards.ajax(e)||r._getXHRPromise(!1,e.context)).done(function(){e.loaded||r._onProgress(p.Event("progress",{lengthComputable:!0,loaded:e.chunkSize,total:e.chunkSize}),e),i.uploadedBytes=e.uploadedBytes+=e.chunkSize})}):r._getXHRPromise(!0)})(t)).abort=function(){return a.abort()},this._enhancePromise(o))))},_beforeSend:function(e,t){0===this._active&&this._trigger("start"),p(".fileupload-content").css("display","block"),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(e,t,i,n){this._isXHRUpload(n)||this._onProgress(p.Event("progress",{lengthComputable:!0,loaded:1,total:1}),n),n.result=e,n.textStatus=t,n.jqXHR=i,this._trigger("done",null,n)},_onFail:function(e,t,i,n){n.jqXHR=e,n.result=e,n.textStatus=t,n.errorThrown=i,this._trigger("fail",null,n),n.recalculateProgress&&(this._loaded-=n.loaded||n.uploadedBytes||0,this._total-=n.total||this._getTotal(n.files))},_onAlways:function(e,t,i,n){this._active-=1,n.result=e,n.textStatus=t,n.jqXHR=i,this._trigger("always",null,n),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(e,t){var i,n,a=this,o=a._getAJAXSettings(t),r=function(){return i=(!1!==a._trigger("send",e,o)&&(a._chunkedUpload(o)||proboards.ajax(o))||a._getXHRPromise(!1,o.context)).done(function(e,t,i){a._onDone(e,t,i,o)}).fail(function(e,t,i){a._onFail(e,t,i,o)}).always(function(e,t,i){a._onAlways(e,t,i,o)})};return this._beforeSend(e,o),this.options.sequentialUploads?((n=this._sequence=this._sequence.pipe(r,r)).abort=function(){return i.abort()},this._enhancePromise(n)):r()},_onAdd:function(n,a){var o=this,r=!0,e=p.extend({},this.options,a);return e.singleFileUploads&&this._isXHRUpload(e)?(p.each(a.files,function(e,t){var i=p.extend({},a,{files:[t]});return i.submit=function(){return o._onSend(n,i)},r=o._trigger("add",n,i)}),r):a.files.length?((a=p.extend({},a)).submit=function(){return o._onSend(n,a)},this._trigger("add",n,a)):void 0},_normalizeFile:function(e,t){void 0===t.name&&void 0===t.size&&(t.name=t.fileName,t.size=t.fileSize)},_replaceFileInput:function(i){var n=i.clone(!0);p("<form></form>").append(n)[0].reset(),i.after(n).detach(),p.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_onChange:function(e){var t=e.data.fileupload,i={files:p.each(p.makeArray(e.target.files),t._normalizeFile),fileInput:p(e.target),form:p(e.target.form)};if(i.files.length||(i.files=[{name:e.target.value.replace(/^.*\\/,"")}]),i.form.length?i.fileInput.data("blueimp.fileupload.form",i.form):i.form=i.fileInput.data("blueimp.fileupload.form"),t.options.replaceFileInput&&t._replaceFileInput(i.fileInput),!1===t._trigger("change",e,i)||!1===t._onAdd(e,i))return!1},_onDrop:function(e){var t=e.data.fileupload,i=e.dataTransfer=e.originalEvent.dataTransfer,n={files:p.each(p.makeArray(i.files),t._normalizeFile)};if(!1===t._trigger("drop",e,n)||!1===t._onAdd(e,n))return!1;e.preventDefault()},_onDragOver:function(e){var t=e.data.fileupload,i=e.dataTransfer=e.originalEvent.dataTransfer;if(!1===t._trigger("dragover",e))return!1;i.dropEffect=i.effectAllowed="copy",e.preventDefault()},_initEventHandlers:function(){var e=this.options.namespace||this.name;p.browser.msie||-1!=navigator.userAgent.indexOf("Trident")||this.options.dropZone.bind("dragover."+e,{fileupload:this},this._onDragOver).bind("drop."+e,{fileupload:this},this._onDrop),this.options.fileInput.bind("change."+e,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var e=this.options.namespace||this.name;this.options.dropZone.unbind("dragover."+e,this._onDragOver).unbind("drop."+e,this._onDrop),this.options.fileInput.unbind("change."+e,this._onChange)},_beforeSetOption:function(e,t){this._destroyEventHandlers()},_afterSetOption:function(e,t){var i=this.options;i.fileInput||(i.fileInput=p()),i.dropZone||(i.dropZone=p()),this._initEventHandlers()},_setOption:function(e,t){var i=-1!==p.inArray(e,this._refreshOptionsList);i&&this._beforeSetOption(e,t),p.Widget.prototype._setOption.call(this,e,t),i&&this._afterSetOption(e,t)},_create:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):e.fileInput||(e.fileInput=p()),(p.browser.msie||-1!=navigator.userAgent.indexOf("Trident"))&&e.fileInput.prop("multiple",!1),e.dropZone||(e.dropZone=p()),this._sequence=this._getXHRPromise(!0),this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),p.Widget.prototype.destroy.call(this)},enable:function(){p.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),p.Widget.prototype.disable.call(this)},add:function(e){e&&!this.options.disabled&&(e.files=p.each(p.makeArray(e.files),this._normalizeFile),this._onAdd(null,e))},send:function(e){return e&&!this.options.disabled&&(e.files=p.each(p.makeArray(e.files),this._normalizeFile),e.files.length)?this._onSend(null,e):this._getXHRPromise(!1,e&&e.context)}})}(jQuery),function(r){"use strict";r.widget("blueimpUI.fileupload",r.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:3,maxFileSize:10485760,minFileSize:1,acceptFileTypes:/.+$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxWidth:50,previewMaxHeight:50,previewAsCanvas:!0,uploadTemplate:r("#template-upload"),downloadTemplate:r("#template-download"),filesContainer:void 0,dataType:"json",updateLimits:function(){},getNumberOfFiles:function(){return r(".template-download, .template-upload",this.filesContainer).not(".ui-state-error").length},add:function(e,i){var t=r(this).data("fileupload");i.isValidated=t._validate(i.files),i.context=t._renderUpload(i.files).appendTo(r(this).find(".files")).fadeIn(function(){r(this).show()}).data("data",i),(t.options.autoUpload||i.autoUpload)&&i.isValidated?i.jqXHR=i.submit():i.context.each(function(e){if("abort"!==i.errorThrown){var t=this;window.setTimeout(function(){r(t).hide()},4e3)}})},send:function(e,t){if(("function"!=typeof t.error&&(t.error=function(){}),!t.isValidated)&&!r(this).data("fileupload")._validate(t.files))return!1;t.context&&t.dataType&&"iframe"===t.dataType.substr(0,6)&&t.context.find(".ui-progressbar").progressbar("value",parseInt(100,10)),r(".ui-progressbar-value").show().css("width","100%")},done:function(e,i){var n=r(this).data("fileupload");i.context?i.context.each(function(e){var t;t=r.isArray(i.result)&&i.result[e]?i.result[e]:{error:i.result&&i.result.error||"emptyResult"},r(this).fadeOut(function(){n._renderDownload([t]).css("display","none").replaceAll(this).fadeIn(function(){r(this).show()}),n.options.updateLimits.call(n.element)})}):(n._renderDownload(i.result).css("display","none").appendTo(r(this).find(".files")).fadeIn(function(){r(this).show()}),n.options.updateLimits.call(n.element))},fail:function(e,n){var a=r(this).data("fileupload");n.context?n.context.each(function(i){r(this).fadeOut(function(){if("abort"!==n.errorThrown){var e=n.files[i];try{var t=n.result.responseText;t=r.parseJSON(t,{throwError:!0}),e.error=t.error}catch(e){}e.error=e.error||n.errorThrown||!0,a._renderDownload([e]).css("display","none").replaceAll(this).fadeIn(function(){r(this).show()}).delay(7e3).fadeOut(function(){r(this).remove(),r(".fileupload-buttonbar").show()})}n.context.remove(),a.options.updateLimits.call(a.element)})}):"abort"!==n.errorThrown&&(n.context=a._renderUpload(n.files).css("display","none").appendTo(r(this).find(".files")).fadeIn(function(){r(this).show()}).data("data",n))},progress:function(e,t){t.context&&t.context.find(".ui-progressbar").progressbar("value",parseInt(t.loaded/t.total*100,10))},destroy:function(e,t){var i=r(this).data("fileupload");t.url?proboards.ajax(r.extend(t,{success:function(){r(this).fadeOut(function(){r(this).remove(),i.options.updateLimits.call(i.element)})}})):t.context.fadeOut(function(){r(this).remove(),i.options.updateLimits.call(i.element)})}},_scaleImage:function(e,t){t=t||{};var i=document.createElement("canvas"),n=Math.min((t.maxWidth||e.width)/e.width,(t.maxHeight||e.height)/e.height);return 1<=n&&(n=Math.max((t.minWidth||e.width)/e.width,(t.minHeight||e.height)/e.height)),e.width=parseInt(e.width*n,10),e.height=parseInt(e.height*n,10),t.canvas&&i.getContext?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height),i):e},_createObjectURL:function(e){var t="undefined",i=typeof window.createObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL;return i?i.createObjectURL(e):""},_revokeObjectURL:function(e){var t="undefined",i=typeof window.revokeObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL;return!!i&&i.revokeObjectURL(e)},_loadFile:function(e,t){if("undefined"!=typeof FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=function(e){t(e.target.result)},i.readAsDataURL(e),!0}return!1},_loadImage:function(e,t,i){var n,a,o=this;i&&i.fileTypes&&!i.fileTypes.test(e.type)||(n=this._createObjectURL(e),a=r("<img>").bind("load",function(){r(this).unbind("load"),o._revokeObjectURL(n),t(o._scaleImage(a[0],i))}).prop("src",n),n||this._loadFile(e,function(e){a.prop("src",e)}),a.prop("alt","Thumbnail Preview"))},_enableDragToDesktop:function(){var e=r(this),t=e.prop("href"),i=decodeURIComponent(t.split("/").pop()).replace(/:/g,"-"),n="application/octet-stream";e.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[n,i,t].join(":"))}catch(e){}})},_formatFileSize:function(e){return void 0===e.size?"":1073741824<=e.size?(e.size/1073741824).toFixed(2)+" GB":1048576<=e.size?(e.size/1048576).toFixed(2)+" MB":(e.size/1024).toFixed(2)+" KB"},_validate:function(i){var n=this.options,a=!0;return r.each(i,function(e,t){t.error||("number"===r.type(n.maxNumberOfFiles)&&(n.getNumberOfFiles()||0)+i.length>n.maxNumberOfFiles?t.error="maxNumberOfFiles":n.acceptFileTypes.test(t.type)||n.acceptFileTypes.test(t.name)?n.maxFileSize&&t.size>n.maxFileSize?t.error="maxFileSize":"number"==typeof t.size&&t.size<n.minFileSize&&(t.error="minFileSize"):t.error="acceptFileTypes"),a=a&&!t.error}),a},_uploadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e},_renderUploadTemplate:function(e){var t=this;return r.tmpl(this.options.uploadTemplate,r.map(e,function(e){return t._uploadTemplateHelper(e)}))},_renderUpload:function(t){var a=this,o=this.options,e=this._renderUploadTemplate(t);return e instanceof r?(e.css("display","none"),e.find(".name div").slice(1).remove().end().first().progressbar(),e.find(".start button").slice(this.options.autoUpload?0:1).remove().end().first().button({text:!1,icons:{primary:"ui-icon-circle-arrow-e"}}),e.find(".cancel button").slice(1).remove().end().first().button({text:!1}),e.find(".preview").each(function(e,i){var n=r(this);o.previewFileTypes&&o.previewFileTypes.test(t[e].type)||n.addClass("none"),a._loadImage(t[e],function(e){r(e).hide().appendTo(i).fadeIn();var t=!("CANVAS"==e.nodeName||e&&r(e).attr("src"));n.toggleClass("none",t)},{maxWidth:o.previewMaxWidth,maxHeight:o.previewMaxHeight,fileTypes:o.previewFileTypes,canvas:o.previewAsCanvas})}),e):r()},_downloadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e.name||(e.name=""),e},_renderDownloadTemplate:function(e){var t=this;return r.tmpl(this.options.downloadTemplate,r.map(e,function(e){return t._downloadTemplateHelper(e)}))},_renderDownload:function(e){var t=this._renderDownloadTemplate(e);return t instanceof r?(t.css("display","none"),t.find(".delete button").button({text:!1}),t.find(".insert button").button({text:!1}),void 0!==t.find(".preview img")[0]&&t.find(".preview").toggleClass("none",!e[0].thumbnail_url),t.find(".preview img").fadeOut(5),t.find("a").each(this._enableDragToDesktop),t):r()},_startHandler:function(e){e.preventDefault();var t=r(this).closest(".template-upload").data("data");t&&t.submit&&!t.jqXHR&&(t.jqXHR=t.submit(),r(this).fadeOut())},_cancelHandler:function(e){e.preventDefault();var t=r(this).closest(".template-upload").data("data")||{};t.jqXHR?t.jqXHR.abort():(t.errorThrown="abort",e.data.fileupload._trigger("fail",e,t))},_deleteHandler:function(e){e.preventDefault();var t=r(this);e.data.fileupload._trigger("destroy",e,{context:t.closest(".template-download"),url:t.attr("data-url"),type:t.attr("data-type"),dataType:e.data.fileupload.options.dataType})},_initEventHandlers:function(){r.blueimp.fileupload.prototype._initEventHandlers.call(this);var e=this.element.find(".files"),t={fileupload:this},i="click."+this.options.namespace;e.on(i,".start button",t,this._startHandler).on(i,".cancel button",t,this._cancelHandler).on(i,".delete button",t,this._deleteHandler)},_destroyEventHandlers:function(){this.element.find(".files").off("click."+this.options.namespace),r.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},_initFileUploadButtonBar:function(){var e=this.element.find(".fileupload-buttonbar"),t=this.element.find(".files"),i=this.options.namespace;e.addClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var e=r(this).find("input:file").detach();r(this).button().append(e)}),e.find(".start").button().bind("click."+i,function(e){e.preventDefault(),t.find(".start button").click()}),e.find(".cancel").button().bind("click."+i,function(e){e.preventDefault(),t.find(".cancel button").click()}),e.find(".delete").button().bind("click."+i,function(e){e.preventDefault(),t.find(".delete button").click()})},_destroyFileUploadButtonBar:function(){this.element.find(".fileupload-buttonbar").removeClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var e=r(this).find("input:file").detach();r(this).button("destroy").append(e)}),this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace).button("destroy")},_enableFileInputButton:function(){this.element.find(".fileinput-button input:file:disabled").each(function(){var e=r(this),t=e.parent();e.detach().prop("disabled",!1),t.button("enable").append(e)})},_disableFileInputButton:function(){this.element.find(".fileinput-button input:file:enabled").each(function(){var e=r(this),t=e.parent();e.detach().prop("disabled",!0),t.button("disable").append(e)})},_initFilesContainer:function(){var e=this.options;e.filesContainer?e.filesContainer instanceof r||(e.filesContainer=r(e.filesContainer)):e.filesContainer=this.element.find(".files"),e.updateLimits.call(this.element)},_initTemplates:function(){this.options.uploadTemplate instanceof r&&!this.options.uploadTemplate.length&&(this.options.uploadTemplate=r(this.options.uploadTemplate.selector)),this.options.downloadTemplate instanceof r&&!this.options.downloadTemplate.length&&(this.options.downloadTemplate=r(this.options.downloadTemplate.selector))},_create:function(){r.blueimp.fileupload.prototype._create.call(this),this._initTemplates(),this.element.addClass("ui-widget"),this._initFileUploadButtonBar(),this.element.find(".fileupload-content").addClass("ui-widget-content ui-corner-bottom"),this.element.find(".fileupload-progressbar").hide().progressbar(),this._initFilesContainer()},destroy:function(){this.element.find(".fileupload-progressbar").progressbar("destroy"),this.element.find(".fileupload-content").removeClass("ui-widget-content ui-corner-bottom"),this._destroyFileUploadButtonBar(),this.element.removeClass("ui-widget"),r.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){r.blueimp.fileupload.prototype.enable.call(this),this.element.find(":ui-button").not(".fileinput-button").button("enable"),this._enableFileInputButton()},disable:function(){this.element.find(":ui-button").not(".fileinput-button").button("disable"),this._disableFileInputButton(),r.blueimp.fileupload.prototype.disable.call(this)}})}(jQuery),function(r){"use strict";var i=0;r.ajaxTransport("iframe",function(n,e,t){var a,o;if("POST"===n.type||"GET"===n.type)return{send:function(e,t){a=r('<form style="display:none;"></form>'),o=r('<iframe src="javascript:false;" name="iframe-transport-'+(i+=1)+'"></iframe>').bind("load",function(){var i;o.unbind("load").bind("load",function(){t(200,"success",{iframe:o.contents()}),r('<iframe src="javascript:false;"></iframe>').appendTo(a),a.remove()}),a.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&(r.each(n.formData,function(e,t){r('<input type="hidden"/>').prop("name",t.name).val(t.value).appendTo(a)}),r('<input type="hidden" name="csrf_token" />').val(proboards.data("csrf_token")||"null").appendTo(a),r('<input type="hidden" name="accepts" />').val("text-json").appendTo(a)),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(i=n.fileInput.clone(),n.fileInput.after(function(e){return i[e]}),a.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),a.submit(),i&&i.length&&n.fileInput.each(function(e,t){r(i[e]).replaceWith(t)})}),a.append(o).appendTo("body")},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),a&&a.remove()}}}),r.ajaxSetup({converters:{"iframe text":function(e){return e.text()},"iframe json":function(e){return r.parseJSON(e.text())},"iframe html":function(e){return e.find("body").html()}}})}(jQuery),function(u,e){var d,c=u.fn.domManip,p="_tmplitem",i=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,h={},f={},r={key:0,data:{}},m=0,g=0,o=[];function v(e,t,i,n){var a={data:n||0===n||!1===n?n:t?t.data:{},_wrap:t?t._wrap:null,tmpl:null,parent:t||null,nodes:[],calls:A,nest:w,wrap:x,html:k,update:$};return e&&u.extend(a,e,{nodes:[],parent:t}),"function"==typeof i&&(a.tmpl=i,a._ctnt=a._ctnt||a.tmpl(u,a),a.key=++m,(o.length?f:h)[m]=a),a}function s(t,e,i){var a,n=i?u.map(i,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+p+'="'+t.key+'" $2'):e:s(e,t,e._ctnt)}):t;return e?n:((n=n.join("")).replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,t,i,n){y(a=u(i).get()),t&&(a=l(t).concat(a)),n&&(a=a.concat(l(n)))}),a||l(n))}function l(e){var t=document.createElement("div");return t.innerHTML=e,u.makeArray(t.childNodes)}function n(e){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+u.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,t,i,n,a,o,r){var s,l,c,d=u.tmpl.tag[i];if(!d)throw"Unknown template tag: "+i;return s=d._default||[],o&&!/\w$/.test(a)&&(a+=o,o=""),a?(a=_(a),r=r?","+_(r)+")":o?")":"",l=o?-1<a.indexOf(".")?a+_(o):"("+a+").call($item"+r:a,c=o?l:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):c=l=s.$1||"null",n=_(n),"');"+d[t?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(n||s.$2||"")+"__.push('"})+"');}return __;")}function b(e,t){e._wrap=s(e,!0,u.isArray(t)?t:[i.test(t)?t:u(t).html()]).join("")}function _(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function y(e){var t,i,n,a,o,s="_"+g,l={};for(n=0,a=e.length;n<a;n++)if(1===(t=e[n]).nodeType){for(o=(i=t.getElementsByTagName("*")).length-1;0<=o;o--)r(i[o]);r(t)}function r(e){var t,i,n,a,o=e;if(a=e.getAttribute(p)){for(;o.parentNode&&1===(o=o.parentNode).nodeType&&!(t=o.getAttribute(p)););t!==a&&(o=o.parentNode?11===o.nodeType?0:o.getAttribute(p)||0:0,(n=h[a])||((n=v(n=f[a],h[o]||f[o])).key=++m,h[m]=n),g&&r(a)),e.removeAttribute(p)}else g&&(n=u.data(e,"tmplItem"))&&(r(n.key),h[n.key]=n,o=(o=u.data(e.parentNode,"tmplItem"))?o.key:0);if(n){for(i=n;i&&i.key!=o;)i.nodes.push(e),i=i.parent;delete n._ctnt,delete n._wrap,u.data(e,"tmplItem",n)}function r(e){n=l[e+=s]=l[e]||v(n,h[n.parent.key+s]||n.parent)}}}function A(e,t,i,n){if(!e)return o.pop();o.push({_:e,tmpl:t,item:this,data:i,options:n})}function w(e,t,i){return u.tmpl(u.template(e),t,i,this)}function x(e,t){var i=e.options||{};return i.wrapped=t,u.tmpl(u.template(e.tmpl),e.data,i,e.item)}function k(e,n){var t=this._wrap;return u.map(u(u.isArray(t)?t.join(""):t).filter(e||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||(t=e,(i=document.createElement("div")).appendChild(t.cloneNode(!0)),i.innerHTML);var t,i})}function $(){var e=this.nodes;u.tmpl(null,null,null,this).insertBefore(e[0]),u(e).remove()}u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,c){u.fn[l]=function(e){var t,i,n,a,o=[],r=u(e),s=1===this.length&&this[0].parentNode;if(d=h||{},s&&11===s.nodeType&&1===s.childNodes.length&&1===r.length)r[c](this[0]),o=this;else{for(i=0,n=r.length;i<n;i++)t=(0<(g=i)?this.clone(!0):this).get(),u(r[i])[c](t),o=o.concat(t);g=0,o=this.pushStack(o,l,r.selector)}return a=d,d=null,u.tmpl.complete(a),o}}),u.fn.extend({tmpl:function(e,t,i){return u.tmpl(this[0],e,t,i)},tmplItem:function(){return u.tmplItem(this[0])},template:function(e){return u.template(e,this[0])},domManip:function(e,t,i,n){if(e[0]&&u.isArray(e[0])){for(var a,o=u.makeArray(arguments),r=e[0],s=r.length,l=0;l<s&&!(a=u.data(r[l++],"tmplItem")););a&&g&&(o[2]=function(e){u.tmpl.afterManip(this,e,i)}),c.apply(this,o)}else c.apply(this,arguments);return g=0,d||u.tmpl.complete(h),this}}),u.extend({tmpl:function(t,e,i,n){var a,o=!n;if(o)n=r,t=u.template[t]||u.template(null,t),f={};else if(!t)return t=n.tmpl,(h[n.key]=n).nodes=[],n.wrapped&&b(n,n.wrapped),u(s(n,null,n.tmpl(u,n)));return t?("function"==typeof e&&(e=e.call(n||{})),i&&i.wrapped&&b(i,i.wrapped),a=u.isArray(e)?u.map(e,function(e){return e?v(i,n,t,e):null}):[v(i,n,t,e)],o?u(s(n,null,a)):a):[]},tmplItem:function(e){var t;for(e instanceof u&&(e=e[0]);e&&1===e.nodeType&&!(t=u.data(e,"tmplItem"))&&(e=e.parentNode););return t||r},template:function(e,t){return t?("string"==typeof t?t=n(t):t instanceof u&&(t=t[0]||{}),t.nodeType&&(t=u.data(t,"tmpl")||u.data(t,"tmpl",n(t.innerHTML))),"string"==typeof e?u.template[e]=t:t):e?"string"!=typeof e?u.template(null,e):u.template[e]||u.template(null,i.test(e)?e:u(e)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),u.extend(u.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(e){h={}},afterManip:function(e,t,i){var n=11===t.nodeType?u.makeArray(t.childNodes):1===t.nodeType?[t]:[];i.call(e,t),y(n),g++}})}(jQuery),function(b){function g(){return{cntr:++g.cntr,settings:b.extend({},b.tree.defaults),init:function(e,t){var i=this;if(this.container=b(e),0==this.container.size)return!1;if((g.inst[this.cntr]=this).container.attr("id")||this.container.attr("id","jstree_"+this.cntr),g.inst[this.container.attr("id")]=g.inst[this.cntr],g.focused=this.cntr,this.settings=b.extend(!0,{},this.settings,t),this.settings.languages&&this.settings.languages.length){this.current_lang=this.settings.languages[0];for(var n=!1,a="#"+this.container.attr("id"),o=0;o<this.settings.languages.length;o++)!1!==(n=g.add_css(a+" ."+this.settings.languages[o]))&&(n.style.display=this.settings.languages[o]==this.current_lang?"":"none")}else this.current_lang=!1;this.container.addClass("tree"),!1!==this.settings.ui.theme_name&&(!1===this.settings.ui.theme_path&&b("script").each(function(){if(this.src.toString().match(/jquery\.tree.*?js$/))return i.settings.ui.theme_path=this.src.toString().replace(/jquery\.tree.*?js$/,"")+"themes/"+i.settings.ui.theme_name+"/style.css",!1}),""!=this.settings.ui.theme_path&&-1==b.inArray(this.settings.ui.theme_path,g.themes)&&(g.add_sheet({url:this.settings.ui.theme_path}),g.themes.push(this.settings.ui.theme_path)),this.container.addClass("tree-"+this.settings.ui.theme_name));var r="";for(var s in this.settings.types)this.settings.types.hasOwnProperty(s)&&this.settings.types[s].icon&&(this.settings.types[s].icon.image||this.settings.types[s].icon.position)&&(r+="default"==s?"#"+this.container.attr("id")+" li > a ins { ":"#"+this.container.attr("id")+" li[rel="+s+"] > a ins { ",this.settings.types[s].icon.image&&(r+=" background-image:url("+this.settings.types[s].icon.image+"); "),this.settings.types[s].icon.position&&(r+=" background-position:"+this.settings.types[s].icon.position+"; "),r+="} ");""!=r&&g.add_sheet({str:r}),this.settings.rules.multiple&&(this.selected_arr=[]),this.offset=!1,this.hovered=!1,(this.locked=!1)===g.drag_drop.marker&&(g.drag_drop.marker=b("<div>").attr({id:"jstree-marker"}).hide().appendTo("body")),this.callback("oninit",[this]),this.refresh(),this.attach_events(),this.focus()},refresh:function(e){if(this.locked)return this.error("LOCKED");var i=this;if(e&&!this.settings.data.async&&(e=!1),this.is_partial_refresh=!!e,this.opened=Array(),0!=this.settings.opened?(b.each(this.settings.opened,function(e,t){0<this.replace(/^#/,"").length&&i.opened.push("#"+this.replace(/^#/,""))}),this.settings.opened=!1):this.container.find("li.open").each(function(e){this.id&&i.opened.push("#"+this.id)}),this.selected)this.settings.selected=Array(),e?b(e).find("li:has(a.clicked)").each(function(){this.id&&i.settings.selected.push("#"+this.id)}):this.selected_arr?b.each(this.selected_arr,function(){this.attr("id")&&i.settings.selected.push("#"+this.attr("id"))}):this.selected.attr("id")&&this.settings.selected.push("#"+this.selected.attr("id"));else if(!1!==this.settings.selected){var t=Array();"object"==(typeof this.settings.selected).toLowerCase()?b.each(this.settings.selected,function(){0<this.replace(/^#/,"").length&&t.push("#"+this.replace(/^#/,""))}):0<this.settings.selected.replace(/^#/,"").length&&t.push("#"+this.settings.selected.replace(/^#/,"")),this.settings.selected=t}if(e&&this.settings.data.async)return this.opened=Array(),(e=this.get_node(e)).find("li.open").each(function(e){i.opened.push("#"+this.id)}),e.hasClass("open")&&e.removeClass("open").addClass("closed"),e.hasClass("leaf")&&e.removeClass("leaf"),e.children("ul:eq(0)").html(""),this.open_branch(e,!0,function(){i.reselect.apply(i)});i=this;var n=new b.tree.datastores[this.settings.data.type];0==this.container.children("ul").size()&&this.container.html("<ul class='ltr' style='direction:ltr;'><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),n.load(this.callback("beforedata",[!1,this]),this,this.settings.data.opts,function(e){e=i.callback("ondata",[e,i]),n.parse(e,i,i.settings.data.opts,function(e){e=i.callback("onparse",[e,i]),i.container.empty().append(b("<ul class='ltr'>").html(e)),i.container.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),i.container.find("li").not(".open").not(".closed").addClass("leaf"),i.reselect()})})},reselect:function(e){var t=this;if(e?this.cl_count--:this.cl_count=0,this.opened&&this.opened.length){for(var i=!1,n=0;this.opened&&n<this.opened.length;n++){if(this.settings.data.async){if((a=this.get_node(this.opened[n])).size()&&0<a.hasClass("closed")){i=!0;var a=this.opened[n].toString().replace("/","\\/");delete this.opened[n],this.open_branch(a,!0,function(){t.reselect.apply(t,[!0])}),this.cl_count++}}else this.open_branch(this.opened[n],!0)}if(this.settings.data.async&&i)return;if(0<this.cl_count)return;delete this.opened}0<this.cl_count||(this.container.css("direction","ltr").children("ul:eq(0)").addClass("ltr"),0==this.settings.ui.dots&&this.container.children("ul:eq(0)").addClass("no_dots"),this.scrtop&&(this.container.scrollTop(t.scrtop),delete this.scrtop),!1!==this.settings.selected&&(b.each(this.settings.selected,function(e){t.is_partial_refresh?t.select_branch(b(t.settings.selected[e].toString().replace("/","\\/"),t.container),!1!==t.settings.rules.multiple):t.select_branch(b(t.settings.selected[e].toString().replace("/","\\/"),t.container),!1!==t.settings.rules.multiple&&0<e)}),this.settings.selected=!1),this.callback("onload",[t]))},get:function(e,t,i){return t||(t=this.settings.data.type),i||(i=this.settings.data.opts),(new b.tree.datastores[t]).get(e,this,i)},attach_events:function(){var o=this;this.container.bind("mousedown.jstree",function(e){if(g.drag_drop.isdown)return g.drag_drop.move_type=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}).bind("mouseup.jstree",function(e){setTimeout(function(){o.focus.apply(o)},5)}).bind("click.jstree",function(e){return!0}),b("#"+this.container.attr("id")+" li").live("click",function(e){return"LI"!=e.target.tagName||(o.off_height(),e.pageY-b(e.target).offset().top>o.li_height||(o.toggle_branch.apply(o,[e.target]),e.stopPropagation(),!1))}),b("#"+this.container.attr("id")+" li a").live("click.jstree",function(e){return!(!e.which||3!=e.which)||(o.locked?(e.preventDefault(),e.target.blur(),o.error("LOCKED")):(b(e.target).hasClass("controls")||b(e.target).parentsUntil("li").hasClass("controls")||(o.select_branch.apply(o,[e.target,e.ctrlKey||e.metaKey||"on"==o.settings.rules.multiple]),o.inp&&o.inp.blur()),e.preventDefault(),e.target.blur(),!1))}).live("dblclick.jstree",function(e){if(o.locked)return e.preventDefault(),e.stopPropagation(),e.target.blur(),o.error("LOCKED");o.callback("ondblclk",[o.get_node(e.target).get(0),o]),e.preventDefault(),e.stopPropagation(),e.target.blur()}).live("contextmenu.jstree",function(e){return o.locked?(e.target.blur(),o.error("LOCKED")):o.callback("onrgtclk",[o.get_node(e.target).get(0),o,e])}).live("mouseover.jstree",function(e){if(o.locked)return e.preventDefault(),e.stopPropagation(),o.error("LOCKED");!1===o.hovered||"A"!=e.target.tagName&&"INS"!=e.target.tagName||(o.hovered.children("a").removeClass("hover"),o.hovered=!1),o.callback("onhover",[o.get_node(e.target).get(0),o])}).live("mousedown.jstree",function(e){if("left"==o.settings.rules.drag_button&&e.which&&1!=e.which)return!0;if("right"==o.settings.rules.drag_button&&e.which&&3!=e.which)return!0;if(o.focus.apply(o),o.locked)return o.error("LOCKED");var t=o.get_node(e.target);if(!b(e.target).hasClass("controls")&&!b(e.target).parentsUntil("li").hasClass("controls"))if(0!=o.settings.rules.multiple&&1<o.selected_arr.length&&t.children("a:eq(0)").hasClass("clicked")){var i=0;for(var n in o.selected_arr)o.selected_arr.hasOwnProperty(n)&&o.check("draggable",o.selected_arr[n])&&(o.selected_arr[n].addClass("dragged"),g.drag_drop.origin_tree=o,i++);if(0<i){o.check("draggable",t)?g.drag_drop.drag_node=t:g.drag_drop.drag_node=o.container.find("li.dragged:eq(0)"),g.drag_drop.isdown=!0,g.drag_drop.drag_help=b("<div id='jstree-dragged' class='tree "+(""!=o.settings.ui.theme_name?" tree-"+o.settings.ui.theme_name:"")+"' />").append("<ul class='"+o.container.children("ul:eq(0)").get(0).className+"' />");var a=g.drag_drop.drag_node.clone();0<o.settings.languages.length&&a.find("a").not("."+o.current_lang).hide(),g.drag_drop.drag_help.children("ul:eq(0)").append(a),g.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last").children("a").html("<ins>&nbsp;</ins>Multiple selection").end().children("ul").remove(),g.drag_drop.dragged=o.container.find("li.dragged")}}else if(o.check("draggable",t)){g.drag_drop.drag_node=t,g.drag_drop.drag_help=b("<div id='jstree-dragged' class='tree "+(""!=o.settings.ui.theme_name?" tree-"+o.settings.ui.theme_name:"")+"' />").append("<ul class='"+o.container.children("ul:eq(0)").get(0).className+"' />");a=t.clone();0<o.settings.languages.length&&a.find("a").not("."+o.current_lang).hide(),g.drag_drop.drag_help.children("ul:eq(0)").append(a),g.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last"),g.drag_drop.isdown=!0,g.drag_drop.foreign=!1,g.drag_drop.origin_tree=o,t.addClass("dragged"),g.drag_drop.dragged=o.container.find("li.dragged")}return g.drag_drop.init_x=e.pageX,g.drag_drop.init_y=e.pageY,t.blur(),e.preventDefault(),e.stopPropagation(),!1})},focus:function(){if(this.locked)return!1;g.focused!=this.cntr&&(g.focused=this.cntr,this.callback("onfocus",[this]))},off_height:function(){if(!1===this.offset){this.container.css({position:"relative"}),this.offset=this.container.offset();var e=0;(e=parseInt(b.curCSS(this.container.get(0),"paddingTop",!0),10))&&(this.offset.top+=e),(e=parseInt(b.curCSS(this.container.get(0),"borderTopWidth",!0),10))&&(this.offset.top+=e),this.container.css({position:""})}if(!this.li_height){e=this.container.find("ul li.open, ul li.leaf").eq(0);this.li_height=e.height(),e.children("ul:eq(0)").size()&&(this.li_height-=e.children("ul:eq(0)").height()),this.li_height||(this.li_height=10)}},scroll_check:function(e,t){var i=this,n=i.container,a=i.container.offset(),o=n.scrollTop(),r=n.scrollLeft(),s=n.get(0).scrollWidth>n.width()?40:20;t-a.top<20&&n.scrollTop(Math.max(o-i.settings.ui.scroll_spd,0)),n.height()-(t-a.top)<s&&n.scrollTop(o+i.settings.ui.scroll_spd),e-a.left<20&&n.scrollLeft(Math.max(r-i.settings.ui.scroll_spd,0)),n.width()-(e-a.left)<40&&n.scrollLeft(r+i.settings.ui.scroll_spd),n.scrollLeft()==r&&n.scrollTop()==o||(g.drag_drop.move_type=!1,g.drag_drop.ref_node=!1,g.drag_drop.marker.hide()),g.drag_drop.scroll_time=setTimeout(function(){i.scroll_check(e,t)},50)},scroll_into_view:function(e){if(!(e=e?this.get_node(e):this.selected))return!1;var t=e.offset().top,i=this.container.offset().top,n=i+this.container.height(),a=this.container.get(0).scrollWidth>this.container.width()?40:20;t+5<i&&this.container.scrollTop(this.container.scrollTop()-(i-t+5)),n<t+a&&this.container.scrollTop(this.container.scrollTop()+(t+a-n))},get_node:function(e){return b(e).closest("li")},get_type:function(e){if(e=e?this.get_node(e):this.selected)return e.attr(this.settings.rules.type_attr)||"default"},set_type:function(e,t){(t=t?this.get_node(t):this.selected)&&e&&t.attr(this.settings.rules.type_attr,e)},get_text:function(e,t){if(!(e=this.get_node(e))||0==e.size())return"";this.settings.languages&&this.settings.languages.length?(t=t||this.current_lang,e=e.children("a."+t)):e=e.children("a:visible");var i="";return e.contents().each(function(){if(3==this.nodeType)return i=this.data,!1}),i},check:function(e,t){if(this.locked)return!1;var i=!1;if(-1===t)void 0!==this.settings.rules[e]&&(i=this.settings.rules[e]);else{if(!(t=t?this.get_node(t):this.selected))return;var n=this.get_type(t);void 0!==this.settings.types[n]&&void 0!==this.settings.types[n][e]?i=this.settings.types[n][e]:void 0!==this.settings.types.default&&void 0!==this.settings.types.default[e]&&(i=this.settings.types.default[e])}return"function"==typeof i&&(i=i.call(null,t,this)),i=this.callback("check",[e,t,i,this])},check_move:function(e,t,i){if(this.locked)return!1;if(b(t).closest("li.dragged").size())return!1;var n=e.parents(".tree:eq(0)").get(0),a=t.parents(".tree:eq(0)").get(0);if(n&&n!=a&&("none"==(p=b.tree.reference(a.id).settings.rules.multitree)||b.isArray(p)&&-1==b.inArray(n.id,p)))return!1;var o="inside"!=i?this.parent(t):this.get_node(t);if(e=this.get_node(e),0==o)return!1;var r={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",o):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",o):-1,valid_children:this.check("valid_children",o)},s="string"==typeof e?e:this.get_type(e);if(void 0!==r.valid_children&&("none"==r.valid_children||"object"==typeof r.valid_children&&-1==b.inArray(s,b.makeArray(r.valid_children))))return!1;if(this.settings.rules.use_max_children&&void 0!==r.max_children&&-1!=r.max_children){if(0==r.max_children)return!1;var l=1;if(1==g.drag_drop.moving&&0==g.drag_drop.foreign&&(l=g.drag_drop.dragged.size(),l-=o.find("> ul > li.dragged").size()),r.max_children<o.find("> ul > li").size()+l)return!1}if(this.settings.rules.use_max_depth){if(void 0!==r.max_depth&&0===r.max_depth)return this.error("MOVE: MAX-DEPTH REACHED");for(var c=0<r.max_depth&&r.max_depth,d=0,u=o;-1!==u;){var p;if(u=this.parent(u),d++,0<=(p=this.check("max_depth",u))&&(c=!1===c?p-d:Math.min(c,p-d)),!1!==c&&c<=0)return this.error("MOVE: MAX-DEPTH REACHED")}if(!1!==c&&c<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(!1!==c){var h=1;if("string"!=typeof e)for(u=e;0<u.size();){if(c-h<0)return this.error("MOVE: MAX-DEPTH REACHED");u=u.children("ul").children("li"),h++}}}return 0!=this.callback("check_move",[e,t,i,this])},hover_branch:function(e){if(this.locked)return this.error("LOCKED");return(e=this.get_node(e)).size()?this.check("clickable",e)?(this.hovered&&this.hovered.children("A").removeClass("hover"),this.hovered=e,this.hovered.children("a").addClass("hover"),void this.scroll_into_view(this.hovered)):this.error("SELECT: NODE NOT SELECTABLE"):this.error("HOVER: NOT A VALID NODE")},select_branch:function(e,t){if(this.locked)return this.error("LOCKED");e||!1===this.hovered||(e=this.hovered);var i=this;if(!(e=i.get_node(e)).size())return this.error("SELECT: NOT A VALID NODE");if(e.children("a").removeClass("hover"),!i.check("clickable",e))return this.error("SELECT: NODE NOT SELECTABLE");if(!1===i.callback("beforechange",[e.get(0),i]))return this.error("SELECT: STOPPED BY USER");if(0!=this.settings.rules.multiple&&t&&0<e.children("a.clicked").size())return this.deselect_branch(e);if(0!=this.settings.rules.multiple&&t&&this.selected_arr.push(e),0!=this.settings.rules.multiple&&!t){for(var n in this.selected_arr)this.selected_arr.hasOwnProperty(n)&&(this.selected_arr[n].children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected_arr[n].get(0),i]));this.selected_arr=[],this.selected_arr.push(e),this.selected&&this.selected.children("A").hasClass("clicked")&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i]))}this.settings.rules.multiple||this.selected&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i])),this.selected=e,!1!==this.hovered&&(this.hovered.children("A").removeClass("hover"),this.hovered=e),this.selected.children("a").addClass("clicked").end().parents("li.closed").each(function(){i.open_branch(this,!0)}),this.scroll_into_view(this.selected),this.callback("onselect",[this.selected.get(0),i]),this.callback("onchange",[this.selected.get(0),i])},deselect_branch:function(e){if(this.locked)return this.error("LOCKED");var t=this;if(0==(e=this.get_node(e)).children("a.clicked").size())return this.error("DESELECT: NODE NOT SELECTED");e.children("a").removeClass("clicked"),this.callback("ondeselect",[e.get(0),t]),0!=this.settings.rules.multiple&&1<this.selected_arr.length?(this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){t.selected_arr.push(b(this))}),e.get(0)==this.selected.get(0)&&(this.selected=this.selected_arr[0])):(0!=this.settings.rules.multiple&&(this.selected_arr=[]),this.selected=!1),this.callback("onchange",[e.get(0),t])},toggle_branch:function(e){return this.locked?this.error("LOCKED"):(e=this.get_node(e)).hasClass("closed")?this.open_branch(e):e.hasClass("open")?this.close_branch(e):void 0},open_branch:function(t,e,i){var n=this;if(this.locked)return this.error("LOCKED");if(!(t=this.get_node(t)).size())return this.error("OPEN: NO SUCH NODE");if(t.hasClass("leaf"))return this.error("OPEN: OPENING LEAF NODE");if(this.settings.data.async&&0==t.find("li").size()){if(!1===this.callback("beforeopen",[t.get(0),this]))return this.error("OPEN: STOPPED BY USER");t.children("ul:eq(0)").remove().end().append("<ul><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(n.settings.lang.loading||"Loading ...")+"</a></li></ul>"),t.removeClass("closed").addClass("open");var a=new b.tree.datastores[this.settings.data.type];return a.load(this.callback("beforedata",[t,this]),this,this.settings.data.opts,function(e){if(!(e=n.callback("ondata",[e,n]))||0==e.length)return t.removeClass("closed").removeClass("open").addClass("leaf").children("ul").remove(),void(i&&i.call());a.parse(e,n,n.settings.data.opts,function(e){e=n.callback("onparse",[e,n]),t.children("ul:eq(0)").replaceWith(b("<ul>").html(e)),t.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),t.find("li").not(".open").not(".closed").addClass("leaf"),n.open_branch.apply(n,[t]),i&&i.call()})}),!0}return this.settings.data.async||!1!==this.callback("beforeopen",[t.get(0),this])?(0<parseInt(this.settings.ui.animation)&&!e?(t.children("ul:eq(0)").css("display","none"),t.removeClass("closed").addClass("open"),t.children("ul:eq(0)").slideDown(parseInt(this.settings.ui.animation),function(){b(this).css("display",""),i&&i.call()})):(t.removeClass("closed").addClass("open"),i&&i.call()),this.callback("onopen",[t.get(0),this]),!0):this.error("OPEN: STOPPED BY USER")},close_branch:function(e,t){if(this.locked)return this.error("LOCKED");var i=this;return(e=this.get_node(e)).size()?!1===i.callback("beforeclose",[e.get(0),i])?this.error("CLOSE: STOPPED BY USER"):(0<parseInt(this.settings.ui.animation)&&!t&&1==e.children("ul:eq(0)").size()?e.children("ul:eq(0)").slideUp(parseInt(this.settings.ui.animation),function(){e.hasClass("open")&&e.removeClass("open").addClass("closed"),b(this).css("display","")}):e.hasClass("open")&&e.removeClass("open").addClass("closed"),this.selected&&!1!==this.settings.ui.selected_parent_close&&0<e.children("ul:eq(0)").find("a.clicked").size()&&(e.find("li:has(a.clicked)").each(function(){i.deselect_branch(this)}),"select_parent"==this.settings.ui.selected_parent_close&&0==e.children("a.clicked").size()&&this.select_branch(e,0!=this.settings.rules.multiple&&0<this.selected_arr.length)),void this.callback("onclose",[e.get(0),this])):this.error("CLOSE: NO SUCH NODE")},open_all:function(e,t){if(this.locked)return this.error("LOCKED");var i=this,n=(e=e?this.get_node(e):this.container).find("li.closed").size();t?this.cl_count--:this.cl_count=0,0<n?(this.cl_count+=n,e.find("li.closed").each(function(){var e=this;i.open_branch.apply(i,[this,!0,function(){i.open_all.apply(i,[e,!0])}])})):0==this.cl_count&&this.callback("onopen_all",[this])},close_all:function(e){if(this.locked)return this.error("LOCKED");var t=this;(e=e?this.get_node(e):this.container).find("li.open").each(function(){t.close_branch(this,!0)}),this.callback("onclose_all",[this])},set_lang:function(e){if(!b.isArray(this.settings.languages)||0==this.settings.languages.length)return!1;if(this.locked)return this.error("LOCKED");if(b.inArray(e,this.settings.languages)||void 0===this.settings.languages[e]||(e=this.settings.languages[e]),void 0===e)return!1;if(e==this.current_lang)return!0;var t=!1,i="#"+this.container.attr("id");return!1!==(t=g.get_css(i+" ."+this.current_lang))&&(t.style.display="none"),!1!==(t=g.get_css(i+" ."+e))&&(t.style.display=""),this.current_lang=e,!0},get_lang:function(){return!(!b.isArray(this.settings.languages)||0==this.settings.languages.length)&&this.current_lang},create:function(e,t,i){if(this.locked)return this.error("LOCKED");var n=!1;if(-1==t?(n=!0,t=this.container):t=t?this.get_node(t):this.selected,!(n||t&&t.size()))return this.error("CREATE: NO NODE SELECTED");var a=i,o=t;if("before"==i&&(i=t.parent().children().index(t),t=t.parents("li:eq(0)")),"after"==i&&(i=t.parent().children().index(t)+1,t=t.parents("li:eq(0)")),n||0!=t.size()||(n=!0,t=this.container),!n){if(!this.check("creatable",t))return this.error("CREATE: CANNOT CREATE IN NODE");if(t.hasClass("closed")){if(this.settings.data.async&&0==t.children("ul").size()){var r=this;return this.open_branch(t,!0,function(){r.create.apply(r,[e,t,i])})}this.open_branch(t,!0)}}var s=!1;if((e=e?b.extend(!0,{},e):{}).attributes||(e.attributes={}),e.attributes[this.settings.rules.type_attr]||(e.attributes[this.settings.rules.type_attr]=this.get_type(o)||"default"),this.settings.languages.length){e.data||(e.data={},s=!0);for(var l=0;l<this.settings.languages.length;l++)e.data[this.settings.languages[l]]||(e.data[this.settings.languages[l]]="string"!=(typeof this.settings.lang.new_node).toLowerCase()&&this.settings.lang.new_node[l]?this.settings.lang.new_node[l]:this.settings.lang.new_node)}else e.data||(e.data=this.settings.lang.new_node,s=!0);e=this.callback("ondata",[e,this]);var c=b.tree.datastores.json().parse(e,this);c=this.callback("onparse",[c,this]);var d=b(c);d.children("ul").size()?d.is(".open")||d.addClass("closed"):d.addClass("leaf"),d.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),d.find("li").not(".open").not(".closed").addClass("leaf");var u={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",n?-1:t):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",n?-1:t):-1,valid_children:this.check("valid_children",n?-1:t)},p=this.get_type(d);if(void 0!==u.valid_children&&("none"==u.valid_children||b.isArray(u.valid_children)&&-1==b.inArray(p,u.valid_children)))return this.error("CREATE: NODE NOT A VALID CHILD");if(this.settings.rules.use_max_children&&void 0!==u.max_children&&-1!=u.max_children&&u.max_children>=this.children(t).size())return this.error("CREATE: MAX_CHILDREN REACHED");if(this.settings.rules.use_max_depth){if(void 0!==u.max_depth&&0===u.max_depth)return this.error("CREATE: MAX-DEPTH REACHED");for(var h=0<u.max_depth&&u.max_depth,f=(l=0,t);-1!==f&&!n;){f=this.parent(f),l++;var m=this.check("max_depth",f);if(0<=m&&(h=!1===h?m-l:Math.min(h,m-l)),!1!==h&&h<=0)return this.error("CREATE: MAX-DEPTH REACHED")}if(!1!==h&&h<=0)return this.error("CREATE: MAX-DEPTH REACHED");if(!1!==h){var g=1;for(f=d;0<f.size();){if(h-g<0)return this.error("CREATE: MAX-DEPTH REACHED");f=f.children("ul").children("li"),g++}}}if("undefined"!=(typeof i).toLowerCase()&&"inside"!=i||(i="top"==this.settings.rules.createat?0:t.children("ul:eq(0)").children("li").size()),0==t.children("ul").size()||1==n&&0==t.children("ul").children("li").size())if(n)v=this.moved(d,this.container.children("ul:eq(0)"),"inside",!0);else var v=this.moved(d,t.children("a:eq(0)"),"inside",!0);else if("before"==a&&t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size())v=this.moved(d,t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!0);else if("after"==a&&t.children("ul:eq(0)").children("li:nth-child("+i+")").size())v=this.moved(d,t.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after",!0);else if(t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size())v=this.moved(d,t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!0);else v=this.moved(d,t.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!0);return!1===v?this.error("CREATE: ABORTED"):(s&&(this.select_branch(d.children("a:eq(0)")),this.rename()),d)},rename:function(t,e){if(this.locked)return this.error("LOCKED");t=t?this.get_node(t):this.selected;var i=this;if(!t||!t.size())return this.error("RENAME: NO NODE SELECTED");if(!this.check("renameable",t))return this.error("RENAME: NODE NOT RENAMABLE");if(!this.callback("beforerename",[t.get(0),i.current_lang,i]))return this.error("RENAME: STOPPED BY USER");t.parents("li.closed").each(function(){i.open_branch(this)}),t=this.current_lang?t.find("a."+this.current_lang):t.find("a:first");var n={};n[this.container.attr("id")]=this.get_rollback();var a=t.children("ins").clone();if("string"==(typeof e).toLowerCase())t.text(e).prepend(a),i.callback("onrename",[i.get_node(t).get(0),i,n]);else{var o="";t.contents().each(function(){if(3==this.nodeType)return o=this.data,!1}),i.inp=b("<input type='text' autocomplete='off' />"),i.inp.val(o.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")).bind("mousedown",function(e){e.stopPropagation()}).bind("mouseup",function(e){e.stopPropagation()}).bind("click",function(e){e.stopPropagation()}).bind("keyup",function(e){var t=e.keyCode||e.which;if(27==t)return this.value=o,void this.blur();13!=t||this.blur()}),i.inp.blur(function(e){""==this.value&&(this.value=o),t.text(this.value).prepend(a),t.get(0).style.display="",t.prevAll("span").remove(),i.inp=!1,i.callback("onrename",[i.get_node(t).get(0),i,n])});var r=b("<span />").addClass(t.attr("class")).append(a).append(i.inp);t.get(0).style.display="none",t.parent().prepend(r),i.inp.get(0).focus(),i.inp.get(0).select()}},remove:function(e){if(this.locked)return this.error("LOCKED");var t=this,i={};if(i[this.container.attr("id")]=this.get_rollback(),!e||this.selected&&this.get_node(e).get(0)==this.selected.get(0)){if(!this.selected)return this.error("DELETE: NO NODE SELECTED");if(!this.check("deletable",this.selected))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[this.selected.get(0),t]))return this.error("DELETE: STOPPED BY USER");$parent=this.selected.parent();e=this.selected;if(0==this.settings.rules.multiple||1==this.selected_arr.length)var n=!0,a="select_previous"==this.settings.ui.selected_delete&&this.prev(this.selected);if(e=e.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),!n&&0!=this.settings.rules.multiple){t=this;this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){t.selected_arr.push(b(this))}),0<this.selected_arr.length&&(this.selected=this.selected_arr[0],this.remove())}n&&a&&this.select_branch(a),this.callback("ondelete",[e.get(0),this,i])}else if((e=this.get_node(e)).size()){if(!this.check("deletable",e))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[e.get(0),t]))return this.error("DELETE: STOPPED BY USER");if($parent=e.parent(),e.find("a.clicked").size()){var o=!1;t.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){if(o||this!=t.selected.get(0)||(o=!0),-1!=b(this).parents().index(e))return!0;t.selected_arr.push(b(this))}),o&&(this.selected=this.selected_arr[0]||!1)}e=e.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),this.callback("ondelete",[e.get(0),this,i])}},next:function(e,t){return!!(e=this.get_node(e)).size()&&(t?0<e.nextAll("li").size()&&e.nextAll("li:eq(0)"):e.hasClass("open")?e.find("li:eq(0)"):0<e.nextAll("li").size()?e.nextAll("li:eq(0)"):e.parents("li").next("li").eq(0))},prev:function(e,t){if(!(e=this.get_node(e)).size())return!1;if(t)return 0<e.prevAll("li").size()&&e.prevAll("li:eq(0)");if(e.prev("li").size()){for(e=e.prev("li").eq(0);e.hasClass("open");)e=e.children("ul:eq(0)").children("li:last");return e}return!!e.parents("li:eq(0)").size()&&e.parents("li:eq(0)")},parent:function(e){return!!(e=this.get_node(e)).size()&&(e.parents("li:eq(0)").size()?e.parents("li:eq(0)"):-1)},children:function(e){return-1===e?this.container.children("ul:eq(0)").children("li"):!!(e=this.get_node(e)).size()&&e.children("ul:eq(0)").children("li")},toggle_dots:function(){this.settings.ui.dots?(this.settings.ui.dots=!1,this.container.children("ul:eq(0)").addClass("no_dots")):(this.settings.ui.dots=!0,this.container.children("ul:eq(0)").removeClass("no_dots"))},callback:function(e,t){var i=!1,n=null;for(var a in this.settings.plugins)if("object"==typeof b.tree.plugins[a]&&((i=b.tree.plugins[a]).callbacks&&"function"==typeof i.callbacks[e]&&(n=i.callbacks[e].apply(this,t)),null!=n)){if("ondata"!=e&&"onparse"!=e)return n;t[0]=n}if("function"==typeof(i=this.settings.callback[e]))return i.apply(null,t)},get_rollback:function(){var e={};return e.html=this.container.html(),e.selected=!!this.selected&&this.selected.attr("id"),e},moved:function(e,t,i,n,a,o,r){e=b(e);var s=b(e).parents("ul:eq(0)"),l=b(t);(l.is("ins")&&(l=l.parent()),void 0===r&&(r=0),o)||((o={})[this.container.attr("id")]=this.get_rollback(),n||((d=1<e.size()?e.eq(0).parents(".tree:eq(0)"):e.parents(".tree:eq(0)")).get(0)!=this.container.get(0)&&(d=g.inst[d.attr("id")],o[d.container.attr("id")]=d.get_rollback()),delete d));if("inside"==i&&this.settings.data.async){var c=this;if(this.get_node(l).hasClass("closed"))return this.open_branch(this.get_node(l),!0,function(){c.moved.apply(c,[e,t,i,n,a,o])});if(1==this.get_node(l).find("> ul > li > a.loading").size())return void setTimeout(function(){c.moved.apply(c,[e,t,i,n,a])},200)}if(1<e.size()){c=this;var d=this.moved(e.eq(0),t,i,!1,a,o,1),u=[];return e.each(function(e){u.push(b(this)),0!=e&&d&&(d=c.moved(this,d.children("a:eq(0)"),"after",!1,a,o,1))}),this.callback("onmove",[u,this.get_node(t).get(0),i,this,o]),e}if(a?(_what=e.clone(),_what.each(function(e){this.id=this.id+"_copy",b(this).find("li").each(function(){this.id=this.id+"_copy"}),b(this).removeClass("dragged").find("a.clicked").removeClass("clicked").end().find("li.dragged").removeClass("dragged")})):_what=e,n){if(!this.callback("beforecreate",[this.get_node(e).get(0),this.get_node(t).get(0),i,this]))return!1}else if(!this.callback("beforemove",[this.get_node(e).get(0),this.get_node(t).get(0),i,this]))return!1;if(!n&&(d=e.parents(".tree:eq(0)")).get(0)!=this.container.get(0)){if((d=g.inst[d.attr("id")]).settings.languages.length){var p=[];if(0==this.settings.languages.length)p.push("."+d.current_lang);else for(var h in this.settings.languages)if(this.settings.languages.hasOwnProperty(h))for(var f in d.settings.languages)d.settings.languages.hasOwnProperty(f)&&this.settings.languages[h]==d.settings.languages[f]&&p.push("."+this.settings.languages[h]);if(0==p.length)return this.error("MOVE: NO COMMON LANGUAGES");_what.find("a").not(p.join(",")).remove()}_what.find("a.clicked").removeClass("clicked")}switch(e=_what,i){case"before":l.parents("ul:eq(0)").children("li.last").removeClass("last"),l.parent().before(e.removeClass("last")),l.parents("ul:eq(0)").children("li:last").addClass("last");break;case"after":l.parents("ul:eq(0)").children("li.last").removeClass("last"),l.parent().after(e.removeClass("last")),l.parents("ul:eq(0)").children("li:last").addClass("last");break;case"inside":l.parent().children("ul:first").size()?"top"==this.settings.rules.createat?l.parent().children("ul:first").prepend(e.removeClass("last")).children("li:last").addClass("last"):l.parent().children("ul:first").children(".last").removeClass("last").end().append(e.removeClass("last")).children("li:last").addClass("last"):(e.addClass("last"),l.parent().removeClass("leaf").append("<ul/>"),l.parent().hasClass("open")||l.parent().addClass("closed"),l.parent().children("ul:first").prepend(e)),l.parent().hasClass("closed")&&this.open_branch(l)}if(0==s.find("li").size()){var m=s.parent();m.removeClass("open").removeClass("closed").addClass("leaf"),m.is(".tree")||m.children("ul").remove(),m.parents("ul:eq(0)").children("li.last").removeClass("last").end().children("li:last").addClass("last")}else s.children("li.last").removeClass("last"),s.children("li:last").addClass("last");return a?this.callback("oncopy",[this.get_node(e).get(0),this.get_node(t).get(0),i,this,o]):n?this.callback("oncreate",[this.get_node(e).get(0),l.is("ul")?-1:this.get_node(t).get(0),i,this,o]):r||this.callback("onmove",[this.get_node(e).get(0),this.get_node(t).get(0),i,this,o]),e},error:function(e){return this.callback("error",[e,this]),!1},lock:function(e){this.locked=e,this.locked?this.container.children("ul:eq(0)").addClass("locked"):this.container.children("ul:eq(0)").removeClass("locked")},cut:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(g.cut_copy.copy_nodes=!1,void(g.cut_copy.cut_nodes=e)):this.error("CUT: NO NODE SELECTED")},copy:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(g.cut_copy.copy_nodes=e,void(g.cut_copy.cut_nodes=!1)):this.error("COPY: NO NODE SELECTED")},paste:function(e,t){if(this.locked)return this.error("LOCKED");var i=!1;if(-1==e?(i=!0,e=this.container):e=e?this.get_node(e):this.selected,!(i||e&&e.size()))return this.error("PASTE: NO NODE SELECTED");if(!g.cut_copy.copy_nodes&&!g.cut_copy.cut_nodes)return this.error("PASTE: NOTHING TO DO");var n=t;if("before"==t?(t=e.parent().children().index(e),e=e.parents("li:eq(0)")):"after"==t?(t=e.parent().children().index(e)+1,e=e.parents("li:eq(0)")):"undefined"!=(typeof t).toLowerCase()&&"inside"!=t||(t="top"==this.settings.rules.createat?0:e.children("ul:eq(0)").children("li").size()),i||0!=e.size()||(i=!0,e=this.container),g.cut_copy.copy_nodes&&g.cut_copy.copy_nodes.size()){var a=!0;if(!i&&!this.check_move(g.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside"))return!1;if(0==e.children("ul").size()||1==i&&0==e.children("ul").children("li").size())if(i)this.moved(g.cut_copy.copy_nodes,this.container.children("ul:eq(0)"),"inside",!1,!0);else this.moved(g.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside",!1,!0);else if("before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size())this.moved(g.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before",!1,!0);else if("after"==n&&e.children("ul:eq(0)").children("li:nth-child("+t+")").size())this.moved(g.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+t+")").children("a:eq(0)"),"after",!1,!0);else if(e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size())this.moved(g.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before",!1,!0);else this.moved(g.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!1,!0);g.cut_copy.copy_nodes=!1}if(g.cut_copy.cut_nodes&&g.cut_copy.cut_nodes.size()){a=!0;if(e.parents().andSelf().each(function(){if(-1!=g.cut_copy.cut_nodes.index(this))return a=!1}),!a)return this.error("Invalid paste");if(!i&&!this.check_move(g.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"))return!1;if(0==e.children("ul").size()||1==i&&0==e.children("ul").children("li").size())if(i)this.moved(g.cut_copy.cut_nodes,this.container.children("ul:eq(0)"),"inside");else this.moved(g.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside");else if("before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size())this.moved(g.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before");else if("after"==n&&e.children("ul:eq(0)").children("li:nth-child("+t+")").size())this.moved(g.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+t+")").children("a:eq(0)"),"after");else if(e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size())this.moved(g.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before");else this.moved(g.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after");g.cut_copy.cut_nodes=!1}},search:function(t,i){var n=this;if((!t||this.srch&&t!=this.srch)&&(this.srch="",this.srch_opn=!1,this.container.find("a.search").removeClass("search")),this.srch=t)if(i||(i="contains"),this.settings.data.async)if(this.srch_opn)if(this.srch_opn.length){if(this.srch_opn&&this.srch_opn.length){for(var e=!1,a=0;a<this.srch_opn.length;a++)if(0<this.get_node("#"+this.srch_opn[a]).size()){e=!0;var o="#"+this.srch_opn[a];delete this.srch_opn[a],this.open_branch(o,!0,function(){n.search.apply(n,[t,i])})}e||(this.srch_opn=[],n.search.apply(n,[t,i]))}}else{this.srch_opn=!1;var r="a";this.settings.languages.length&&(r+="."+this.current_lang),this.callback("onsearch",[this.container.find(r+":"+i+"('"+t+"')"),this])}else{var s=b.extend({search:t},this.callback("beforedata",[!1,this]));b.ajax({type:this.settings.data.opts.method,url:this.settings.data.opts.url,data:s,dataType:"text",success:function(e){n.srch_opn=b.unique(e.split(",")),n.search.apply(n,[t,i])}})}else{r="a";this.settings.languages.length&&(r+="."+this.current_lang);var l=this.container.find(r+":"+i+"('"+t+"')");l.parents("li.closed").each(function(){n.open_branch(this,!0)}),this.callback("onsearch",[l,this])}},add_sheet:g.add_sheet,destroy:function(){if(this.callback("ondestroy",[this]),this.container.unbind(".jstree"),b("#"+this.container.attr("id")).die("click.jstree").die("dblclick.jstree").die("mouseover.jstree").die("mouseout.jstree").die("mousedown.jstree"),this.container.removeClass("tree ui-widget ui-widget-content tree-default tree-"+this.settings.ui.theme_name).children("ul").removeClass("no_dots ltr locked").find("li").removeClass("leaf").removeClass("open").removeClass("closed").removeClass("last").children("a").removeClass("clicked hover search"),this.cntr==g.focused)for(var e in g.inst)if(e!=this.cntr&&e!=this.container.attr("id")){g.inst[e].focus();break}g.inst[this.cntr]=!1,g.inst[this.container.attr("id")]=!1,delete g.inst[this.cntr],delete g.inst[this.container.attr("id")],g.cntr--}}}b.tree={datastores:{},plugins:{},defaults:{data:{async:!1,type:"html",opts:{method:"GET",url:!1}},selected:!1,opened:[],languages:[],ui:{dots:!0,animation:0,scroll_spd:4,theme_path:!1,theme_name:"default",selected_parent_close:"select_parent",selected_delete:"select_previous"},types:{default:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:"all",icon:{image:!1,position:!1}}},rules:{multiple:!1,multitree:"none",type_attr:"rel",createat:"bottom",drag_copy:"ctrl",drag_button:"left",use_max_children:!0,use_max_depth:!0,max_children:-1,max_depth:-1,valid_children:"all"},lang:{new_node:"New folder",loading:"Loading ..."},callback:{beforechange:function(e,t){return!0},beforeopen:function(e,t){return!0},beforeclose:function(e,t){return!0},beforemove:function(e,t,i,n){return!0},beforecreate:function(e,t,i,n){return!0},beforerename:function(e,t,i){return!0},beforedelete:function(e,t){return!0},beforedata:function(e,t){return{id:b(e).attr("id")||0}},ondata:function(e,t){return e},onparse:function(e,t){return e},onhover:function(e,t){},onselect:function(e,t){},ondeselect:function(e,t){},onchange:function(e,t){},onrename:function(e,t,i){},onmove:function(e,t,i,n,a){},oncopy:function(e,t,i,n,a){},oncreate:function(e,t,i,n,a){},ondelete:function(e,t,i){},onopen:function(e,t){},onopen_all:function(e){},onclose_all:function(e){},onclose:function(e,t){},error:function(e,t){},ondblclk:function(e,t){t.toggle_branch.call(t,e),t.select_branch.call(t,e)},onrgtclk:function(e,t,i){},onload:function(e){},oninit:function(e){},onfocus:function(e){},ondestroy:function(e){},onsearch:function(e,t){e.addClass("search")},ondrop:function(e,t,i,n){},check:function(e,t,i,n){return i},check_move:function(e,t,i,n){return!0}},plugins:{}},create:function(){return new g},focused:function(){return g.inst[g.focused]},reference:function(e){var t=b(e);return t.size()||(t=b("#"+e)),t.size()?(t=t.is(".tree")?t.attr("id"):t.parents(".tree:eq(0)").attr("id"),g.inst[t]||null):null},rollback:function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=g.inst[t],n=!i.locked;n&&i.lock(!0),i.inp=!1,i.container.html(e[t].html).find(".dragged").removeClass("dragged").end().find(".hover").removeClass("hover"),e[t].selected&&(i.selected=b("#"+e[t].selected),i.selected_arr=[],i.container.find("a.clicked").each(function(){i.selected_arr.push(i.get_node(this))})),n&&i.lock(!1),delete n,delete i}},drop_mode:function(e){e=b.extend(e,{show:!1,type:"default",str:"Foreign node"}),g.drag_drop.foreign=!0,g.drag_drop.isdown=!0,g.drag_drop.moving=!0,g.drag_drop.appended=!1,g.drag_drop.f_type=e.type,(g.drag_drop.f_data=e).show?(g.drag_drop.drag_help=b("<div id='jstree-dragged' class='tree tree-default'><ul><li class='last dragged foreign'><a href='#'><ins>&nbsp;</ins>"+e.str+"</a></li></ul></div>"),g.drag_drop.drag_node=g.drag_drop.drag_help.find("li:eq(0)")):(g.drag_drop.drag_help=!1,g.drag_drop.drag_node=!1),!1!==b.tree.drag_start&&b.tree.drag_start.call(null,!1)},drag_start:!1,drag:!1,drag_end:!1},b.fn.tree=function(t){return this.each(function(){var e=b.extend({},t);g.inst&&g.inst[b(this).attr("id")]&&g.inst[b(this).attr("id")].destroy(),!1!==e&&(new g).init(this,e)})},g.cntr=0,g.inst={},g.themes=[],g.drag_drop={isdown:!1,drag_node:!1,drag_help:!1,dragged:!1,init_x:!1,init_y:!1,moving:!1,origin_tree:!1,marker:!1,move_type:!1,ref_node:!1,appended:!1,foreign:!1,droppable:[],open_time:!1,scroll_time:!1},g.mouseup=function(e){var t=g.drag_drop;if(t.open_time&&clearTimeout(t.open_time),t.scroll_time&&clearTimeout(t.scroll_time),t.moving&&!1!==b.tree.drag_end&&b.tree.drag_end.call(null,e,t),!1===t.foreign&&t.drag_node&&t.drag_node.size()){if(t.drag_help.remove(),t.move_type)(i=g.inst[t.ref_node.parents(".tree:eq(0)").attr("id")])&&i.moved(t.dragged,t.ref_node,t.move_type,!1,"on"==t.origin_tree.settings.rules.drag_copy||"ctrl"==t.origin_tree.settings.rules.drag_copy&&(e.ctrlKey||e.metaKey));t.move_type=!1,t.ref_node=!1}if(!1!==t.foreign){var i;if(t.drag_help&&t.drag_help.remove(),t.move_type)(i=g.inst[t.ref_node.parents(".tree:eq(0)").attr("id")])&&i.callback("ondrop",[t.f_data,i.get_node(t.ref_node).get(0),t.move_type,i]);t.foreign=!1,t.move_type=!1,t.ref_node=!1}if(g.drag_drop.marker&&g.drag_drop.marker.hide(),t.dragged&&t.dragged.size()&&t.dragged.removeClass("dragged"),t.dragged=!1,t.drag_help=!1,t.drag_node=!1,t.f_type=!1,t.f_data=!1,t.init_x=!1,t.init_y=!1,t.moving=!1,t.appended=!1,t.origin_tree=!1,t.isdown)return t.isdown=!1,e.preventDefault(),e.stopPropagation(),!1},g.mousemove=function(e){var t=g.drag_drop,i=!1;if(t.isdown){if(!t.moving&&Math.abs(t.init_x-e.pageX)<5&&Math.abs(t.init_y-e.pageY)<5)return e.preventDefault(),e.stopPropagation(),!1;if(t.moving||(i=g.drag_drop.moving=!0),t.open_time&&clearTimeout(t.open_time),!1!==t.drag_help&&(t.appended||(!1!==t.foreign&&(t.origin_tree=b.tree.focused()),b("body").append(t.drag_help),t.w=t.drag_help.width(),t.appended=!0),t.drag_help.css({left:e.pageX+5,top:e.pageY+15})),i&&!1!==b.tree.drag_start&&b.tree.drag_start.call(null,e,t),!1!==b.tree.drag&&b.tree.drag.call(null,e,t),"DIV"==e.target.tagName&&"jstree-marker"==e.target.id)return!1;var n=b(e.target);n.is("ins")&&(n=n.parent());var a=n.is(".tree")?n:n.parents(".tree:eq(0)");if(0==a.size()||!g.inst[a.attr("id")])return t.scroll_time&&clearTimeout(t.scroll_time),!1!==t.drag_help&&t.drag_help.find("li:eq(0) ins").addClass("forbidden"),t.move_type=!1,t.ref_node=!1,g.drag_drop.marker.hide(),!1;var o=g.inst[a.attr("id")];o.off_height(),t.scroll_time&&clearTimeout(t.scroll_time),t.scroll_time=setTimeout(function(){o.scroll_check(e.pageX,e.pageY)},50);var r=!1;a.scrollTop();if("A"==e.target.tagName||"INS"==e.target.tagName){if(n.is("#jstree-dragged"))return!1;o.get_node(e.target).hasClass("closed")&&(t.open_time=setTimeout(function(){o.open_branch(n)},500));var s={x:(u=n.offset()).left-1,y:e.pageY-u.top},l=[];l=s.y<o.li_height/3+1?["before","inside","after"]:s.y>2*o.li_height/3-1?["after","inside","before"]:s.y<o.li_height/2?["inside","before","after"]:["inside","after","before"];var c=!1,d=0==t.foreign?t.origin_tree.container.find("li.dragged"):t.f_type;if(b.each(l,function(e,t){if(o.check_move(d,n,t))return r=t,!(c=!0)}),c){switch(r){case"before":s.y=u.top-2,g.drag_drop.marker.attr("class","marker");break;case"after":s.y=u.top-2+o.li_height,g.drag_drop.marker.attr("class","marker");break;case"inside":s.x-=2,s.y=u.top-2+o.li_height/2,g.drag_drop.marker.attr("class","marker_plus")}t.move_type=r,t.ref_node=b(e.target),!1!==t.drag_help&&t.drag_help.find(".forbidden").removeClass("forbidden"),g.drag_drop.marker.css({left:s.x,top:s.y}).show()}}if((n.is(".tree")||n.is("ul"))&&0==n.find("li:eq(0)").size()){var u=n.offset();t.move_type="inside",t.ref_node=a.children("ul:eq(0)"),!1!==t.drag_help&&t.drag_help.find(".forbidden").removeClass("forbidden"),g.drag_drop.marker.attr("class","marker_plus"),g.drag_drop.marker.css({left:u.left+10,top:u.top+15}).show()}else("A"!=e.target.tagName&&"INS"!=e.target.tagName||!c)&&(!1!==t.drag_help&&t.drag_help.find("li:eq(0) ins").addClass("forbidden"),t.move_type=!1,t.ref_node=!1,g.drag_drop.marker.hide());return e.preventDefault(),e.stopPropagation(),!1}return!0},b(function(){b(document).bind("mousemove.jstree",g.mousemove),b(document).bind("mouseup.jstree",g.mouseup)}),g.cut_copy={copy_nodes:!1,cut_nodes:!1},g.css=!1,g.get_css=function(e,t){e=e.toLowerCase();var n=g.css.cssRules||g.css.rules,a=0;do{if(n.length&&a>n.length+5)return!1;if(n[a].selectorText&&n[a].selectorText.toLowerCase()==e)return 1==t?(g.css.removeRule&&document.styleSheets[i].removeRule(a),g.css.deleteRule&&document.styleSheets[i].deleteRule(a),!0):n[a]}while(n[++a]);return!1},g.add_css=function(e){return!g.get_css(e)&&(g.css.insertRule?g.css.insertRule(e+" { }",0):g.css.addRule(e,null,0),g.get_css(e))},g.remove_css=function(e){return g.get_css(e,!0)},g.add_sheet=function(e){if(e.str){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e.str:t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}if(e.url){if(!document.createStyleSheet){var i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.media="all",i.href=e.url,document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet}try{document.createStyleSheet(e.url)}catch(e){}}},b(function(){var e=navigator.userAgent.toLowerCase(),t=(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],i="";/msie/.test(e)&&!/opera/.test(e)&&6==parseInt(t)&&(i+='.tree li { height:18px; zoom:1; } .tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); } .marker { width:45px; background-position:-32px top; } .marker_plus { width:5px; background-position:right top; }'),/opera/.test(e)&&(i+='.tree > ul > li.last:after { content:"."; display: block; height:1px; clear:both; visibility:hidden; }'),/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)&&0==t.indexOf("1.8")&&(i+=".tree .ltr li a { display:inline; float:left; } .tree li ul { clear:both; }"),g.css=g.add_sheet({str:i})})}(jQuery),function(d){d.extend(d.tree.datastores,{html:function(){return{get:function(e,t,i){return e&&d(e).size()?d("<div>").append(t.get_node(e).clone()).html():t.container.children("ul:eq(0)").html()},parse:function(e,t,i,n){return n&&n.call(null,e),e},load:function(e,n,t,a){t.url?d.ajax({type:t.method,url:t.url,data:e,dataType:"html",success:function(e,t){a.call(null,e)},error:function(e,t,i){a.call(null,!1),n.error(i+" "+t)}}):a.call(null,t.static||n.container.children("ul:eq(0)").html())}}},json:function(){return{get:function(e,t,i){var n=this;if(e=e&&0!=d(e).size()?d(e):t.container.children("ul").children("li"),i||(i={}),i.outer_attrib||(i.outer_attrib=["id","rel","class"]),i.inner_attrib||(i.inner_attrib=[]),1<e.size()){var a=[];return e.each(function(){a.push(n.get(this,t,i))}),a}if(0==e.size())return[];var o={attributes:{},data:{}};for(var r in e.hasClass("open")&&(o.data.state="open"),e.hasClass("closed")&&(o.data.state="closed"),i.outer_attrib){if(i.outer_attrib.hasOwnProperty(r))void 0!==(c="class"==i.outer_attrib[r]?e.attr(i.outer_attrib[r]).replace(/(^| )last( |$)/gi," ").replace(/(^| )(leaf|closed|open)( |$)/gi," "):e.attr(i.outer_attrib[r]))&&0<c.toString().replace(" ","").length&&(o.attributes[i.outer_attrib[r]]=c),delete c}if(t.settings.languages.length){for(var r in t.settings.languages)if(t.settings.languages.hasOwnProperty(r)){var s=e.children("a."+t.settings.languages[r]);if(i.force||i.inner_attrib.length||s.children("ins").get(0).style.backgroundImage.toString().length||s.children("ins").get(0).className.length){if(o.data[t.settings.languages[r]]={},o.data[t.settings.languages[r]].title=t.get_text(e,t.settings.languages[r]),s.children("ins").get(0).style.className.length&&(o.data[t.settings.languages[r]].icon=s.children("ins").get(0).style.className),s.children("ins").get(0).style.backgroundImage.length&&(o.data[t.settings.languages[r]].icon=s.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),i.inner_attrib.length)for(var l in o.data[t.settings.languages[r]].attributes={},i.inner_attrib){if(i.inner_attrib.hasOwnProperty(l))void 0!==(c=s.attr(i.inner_attrib[l]))&&0<c.toString().replace(" ","").length&&(o.data[t.settings.languages[r]].attributes[i.inner_attrib[l]]=c),delete c}}else o.data[t.settings.languages[r]]=t.get_text(e,t.settings.languages[r])}}else{s=e.children("a");if(o.data.title=t.get_text(e),s.children("ins").size()&&s.children("ins").get(0).className.length&&(o.data.icon=s.children("ins").get(0).className),s.children("ins").size()&&s.children("ins").get(0).style.backgroundImage.length&&(o.data.icon=s.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),i.inner_attrib.length)for(var l in o.data.attributes={},i.inner_attrib){var c;if(i.inner_attrib.hasOwnProperty(l))void 0!==(c=s.attr(i.inner_attrib[l]))&&0<c.toString().replace(" ","").length&&(o.data.attributes[i.inner_attrib[l]]=c),delete c}}return 0<e.children("ul").size()&&(o.children=[],e.children("ul").children("li").each(function(){o.children.push(n.get(this,t,i))})),o},parse:function(e,t,i,n){if("[object Array]"===Object.prototype.toString.apply(e)){for(var a="",o=0;o<e.length;o++)"function"!=typeof e[o]&&(a+=this.parse(e[o],t,i));return n&&n.call(null,a),a}if(!e||!e.data&&""!=e.data)return n&&n.call(null,!1),"";a="";a+="<li ";var r=!1;if(e.attributes)for(var o in e.attributes)e.attributes.hasOwnProperty(o)&&("class"==o?(a+=" class='"+e.attributes[o]+" ","closed"!=e.state&&"open"!=e.state||(a+=" "+e.state+" "),a+="' ",r=!0):a+=" "+o+"='"+e.attributes[o]+"' ");if(r||"closed"!=e.state&&"open"!=e.state||(a+=" class='"+e.state+"' "),a+=">",t.settings.languages.length)for(o=0;o<t.settings.languages.length;o++){if((l={href:"",style:""}).class=t.settings.languages[o],e.data[t.settings.languages[o]]&&"undefined"!=(typeof e.data[t.settings.languages[o]].attributes).toLowerCase())for(var s in e.data[t.settings.languages[o]].attributes)e.data[t.settings.languages[o]].attributes.hasOwnProperty(s)&&("style"==s||"class"==s?l[s]+=" "+e.data[t.settings.languages[o]].attributes[s]:l[s]=e.data[t.settings.languages[o]].attributes[s]);for(var s in a+="<a",l)l.hasOwnProperty(s)&&(a+=" "+s+'="'+l[s]+'" ');a+=">",e.data[t.settings.languages[o]]&&e.data[t.settings.languages[o]].icon?a+="<ins "+(-1==e.data[t.settings.languages[o]].icon.indexOf("/")?" class='"+e.data[t.settings.languages[o]].icon+"' ":" style='background-image:url(\""+e.data[t.settings.languages[o]].icon+"\");' ")+">&nbsp;</ins>":a+="<ins>&nbsp;</ins>",a+=("undefined"!=(typeof e.data[t.settings.languages[o]].title).toLowerCase()?e.data[t.settings.languages[o]].title:e.data[t.settings.languages[o]])+"</a>"}else{var l={href:"",style:"",class:""};if("undefined"!=(typeof e.data.attributes).toLowerCase())for(var o in e.data.attributes)e.data.attributes.hasOwnProperty(o)&&("style"==o||"class"==o?l[o]+=" "+e.data.attributes[o]:l[o]=e.data.attributes[o]);for(var o in a+="<a",l)l.hasOwnProperty(o)&&(a+=" "+o+'="'+l[o]+'" ');a+=">",e.data.icon?a+="<ins "+(-1==e.data.icon.indexOf("/")?" class='"+e.data.icon+"' ":" style='background-image:url(\""+e.data.icon+"\");' ")+">&nbsp;</ins>":a+="<ins>&nbsp;</ins>",a+=("undefined"!=(typeof e.data.title).toLowerCase()?e.data.title:e.data)+"</a>"}if(e.children&&e.children.length){a+="<ul>";for(o=0;o<e.children.length;o++)a+=this.parse(e.children[o],t,i);a+="</ul>"}return a+="</li>",n&&n.call(null,a),a},load:function(e,n,t,a){t.static?a.call(null,t.static):d.ajax({type:t.method,url:t.url,data:e,dataType:"json",success:function(e,t){a.call(null,e)},error:function(e,t,i){a.call(null,!1),n.error(i+" "+t)}})}}}})}(jQuery),JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,a,o,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;i<o;i+=1)r[i]=str(i,l)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(a=str(n=rep[i],l))&&r.push(quote(n)+(gap?": ":":")+a);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(a=str(n,l))&&r.push(quote(n)+(gap?": ":":")+a);return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,a}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(indent=gap="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,a=e[t];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(void 0!==(n=walk(a,i))?a[i]=n:delete a[i]);return reviver.call(e,t,a)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(h,f,m){function g(e,t,i){var n=f.createElement(e);return t&&(n.id=te+t),i&&(n.style.cssText=i),h(n)}function v(){return m.innerHeight?m.innerHeight:h(m).height()}function s(e){var t=I.length,i=(B+e)%t;return i<0?t+i:i}function b(e,t){return Math.round((/%/.test(e)?("x"===t?P.width():v())/100:1)*parseInt(e,10))}function _(e,t){return e.photo||e.photoRegex.test(t)}function y(e,t){return e.retinaUrl&&1<m.devicePixelRatio?t.replace(e.photoRegex,e.retinaSuffix):t}function A(e){"contains"in $[0]&&!$[0].contains(e.target)&&(e.stopPropagation(),$.focus())}function w(){var e,t=h.data(U,ee);for(e in null==t?(z=h.extend({},r),console&&console.log&&console.log("Error: cboxElement missing settings object")):z=h.extend({},t),z)h.isFunction(z[e])&&"on"!==e.slice(0,2)&&(z[e]=z[e].call(U));z.rel=z.rel||U.rel||h(U).data("rel")||"nofollow",z.href=z.href||h(U).attr("href"),z.title=z.title||U.title,"string"==typeof z.href&&(z.href=h.trim(z.href))}function x(e,t){h(f).trigger(e),pe.trigger(e),h.isFunction(t)&&t.call(U)}function n(e){var t,i,n,a,o,r,s,l,c,d,u,p;G||(U=e,w(),I=h(U),B=0,"nofollow"!==z.rel&&(I=h("."+ie).filter(function(){var e,t=h.data(this,ee);return t&&(e=h(this).data("rel")||t.rel||this.rel),e===z.rel}),-1===(B=I.index(U))&&(I=I.add(U),B=I.length-1)),k.css({opacity:parseFloat(z.opacity),cursor:z.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Z&&$.add(k).removeClass(Z),z.className&&$.add(k).addClass(z.className),Z=z.className,R.html(z.close).show(),K||(K=J=!0,$.css({visibility:"hidden",display:"block"}),M=g(he,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(C),q=S.height()+E.height()+C.outerHeight(!0)-C.height(),H=T.width()+D.width()+C.outerWidth(!0)-C.width(),W=M.outerHeight(!0),V=M.outerWidth(!0),z.w=b(z.initialWidth,"x"),z.h=b(z.initialHeight,"y"),Q.position(),de&&P.bind("resize."+ue+" scroll."+ue,function(){k.css({width:P.width(),height:v(),top:P.scrollTop(),left:P.scrollLeft()})}).trigger("resize."+ue),u=te+"Slideshow_",p="click."+te,z.slideshow&&I[1]?(s=function(){clearTimeout(r)},l=function(){(z.loop||I[B+1])&&(r=setTimeout(Q.next,z.slideshowSpeed))},c=function(){L.html(z.slideshowStop).unbind(p).one(p,d),pe.bind(oe,l).bind(ae,s).bind(re,d),$.removeClass(u+"off").addClass(u+"on")},d=function(){s(),pe.unbind(oe,l).unbind(ae,s).unbind(re,d),L.html(z.slideshowStart).unbind(p).one(p,function(){Q.next(),c()}),$.removeClass(u+"on").addClass(u+"off")},z.slideshowAuto?c():d()):$.removeClass(u+"off "+u+"on"),x(ne,z.onOpen),F.add(j).hide(),$.focus(),f.addEventListener&&(f.addEventListener("focus",A,!0),pe.one(se,function(){f.removeEventListener("focus",A,!0)})),z.returnFocus&&pe.one(se,function(){h(U).focus()})),a=Q.prep,o=++fe,Y=!(J=!0),U=I[B],w(),x(le),x(ae,z.onLoad),z.h=z.height?b(z.height,"y")-W-q:z.innerHeight&&b(z.innerHeight,"y"),z.w=z.width?b(z.width,"x")-V-H:z.innerWidth&&b(z.innerWidth,"x"),z.mw=z.w,z.mh=z.h,z.maxWidth&&(z.mw=b(z.maxWidth,"x")-V-H,z.mw=z.w&&z.w<z.mw?z.w:z.mw),z.maxHeight&&(z.mh=b(z.maxHeight,"y")-W-q,z.mh=z.h&&z.h<z.mh?z.h:z.mh),t=z.href,X=setTimeout(function(){N.show()},100),z.inline?(n=g(he).hide().insertBefore(h(t)[0]),pe.one(le,function(){n.replaceWith(M.children())}),a(h(t))):z.iframe?a(" "):z.html?a(z.html):_(z,t)?(t=y(z,t),h(Y=new Image).addClass(te+"Photo").bind("error",function(){z.title=!1,a(g(he,"Error").html(z.imgError))}).one("load",function(){var e;o===fe&&(z.retinaImage&&1<m.devicePixelRatio&&(Y.height=Y.height/m.devicePixelRatio,Y.width=Y.width/m.devicePixelRatio),z.scalePhotos&&(i=function(){Y.height-=Y.height*e,Y.width-=Y.width*e},z.mw&&Y.width>z.mw&&(e=(Y.width-z.mw)/Y.width,i()),z.mh&&Y.height>z.mh&&(e=(Y.height-z.mh)/Y.height,i())),z.h&&(Y.style.marginTop=Math.max(z.mh-Y.height,0)/2+"px"),I[1]&&(z.loop||I[B+1])&&(Y.style.cursor="pointer",Y.onclick=function(){Q.next()}),ce&&(Y.style.msInterpolationMode="bicubic"),setTimeout(function(){a(Y)},1))}),setTimeout(function(){Y.src=t},1)):t&&O.load(t,z.data,function(e,t){o===fe&&a("error"===t?g(he,"Error").html(z.xhrError):h(this).contents())}))}function a(){!$&&f.body&&(o=!1,P=h(m),$=g(he).attr({id:ee,class:ce?te+(de?"IE6":"IE"):"",role:"dialog",tabindex:"-1"}).hide(),k=g(he,"Overlay",de?"position:absolute":"").hide(),N=g(he,"LoadingOverlay").add(g(he,"LoadingGraphic")),c=g(he,"Wrapper"),C=g(he,"Content").append(j=g(he,"Title"),l=g(he,"Current"),u=g("button","Previous"),d=g("button","Next"),L=g("button","Slideshow"),N,R=g("button","Close")),c.append(g(he).append(g(he,"TopLeft"),S=g(he,"TopCenter"),g(he,"TopRight")),g(he,!1,"clear:left").append(T=g(he,"MiddleLeft"),C,D=g(he,"MiddleRight")),g(he,!1,"clear:left").append(g(he,"BottomLeft"),E=g(he,"BottomCenter"),g(he,"BottomRight"))).find("div div").css({float:"left"}),O=g(he,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),F=d.add(u).add(l).add(L),h(f.body).append(k,$.append(c,O)))}var k,$,c,C,S,T,D,E,I,P,M,O,N,j,l,L,d,u,R,F,z,q,H,W,V,U,B,Y,K,J,G,X,Q,Z,o,r={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},ee="colorbox",te="cbox",ie=te+"Element",ne=te+"_open",ae=te+"_load",oe=te+"_complete",re=te+"_cleanup",se=te+"_closed",le=te+"_purge",ce=!h.support.leadingWhitespace,de=ce&&!m.XMLHttpRequest,ue=te+"_IE6",pe=h({}),he="div",fe=0;h.colorbox||(h(a),(Q=h.fn[ee]=h[ee]=function(e,t){var i=this;if(e=e||{},a(),function(){function e(e){1<e.which||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),n(this))}return!!$&&(o||(o=!0,d.click(function(){Q.next()}),u.click(function(){Q.prev()}),R.click(function(){Q.close()}),k.click(function(){z.overlayClose&&Q.close()}),h(f).bind("keydown."+te,function(e){var t=e.keyCode;K&&z.escKey&&27===t&&(e.preventDefault(),Q.close()),K&&z.arrowKey&&I[1]&&!e.altKey&&(37===t?(e.preventDefault(),u.click()):39===t&&(e.preventDefault(),d.click()))}),h.isFunction(h.fn.on)?h(f).on("click."+te,"."+ie,e):h("."+ie).live("click."+te,e)),!0)}()){if(h.isFunction(i))i=h("<a/>"),e.open=!0;else if(!i[0])return i;t&&(e.onComplete=t),i.each(function(){h.data(this,ee,h.extend({},h.data(this,ee)||r,e))}).addClass(ie),(h.isFunction(e.open)&&e.open.call(i)||e.open)&&n(i[0])}return i}).position=function(e,t){function i(e){S[0].style.width=E[0].style.width=C[0].style.width=parseInt(e.style.width,10)-H+"px",C[0].style.height=T[0].style.height=D[0].style.height=parseInt(e.style.height,10)-q+"px"}var n,a,o,r=0,s=0,l=$.offset();P.unbind("resize."+te),$.css({top:-9e4,left:-9e4}),a=P.scrollTop(),o=P.scrollLeft(),z.fixed&&!de?(l.top-=a,l.left-=o,$.css({position:"fixed"})):(r=a,s=o,$.css({position:"absolute"})),s+=!1!==z.right?Math.max(P.width()-z.w-V-H-b(z.right,"x"),0):!1!==z.left?b(z.left,"x"):Math.round(Math.max(P.width()-z.w-V-H,0)/2),r+=!1!==z.bottom?Math.max(v()-z.h-W-q-b(z.bottom,"y"),0):!1!==z.top?b(z.top,"y"):Math.round(Math.max(v()-z.h-W-q,0)/2),$.css({top:l.top,left:l.left,visibility:"visible"}),e=$.width()===z.w+V&&$.height()===z.h+W?0:e||0,c[0].style.width=c[0].style.height="9999px",n={width:z.w+V+H,height:z.h+W+q,top:r,left:s},0===e&&$.css(n),$.dequeue().animate(n,{duration:e,complete:function(){i(this),J=!1,c[0].style.width=z.w+V+H+"px",c[0].style.height=z.h+W+q+"px",z.reposition&&setTimeout(function(){P.bind("resize."+te,Q.position)},1),t&&t()},step:function(){i(this)}})},Q.resize=function(e){K&&((e=e||{}).width&&(z.w=b(e.width,"x")-V-H),e.innerWidth&&(z.w=b(e.innerWidth,"x")),M.css({width:z.w}),e.height&&(z.h=b(e.height,"y")-W-q),e.innerHeight&&(z.h=b(e.innerHeight,"y")),e.innerHeight||e.height||(M.css({height:"auto"}),z.h=M.height()),M.css({height:z.h}),Q.position("none"===z.transition?0:z.speed))},Q.prep=function(e){if(K){var t,r="none"===z.transition?0:z.speed;M.empty().remove(),(M=g(he,"LoadedContent").append(e)).hide().appendTo(O.show()).css({width:(z.w=z.w||M.width(),z.w=z.mw&&z.mw<z.w?z.mw:z.w,z.w),overflow:z.scrolling?"auto":"hidden"}).css({height:(z.h=z.h||M.height(),z.h=z.mh&&z.mh<z.h?z.mh:z.h,z.h)}).prependTo(C),O.hide(),h(Y).css({float:"none"}),t=function(){function e(){ce&&$[0].style.removeAttribute("filter")}var t,i,n=I.length,a="frameBorder",o="allowTransparency";K&&(i=function(){clearTimeout(X),N.hide(),x(oe,z.onComplete)},ce&&Y&&M.fadeIn(100),j.html(z.title).add(M).show(),1<n?("string"==typeof z.current&&l.html(z.current.replace("{current}",B+1).replace("{total}",n)).show(),d[z.loop||B<n-1?"show":"hide"]().html(z.next),u[z.loop||B?"show":"hide"]().html(z.previous),z.slideshow&&L.show(),z.preloading&&h.each([s(-1),s(1)],function(){var e,t=I[this],i=h.data(t,ee);i&&i.href?(e=i.href,h.isFunction(e)&&(e=e.call(t))):e=h(t).attr("href"),e&&_(i,e)&&(e=y(i,e),(new Image).src=e)})):F.hide(),z.iframe?(a in(t=g("iframe")[0])&&(t[a]=0),o in t&&(t[o]="true"),z.scrolling||(t.scrolling="no"),h(t).attr({src:z.href,name:(new Date).getTime(),class:te+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",i).appendTo(M),pe.one(le,function(){t.src="//about:blank"}),z.fastIframe&&h(t).trigger("load")):i(),"fade"===z.transition?$.fadeTo(r,1,e):e())},"fade"===z.transition?$.fadeTo(r,0,function(){Q.position(0,t)}):Q.position(r,t)}},Q.next=function(){!J&&I[1]&&(z.loop||I[B+1])&&(B=s(1),n(I[B]))},Q.prev=function(){!J&&I[1]&&(z.loop||B)&&(B=s(-1),n(I[B]))},Q.close=function(){K&&!G&&(K=!(G=!0),x(re,z.onCleanup),P.unbind("."+te+" ."+ue),k.fadeTo(200,0),$.stop().fadeTo(300,0,function(){$.add(k).css({opacity:1,cursor:"auto"}).hide(),x(le),M.empty().remove(),setTimeout(function(){G=!1,x(se,z.onClosed)},1)}))},Q.remove=function(){h([]).add($).add(k).remove(),$=null,h("."+ie).removeData(ee).removeClass(ie),h(f).unbind("click."+te)},Q.element=function(){return h(U)},Q.settings=r)}(jQuery,document,window),jQuery.fn.highlight=function(e){return this.each(function(){!function e(t,i){var n=0;if(3==t.nodeType){var a=t.data.toUpperCase().indexOf(i);if(0<=a){var o=document.createElement("span");o.className="highlight";var r=t.splitText(a),s=(r.splitText(i.length),r.cloneNode(!0));o.appendChild(s),r.parentNode.replaceChild(o,r),n=1}}else if(1==t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var l=0;l<t.childNodes.length;++l)l+=e(t.childNodes[l],i);return n}(this,e.toUpperCase())})},jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()}).end()},function(r){var s=new Date;r.setBaseDate=function(e){s=e},r.formatTime=function(r,e){if(!e)return"";var t=function(e,t,i){var n,a,o=""+t;if(n=e,(a=s+1<r.length&&r.charAt(s+1)==n)&&s++,a)for(;o.length<i;)o="0"+o;return o},i="";if(e)for(var s=0;s<r.length;s++)switch(r.charAt(s)){case"h":var n=e.getHours();0==n?n=12:12<n&&(n-=12),i+=t("h",n,2);break;case"H":i+=t("H",e.getHours(),2);break;case"m":i+=t("m",e.getMinutes(),2);break;case"s":i+=t("s",e.getSeconds(),2);break;case"p":i+=e.getHours()<12?"am":"pm";break;case"P":i+=e.getHours()<12?"AM":"PM";break;default:i+=r.charAt(s)}return i},r.fn.timeTag=function(){var e;new Date,s.getTimezoneOffset();if(t=r(this).attr("datetime"))t.match(/^\d+$/)&&(t=parseInt(t,10)),e=new Date(t);else{var t=r(this).text();1e9<parseInt(t,10)&&(t=1e3*parseInt(t,10),r(this).attr("datetime",t)),e=new Date(t)}var i=((new Date).getTime()-e.getTime())/6e4;if(i<1){r(this).text("less than a minute ago");var n=this;setTimeout(function(){r(n).timeTag()},2e4)}else if(i<60){var a=Math.floor(i)+" minute";2<i&&(a+="s"),a+=" ago",r(this).text(a);n=this;setTimeout(function(){r(n).timeTag()},2e4)}else{var o=i/60;if(o<2){r(this).text("about an hour ago");n=this;setTimeout(function(){r(n).timeTag()},2e4)}else if(o<24){r(this).text(Math.floor(o)+" hours ago");n=this;setTimeout(function(){r(n).timeTag()},2e4)}else{if(o/24<2){r(this).text("yesterday at "+r.formatTime("h:mmp",e));n=this;setTimeout(function(){r(n).timeTag()},2e4)}else r(this).text(r.datepicker.formatDate("M d, yy",e)+" at "+r.formatTime("h:mmp",e))}}r(this).attr("title",e.toString())},r.input_error=function(e,t){var i;r(e).is(":hidden")?(r(e).show(),i=r(e).offset(),r(e).hide()):i=r(e).offset(),i.top+=r(e).outerHeight();var n=r(e).data("error");n||(n=r('<div class="input-error"><div class="message"></div><div class="close"><span>close</span></div></div>').hide().css({position:"absolute","z-index":1e4}),r(".close",n).bind("click",function(){r(this).parent(".input-error").hide()}),r(e).data("error",n),r(n).data("input",e),r(document.body).append(n)),r(".message",n).text(t),r(n).css({top:i.top+"px",left:i.left+"px"}).show()},r.fn.fixDateInput=function(){r(this).datepicker({dateFormat:"mm-dd-yy",changeMonth:!0,changeYear:!0,yearRange:"1900:2100",onSelect:function(e,t){r(this).trigger("change")}})},r.fn.fixColorInput=function(){r(this).colorPicker()}}(jQuery),$("input").live("focus click",function(e){"date"==this.getAttribute("type")?Modernizr.inputtypes.date||$(this).fixDateInput():"color"==this.getAttribute("type")&&(Modernizr.inputtypes.color||$(this).fixColorInput())}),function(w){function x(){}function k(e){S=[e]}function $(e,t,i){return e&&e.apply&&e.apply(t.context||t,i)}function C(e){return/\?/.test(e)?"&":"?"}var S,T="insertBefore",D="onclick",E="onerror",I="onreadystatechange",P="readyState",M="removeChild",O=window,N=w.Deferred,j=w("head")[0]||document.documentElement,L={},R=0,F={callback:"_jqjsp",url:location.href},z=O.opera,q=!!w("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;function e(t){var e,i,n,a,o,r=(t=w.extend({},F,t)).success,s=t.error,l=t.complete,c=t.dataFilter,d=t.callbackParameter,u=t.callback,p=t.cache,h=t.pageCache,f=t.charset,m=t.url,g=t.data,v=t.timeout,b=0,_=x;if(N&&N(function(e){e.done(r).fail(s),r=e.resolve,s=e.reject}).promise(t),!(t.abort=function(){!b++&&_()})===$(t.beforeSend,t,[t])||b)return t;function y(e){b++||(_(),h&&(L[m]={s:[e]}),c&&(e=c.apply(t,[e])),$(r,t,[e,"success",t]),$(l,t,[t,"success"]))}function A(e){b++||(_(),h&&"timeout"!=e&&(L[m]=e),$(s,t,[t,e]),$(l,t,[t,e]))}return m=m||"",g=g?"string"==typeof g?g:w.param(g,t.traditional):"",m+=g?C(m)+g:"",d&&(m+=C(m)+encodeURIComponent(d)+"=?"),!p&&!h&&(m+=C(m)+"_"+(new Date).getTime()+"="),m=m.replace(/=\?(&|$)/,"="+u+"$1"),h&&(e=L[m])?e.s?y(e.s[0]):A(e):(O[u]=k,(n=w("<script>")[0]).id="_jqjsp"+R++,f&&(n.charset=f),z&&z.version()<11.6?(a=w("<script>")[0]).text="document.getElementById('"+n.id+"')."+E+"()":n.async="async",q&&(n.htmlFor=n.id,n.event=D),n.onload=n[E]=n[I]=function(e){if(!n[P]||!/i/.test(n[P])){try{n[D]&&n[D]()}catch(e){}e=S,S=0,e?y(e[0]):A("error")}},n.src=m,_=function(e){o&&clearTimeout(o),n[I]=n.onload=n[E]=null,j[M](n),a&&j[M](a)},j[T](n,i=j.firstChild),a&&j[T](a,i),o=0<v&&setTimeout(function(){A("timeout")},v)),t}e.setup=function(e){w.extend(F,e)},w.jsonp=e}(jQuery),function(s){s.extend(s.fn,{livequery:function(i,n,a){var o,r=this;return s.isFunction(i)&&(a=n,n=i,i=void 0),s.each(s.livequery.queries,function(e,t){if(!(r.selector!=t.selector||r.context!=t.context||i!=t.type||n&&n.$lqguid!=t.fn.$lqguid||a&&a.$lqguid!=t.fn2.$lqguid))return(o=t)&&!1}),(o=o||new s.livequery(this.selector,this.context,i,n,a)).stopped=!1,o.run(),this},expire:function(i,n,a){var o=this;return s.isFunction(i)&&(a=n,n=i,i=void 0),s.each(s.livequery.queries,function(e,t){o.selector!=t.selector||o.context!=t.context||i&&i!=t.type||n&&n.$lqguid!=t.fn.$lqguid||a&&a.$lqguid!=t.fn2.$lqguid||this.stopped||s.livequery.stop(t.id)}),this}}),s.livequery=function(e,t,i,n,a){return this.selector=e,this.context=t,this.type=i,this.fn=n,this.fn2=a,this.elements=[],this.stopped=!1,this.id=s.livequery.queries.push(this)-1,n.$lqguid=n.$lqguid||s.livequery.guid++,a&&(a.$lqguid=a.$lqguid||s.livequery.guid++),this},s.livequery.prototype={stop:function(){var i=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(e,t){i.fn2.apply(t)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var i=this,e=this.elements,n=s(this.selector,this.context),t=n.not(e);this.elements=n,this.type?(t.bind(this.type,this.fn),0<e.length&&s.each(e,function(e,t){s.inArray(t,n)<0&&s.event.remove(t,i.type,i.fn)})):(t.each(function(){i.fn.apply(this)}),this.fn2&&0<e.length&&s.each(e,function(e,t){s.inArray(t,n)<0&&i.fn2.apply(t)}))}}},s.extend(s.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(s.livequery.running&&s.livequery.queue.length)for(var e=s.livequery.queue.length;e--;)s.livequery.queries[s.livequery.queue.shift()].run()},pause:function(){s.livequery.running=!1},play:function(){s.livequery.running=!0,s.livequery.run()},registerPlugin:function(){s.each(arguments,function(e,t){if(s.fn[t]){var i=s.fn[t];s.fn[t]=function(){var e=i.apply(this,arguments);return s.livequery.run(),e}}})},run:function(e){null!=e?s.inArray(e,s.livequery.queue)<0&&s.livequery.queue.push(e):s.each(s.livequery.queries,function(e){s.inArray(e,s.livequery.queue)<0&&s.livequery.queue.push(e)}),s.livequery.timeout&&clearTimeout(s.livequery.timeout),s.livequery.timeout=setTimeout(s.livequery.checkQueue,20)},stop:function(e){null!=e?s.livequery.queries[e].stop():s.each(s.livequery.queries,function(e){s.livequery.queries[e].stop()})}}),s.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),s(function(){s.livequery.play()})}(jQuery),function(n){var t=["DOMMouseScroll","mousewheel"];function i(e){var t=[].slice.call(arguments,1),i=0;return(e=n.event.fix(e||window.event)).type="mousewheel",e.wheelDelta&&(i=e.wheelDelta/120),e.detail&&(i=-e.detail/3),t.unshift(e,i),n.event.handle.apply(this,t)}n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null}},n.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(s){var g=s.scrollTo=function(e,t,i){s(window).scrollTo(e,t,i)};function e(e){return"object"==typeof e?e:{top:e,left:e}}g.defaults={axis:"xy",duration:1.3<=parseFloat(s.fn.jquery)?0:1},g.window=function(e){return s(window)._scrollable()},s.fn._scrollable=function(){return this.map(function(){if(!(!this.nodeName||-1!=s.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])))return this;var e=(this.contentWindow||this).document||this.ownerDocument||this;return s.browser.safari||"BackCompat"==e.compatMode?e.body:e.documentElement})},s.fn.scrollTo=function(t,i,m){return"object"==typeof i&&(m=i,i=0),"function"==typeof m&&(m={onAfter:m}),"max"==t&&(t=9e9),m=s.extend({},g.defaults,m),i=i||m.speed||m.duration,m.queue=m.queue&&1<m.axis.length,m.queue&&(i/=2),m.offset=e(m.offset),m.over=e(m.over),this._scrollable().each(function(){var l,c=this,d=s(c),u=t,p={},h=d.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=e(u);break}u=s(u,this);case"object":(u.is||u.style)&&(l=(u=s(u)).offset())}function f(e){d.animate(p,i,m.easing,e&&function(){e.call(this,t,m)})}s.each(m.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",n=i.toLowerCase(),a="scroll"+i,o=c[a],r=g.max(c,t);if(l)p[a]=l[n]+(h?0:o-d.offset()[n]),m.margin&&(p[a]-=parseInt(u.css("margin"+i))||0,p[a]-=parseInt(u.css("border"+i+"Width"))||0),p[a]+=m.offset[n]||0,m.over[n]&&(p[a]+=u["x"==t?"width":"height"]()*m.over[n]);else{var s=u[n];p[a]=s.slice&&"%"==s.slice(-1)?parseFloat(s)/100*r:s}/^\d+$/.test(p[a])&&(p[a]=p[a]<=0?0:Math.min(p[a],r)),!e&&m.queue&&(o!=p[a]&&f(m.onAfterFirst),delete p[a])}),f(m.onAfter)}).end()},g.max=function(e,t){var i="x"==t?"Width":"Height",n="scroll"+i;if(!s(e).is("html,body"))return e[n]-s(e)[i.toLowerCase()]();var a="client"+i,o=e.ownerDocument.documentElement,r=e.ownerDocument.body;return Math.max(o[n],r[n])-Math.min(o[a],r[a])}}(jQuery),function(e){var n=jQuery.scrollTo;n.stopOnUserInput=function(t){var i=n.window();i.one("mousedown.scroll DOMMouseScroll.scroll mousewheel.scroll keydown.scroll touchstart.scroll",function(e){(0<e.which||"mousedown"===e.type||"mousewheel"===e.type||"touchstart"===e.type)&&(i.stop(!0).off(".scroll"),"function"==typeof t&&t.call(this,e))})}}(),function(t){t.widget("ui.selectbox",t.ui.mouse,{widgetEventPrefix:"edit",options:{options:[],placeholder:"",placeholderPersist:!1,selectCallback:function(){}},_create:function(){t(this.element).addClass("ui-selectbox"),this.box=t("<div><span>"+this.options.placeholder+"</span></div>").addClass("box").append(this.element),this.menu=t("<ul></ul>");for(var e=0;e<this.options.options.length;e++)this.addOption(this.options.options[e])},addOption:function(e){t('<li><span class="icon"><span>'+e.title+"</span></li>").appendTo(this.menu)}}),t.extend(t.ui.editable,{version:"1.8.2"})}(jQuery),function($){$.fn.selectbox=function(settings,extra){if("string"!=typeof settings){var defaults={class:null,options:[],placeholder:"",placeholder_persist:!1,active_callback:null};return settings=$.extend(defaults,settings),this.each(function(){$(this).data("selectbox/settings",settings),build.call(this)})}function build(){var t=this,e=$(this).data("selectbox/settings");$(this).addClass("ui-selectbox-container");var i=$('<div class="ui-selectbox-box"></div>').appendTo($(this));$('<div class="ui-selectbox-placeholder">'+e.placeholder+"</div>").appendTo(i),$('<div class="ui-selectbox-arrow">&nabla;</div>').appendTo(i);i.bind("click",function(e){box_click_callback.call(t,e)});var n="ui-selectbox-dropdown";null!=e.class&&(n+=" "+e.class);var a=$('<div class="'+n+'"><ul></ul></div>');$(this).append(a),$(this).data("selectbox/option_index",0);for(var o=0;o<e.options.length;o++)add_option.call(this,e.options[o]);$(document.body).bind("click",function(e){document_body_click_callback.call(t,e)}),a.hide()}function document_body_click_callback(e){$(this).hasClass("ui-active")&&$(e.target).parents(".ui-selectbox-container")[0]!==$(this)[0]&&($(".ui-selectbox-dropdown",this).hide(),$(this).removeClass("ui-active"))}function box_click_callback(e){var t=$(this).data("selectbox/settings");$(".ui-selectbox-dropdown",this).is(":hidden")&&"function"==typeof t.active_callback&&t.active_callback.call(this),$(".ui-selectbox-dropdown",this).toggle(),$(this).toggleClass("ui-active"),$(".ui-selectbox-dropdown",this).css({position:"absolute",top:$(".ui-selectbox-box",this).outerHeight(!0)+"px",left:parseInt($(this).css("padding-left"),10)-$(".tlc",$(".ui-selectbox-dropdown",this)).outerWidth(!1)+"px"});var i=$(".ui-selectbox-box",this).outerWidth(!1)-$(".ui-selectbox-dropdown .tlc",this).width()-$(".ui-selectbox-dropdown .trc",this).width()-parseInt($(".ui-selectbox-dropdown",this).css("padding-left"),10)-parseInt($(".ui-selectbox-dropdown",this).css("padding-right"),10);$(".ui-selectbox-dropdown",this).css({"min-width":i+"px"})}function option_click_callback(e,t){$(this).data("selectbox/settings");if(!$(t).hasClass("ui-disabled")){/ui\-selectbox\-option\-(\d+)/.exec($(t).attr("class"))[1];"function"==typeof $(t).data("selectbox/option/onclick")&&$(t).data("selectbox/option/onclick").call(this,e,t),change_placeholder.call(this,$(t).text()),$(".ui-selectbox-dropdown",this).hide(),$(this).removeClass("ui-active")}}function change_placeholder(e){$(this).data("selectbox/settings").placeholder_persist||$(".ui-selectbox-placeholder",this).html(e)}function execute_option(option,settings){"function"==eval("typeof "+option)&&eval(option+".call(this, settings)")}function add_option(e){var t,i=this,n=$(this).data("selectbox/option_index");if(void 0!==e.optgroup&&!0===e.optgroup)t=$('<li class="ui-selectbox-optgroup ui-selectbox-optgroup-'+n+'">'+e.text+"</li>");else{var a="ui-selectbox-option ui-selectbox-option-"+n;void 0!==e.noselect&&!0===e.noselect?t=$('<li class="'+(a+=" ui-selectbox-option-noselect")+'">'+e.text+"</li>"):(t=$('<li class="'+a+'">'+e.text+"</li>")).bind("click",function(e){option_click_callback.call(i,e,this)})}"string"==typeof e.id&&$(t).attr("id",e.id),"string"==typeof e.class&&$(t).addClass(e.class),"string"==typeof e.divider&&("above"==e.divider?$(t).addClass("ui-selectbox-option-divider-above"):"below"==e.divider?$(t).addClass("ui-selectbox-option-divider-below"):"both"==e.divider&&$(t).addClass("ui-selectbox-option-divider-both")),"string"==typeof e.after?$(e.after,this).after(t):"string"==typeof e.before?$(e.before,this).before(t):$(".ui-selectbox-dropdown ul",this).append(t),$(t).data("selectbox/option/value",e.value),"function"==typeof e.onclick&&$(t).data("selectbox/option/onclick",e.onclick),n++,$(this).data("selectbox/option_index",n)}void 0!==extra&&execute_option.call(this,settings,extra)}}(jQuery),function(P){P.fn.tipTip=function(r){var s={activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:0,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},afterEnter:function(){},exit:function(){},afterExit:function(){},cssClass:"",detectTextDir:!0};if(P("#tiptip_holder").length<=0){var e=P("<div>",{id:"tiptip_arrow_inner"}),D=P("<div>",{id:"tiptip_arrow"}).append(e),E=P("<div>",{id:"tiptip_content"}),I=P("<div>",{id:"tiptip_holder"}).append(D).append(E);P("body").append(I)}else I=P("#tiptip_holder"),E=P("#tiptip_content"),D=P("#tiptip_arrow");return this.each(function(){var S=P(this),e=S.data("tipTip"),T=e&&e.options||P.extend({},s,r),t={holder:I,content:E,arrow:D,options:T,position:o};if(e)switch(r){case"show":n();break;case"hide":a();break;case"destroy":S.unbind(".tipTip").removeData("tipTip");break;case"position":o()}else{var i=!1;S.data("tipTip",{options:T}),"hover"==T.activation?S.bind("mouseenter.tipTip",function(){n()}).bind("mouseleave.tipTip",function(){T.keepAlive?I.one("mouseleave.tipTip",function(){a()}):a()}):"focus"==T.activation?S.bind("focus.tipTip",function(){n()}).bind("blur.tipTip",function(){a()}):"click"==T.activation?S.bind("click.tipTip",function(e){return e.preventDefault(),n(),!1}).bind("mouseleave.tipTip",function(){T.keepAlive?I.one("mouseleave.tipTip",function(){a()}):a()}):T.activation}function n(){var e;!1!==T.enter.call(S,t)&&(T.content?e=P.isFunction(T.content)?T.content.call(S,t):T.content:(e=T.content=S.attr(T.attribute),S.removeAttr(T.attribute)),e&&(E.html(e),I.hide().css({"max-width":T.maxWidth}),T.cssClass&&I.addClass(T.cssClass),o(),i&&clearTimeout(i),i=setTimeout(function(){I.stop(!0,!0).fadeIn(T.fadeIn)},T.delay),P(window).bind("resize.tipTip scroll.tipTip",o),S.addClass("tiptip_visible"),T.afterEnter.call(S,t)))}function a(){!1!==T.exit.call(S,t)&&(i&&clearTimeout(i),I.fadeOut(T.fadeOut),P(window).unbind("resize.tipTip scroll.tipTip"),S.removeClass("tiptip_visible"),T.afterExit.call(S,t))}function o(){I.removeAttr("class");var e,t,i,n,a,o,r=S.offset(),s=r.top,l=r.left,c=S.outerWidth(),d=S.outerHeight(),u=I.outerWidth(),p=I.outerHeight(),h="tip_top",f="tip_bottom",m="tip_left",g="tip_right",v=P(window),b=v.scrollTop(),_=v.scrollLeft(),y=v.width(),A=v.height(),w=T.detectTextDir&&(o=E.text(),M.test(o));function x(){i=h,e=s-p-T.edgeOffset-6,t=l+(c-u)/2}function k(){i=f,e=s+d+T.edgeOffset+6,t=l+(c-u)/2}function $(){i=m,e=s+(d-p)/2,t=l-u-T.edgeOffset-6}function C(){i=g,e=s+(d-p)/2,t=l+c+T.edgeOffset}"bottom"==T.defaultPosition?k():"top"==T.defaultPosition?x():"left"!=T.defaultPosition||w?"left"==T.defaultPosition&&w?C():"right"!=T.defaultPosition||w?"right"==T.defaultPosition&&w?$():k():C():$(),i==m&&!w&&t<_?C():i==m&&w&&t-u<_?C():i==g&&!w&&_+y<t?$():i==g&&w&&_+y<t+u?$():i==h&&e<b?k():i==f&&b+A<e+p&&x(),i!=m&&i!=g||(A+b<e+p?e=A+b<s+d?s+d-p:A+b-p:e<b&&(e=s<b?s:b)),i!=h&&i!=f||(y+_<t+u?t=y+_<l+c?l+c-u:y+_-u:t<_&&(t=l<_?l:_)),I.css({left:Math.round(t),top:Math.round(e)}).removeClass(h).removeClass(f).removeClass(m).removeClass(g).addClass(i),i==h?(n=p,a=l-t+(c-12)/2):i==f?(n=0,a=l-t+(c-12)/2):i==m?(n=s-e+(d-12)/2,a=u):i==g&&(n=s-e+(d-12)/2,a=0),D.css({left:Math.round(a),top:Math.round(n)})}})};var M=new RegExp("^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]")}(jQuery),function(c){function n(e,t,a){var o,r=this,s=e.add(this),l=e.find(a.tabs),i=t.jquery?t:e.children(t);l.length||(l=e.children()),i.length||(i=e.parent().find(t)),i.length||(i=c(t)),c.extend(this,{click:function(e,t){var i=l.eq(e);if("string"==typeof e&&e.replace("#","")&&(i=l.filter("[href*="+e.replace("#","")+"]"),e=Math.max(l.index(i),0)),a.rotate){var n=l.length-1;if(e<0)return r.click(n,t);if(n<e)return r.click(0,t)}if(!i.length){if(0<=o)return r;e=a.initialIndex,i=l.eq(e)}return e===o?r:((t=t||c.Event()).type="onBeforeClick",s.trigger(t,[e]),t.isDefaultPrevented()?void 0:(d[a.effect].call(r,e,function(){t.type="onClick",s.trigger(t,[e])}),o=e,l.removeClass(a.current),i.addClass(a.current),r))},getConf:function(){return a},getTabs:function(){return l},getPanes:function(){return i},getCurrentPane:function(){return i.eq(o)},getCurrentTab:function(){return l.eq(o)},getIndex:function(){return o},next:function(){return r.click(o+1)},prev:function(){return r.click(o-1)}}),c.each("onBeforeClick,onClick".split(","),function(e,t){c.isFunction(a[t])&&c(r).bind(t,a[t]),r[t]=function(e){return c(r).bind(t,e),r}}),a.history&&c.fn.history&&(c.tools.history.init(l),a.event="history"),l.each(function(t){c(this).bind(a.event,function(e){return r.click(t,e),e.preventDefault()})}),i.find("a[href^=#]").click(function(e){r.click(c(this).attr("href"),e)}),location.hash?r.click(location.hash):(0===a.initialIndex||0<a.initialIndex)&&r.click(a.initialIndex)}c.tools=c.tools||{version:"1.2.2"},c.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(e,t){d[e]=t}};var i,d={default:function(e,t){this.getPanes().hide().eq(e).show(),t.call()},fade:function(e,t){var i=this.getConf(),n=i.fadeOutSpeed,a=this.getPanes();n?a.fadeOut(n):a.hide(),a.eq(e).fadeIn(i.fadeInSpeed,t)},slide:function(e,t){this.getPanes().slideUp(200),this.getPanes().eq(e).slideDown(400,t)},ajax:function(e,t){this.getPanes().eq(0).load(this.getTabs().eq(e).attr("href"),t)}};c.tools.tabs.addEffect("horizontal",function(e,t){i||(i=this.getPanes().eq(0).width()),this.getCurrentPane().animate({width:0},function(){c(this).hide()}),this.getPanes().eq(e).animate({width:i},function(){c(this).show(),t.call()})}),c.fn.tabs=function(e,t){var i=this.data("tabs");return i||(c.isFunction(t)&&(t={onBeforeClick:t}),t=c.extend({},c.tools.tabs.conf,t),this.each(function(){i=new n(c(this),e,t),c(this).data("tabs",i)}),t.api?i:this)}}(jQuery),function(h){function i(i,n){function e(e){var t=h(e);return t.length<2?t:i.parent().find(e)}var t,a,o,r=this,s=i.add(this),l=i.data("tabs"),c=!1,d=e(n.next).click(function(){l.next()}),u=e(n.prev).click(function(){l.prev()});(h.extend(r,{getTabs:function(){return l},getConf:function(){return n},play:function(){if(!t){var e=h.Event("onBeforePlay");if(s.trigger(e),e.isDefaultPrevented())return r;c=!1,t=setInterval(l.next,n.interval),s.trigger("onPlay"),l.next()}},pause:function(){if(!t)return r;var e=h.Event("onBeforePause");if(s.trigger(e),e.isDefaultPrevented())return r;t=clearInterval(t),o=clearInterval(o),s.trigger("onPause")},stop:function(){r.pause(),c=!0}}),h.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(e,t){h.isFunction(n[t])&&r.bind(t,n[t]),r[t]=function(e){return r.bind(t,e)}}),n.autopause)&&l.getTabs().add(d).add(u).add(l.getPanes()).hover(function(){r.pause(),a=clearInterval(a)},function(){c||(a=setTimeout(r.play,n.interval))});if(n.autoplay?o=setTimeout(r.play,n.interval):r.stop(),n.clickable&&l.getPanes().click(function(){l.next()}),!l.getConf().rotate){var p=n.disabledClass;l.getIndex()||u.addClass(p),l.onBeforeClick(function(e,t){t?(u.removeClass(p),t==l.getTabs().length-1?d.addClass(p):d.removeClass(p)):u.addClass(p)})}}var n;n=h.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}},h.fn.slideshow=function(e){var t=this.data("slideshow");return t||(e=h.extend({},n.conf,e),this.each(function(){t=new i(h(this),e),h(this).data("slideshow",t)}),e.api?t:this)}}(jQuery),function(f){function m(e,t,i){var n=i.relative?e.position().top:e.offset().top,a=i.relative?e.position().left:e.offset().left,o=i.position[0];n-=t.outerHeight()-i.offset[0],a+=e.outerWidth()+i.offset[1];var r=t.outerHeight()+e.outerHeight();return"center"==o&&(n+=r/2),"bottom"==o&&(n+=r),o=i.position[1],e=t.outerWidth()+e.outerWidth(),"center"==o&&(a-=e/2),"left"==o&&(a-=e),{top:n,left:a}}function i(i,n){var a,o,r=this,s=i.add(r),l=0,c=0,d=i.attr("title"),u=g[n.effect],e=i.is(":input"),t=e&&i.is(":checkbox, :radio, select, :button"),p=i.attr("type"),h=n.events[p]||n.events[e?t?"widget":"input":"def"];if(!u)throw'Nonexistent effect "'+n.effect+'"';if(2!=(h=h.split(/,\s*/)).length)throw"Tooltip: bad events configuration for "+p;i.bind(h[0],function(e){n.predelay?(clearTimeout(l),c=setTimeout(function(){r.show(e)},n.predelay)):r.show(e)}).bind(h[1],function(e){n.delay?(clearTimeout(c),l=setTimeout(function(){r.hide(e)},n.delay)):r.hide(e)}),d&&n.cancelDefault&&(i.removeAttr("title"),i.data("title",d)),f.extend(r,{show:function(e){if(!a&&(d?a=f(n.layout).addClass(n.tipClass).appendTo(document.body).hide().append(d):n.tip?a=f(n.tip).eq(0):(a=i.next()).length||(a=i.parent().next()),!a.length))throw"Cannot find tooltip for "+i;if(r.isShown())return r;a.stop(!0,!0);var t=m(i,a,n);return(e=e||f.Event()).type="onBeforeShow",s.trigger(e,[t]),e.isDefaultPrevented()||(t=m(i,a,n),a.css({position:"absolute",top:t.top,left:t.left}),o=!0,u[0].call(r,function(){e.type="onShow",o="full",s.trigger(e)}),t=n.events.tooltip.split(/,\s*/),a.bind(t[0],function(){clearTimeout(l),clearTimeout(c)}),t[1]&&!i.is("input:not(:checkbox, :radio), textarea")&&a.bind(t[1],function(e){e.relatedTarget!=i[0]&&i.trigger(h[1].split(" ")[0])})),r},hide:function(e){return a&&r.isShown()?((e=e||f.Event()).type="onBeforeHide",s.trigger(e),e.isDefaultPrevented()?void 0:(o=!1,g[n.effect][1].call(r,function(){e.type="onHide",o=!1,s.trigger(e)}),r)):r},isShown:function(e){return e?"full"==o:o},getConf:function(){return n},getTip:function(){return a},getTrigger:function(){return i}}),f.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(e,t){f.isFunction(n[t])&&f(r).bind(t,n[t]),r[t]=function(e){return f(r).bind(t,e),r}})}f.tools=f.tools||{version:"1.2.2"},f.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,i){g[e]=[t,i]}};var g={toggle:[function(e){var t=this.getConf(),i=this.getTip();(t=t.opacity)<1&&i.css({opacity:t}),i.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};f.fn.tooltip=function(e){var t=this.data("tooltip");return t||("string"==typeof(e=f.extend(!0,{},f.tools.tooltip.conf,e)).position&&(e.position=e.position.split(/,?\s/)),this.each(function(){t=new i(f(this),e),f(this).data("tooltip",t)}),e.api?t:this)}}(jQuery),function(r){var e=r.tools.tooltip;r.extend(e.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!r.browser.msie});var s={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};e.addEffect("slide",function(e){var t=this.getConf(),i=this.getTip(),n=t.slideFade?{opacity:t.opacity}:{},a=s[t.direction]||s.up;n[a[1]]=a[0]+"="+t.slideOffset,t.slideFade&&i.css({opacity:0}),i.show().animate(n,t.slideInSpeed,e)},function(e){var t=this.getConf(),i=t.slideOffset,n=t.slideFade?{opacity:0}:{},a=s[t.direction]||s.up,o=""+a[0];t.bounce&&(o="+"==o?"-":"+"),n[a[1]]=o+"="+i,this.getTip().animate(n,t.slideOutSpeed,function(){r(this).hide(),e.call()})})}(jQuery),function(d){var e=d.tools.tooltip;e.dynamic={conf:{classNames:"top right bottom left"}},d.fn.dynamic=function(s){"number"==typeof s&&(s={speed:s});var l,c=(s=d.extend({},e.dynamic.conf,s)).classNames.split(/\s/);return this.each(function(){var e=d(this).tooltip().onBeforeShow(function(e,t){e=this.getTip();var i,n,a,o,r=this.getConf();l||(l=[r.position[0],r.position[1],r.offset[0],r.offset[1],d.extend({},r)]),d.extend(r,l[4]),r.position=[l[0],l[1]],r.offset=[l[2],l[3]],e.css({visibility:"hidden",position:"absolute",top:t.top,left:t.left}).show(),i=e,n=d(window),a=n.width()+n.scrollLeft(),o=n.height()+n.scrollTop(),function(e){for(var t=e.length;t--;)if(e[t])return!1;return!0}(t=[i.offset().top<=n.scrollTop(),a<=i.offset().left+i.width(),o<=i.offset().top+i.height(),n.scrollLeft()>=i.offset().left])||(t[2]&&(d.extend(r,s.top),r.position[0]="top",e.addClass(c[0])),t[3]&&(d.extend(r,s.right),r.position[1]="right",e.addClass(c[1])),t[0]&&(d.extend(r,s.bottom),r.position[0]="bottom",e.addClass(c[2])),t[1]&&(d.extend(r,s.left),r.position[1]="left",e.addClass(c[3])),(t[0]||t[2])&&(r.offset[0]*=-1),(t[1]||t[3])&&(r.offset[1]*=-1)),e.css({visibility:"visible"}).hide()});e.onBeforeShow(function(){var e=this.getConf();this.getTip(),setTimeout(function(){e.position=[l[0],l[1]],e.offset=[l[2],l[3]]},0)}),e.onHide(function(){this.getTip().removeClass(s.classNames)}),ret=e}),s.api?ret:this}}(jQuery),function(p){function t(e,t){var i=p(t);return i.length<2?i:e.parent().find(t)}function i(e,o){var r=this,s=e.add(r),l=e.children(),c=0,d=o.vertical;if(h||(h=r),1<l.length&&(l=p(o.items,e)),p.extend(r,{getConf:function(){return o},getIndex:function(){return c},getSize:function(){return r.getItems().size()},getNaviButtons:function(){return i.add(u)},getRoot:function(){return e},getItemWrap:function(){return l},getItems:function(){return l.children(o.item).not("."+o.clonedClass)},move:function(e,t){return r.seekTo(c+e,t)},next:function(e){return r.move(1,e)},prev:function(e){return r.move(-1,e)},begin:function(e){return r.seekTo(0,e)},end:function(e){return r.seekTo(r.getSize()-1,e)},focus:function(){return h=r},addItem:function(e){return e=p(e),o.circular?(p(".cloned:last").before(e),p(".cloned:first").replaceWith(e.clone().addClass(o.clonedClass))):l.append(e),s.trigger("onAddItem",[e]),r},seekTo:function(e,t,i){if(o.circular&&0===e&&-1==c&&0!==t)return r;if(!o.circular&&e<0||e>r.getSize()||e<-1)return r;var n=e;e.jquery?e=r.getItems().index(e):n=r.getItems().eq(e);var a=p.Event("onBeforeSeek");return(i||(s.trigger(a,[e,t]),!a.isDefaultPrevented()&&n.length))&&(n=d?{top:-n.position().top}:{left:-n.position().left},c=e,h=r,void 0===t&&(t=o.speed),l.animate(n,t,o.easing,i||function(){s.trigger("onSeek",[e])})),r}}),p.each(["onBeforeSeek","onSeek","onAddItem"],function(e,t){p.isFunction(o[t])&&p(r).bind(t,o[t]),r[t]=function(e){return p(r).bind(t,e),r}}),o.circular){var n=r.getItems().slice(-1).clone().prependTo(l),a=r.getItems().eq(1).clone().appendTo(l);n.add(a).addClass(o.clonedClass),r.onBeforeSeek(function(e,t,i){if(!e.isDefaultPrevented()){if(-1==t)return r.seekTo(n,i,function(){r.end(0)}),e.preventDefault();t==r.getSize()&&r.seekTo(a,i,function(){r.begin(0)})}}),r.seekTo(0,0)}var i=t(e,o.prev).click(function(){r.prev()}),u=t(e,o.next).click(function(){r.next()});!o.circular&&1<r.getSize()&&r.onBeforeSeek(function(e,t){i.toggleClass(o.disabledClass,t<=0),u.toggleClass(o.disabledClass,t>=r.getSize()-1)}),o.mousewheel&&p.fn.mousewheel&&e.mousewheel(function(e,t){if(o.mousewheel)return r.move(t<0?1:-1,o.wheelSpeed||50),!1}),o.keyboard&&p(document).bind("keydown.scrollable",function(e){if(o.keyboard&&!e.altKey&&!e.ctrlKey&&!p(e.target).is(":input")&&("static"==o.keyboard||h==r)){var t=e.keyCode;if(d&&(38==t||40==t))return r.move(38==t?-1:1),e.preventDefault();if(!d&&(37==t||39==t))return r.move(37==t?-1:1),e.preventDefault()}}),p(r).trigger("onBeforeSeek",[o.initialIndex])}var h;p.tools=p.tools||{version:"1.2.2"},p.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,wheelSpeed:0}},p.fn.scrollable=function(e){var t=this.data("scrollable");return t||(e=p.extend({},p.tools.scrollable.conf,e),this.each(function(){t=new i(p(this),e),p(this).data("scrollable",t)}),e.api?t:this)}}(jQuery),function(r){var t=r.tools.scrollable;t.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},r.fn.autoscroll=function(e){"number"==typeof e&&(e={interval:e});var a,o=r.extend({},t.autoscroll.conf,e);return this.each(function(){var e=r(this).data("scrollable");e&&(a=e);var t,i,n=!0;e.play=function(){t||(n=!1,t=setInterval(function(){e.next()},o.interval),e.next())},e.pause=function(){t=clearInterval(t)},e.stop=function(){e.pause(),n=!0},o.autopause&&e.getRoot().add(e.getNaviButtons()).hover(function(){e.pause(),clearInterval(i)},function(){n||(i=setTimeout(e.play,o.interval))}),o.autoplay&&setTimeout(e.play,o.interval)}),o.api?a:this}}(jQuery),function(f){var e=f.tools.scrollable;e.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},f.fn.navigator=function(p){var h;return"string"==typeof p&&(p={navi:p}),p=f.extend({},e.navigator.conf,p),this.each(function(){function i(e,t,i){if(s.seekTo(t),!u)return i.preventDefault();location.hash&&(location.hash=e.attr("href").replace("#",""))}function n(){return l.find(p.naviItem||"> *")}function a(t){var e=f("<"+(p.naviItem||"a")+"/>").click(function(e){i(f(this),t,e)}).attr("href","#"+t);return 0===t&&e.addClass(d),p.indexed&&e.text(t+1),p.idPrefix&&e.attr("id",p.idPrefix+t),e.appendTo(l)}function o(e,t){(e=n().eq(t.replace("#",""))).length||(e=n().filter("[href="+t+"]")),e.click()}var e,t,r,s=f(this).data("scrollable"),l=(e=s.getRoot(),t=p.navi,(r=f(t)).length<2?r:e.parent().find(t)),c=s.getNaviButtons(),d=p.activeClass,u=p.history&&f.fn.history;s&&(h=s),s.getNaviButtons=function(){return c.add(l)},n().length?n().each(function(t){f(this).click(function(e){i(f(this),t,e)})}):f.each(s.getItems(),function(e){a(e)}),s.onBeforeSeek(function(e,t){var i=n().eq(t);!e.isDefaultPrevented()&&i.length&&n().removeClass(d).eq(t).addClass(d)}),s.onAddItem(function(e,t){t=a(s.getItems().index(t)),u&&t.history(o)}),u&&n().history(o)}),p.api?h:this}}(jQuery),function(f){function i(e,r){var t,s,l,c=this,d=e.add(c),u=f(window),p=f.tools.expose&&(r.mask||r.expose),h=Math.random().toString().slice(10);p&&("string"==typeof p&&(p={color:p}),p.closeOnClick=p.closeOnEsc=!1);var i=r.target||e.attr("rel");if(!(s=i?f(i):e).length)throw"Could not find Overlay: "+i;e&&-1==e.index(s)&&e.click(function(e){return c.load(e),e.preventDefault()}),f.extend(c,{load:function(e){if(c.isOpened())return c;var t=g[r.effect];if(!t)throw'Overlay: cannot find effect : "'+r.effect+'"';if(r.oneInstance&&f.each(m,function(){this.close(e)}),(e=e||f.Event()).type="onBeforeLoad",d.trigger(e),e.isDefaultPrevented())return c;l=!0,p&&f(s).expose(p);var i=r.top,n=r.left,a=s.outerWidth({margin:!0}),o=s.outerHeight({margin:!0});return"string"==typeof i&&(i="center"==i?Math.max((u.height()-o)/2,0):parseInt(i,10)/100*u.height()),"center"==n&&(n=Math.max((u.width()-a)/2,0)),t[0].call(c,{top:i,left:n},function(){l&&(e.type="onLoad",d.trigger(e))}),p&&r.closeOnClick&&f.mask.getMask().one("click",c.close),r.closeOnClick&&f(document).bind("click."+h,function(e){f(e.target).parents(s).length||c.close(e)}),r.closeOnEsc&&f(document).bind("keydown."+h,function(e){27==e.keyCode&&c.close(e)}),c},close:function(e){return c.isOpened()?((e=e||f.Event()).type="onBeforeClose",d.trigger(e),e.isDefaultPrevented()?void 0:(l=!1,g[r.effect][1].call(c,function(){e.type="onClose",d.trigger(e)}),f(document).unbind("click."+h).unbind("keydown."+h),p&&f.mask.close(),c)):c},getOverlay:function(){return s},getTrigger:function(){return e},getClosers:function(){return t},isOpened:function(){return l},getConf:function(){return r}}),f.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(e,t){f.isFunction(r[t])&&f(c).bind(t,r[t]),c[t]=function(e){return f(c).bind(t,e),c}}),(t=s.find(r.close||".close")).length||r.close||(t=f('<div class="close"></div>'),s.prepend(t)),t.click(function(e){c.close(e)}),r.load&&c.load()}f.tools=f.tools||{version:"1.2.2"},f.tools.overlay={addEffect:function(e,t,i){g[e]=[t,i]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!f.browser.msie||6<f.browser.version,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var m=[],g={};f.tools.overlay.addEffect("default",function(e,t){var i=this.getConf(),n=f(window);i.fixed||(e.top+=n.scrollTop(),e.left+=n.scrollLeft()),e.position=i.fixed?"fixed":"absolute",this.getOverlay().css(e).fadeIn(i.speed,t)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)}),f.fn.overlay=function(e){var t=this.data("overlay");return t||(f.isFunction(e)&&(e={onBeforeLoad:e}),e=f.extend(!0,{},f.tools.overlay.conf,e),this.each(function(){t=new i(f(this),e),m.push(t),f(this).data("overlay",t)}),e.api?t:this)}}(jQuery),function(d){function u(e){var t=e.offset();return{top:t.top+e.height()/2,left:t.left+e.width()/2}}var e=d.tools.overlay,p=d(window);d.extend(e.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999}),e.addEffect("apple",function(e,t){var i=this.getOverlay(),n=this.getConf(),a=this.getTrigger(),o=this,r=i.outerWidth({margin:!0}),s=i.data("img");if(!s){var l=i.css("backgroundImage");if(!l)throw"background-image CSS property not set for overlay";l=l.slice(l.indexOf("(")+1,l.indexOf(")")).replace(/\"/g,""),i.css("backgroundImage","none"),(s=d('<img src="'+l+'"/>')).css({border:0,display:"none"}).width(r),d("body").append(s),i.data("img",s)}l=n.start.top||Math.round(p.height()/2);var c=n.start.left||Math.round(p.width()/2);a&&(l=(a=u(a)).top,c=a.left),s.css({position:"absolute",top:l,left:c,width:0,zIndex:n.zIndex}).show(),e.top+=p.scrollTop(),e.left+=p.scrollLeft(),e.position="absolute",i.css(e),s.animate({top:i.css("top"),left:i.css("left"),width:r},n.speed,function(){n.fixed&&(e.top-=p.scrollTop(),e.left-=p.scrollLeft(),e.position="fixed",s.add(i).css(e)),i.css("zIndex",n.zIndex+1).fadeIn(n.fadeInSpeed,function(){o.isOpened()&&!d(this).index(i)?t.call():i.hide()})})},function(e){var t=this.getOverlay().hide(),i=this.getConf(),n=this.getTrigger();t=t.data("img");var a={top:i.start.top,left:i.start.left,width:0};n&&d.extend(a,u(n)),i.fixed&&t.css({position:"absolute"}).animate({top:"+="+p.scrollTop(),left:"+="+p.scrollLeft()},0),t.animate(a,i.closeSpeed,e)})}(jQuery),function(T){function D(e,t){return 32-new Date(e,t,32).getDate()}function s(e,t){for(e=""+e,t=t||2;e.length<t;)e="0"+e;return e}function c(e,t,i){var n=e.getDate(),a=e.getDay(),o=e.getMonth();e=e.getFullYear();var r={d:n,dd:s(n),ddd:N[i].shortDays[a],dddd:N[i].days[a],m:o+1,mm:s(o+1),mmm:N[i].shortMonths[o],mmmm:N[i].months[o],yy:String(e).slice(2),yyyy:e};return t=t.replace(l,function(e){return e in r?r[e]:e.slice(1,e.length-1)}),d.html(t).html()}function E(e){return parseInt(e,10)}function I(e,t){return e.getYear()===t.getYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function P(e){if(e){if(e.constructor==Date)return e;if("string"==typeof e){var t=e.split("-");if(3==t.length)return new Date(E(t[0]),E(t[1])-1,E(t[2]));if(!/^-?\d+$/.test(e))return;e=E(e)}return(t=new Date).setDate(t.getDate()+e),t}}function n(o,d){function u(e,t,i){f=(w=e).getFullYear(),m=e.getMonth(),a=e.getDate(),(i=i||T.Event("api")).type="change",l.trigger(i,[e]),i.isDefaultPrevented()||(o.val(c(e,t.format,t.lang)),o.data("date",e),v.hide(i))}function i(e){e.type="onShow",l.trigger(e),T(document).bind("keydown.d",function(e){var t=e.keyCode;if(8==t)return o.val(""),v.hide(e);if(27==t)return v.hide(e);if(0<=T(O).index(t)){if(!g)return v.show(e),e.preventDefault();var i=T("#"+_.weeks+" a"),n=T("."+_.focus),a=i.index(n);return n.removeClass(_.focus),74==t||40==t?a+=7:75==t||38==t?a-=7:76==t||39==t?a+=1:72!=t&&37!=t||(a-=1),-1==a?(v.addMonth(-1),n=T("#"+_.weeks+" a:last")):35==a?(v.addMonth(),n=T("#"+_.weeks+" a:first")):n=i.eq(a),n.addClass(_.focus),e.preventDefault()}return 34==t?v.addMonth():33==t?v.addMonth(-1):36==t?v.today():(13==t&&(T(e.target).is("select")||T("."+_.focus).click()),0<=T([16,17,18,9]).index(t))}),T(document).bind("click.d",function(e){var t=e.target;T(t).parents("#"+_.root).length||t==o[0]||n&&t==n[0]||v.hide(e)})}var n,p,h,f,m,a,g,v=this,b=new Date,_=d.css,y=N[d.lang],r=T("#"+_.root),A=r.find("#"+_.title),w=o.attr("data-value")||d.value||o.val(),x=o.attr("min")||d.min,k=o.attr("max")||d.max;if(w=P(w)||b,x=P(x||365*d.yearRange[0]),k=P(k||365*d.yearRange[1]),!y)throw"Dateinput: invalid language: "+d.lang;if("date"==o.attr("type")){var s=T("<input/>");T.each("name,readonly,disabled,value,required".split(","),function(e,t){s.attr(t,o.attr(t))}),o.replaceWith(s),o=s}o.addClass(_.input);var l=o.add(v);if(!r.length){if((r=T("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",_.root)).children().eq(0).attr("id",_.head).end().eq(1).attr("id",_.body).children().eq(0).attr("id",_.days).end().eq(1).attr("id",_.weeks).end().end().end().find("a").eq(0).attr("id",_.prev).end().eq(1).attr("id",_.next),A=r.find("#"+_.head).find("div").attr("id",_.title),d.selectors){var $=T("<select/>").attr("id",_.month),C=T("<select/>").attr("id",_.year);A.append($.add(C))}for(var e=r.find("#"+_.days),t=0;t<7;t++)e.append(T("<span/>").text(y.shortDays[(t+d.firstDay)%7]));o.after(r)}d.trigger&&(n=T("<a/>").attr("href","#").addClass(_.trigger).click(function(e){return v.show(),e.preventDefault()}).insertAfter(o));var S=r.find("#"+_.weeks);C=r.find("#"+_.year),$=r.find("#"+_.month),T.extend(v,{show:function(e){if(!o.is("[readonly]")&&!g&&((e=e||T.Event()).type="onBeforeShow",l.trigger(e),!e.isDefaultPrevented())){T.each(M,function(){this.hide()}),g=!0,$.unbind("change").change(function(){v.setValue(C.val(),T(this).val())}),C.unbind("change").change(function(){v.setValue(T(this).val(),$.val())}),p=r.find("#"+_.prev).unbind("click").click(function(){return p.hasClass(_.disabled)||v.addMonth(-1),!1}),h=r.find("#"+_.next).unbind("click").click(function(){return h.hasClass(_.disabled)||v.addMonth(),!1}),v.setValue(w);var t=o.position();return r.css({top:t.top+o.outerHeight({margins:!0})+d.offset[0],left:t.left+d.offset[1]}),d.speed?r.show(d.speed,function(){i(e)}):(r.show(),i(e)),v}},setValue:function(i,e,t){var n;if(-1<=parseInt(e,10)?(i=E(i),e=E(e),t=E(t),n=new Date(i,e,t)):(i=(n=i||w).getYear()+1900,e=n.getMonth(),t=n.getDate()),-1==e?(e=11,i--):12==e&&(e=0,i++),!g)return u(n,d),v;m=e,f=i,t=(n=new Date(i,e,1-d.firstDay)).getDay();var a,o=D(i,e),r=D(i,e-1);if(d.selectors){for($.empty(),T.each(y.months,function(e,t){x<new Date(i,e+1,-1)&&k>new Date(i,e,0)&&$.append(T("<option/>").html(t).attr("value",e))}),C.empty(),n=i+d.yearRange[0];n<i+d.yearRange[1];n++)x<new Date(n+1,-1,0)&&k>new Date(n,0,0)&&C.append(T("<option/>").text(n));$.val(e),C.val(i)}else A.html(y.months[e]+" "+i);S.empty(),p.add(h).removeClass(_.disabled);for(var s,l,c=0;c<42;c++)s=T("<a/>"),c%7==0&&(a=T("<div/>").addClass(_.week),S.append(a)),c<t?(s.addClass(_.off),l=r-t+c+1,n=new Date(i,e-1,l)):t+o<=c?(s.addClass(_.off),l=c-o-t+1,n=new Date(i,e+1,l)):(l=c-t+1,n=new Date(i,e,l),I(w,n)?s.attr("id",_.current).addClass(_.focus):I(b,n)&&s.attr("id",_.today)),x&&n<x&&s.add(p).addClass(_.disabled),k&&k<n&&s.add(h).addClass(_.disabled),s.attr("href","#"+l).text(l).data("date",n),a.append(s),s.click(function(e){var t=T(this);return t.hasClass(_.disabled)||(T("#"+_.current).removeAttr("id"),t.attr("id",_.current),u(t.data("date"),d,e)),!1});return _.sunday&&S.find(_.week).each(function(){var e=d.firstDay?7-d.firstDay:0;T(this).children().slice(e,e+1).addClass(_.sunday)}),v},setMin:function(e,t){return x=P(e),t&&w<x&&v.setValue(x),v},setMax:function(e,t){return k=P(e),t&&k<w&&v.setValue(k),v},today:function(){return v.setValue(b)},addDay:function(e){return this.setValue(f,m,a+(e||1))},addMonth:function(e){return this.setValue(f,m+(e||1),a)},addYear:function(e){return this.setValue(f+(e||1),m,a)},hide:function(e){if(g){if((e=e||T.Event()).type="onHide",l.trigger(e),T(document).unbind("click.d").unbind("keydown.d"),e.isDefaultPrevented())return;r.hide(),g=!1}return v},getConf:function(){return d},getInput:function(){return o},getCalendar:function(){return r},getValue:function(e){return e?c(w,e,d.lang):w},isOpen:function(){return g}}),T.each(["onBeforeShow","onShow","change","onHide"],function(e,t){T.isFunction(d[t])&&T(v).bind(t,d[t]),v[t]=function(e){return T(v).bind(t,e),v}}),o.bind("focus click",v.show).keydown(function(e){var t=e.keyCode;return!g&&0<=T(O).index(t)?(v.show(e),e.preventDefault()):!!(e.shiftKey||e.ctrlKey||e.altKey||9==t)||e.preventDefault()}),P(o.val())&&u(w,d)}T.tools=T.tools||{version:"1.2.2"};var e,M=[],O=[75,76,38,39,74,72,40,37],N={};(e=T.tools.dateinput={conf:{format:"mm/dd/yy",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:0,max:0,trigger:!1,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},localize:function(e,i){T.each(i,function(e,t){i[e]=t.split(",")}),N[e]=i}}).localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var l=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,d=T("<a/>");T.expr[":"].date=function(e){var t=e.getAttribute("type");return t&&"date"==t||!!T(e).data("dateinput")},T.fn.dateinput=function(i){return this.data("dateinput")?this:(i=T.extend({},e.conf,i),T.each(i.css,function(e,t){t||"prefix"==e||(i.css[e]=(i.css.prefix||"")+(t||e))}),this.each(function(){var e=new n(T(this),i);M.push(e),e=e.getInput().data("dateinput",e),t=t?t.add(e):e}),t||this);var t}}(jQuery),function(y){function A(e,t){return(t=parseInt(e.css(t),10))?t:(e=e[0].currentStyle)&&e.width&&parseInt(e.width,10)}function w(e){return(e=e.data("events"))&&e.onSlide}function n(s,l){function n(e,t,i,n){if(void 0===i?i=t/u*m:n&&(i-=l.min),g&&(i=Math.round(i/g)*g),(void 0===t||g)&&(t=i*u/m),isNaN(i))return p;var a,o;t=Math.max(0,Math.min(t,u)),i=t/u*m,!n&&c||(i+=l.min),c&&(n?t=u-t:i=l.max-i),a=i,o=v,o=Math.pow(10,o),i=Math.round(a*o)/o;var r="click"==e.type;return _&&void 0!==d&&!r&&(e.type="onSlide",b.trigger(e,[i,t]),e.isDefaultPrevented())||(n=r?l.speed:0,r=r?function(){e.type="change",b.trigger(e,[i])}:null,c?(h.animate({top:t},n,r),l.progress&&f.animate({height:u-t+h.width()/2},n)):(h.animate({left:t},n,r),l.progress&&f.animate({width:t+h.width()/2},n)),d=i,t,s.val(i)),p}function i(){(c=l.vertical||A(o,"height")>A(o,"width"))?(u=A(o,"height")-A(h,"height"),a=o.offset().top+u):(u=A(o,"width")-A(h,"width"),a=o.offset().left)}function e(){i(),p.setValue(l.value||l.min)}var c,d,a,u,p=this,t=l.css,o=y("<div><div/><a href='#'/></div>").data("rangeinput",p);s.before(o);var h=o.addClass(t.slider).find("a").addClass(t.handle),f=o.find("div").addClass(t.progress);y.each("min,max,step,value".split(","),function(e,t){e=s.attr(t),parseFloat(e)&&(l[t]=parseFloat(e,10))});var m=l.max-l.min,g="any"==l.step?0:l.step,v=l.precision;if(void 0===v)try{v=g.toString().split(".")[1].length}catch(e){v=0}if("range"==s.attr("type")){var r=y("<input/>");y.each("name,readonly,disabled,required".split(","),function(e,t){r.attr(t,s.attr(t))}),r.val(l.value),s.replaceWith(r),s=r}s.addClass(t.input);var b=y(p).add(s),_=!0;y.extend(p,{getValue:function(){return d},setValue:function(e,t){return n(t||y.Event("api"),void 0,e,!0)},getConf:function(){return l},getProgress:function(){return f},getHandle:function(){return h},getInput:function(){return s},step:function(e,t){t=t||y.Event();var i="any"==l.step?1:l.step;p.setValue(d+i*(e||1),t)},stepUp:function(e){return p.step(e||1)},stepDown:function(e){return p.step(-e||-1)}}),y.each("onSlide,change".split(","),function(e,t){y.isFunction(l[t])&&y(p).bind(t,l[t]),p[t]=function(e){return y(p).bind(t,e),p}}),h.drag({drag:!1}).bind("dragStart",function(){_=w(y(p))||w(s)}).bind("drag",function(e,t,i){if(s.is(":disabled"))return!1;n(e,c?t:i)}).bind("dragEnd",function(e){e.isDefaultPrevented()||(e.type="change",b.trigger(e,[d]))}).click(function(e){return e.preventDefault()}),o.click(function(e){if(s.is(":disabled")||e.target==h[0])return e.preventDefault();i();var t=h.width()/2;n(e,c?u-a-t+e.pageY:e.pageX-a-t)}),l.keyboard&&s.keydown(function(e){if(!s.attr("readonly")){var t=e.keyCode,i=-1!=y([75,76,38,33,39]).index(t),n=-1!=y([74,72,40,34,37]).index(t);if((i||n)&&!(e.shiftKey||e.altKey||e.ctrlKey))return i?p.step(33==t?10:1,e):n&&p.step(34==t?-10:-1,e),e.preventDefault()}}),s.blur(function(e){var t=y(this).val();t!==d&&p.setValue(t,e)}),y.extend(s[0],{stepUp:p.stepUp,stepDown:p.stepDown}),e(),u||y(window).load(e)}var e,i,l;y.tools=y.tools||{version:"1.2.2"},e=y.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:void 0,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}},y.fn.drag=function(s){return document.ondragstart=function(){return!1},s=y.extend({x:!0,y:!0,drag:!0},s),i=i||y(document).bind("mousedown mouseup",function(e){var n=y(e.target);if("mousedown"==e.type&&n.data("drag")){var t=n.position(),a=e.pageX-t.left,o=e.pageY-t.top,r=!0;i.bind("mousemove.drag",function(e){var t=e.pageX-a;e=e.pageY-o;var i={};s.x&&(i.left=t),s.y&&(i.top=e),r&&(n.trigger("dragStart"),r=!1),s.drag&&n.css(i),n.trigger("drag",[e,t]),l=n}),e.preventDefault()}else try{l&&l.trigger("dragEnd")}finally{i.unbind("mousemove.drag"),l=null}}),this.data("drag",!0)},y.expr[":"].range=function(e){var t=e.getAttribute("type");return t&&"range"==t||!!y(e).filter("input").data("rangeinput")},y.fn.rangeinput=function(t){return this.data("rangeinput")?this:(t=y.extend(!0,{},e.conf,t),this.each(function(){var e=new n(y(this),y.extend(!0,{},t));e=e.getInput().data("rangeinput",e),i=i?i.add(e):e}),i||this);var i}}(jQuery),function(h){function n(a,e,d){var u=this,p=e.add(u);a=a.not(":button, :image, :reset, :submit"),h.extend(u,{getConf:function(){return d},getForm:function(){return e},getInputs:function(){return a},invalidate:function(e,t){if(!t){var i=[];h.each(e,function(e,t){(e=a.filter("[name="+e+"]")).length&&(e.trigger("OI",[t]),i.push({input:e,messages:[t]}))}),e=i,t=h.Event()}return t.type="onFail",p.trigger(t,[e]),t.isDefaultPrevented()||s[d.effect][0].call(u,e,t),u},reset:function(e){(e=e||a).removeClass(d.errorClass).each(function(){var e=h(this).data("msg.el");e&&(e.remove(),h(this).data("msg.el",null))})},checkValidity:function(e,c){if(!(e=(e=e||a).not(":disabled")).length)return!0;if((c=c||h.Event()).type="onBeforeValidate",p.trigger(c,[e]),c.isDefaultPrevented())return c.result;var t=[],i=d.errorInputEvent+".v";e.each(function(){var s=[],l=h(this).unbind(i).data("messages",s);if(h.each(m,function(){var e,t,i,n,a=this,o=a[0];if(l.filter(o).length&&!0!==(a=a[1].call(u,l,l.val()))){if(c.type="onBeforeFail",p.trigger(c,[l,o]),c.isDefaultPrevented())return!1;var r=l.attr(d.messageAttr);if(r)return!(s=[r]);e=s,t=o,i=a,!d.grouped&&e.length||(!1===i||h.isArray(i)?(t=(n=(n=f.messages[t.key||t]||f.messages["*"])[d.lang]||f.messages["*"].en).match(/\$\d/g))&&h.isArray(i)&&h.each(t,function(e){n=n.replace(this,i[e])}):n=i[d.lang]||i,e.push(n))}}),s.length&&(t.push({input:l,messages:s}),l.trigger("OI",[s]),d.errorInputEvent&&l.bind(i,function(e){u.checkValidity(l,e)})),d.singleError&&t.length)return!1});var n=s[d.effect];if(!n)throw'Validator: cannot find effect "'+d.effect+'"';return t.length?(u.invalidate(t,c),!1):(n[1].call(u,e,c),c.type="onSuccess",p.trigger(c,[e]),e.unbind(i),!0)}}),h.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(e,t){h.isFunction(d[t])&&h(u).bind(t,d[t]),u[t]=function(e){return h(u).bind(t,e),u}}),d.formEvent&&e.bind(d.formEvent,function(e){if(!u.checkValidity(null,e))return e.preventDefault()}),e.bind("reset",function(){u.reset()}),a[0]&&a[0].validity&&a.each(function(){this.oninvalid=function(){return!1}}),e[0]&&(e[0].checkValidity=u.checkValidity),d.inputEvent&&a.bind(d.inputEvent,function(e){u.checkValidity(h(this),e)}),a.filter(":checkbox, select").filter("[required]").change(function(e){var t=h(this);(this.checked||t.is("select")&&h(this).val())&&s[d.effect][1].call(u,t,e)})}h.tools=h.tools||{version:"1.2.2"};var f,a=/\[type=([a-z]+)\]/,i=/^-?[0-9]*(\.[0-9]+)?$/,o=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,r=/^(https?:\/\/)?([\da-z\.\-]+)\.([a-z\.]{2,6})([\/\w \.\-]*)*\/?$/i;f=h.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(i,e){h.each(e,function(e,t){f.messages[e]=f.messages[e]||{},f.messages[e][i]=t})},localizeFn:function(e,t){f.messages[e]=f.messages[e]||{},h.extend(f.messages[e],t)},fn:function(e,t,i){h.isFunction(t)?i=t:("string"==typeof t&&(t={en:t}),this.messages[e.key||e]=t),(t=a.exec(e))&&(e=function(e){function t(){return this.getAttribute("type")==e}return t.key="[type="+e+"]",t}(t[1])),m.push([e,i])},addEffect:function(e,t,i){s[e]=[t,i]}};var m=[],s={default:[function(e){var d=this.getConf();h.each(e,function(e,t){(e=t.input).addClass(d.errorClass);var i,n,a,o,r,s,l,c=e.data("msg.el");c||(c=h(d.message).addClass(d.messageClass).appendTo(document.body),e.data("msg.el",c)),c.css({visibility:"hidden"}).find("span").remove(),h.each(t.messages,function(e,t){h("<span/>").html(t).appendTo(c)}),c.outerWidth()==c.parent().width()&&c.add(c.find("p")).css({display:"inline"}),n=c,a=d,o=(i=e).offset().top,r=i.offset().left,s=a.position.split(/,?\s+/),l=s[0],s=s[1],o-=n.outerHeight()-a.offset[0],r+=i.outerWidth()+a.offset[1],a=n.outerHeight()+i.outerHeight(),"center"==l&&(o+=a/2),"bottom"==l&&(o+=a),i=i.outerWidth(),"center"==s&&(r-=(i+n.outerWidth())/2),"left"==s&&(r-=i),t={top:o,left:r},c.css({visibility:"visible",position:"absolute",top:t.top,left:t.left}).fadeIn(d.speed)})},function(e){var t=this.getConf();e.removeClass(t.errorClass).each(function(){var e=h(this).data("msg.el");e&&e.css({visibility:"hidden"})})}]};h.each("email,url,number".split(","),function(e,t){h.expr[":"][t]=function(e){return e.getAttribute("type")===t}}),h.fn.oninvalid=function(e){return this[e?"bind":"trigger"]("OI",e)},f.fn(":email","Please enter a valid email address",function(e,t){return!t||o.test(t)}),f.fn(":url","Please enter a valid URL",function(e,t){return!t||r.test(t)}),f.fn(":number","Please enter a numeric value.",function(e,t){return i.test(t)}),f.fn("[max]","Please enter a value smaller than $1",function(e,t){return e=e.attr("max"),parseFloat(t)<=parseFloat(e)||[e]}),f.fn("[min]","Please enter a value larger than $1",function(e,t){return e=e.attr("min"),parseFloat(t)>=parseFloat(e)||[e]}),f.fn("[required]","Please complete this mandatory field.",function(e,t){return e.is(":checkbox")?e.is(":checked"):!!t}),f.fn("[pattern]",function(e){return new RegExp("^"+e.attr("pattern")+"$").test(e.val())}),h.fn.validator=function(i){if(this.data("validator"))return this;if(i=h.extend(!0,{},f.conf,i),this.is("form"))return this.each(function(){var e=h(this),t=new n(e.find(":input"),e,i);e.data("validator",t)});var e=new n(this,this.eq(0).closest("form"),i);return this.data("validator",e)}}(jQuery),function(){function o(e,t){if(t)for(key in t)t.hasOwnProperty(key)&&(e[key]=t[key]);return e}function n(e,t,i){if(c.isSupported(t.version))e.innerHTML=c.getHTML(t,i);else if(t.expressInstall&&c.isSupported([6,65]))e.innerHTML=c.getHTML(o(t,{src:t.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(e.innerHTML.replace(/\s/g,"")||(e.innerHTML="<h2>Flash version "+t.version+" or greater is required</h2><h3>"+(0<d[0]?"Your version is "+d:"You have no flash plugin installed")+"</h3>"+("A"==e.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+a+"'>here</a></p>"),"A"==e.tagName&&(e.onclick=function(){location.href=a})),t.onFail){var n=t.onFail.call(this);"string"==typeof n&&(e.innerHTML=n)}r&&(window[t.id]=document.getElementById(t.id)),o(this,{getRoot:function(){return e},getOptions:function(){return t},getConf:function(){return i},getApi:function(){return e.firstChild}})}var r=document.all,a="http://www.adobe.com/go/getflashplayer",e="function"==typeof jQuery,s=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,l={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(e,t,i){if("string"==typeof e&&(e=document.getElementById(e.replace("#",""))),e)return"string"==typeof t&&(t={src:t}),new n(e,o(o({},l),t),i)};var c=o(window.flashembed,{conf:l,getVersion:function(){var t;try{t=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(e){try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");t=i&&i.GetVariable("$version")}catch(e){}}return(t=s.exec(t))?[t[1],t[3]]:[0,0]},asString:function(e){if(null==e)return null;var t=typeof e;switch("object"==t&&e.push&&(t="array"),t){case"string":return'"'+(e=(e=e.replace(new RegExp('(["\\\\])',"g"),"\\$1")).replace(/^\s?(\d+\.?\d+)%/,"$1pct"))+'"';case"array":return"["+function(e,t){var i=[];for(var n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n]));return i}(e,function(e){return c.asString(e)}).join(",")+"]";case"function":return'"function()"';case"object":for(var i in t=[],e)e.hasOwnProperty(i)&&t.push('"'+i+'":'+c.asString(e[i]));return"{"+t.join(",")+"}"}return String(e).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(e,t){var i='<object width="'+(e=o({},e)).width+'" height="'+e.height+'" id="'+e.id+'" name="'+e.id+'"';for(var n in e.cachebusting&&(e.src+=(-1!=e.src.indexOf("?")?"&":"?")+Math.random()),i+=e.w3c||!r?' data="'+e.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',i+=">",(e.w3c||r)&&(i+='<param name="movie" value="'+e.src+'" />'),e.width=e.height=e.id=e.w3c=e.src=null,e.onFail=e.version=e.expressInstall=null,e)e[n]&&(i+='<param name="'+n+'" value="'+e[n]+'" />');if(e="",t){for(var a in t)t[a]&&(n=t[a],e+=a+"="+(/function|object/.test(typeof n)?c.asString(n):n)+"&");i+='<param name="flashvars" value=\''+(e=e.slice(0,-1))+"' />"}return i+="</object>"},isSupported:function(e){return d[0]>e[0]||d[0]==e[0]&&d[1]>=e[1]}}),d=c.getVersion();e&&(jQuery.tools=jQuery.tools||{version:"1.2.2"},jQuery.tools.flashembed={conf:l},jQuery.fn.flashembed=function(e,t){return this.each(function(){$(this).data("flashembed",flashembed(this,e,t))})})}(),function(i){function n(e){if(e){var t=o.contentWindow.document;t.open().close(),t.location.hash=e}}var a,o,r,t;i.tools=i.tools||{version:"1.2.2"},i.tools.history={init:function(e){t||(i.browser.msie&&i.browser.version<"8"?o||(o=i("<iframe/>").attr("src","javascript:false;").hide().get(0),i("body").append(o),setInterval(function(){var e=o.contentWindow.document;e=e.location.hash,a!==e&&i.event.trigger("hash",e)},100),n(location.hash||"#")):setInterval(function(){var e=location.hash;e!==a&&i.event.trigger("hash",e)},100),r=r?r.add(e):e,e.click(function(e){var t=i(this).attr("href");if(o&&n(t),"#"!=t.slice(0,1))return location.href="#"+t,e.preventDefault()}),t=!0)}},i(window).bind("hash",function(e,t){t?r.filter(function(){var e=i(this).attr("href");return e==t||e==t.replace("#","")}).trigger("history",[t]):r.eq(0).trigger("history",[t]),a=t,window.location.hash=a}),i.fn.history=function(e){return i.tools.history.init(this),this.bind("history",e)}}(jQuery),function(n){function a(){if(n.browser.msie){var e=n(document).height(),t=n(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e-t<20?t:e]}return[n(window).width(),n(document).height()]}function o(e){if(e)return e.call(n.mask)}var r,s,l,c,d,u;n.tools=n.tools||{version:"1.2.2"},r=n.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}},n.mask={load:function(e,t){if(c)return this;"string"==typeof e&&(e={color:e}),e=e||d,d=e=n.extend(n.extend({},r.conf),e),(s=n("#"+e.maskId)).length||(s=n("<div/>").attr("id",e.maskId),n("body").append(s));var i=a();return s.css({position:"absolute",top:0,left:0,width:i[0],height:i[1],display:"none",opacity:e.startOpacity,zIndex:e.zIndex}),e.color&&s.css("backgroundColor",e.color),!1===o(e.onBeforeLoad)||(e.closeOnEsc&&n(document).bind("keydown.mask",function(e){27==e.keyCode&&n.mask.close(e)}),e.closeOnClick&&s.bind("click.mask",function(e){n.mask.close(e)}),n(window).bind("resize.mask",function(){n.mask.fit()}),t&&t.length&&(u=t.eq(0).css("zIndex"),n.each(t,function(){var e=n(this);/relative|absolute|fixed/i.test(e.css("position"))||e.css("position","relative")}),l=t.css({zIndex:Math.max(e.zIndex+1,"auto"==u?0:u)})),s.css({display:"block"}).fadeTo(e.loadSpeed,e.opacity,function(){n.mask.fit(),o(e.onLoad)}),c=!0),this},close:function(){if(c){if(!1===o(d.onBeforeClose))return this;s.fadeOut(d.closeSpeed,function(){o(d.onClose),l&&l.css({zIndex:u})}),n(document).unbind("keydown.mask"),s.unbind("click.mask"),n(window).unbind("resize.mask"),c=!1}return this},fit:function(){if(c){var e=a();s.css({width:e[0],height:e[1]})}},getMask:function(){return s},isLoaded:function(){return c},getConf:function(){return d},getExposed:function(){return l}},n.fn.mask=function(e){return n.mask.load(e),this},n.fn.expose=function(e){return n.mask.load(e,this),this}}(jQuery),function(t){function e(e){switch(e.type){case"mousemove":return t.extend(e.data,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY});case"DOMMouseScroll":t.extend(e,e.data),e.delta=-e.detail/3;break;case"mousewheel":e.delta=e.wheelDelta/120}return e.type="wheel",t.event.handle.call(this,e,e.delta)}t.fn.mousewheel=function(e){return this[e?"bind":"trigger"]("wheel",e)},t.event.special.wheel={setup:function(){t.event.add(this,i,e,{})},teardown:function(){t.event.remove(this,i,e)}};var i=t.browser.mozilla?"DOMMouseScroll"+(t.browser.version<"1.9"?" mousemove":""):"mousewheel"}(jQuery),function(h){h.extend(h.tree.plugins,{contextmenu:{object:h("<ul id='jstree-contextmenu' class='tree-context' />"),data:{t:!1,a:!1,r:!1},defaults:{class_name:"hover",items:{create:{label:"Create",icon:"create",visible:function(e,t){return 1!=e.length?0:t.check("creatable",e)},action:function(e,t){t.create(!1,t.get_node(e[0]))},separator_after:!0},rename:{label:"Rename",icon:"rename",visible:function(e,t){return 1==e.length&&t.check("renameable",e)},action:function(e,t){t.rename(e)}},remove:{label:"Delete",icon:"remove",visible:function(e,t){var i=!0;return h.each(e,function(){return 0==t.check("deletable",this)&&(i=!1),!1}),i},action:function(e,t){h.each(e,function(){t.remove(this)})}}}},show:function(e,t){var i=h.extend(!0,{},h.tree.plugins.contextmenu.defaults,t.settings.plugins.contextmenu);e=h(e),h.tree.plugins.contextmenu.object.empty();var n="";for(var a in i.items)if(i.items.hasOwnProperty(a)&&!1!==i.items[a]){var o=1;"function"==typeof i.items[a].visible&&(o=i.items[a].visible.call(null,h.tree.plugins.contextmenu.data.a,t)),-1!=o&&(0,!0===i.items[a].separator_before&&(n+="<li class='separator'><span>&nbsp;</span></li>"),n+='<li><a href="#" rel="'+a+'" class="'+a+" "+(0==o?"disabled":"")+'">',i.items[a].icon?n+="<ins "+(-1==i.items[a].icon.indexOf("/")?" class='"+i.items[a].icon+"' ":" style='background-image:url(\""+i.items[a].icon+"\");' ")+">&nbsp;</ins>":n+="<ins>&nbsp;</ins>",n+="<span>"+i.items[a].label+"</span></a></li>",!0===i.items[a].separator_after&&(n+="<li class='separator'><span>&nbsp;</span></li>"))}var r=e.children("a:visible").offset();h.tree.plugins.contextmenu.object.attr("class","tree-context tree-"+t.settings.ui.theme_name.toString()+"-context").html(n);var s=h.tree.plugins.contextmenu.object.height(),l=h.tree.plugins.contextmenu.object.width(),c=r.left,d=r.top+parseInt(e.children("a:visible").height())+2,u=h(window).height()+h(window).scrollTop(),p=h(window).width()+h(window).scrollLeft();u<d+s&&(d=Math.max(u-s-2,0)),p<c+l&&(c=Math.max(p-l-2,0)),h.tree.plugins.contextmenu.object.css({left:c,top:d}).stop(!1,!0).fadeIn("fast")},hide:function(){if(h.tree.plugins.contextmenu.data.t){var e=h.extend(!0,{},h.tree.plugins.contextmenu.defaults,h.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);h.tree.plugins.contextmenu.data.r&&h.tree.plugins.contextmenu.data.a&&h.tree.plugins.contextmenu.data.a.children("a, span").removeClass(e.class_name),h.tree.plugins.contextmenu.data={a:!1,r:!1,t:!1},h.tree.plugins.contextmenu.object.stop(!1,!0).fadeOut("fast")}},exec:function(e){if(0!=h.tree.plugins.contextmenu.data.t){var t=h.extend(!0,{},h.tree.plugins.contextmenu.defaults,h.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);try{t.items[e].action.apply(null,[h.tree.plugins.contextmenu.data.a,h.tree.plugins.contextmenu.data.t])}catch(e){}}},callbacks:{oninit:function(){if(!h.tree.plugins.contextmenu.css){h.tree.plugins.contextmenu.css=this.add_sheet({str:"#jstree-contextmenu { display:none; position:absolute; z-index:2000; list-style-type:none; margin:0; padding:0; left:-2000px; top:-2000px; } .tree-context { margin:20px; padding:0; width:180px; border:1px solid #979797; padding:2px; background:#f5f5f5; list-style-type:none; }.tree-context li { height:22px; margin:0 0 0 27px; padding:0; background:#ffffff; border-left:1px solid #e0e0e0; }.tree-context li a { position:relative; display:block; height:22px; line-height:22px; margin:0 0 0 -28px; text-decoration:none; color:black; padding:0; }.tree-context li a ins { text-decoration:none; float:left; width:16px; height:16px; margin:0 0 0 0; background-color:#f0f0f0; border:1px solid #f0f0f0; border-width:3px 5px 3px 6px; line-height:16px; }.tree-context li a span { display:block; background:#f0f0f0; margin:0 0 0 29px; padding-left:5px; }.tree-context li.separator { background:#f0f0f0; height:2px; line-height:2px; font-size:1px; border:0; margin:0; padding:0; }.tree-context li.separator span { display:block; margin:0px 0 0px 27px; height:1px; border-top:1px solid #e0e0e0; border-left:1px solid #e0e0e0; line-height:1px; font-size:1px; background:white; }.tree-context li a:hover { border:1px solid #d8f0fa; height:20px; line-height:20px; }.tree-context li a:hover span { background:#e7f4f9; margin-left:28px; }.tree-context li a:hover ins { background-color:#e7f4f9; border-color:#e7f4f9; border-width:2px 5px 2px 5px; }.tree-context li a.disabled { color:gray; }.tree-context li a.disabled ins { }.tree-context li a.disabled:hover { border:0; height:22px; line-height:22px; }.tree-context li a.disabled:hover span { background:#f0f0f0; margin-left:29px; }.tree-context li a.disabled:hover ins { border-color:#f0f0f0; background-color:#f0f0f0; border-width:3px 5px 3px 6px; }"})}},onrgtclk:function(e,t,i){var n=h.extend(!0,{},h.tree.plugins.contextmenu.defaults,t.settings.plugins.contextmenu);0!=(e=h(e)).size()&&(h.tree.plugins.contextmenu.data.t=t,e.children("a:eq(0)").hasClass("clicked")?(h.tree.plugins.contextmenu.data.r=!1,h.tree.plugins.contextmenu.data.a=t.selected_arr&&1<t.selected_arr.length?t.selected_arr:t.selected):(h.tree.plugins.contextmenu.data.a=e,h.tree.plugins.contextmenu.data.r=!0,e.children("a").addClass(n.class_name),i.target.blur()),h.tree.plugins.contextmenu.show(e,t),i.preventDefault(),i.stopPropagation())},onchange:function(){h.tree.plugins.contextmenu.hide()},beforedata:function(){h.tree.plugins.contextmenu.hide()},ondestroy:function(){h.tree.plugins.contextmenu.hide()}}}}),h(function(){h.tree.plugins.contextmenu.object.hide().appendTo("body"),h("#jstree-contextmenu a").live("click",function(e){return h(this).hasClass("disabled")||(h.tree.plugins.contextmenu.exec.apply(null,[h(this).attr("rel")]),h.tree.plugins.contextmenu.hide()),e.stopPropagation(),e.preventDefault(),!1}),h(document).bind("mousedown",function(e){0==h(e.target).parents("#jstree-contextmenu").size()&&h.tree.plugins.contextmenu.hide()})})}(jQuery),function(m){m.widget("ui.autoform",{options:{createURL:"",createData:{},updateURL:"",updateData:{},deleteURL:"",deleteData:{},dataID:"id",itemData:[],fields:[],delay:2e3,shortDelay:500,duration:2e3,activeAjaxCalls:0,sortable:!1,sortableSelector:"",updateOrderURL:"",updateOrder:{},updateOrderData:null,undelete:!0,confirmDelete:null,doNotSave:!1,check:function(){},checkDelete:function(){},onCreateItem:function(){},onCreateExistingItem:function(){},onCreateNewItem:function(){},onCreate:function(){},onUpdate:function(){},onDelete:function(){},onBeforeCreate:function(){},onBeforeUpdate:function(){},onCreateError:function(){},onUpdateError:function(){}},_create:function(){var n=this;this.element.addClass("ui-autoform"),this.items={},this.updateItems=[],this.newIndex=1;var e=this.options.itemData.length;if(!n.options.doNotSave){var t=window.onbeforeunload;window.onbeforeunload=function(e){return 0<n.options.activeAjaxCalls?"There are still some AJAX processes pending. If you leave the page now, you may lose any changes you have made.":t()}}for(var i=0;i<e;++i){var a=this._createItem(this.options.itemData[i]).appendTo(this.element);this.options.onCreateExistingItem.call(this.element,null,{item:a})}this._createNewItem().appendTo(this.element),n.options.sortable&&!n.options.doNotSave&&m(n.options.sortableSelector).sortable({items:"li:not(.ui-autoform-new-item)",cancel:"li.state-deleted",handle:".drag-handle",placeholder:"item ui-placeholder",create:function(e,t){n.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)")},update:function(e,t){var i=m(t.item).attr("id");n.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",i),m(".list.sortable").sortable("option","disabled",!0),n._saveOrder()}});n.options.headers&&m(".sortable",n.options.headers).sortableList({container:n.element,exclude:".ui-autoform-new-item"})},_createNewItem:function(){this.options.activeAjaxCalls++;var e={};e[this.options.dataID]="new"+this.newIndex,this.newIndex++;var t=this._createItem(e,1).addClass("ui-autoform-new-item");return this.options.sortable&&!this.options.doNotSave&&m(".drag-handle",t).hide(),m(".actions",t).hide(),this.options.onCreateNewItem.call(this.element,null,{item:t}),this.options.activeAjaxCalls--,t},_createItem:function(e,t){var n=this;n.options.activeAjaxCalls++,void 0===t&&(t=0);var i,a=(e=m.extend({},e))[this.options.dataID],o=this.options.fields.length,r='id="'+a+'" class="item item-'+a+' ui-helper-clearfix">';r=this.options.sortable&&!this.options.doNotSave?"<li "+r+"</li>":"<div "+r+"</div>";var s=m(r);this.items[a]={state:"",savedValues:{},changedValues:{},currentValues:{},requiredValues:{},numChangedValues:0,focus:0};for(var l=0;l<o;++l){if("string"==typeof e[(i=jQuery.extend(!0,{},this.options.fields[l]))[1].name]?i[1].value=e[i[1].name].replace(/"/g,"&quot;")||"":i[1].value=e[i[1].name]||"",n.options.doNotSave&&(i[1].temp_name=i[1].name,i[1].name=i[1].name+"-"+a),this.items[a].savedValues[i[1].name]=e[i[1].name],this.items[a].currentValues[i[1].name]=e[i[1].name],i[1].class=void 0===i[1].class?"":i[1].class+" ",i[1].class+=i[1].name+"-input item item-"+a,i[1].required=i[1].required||0,n.options.doNotSave&&(i[1].class+=" "+i[1].temp_name+"-input",delete i[1].temp_name),n.items[a].requiredValues[i[1].name]=t?i[1].required:0,n.items[a].savedValues[i[1].name]=i[1].value,"input"==i[0]){i[1].type=i[1].type||"text",i[1].size=i[1].size||16;var c="checkbox"==i[1].type?"change":"blur",d="<input";for(var u in i[1])"required"!=u&&("checkbox"!=i[1].type||"value"!=u?d+=" "+u+'="'+i[1][u]+'"':("1"==i[1][u]||t)&&(d+=' checked="checked"'));"checkbox"==i[1].type&&(d+=' value="1"'),d+=" />"}else if("select"==i[0]){c="change",d="<select";for(var u in i[1])"required"!=u&&"heading"!=u&&(d+=" "+u+'="'+i[1][u]+'"');for(var p in d+=">",t&&void 0!==i[1].heading&&(this.items[a].currentValues[i[1].name]="",d+='<option value="" disabled="disabled" selected="selected">'+i[1].heading+"</option>"),i[2])null==this.items[a].currentValues[i[1].name]&&(this.items[a].currentValues[i[1].name]=p),d+='<option value="'+p+'"',(p==i[1].value&&!t||p==i[1].default&&t)&&(this.items[a].currentValues[i[1].name]=p,d+=' selected="selected"'),d+=">"+i[2][p]+"</option>";d+="</select>"}var h=m(d).bind(c,function(e){var t=m(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];n.items[t].focus=!1,setTimeout(function(){0==n.items[t].focus&&n._checkDelete(t)},100)}).bind("focus",function(e){var t=m(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];n.items[t].focus=!0}).bind("change keyup",function(e){var t=m(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];n._checkItemChange(t,this,!1)}).bind("keydown",function(e){if("text"==m(this).attr("type")){var t=m(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];13==e.keyCode&&n._checkItemChange(t,this,!0)}});m('<div class="ui-autoform-input-container '+i[1].name+'-container"></div>').append(h).appendTo(s)}n.options.sortable&&!n.options.doNotSave&&m('<div class="drag-handle" title="click and drag to reorder"></div>').appendTo(s);var f=m('<div class="actions"></div>').appendTo(s);return m('<div class="delete" title="delete"><span>delete</span></div>').click(function(e){var t=m(this),i=function(){var e=t.parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];n._deleteItem(e,!n.options.undelete)};n.options.undelete?i():"function"==typeof n.options.confirmDelete?n.options.confirmDelete.call(t.parents(".item"),i):proboards.confirm("Are you sure you want to delete this entry?",i)}).appendTo(f),n.options.undelete&&m('<div class="undelete" title="undo delete"><span>undelete</span></div>').click(function(e){var t=m(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/)[1];n._undeleteItem(t)}).appendTo(f),m('<div class="state"><span></span></div>').appendTo(s),this.options.onCreateItem.call(this.element,null,{item:s}),n.options.activeAjaxCalls--,s},_checkDelete:function(e){this.options.activeAjaxCalls++;var t=m("> .item-"+e,this.element),i=m("> .ui-autoform-new-item",this.element);t.hasClass("ui-autoform-new-item")||!0===this.options.checkDelete.call(this.element,null,{item:t})&&this._deleteItem(e);if(1<i.length)for(var n=0;n<i.length-1;++n){if(1==this.options.checkDelete.call(this.element,null,{item:i[n]})){e=m(i[n]).attr("class").match(/item\-([^\-\s]+)/)[1];this._deleteItem(e)}}this.options.activeAjaxCalls--},_checkItemChange:function(e,t,i){var n=this,a=t.getAttribute("name"),o=t.getAttribute("type"),r=(t=n.getInputValue(t),0);if("checkbox"==o&&(r=1),n.options.activeAjaxCalls++,t!=this.items[e].currentValues[a]||i){if((this.items[e].currentValues[a]=t)!=this.items[e].savedValues[a]||r?void 0!==this.items[e].changedValues[a]&&0!=this.items[e].changedValues[a]||(this.items[e].changedValues[a]=!0,++this.items[e].numChangedValues,1==this.items[e].requiredValues[a]&&(this.items[e].requiredValues[a]=0)):void 0!==this.items[e].changedValues[a]&&1==this.items[e].changedValues[a]&&(this.items[e].changedValues[a]=!1,--this.items[e].numChangedValues),void 0!==this.items[e].saveTimeout&&n.options.activeAjaxCalls--,clearTimeout(this.items[e].saveTimeout),this.items[e].saveTimeout=void 0,0==this.items[e].numChangedValues)"saved"==this.items[e].state||this.options.doNotSave||this._changeItemState(e);else{if(m(".item-"+e,this.element).hasClass("ui-autoform-new-item")&&0==m(this.element).children(".item-"+e).next().length){var s=this._createNewItem();s.hide().css({opacity:0}).appendTo(this.element).slideDown(500,function(){s.animate({opacity:1},{duration:500})})}this._changeItemState(e,"editing");var l=0;for(var c in this.items[e].requiredValues)0!=this.items[e].requiredValues[c]&&l++;if(0==l){var d=n.options.check.call(n.element,null,{item:m("> .item-"+e,n.element)});if(!0===d||n.options.doNotSave){var u=0;for(var p in this.items[e].currentValues)if(void 0===this.items[e].currentValues[p]||""==this.items[e].currentValues[p]){u=1;break}n.options.sortable&&!n.options.doNotSave&&(n.options.createData[e]=m(".ui-autoform li:not(.state-deleted)").length-1),i?(void 0!==n.items[e].saveTimeout&&n.options.activeAjaxCalls--,clearTimeout(n.items[e].saveTimeout),n.items[e].saveTimeout=void 0,n._saveItem(e)):1==u?(n.options.activeAjaxCalls++,this.items[e].saveTimeout=setTimeout(function(){n._saveItem(e),n.items[e].saveTimeout=void 0,n.options.activeAjaxCalls--},this.options.delay)):(n.options.activeAjaxCalls++,this.items[e].saveTimeout=setTimeout(function(){n._saveItem(e),n.items[e].saveTimeout=void 0,n.options.activeAjaxCalls--},this.options.shortDelay))}else n._errorItem(e,d)}}n.options.activeAjaxCalls--}else n.options.activeAjaxCalls--},_changeItemState:function(e,t,i){if(!this.options.doNotSave){this.options.activeAjaxCalls++;var n=m(".item-"+e,this.element);n.stop(!0,!0),n.removeClass("state-"+this.items[e].state),n.addClass("state-"+t),this.items[e].state=t,m("#"+e+" > .state > span").setStatus(t,{message:i}),"saved"==t&&setTimeout(function(){n.removeClass("state-"+t)},this.options.duration),this.options.activeAjaxCalls--}},setItemState:function(e,t){var i=m(e).attr("id");this._changeItemState(i,t)},_deleteItem:function(a,e){var o=this;o.options.activeAjaxCalls++,clearTimeout(o.items[a].saveTimeout),o.items[a].saveTimeout=void 0,o.options.activeAjaxCalls--;var t=m("#"+a,this.element),i=m.extend({id:a},this.options.deleteData);if(o.options.sortable&&!o.options.doNotSave){/position-(\d+)/i.test(m(t).attr("class"))&&(i.position=RegExp.$1)}e?t.hasClass("ui-autoform-new-item")||o.options.doNotSave?o._removeItem(a):proboards.ajax({url:this.options.deleteURL,data:i,type:"POST",dataType:"json",success:function(e){var t=m("> .item-"+a,o.element);t.addClass("ui-autoform-deleted-item"),o.options.onDelete.call(this.element,null,{item:t,data:e}),o._removeItem(a),o.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",a)}}):(this._disableItem(a),this._changeItemState(a,"loading"),t.hasClass("ui-autoform-new-item")?(o._changeItemState(a,"deleted"),!0===o.options.checkDelete.call(o.element,null,{item:m("> .item-"+a,o.element)})&&(o._removeItem(a),o.options.onDelete.call(this.element,null,{item:m("> .item-"+a,o.element)})),m(".ui-autoform").children(".item.state-error").each(function(){var e=o.options.check.call(m(".ui-autoform"),null,{item:m(this)},1);!0===e?o._saveItem(m(this).attr("id")):o._errorItem(m(this).attr("id"),e)})):o.options.doNotSave?(o.options.undelete&&!0!==o.options.checkDelete.call(o.element,null,{item:m("> .item-"+a,o.element)})||o._removeItem(a),m(".ui-autoform").children(".item.state-error").each(function(){var e=o.options.check.call(m(".ui-autoform"),null,{item:m(this)},1);!0===e?o._saveItem(m(this).attr("id")):o._errorItem(m(this).attr("id"),e)})):proboards.ajax({url:this.options.deleteURL,data:i,type:"POST",dataType:"json",success:function(e,t,i){o._changeItemState(a,"deleted"),o.options.undelete&&!0!==o.options.checkDelete.call(o.element,null,{item:m("> .item-"+a,o.element)})||o._removeItem(a),o.options.sortable&&o.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",a),m(".ui-autoform").children(".item.state-error").each(function(){var e=o.options.check.call(m(".ui-autoform"),null,{item:m(this)},1);!0===e?o._saveItem(m(this).attr("id")):o._errorItem(m(this).attr("id"),e)});var n=m("> .item-"+a,o.element);n.addClass("ui-autoform-deleted-item"),o.options.onDelete.call(this.element,null,{item:n,data:e})},error:function(e){o._errorItem(a,[null,e.error])}})),o.options.activeAjaxCalls--},_undeleteItem:function(e){this.options.activeAjaxCalls++;var t=m(".item-"+e,this.element),i=0;for(var n in this.items[e].currentValues)this.items[e].changedValues[n]=!0,++i;this.items[e].numChangedValues=i,this._enableItem(e),void 0!==this.items[e].saveTimeout&&this.options.activeAjaxCalls--,clearTimeout(this.items[e].saveTimeout),this.items[e].saveTimeout=void 0;var a=this.options.check.call(this.element,null,{item:m(".item-"+e,this.element)});if(!0===a){if(this.options.updateData.undelete=1,this.options.sortable){var o=m(".ui-autoform li").index(t);o=o-m(".ui-autoform li").slice(0,o).find(".state-deleted").length+1,this.options.updateData.position=o}this._saveItem(e)}else this._errorItem(e,a);this.options.activeAjaxCalls--},_saveItem:function(o){var r=this,t=m(".item-"+o,this.element);if(this.options.doNotSave)m(".actions",t).css("display","");else{var s,l,e,c,i;for(var n in r.options.activeAjaxCalls++,t.hasClass("ui-autoform-new-item")?(requestURL=this.options.createURL,s=this.options.sortable?{position:this.options.createData[o]}:m.extend({id:o},this.options.createData),l=!0,e=this.options.onBeforeCreate,c=this.options.onCreate,i=this.options.onCreateError):(requestURL=this.options.updateURL,s=m.extend({id:o},this.options.updateData),this.options.updateData.undelete=0,l=!1,e=this.options.onBeforeUpdate,c=this.options.onUpdate,i=this.options.onUpdateError),r.items[o].changedValues)1==r.items[o].changedValues[n]&&(s[n]=r.items[o].savedValues[n]=r.getInputValue(m("."+n+"-input",t)[0]));this._changeItemState(o,"loading"),e.call(this.element,null,{item:t,settings:s}),proboards.ajax({url:requestURL,data:s,type:"POST",dataType:"json",success:function(e,t,i){r._changeItemState(o,"saved"),r.items[o].changedValues={},r.items[o].numChangedValues=0;var n=m(r.element).children(".item-"+o),a=m("> .item-"+o,r.element);l?(a.removeClass("item-"+o).removeClass("ui-autoform-new-item").addClass("item-"+e[r.options.dataID]),n.attr("id",e[r.options.dataID]),r.options.sortable&&n.addClass("position-"+s.position),r.items[e[r.options.dataID]]=r.items[o]):r.options.sortable&&1==s.undelete&&r.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",o),c.call(this.element,null,{item:n,data:e})},error:function(e){r._errorItem(o,[null,e.error]),i.call(this.element,null,{item:t,data:e})}}),m(".actions",t).css("display",""),this.options.sortable&&m(".drag-handle",t).css("display",""),r.options.activeAjaxCalls--}},_errorItem:function(e,t){if(!this.options.doNotSave){this.options.activeAjaxCalls++;var i=m("div#"+e,this.element);this._changeItemState(e,"error",t[1]),m(".actions",i).css("display",""),this.options.sortable&&m(".drag-handle",i).css("display",""),this.options.activeAjaxCalls--}},_removeItem:function(e){var t=this.options.sortable&&!this.options.doNotSave?"li":"div",i=m(t+"#"+e,this.element);i.stop(!0,!0).animate({opacity:0},{duration:500,complete:function(){i.slideUp(500,function(){i.remove()})}})},_enableItem:function(e){var t=m(".item-"+e,this.element);m("input",t).removeAttr("disabled"),m("select",t).removeAttr("disabled")},_disableItem:function(e){var t=m(".item-"+e,this.element);m("input",t).attr("disabled","disabled"),m("select",t).attr("disabled","disabled")},_saveOrder:function(){var n=this;n.options.activeAjaxCalls++,proboards.ajax({url:n.options.updateOrderURL,data:n.options.updateOrder,type:"POST",dataType:"json",success:function(e,t,i){n._changeItemState(n.options.updateOrder.id,"saved",""),n.options.updateOrder={},m(n.options.sortableSelector).sortable("option","disabled",!1)},error:function(e){var t=["",e.error];n._errorItem(n.options.updateOrder.id,t)}}),n.options.activeAjaxCalls--},updateOrder:function(r,s){var l=this;l.options.activeAjaxCalls++;var c=m(r);m(c).filter(":not(.state-deleted):not(.ui-autoform-deleted-item)").each(function(){var e=m(this).attr("id"),t=m(c).filter(":not(.state-deleted):not(.ui-autoform-deleted-item)").index(this)+1,i=m(this).attr("class"),n=null;if(/position-(\d+)/i.test(i)&&(n=RegExp.$1),null===n?m(this).addClass("position-"+t).attr("tabindex",t):n!=t&&m(this).removeClass("position-"+n).addClass("position-"+t),s==e){var a={id:e,newPos:t,oldPos:n};if("function"==typeof l.options.updateOrderData){var o=l.options.updateOrderData.call(l,r,s);"object"==typeof o&&m.extend(a,o)}m(".ui-autoform.list").autoform("option","updateOrder",a)}}),l.options.activeAjaxCalls--},ignoreChange:function(e,t){var i=t.attr("name");this.items[e].currentValues[i]=t.val()},getInputValue:function(e){return"checkbox"==e.type?e.checked?1:0:e.value}}),m.extend(m.ui.autoform,{version:"1.8.5"})}(jQuery),function(d){d.widget("ui.autosearch",{options:{url:"/",data:{},cache:!0,pageCache:"",container:d(document),cacheExpiry:3e5,hash:!1,delay:500,nonDataKeys:["scrollTo","csrf_token","rc_challenge_field","rc_response_field","adcopy_challenge_field","adcopy_response_field"],minChars:3,defaultResponse:{total:0,page:1,limit:15,results:""},updateCache:function(e,t){return t.response},beforeSearch:null,search:null,afterSearch:null},_create:function(){this.baseData=d.extend({},this.options.data),this.cache={},this.data={},this.initialUrl=location.href,this.lastCallSuccess=!0,this.lastResponse={},this.lastRequestDataStr="",this.lastVal="",this.popped=!1,this.poppingState=!1,this.queue=[],this.queueTimeout=null,this.searching=!1;var i=this,e=this._getDataFromHash(this._getHash());if(this.element.val(e.q),this.element.addClass("ui-autosearch").bind("keyup.autosearch",function(e){var t=d.ui.keyCode;switch(e.keyCode){case t.ESCAPE:e.preventDefault();break;case t.ENTER:case t.NUMPAD_ENTER:return e.preventDefault(),!1;default:i.element.val()!=i.lastVal&&i.element.addClass("ui-typing"),clearTimeout(i.typing),i.typing=setTimeout(function(){i.element.removeClass("ui-typing");var e=i._cleanQuery(i.element.val());i._cleanQuery(i.data.q)!=e&&(0==e.length||e.length>=i.options.minChars)&&(i.data.page=1,i.search())},i.options.delay)}""==d(this).val()?d(this).removeClass("state-editing"):d(this).addClass("state-editing")}).bind("keydown.autosearch",function(e){var t=d.ui.keyCode;switch(e.keyCode){case t.UP:i._trigger("up",e),e.preventDefault();break;case t.DOWN:i._trigger("down",e),e.preventDefault();break;case t.PAGE_UP:i._trigger("pageUp",e),e.preventDefault();break;case t.PAGE_DOWN:i._trigger("pageDown",e),e.preventDefault();break;case t.ENTER:case t.NUMPAD_ENTER:i._trigger("enter",e),e.preventDefault();break;case t.TAB:i._trigger("tab",e);break;case t.ESCAPE:i._trigger("escape",e),e.preventDefault();break;default:i.element.val()!=i.lastVal&&i.element.addClass("ui-typing"),clearTimeout(i.typing),i.typing=setTimeout(function(){i.element.removeClass("ui-typing");var e=i._cleanQuery(i.element.val());i._cleanQuery(i.data.q)!=e&&(0==e.length||e.length>=i.options.minChars)&&(i.data.page=1,i.search())},i.options.delay)}}),d.pushStateSupport()&&i.options.hash&&(window.onpopstate=function(e){(i.popped||location.href!=i.initialUrl)&&(i.poppingState=!0,i.data=i._getDataFromHash(i._getHash()),i.data.q||(i.data.q=""),i.search(i.data.q,!0,e&&null!=e.state))}),this.options.hash&&!d.pushStateSupport()){null!=d("body").data("hash_interval")&&clearInterval(d("body").data("hash_interval"));var t=setInterval(function(){i.data=i._getDataFromHash(i._getHash()),i.data.q||(i.data.q=""),i._getDataStr(i._getRequestData())!=i.lastRequestDataStr&&i.search(i.data.q)},100);d("body").data("hash_interval",t)}},destroy:function(){this.element.unbind(".autosearch"),this.options.hash&&!d.pushStateSupport()&&clearInterval(d("body").data("hash_interval"))},_getDataFromHash:function(e){if(""==e)return{};for(var t={},i=e.split("&"),n=0;n<i.length;n++)if(-1!=i[n].indexOf("=")){var a=i[n].split("="),o=decodeURIComponent(a[1].replace(/\+/g," "));-1!=a[0].indexOf("[]")&&a[0].indexOf("[]")==a[0].length-2?(void 0===t[a[0]]&&(t[a[0]]=[]),t[a[0]].push(o)):t[a[0]]=o}return t},setData:function(e,t,i){if(-1==d.inArray(e,this.options.nonDataKeys)){"object"==typeof t&&-1==e.indexOf("[]")&&(e+="[]"),this.data[e]=t;var n=i&&1==i.replaceState,a=("filters[]"==e||"page"==e||"view"==e)&&(!i||i.scrollToTop),o="page"==e&&(!i||i.refreshAds),r=i&&i.ignorePending;this._search(n,a,o,r)}},setDataLite:function(e,t){-1==d.inArray(e,this.options.nonDataKeys)&&("object"==typeof t&&-1==e.indexOf("[]")&&(e+="[]"),this.data[e]=t)},getData:function(e){return this.data[e]},_getRequestData:function(){var e=d.extend(e,this.baseData,this.data);return e.q=void 0===e.q?"":this._cleanQuery(e.q),e},clearCache:function(e){e&&""!=e?(this._getDataStr(this._getRequestData())==e&&(this.lastCallSuccess=!1),this.cache[e]=""):(this.cache={},this.lastCallSuccess=!1)},_updateCache:function(){var e={};for(var t in this.lastResponse)e[t]=this.lastResponse[t];e.page&&(this.lastRequestDataStr=this.lastRequestDataStr.replace(/page=\d+/,"page="+e.page)),this.cache[this.lastRequestDataStr]=this.options.updateCache.call(this.element,null,{response:e})},search:function(e,t,i){void 0===e&&(e=this.element.val()),this.element.hasClass("state-editing")||e!=this.element.attr("placeholder")||(e=""),this.data.q=e,void 0===this.data.q&&(this.data.q=""),(""==this.data.q||this.data.q.length>=this.options.minChars)&&this._search(t,i)},_search:function(e,n,a,t){var o,r,s=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===t&&(t=!1),this.searching)return clearTimeout(this.queueTimeout),void(this.queueTimeout=setTimeout(function(){s._search(e,n,a,t)},200));if(this.searching=!0,this.element.addClass("ui-loading"),this._trigger("beforeSearch",null),o=this._getRequestData(),r=this._getDataStr(o),o.q!=this._cleanQuery(this.element.val())&&(this.element.val(o.q),this._trigger("change",null)),!d.pushStateSupport()&&this.options.hash){var i=this._getDataStr(this.data);if(!this._sameArguments(this._getHash(),i)){var l=this._getDataStr(this.data);l&&(window.location.hash=l)}}else if(d.pushStateSupport()&&this.options.hash){i=this._getDataStr(this.data);stateUrl=i?"?"+i:location.pathname,e?window.history.replaceState({},null,stateUrl):(window.history.pushState({},null,stateUrl),this.popped=!0)}if(this.options.cache&&this.lastCallSuccess&&this._updateCache(),this.lastCallSuccess=!1,this.options.cache&&"object"==typeof this.cache[r])this.lastResponse=this.cache[r],this._searchSuccess(o,this.cache[r],!0,n,a),this._searchComplete(o,this.cache[r]),this.lastCallSuccess=!0,s.poppingState=!1;else{var c={url:this.options.url,data:o,type:"POST",dataType:"json",ignorePending:t,success:function(e,t,i){s.lastCallSuccess=!0,s.lastResponse=e,s.options.cache&&setTimeout(function(){s.clearCache(r)},s.options.cacheExpiry),s._searchSuccess(o,e,!1,n,a)},complete:function(e){s._searchComplete(o,s.lastResponse),s.poppingState=!1}};"function"==typeof s.options.error&&(c.error=s.options.error),proboards.ajax(c)}this.lastRequestDataStr=r},_searchComplete:function(e,t){this.element.removeClass("ui-loading"),this.searching=!1,this._trigger("afterSearch",null,{request:e,response:t})},_searchSuccess:function(e,t,i,n,a){void 0===i&&(i=!1),void 0===n&&(n=!1),this._trigger("search",null,{request:e,response:t,cached:i,scrollToTop:n,refreshAds:a})},_getDataStr:function(e){var t=[];for(var i in e)if(-1==d.inArray(i,this.options.nonDataKeys))if(d.isArray(e[i])){for(var n=0;n<e[i].length;n++)if(e[i][n]&&""!=e[i][n]){var a=i.replace(/\[\]$/,"");t.push(a+"[]="+encodeURIComponent(e[i][n]).replace(/%20/g,"+"))}}else e[i]&&""!=e[i]&&(d.pushStateSupport()&&"page"==i&&1==e[i]||t.push(i+"="+encodeURIComponent(e[i]).replace(/%20/g,"+")));return t.sort(),t.join("&")},_getHash:function(){if(!this.options.hash)return"";var e=d.pushStateSupport()?window.location.search:window.location.hash;return e&&(e=e.substr(1)),e},_cleanQuery:function(e){return d.trim(e).replace(/\s{2,}/," ")},_sameArguments:function(e,t){for(n in e=e.split("&"),t=t.split("&"),e){var i=n.split("="),a=jQuery.inArray(n,t);if(-1!=a)t.splice(a,1);else if(-1==jQuery.inArray(i[0],this.options.nonDataKeys))return!1}for(n in t){i=n.split("=");if(-1==jQuery.inArray(i[0],this.options.nonDataKeys))return!1}return!0}}),d.extend(d.ui.autosearch,{version:"1.8.5"})}(jQuery),function(s){s.widget("ui.colorPicker",s.ui.mouse,{options:{noElement:!1,update:function(){},beforeShow:function(){},show:function(){},hide:function(){},autoUpdate:!0,autoOpen:!1,hex:"1979e6",allowTransparent:!1,pos:{my:"left top",at:"left bottom",of:null,offset:"0 2",collision:"flipfit"}},_create:function(){var e,n=this;this.colorPickerID="colorPicker",this.body=s(this.element).closest("body").get(0),void 0===this.body&&(this.body=document.body),this.colorPicker=s("#"+this.colorPickerID,this.body),0==this.colorPicker.length&&(s(this.body).append('<div id="'+this.colorPickerID+'"><div id="'+this.colorPickerID+'-container"><div id="'+this.colorPickerID+'-SV"></div><div id="'+this.colorPickerID+'-SV-selBG"><div id="'+this.colorPickerID+'-SV-selKnob"><div id="'+this.colorPickerID+'-SV-selKnobInside"></div></div></div><div id="'+this.colorPickerID+'-H"></div><div id="'+this.colorPickerID+'-H-selBG"><div id="'+this.colorPickerID+'-H-selKnob"></div></div><div id="'+this.colorPickerID+'-SV-selArea"></div><div id="'+this.colorPickerID+'-H-selArea"></div><div id="'+this.colorPickerID+'-faceplate"></div><div id="'+this.colorPickerID+'-text">Choose <span id="'+this.colorPickerID+'-title"></span> color:</div><div id="'+this.colorPickerID+'-preview" title="Currently selected color."></div><div id="'+this.colorPickerID+'-previous" title="Previous color: Click to reset."></div><div id="'+this.colorPickerID+'-input">Hex:<br /><input name="hex" type="text" value="" maxlength="6" /></div><div id="'+this.colorPickerID+'-ok-button"><input name="ok" type="button" value="OK" /></div><div id="'+this.colorPickerID+'-cancel-button"><input name="cancel" type="button" value="Cancel" /></div><div id="'+this.colorPickerID+'-close"><span>X</span></div><div id="'+this.colorPickerID+'-extras" class="hide"></div><div id="'+this.colorPickerID+'-transparent"><input id="transparent" name="transparent" type="checkbox" /><label for="transparent">transparent</label></div></div></div>'),this.colorPicker=s("#"+this.colorPickerID,this.body),s("#"+this.colorPickerID+"-transparent",this.colorPicker).height("19").css({bottom:"7px",left:"7px",position:"absolute"}).hide()),this.transparentDiv=s("#"+this.colorPickerID+"-transparent",this.colorPicker),this.transparentInput=this.colorPicker.find('input[name="transparent"]'),s("#"+this.colorPickerID+"-input input",this.colorPicker).bind("change.transparent keydown.transparent",function(){n.transparentInput.removeAttr("checked"),n.transparent=!1}),this.transparentInput.bind("click",function(){"checked"==s(this).attr("checked")?(n.setHex("ffffff"),n.transparent=!0):n.transparent=!1}),s(this.element).on("change",function(){var e=s(this).val();if("transparent"==e){n.transparent=!0;var t="ffffff";n._setPreviousHex(t),n.setHex(t),n._update()}else if(3==e.length||6==e.length){n.transparent=!1;t=e;t=n._validateHex(t),n._setPreviousHex(t),n.setHex(t),n._update()}}),this.colorPicker.hide(),this.options.noElement||s(this.element).addClass("ui-colorPicker"),this.options.pos.of||(this.options.pos.of=this.element),this.options.noElement||s(this.element).bind("mousedown.colorPicker focus.colorPicker",function(e){setTimeout(function(){n.show()},1)}),s(this.body).bind("mousedown.colorPicker",function(e){if(n.showing&&!n.dragging){for(var t=!1,i=e.target;!t&&i;)i===n.element[0]&&!n.options.noElement||i===n.colorPicker[0]?t=!0:i=i.parentNode;t?e.stopPropagation():n.hide()}}),s(this.body).bind("keydown.colorPicker",function(e){27==e.which&&n.hide()}),"input"==this.element[0].nodeName.toLowerCase()&&"text"==this.element[0].getAttribute("type")&&(e=s(this.element).val()),e||(e=this.options.hex),e=this._validateHex(e),this._setPreviousHex(e),this.setHex(e),this.options.autoOpen&&s(this.colorPicker).show()},_validateHex:function(e){return e.match(/[^a-f0-9]/i)?"ff0000":e},isShowing:function(){return!this.colorPicker.is(":hidden")},show:function(e){var a=this;if(e||(e={}),this.options.allowTransparent?(s("#"+this.colorPickerID+"-container",this.colorPicker).addClass("has-transparent-checkbox"),this.transparentDiv.show()):(s("#"+this.colorPickerID+"-container",this.colorPicker).removeClass("has-transparent-checkbox"),this.transparentDiv.hide()),s.extend(!0,this.options,e),this.showing){if(!this.options.noElement)return;this.hide()}if("function"!=typeof this.options.beforeShow||!1!==this.options.beforeShow.call(this.element,null,{})){this.options.title?s("#"+this.colorPickerID+"-title",this.colorPicker).text(this.options.title):s("#"+this.colorPickerID+"-title",this.colorPicker).hide(),this.colorPicker.show();var t=this.options.extraHTML;if(void 0!==t){"function"==typeof t&&(t=t.call(this.colorPicker));var i=this.colorPicker.width()-20;this.originalHeight=s("#"+this.colorPickerID+"-container",this.colorPicker).height(),s("#"+this.colorPickerID+"-extras",this.colorPicker).css({bottom:"inherit",left:"inherit",position:"relative",width:i+"px"}).html(t).show();var n=s("#"+this.colorPickerID+"-container",this.colorPicker).height()+s("#"+this.colorPickerID+"-extras",this.colorPicker).height()+10;s("#"+this.colorPickerID+"-container",this.colorPicker).height(n),s("#"+this.colorPickerID+"-extras",this.colorPicker).css({bottom:"10px",left:"10px",position:"absolute"})}if(this.colorPicker.position(a.options.pos),this.options.offset){var o={};void 0!==this.options.offset.top&&(o.top=this.options.offset.top),void 0!==this.options.offset.left&&(o.left=this.options.offset.left),this.colorPicker.css(o)}var r=null;r||"input"!=this.element[0].nodeName.toLowerCase()||"text"!=this.element[0].getAttribute("type")||(r=s(this.element).val()),r||(r=e.hex||this.hex||this.options.hex),this.options.allowTransparent&&("transparent"==r?(this.transparentInput.attr("checked","checked"),this.transparent=!0,r="ffffff"):(this.transparentInput.removeAttr("checked"),this.transparent=!1)),r=this._validateHex(r),this._setPreviousHex(r),this.setHex(r),this.options.autoUpdate?(s("#"+this.colorPickerID+"-ok-button",this.colorPicker).hide(),s("#"+this.colorPickerID+"-cancel-button",this.colorPicker).hide()):(s("#"+this.colorPickerID+"-ok-button input",this.colorPicker).unbind("click.colorPicker"),s("#"+this.colorPickerID+"-ok-button input",this.colorPicker).bind("click.colorPicker",function(){a._update()}),s("#"+this.colorPickerID+"-cancel-button input",this.colorPicker).unbind("click.colorPicker"),s("#"+this.colorPickerID+"-cancel-button input",this.colorPicker).bind("click.colorPicker",function(){a.hide()})),s("#"+this.colorPickerID+"-close",this.colorPicker).unbind("click.colorPicker"),s("#"+this.colorPickerID+"-close",this.colorPicker).bind("click.colorPicker",function(e){a.hide()}),s("#"+this.colorPickerID+"-previous",this.colorPicker).unbind("click.colorPicker"),s("#"+this.colorPickerID+"-previous",this.colorPicker).bind("click.colorPicker",function(e){a.setHex(a.previousHex),a.options.allowTransparent&&(a.previousTransparent?(a.transparentInput.attr("checked","checked"),a.transparent=!0):(a.transparentInput.removeAttr("checked"),a.transparent=!1))}),s("#"+this.colorPickerID+"-input input",this.colorPicker).unbind("keydown.colorPicker keyup.colorPicker change.colorPicker"),s("#"+this.colorPickerID+"-input input",this.colorPicker).bind("keydown.colorPicker keyup.colorPicker change.colorPicker",function(e){if("keydown"==e.type)return!(!e.ctrlKey&&!e.altKey)||!(e.shiftKey&&48<=e.which&&e.which<=57)&&(32!=e.which&&(!(71<=e.which&&e.which<=90)&&(188!=e.which&&190!=e.which&&191!=e.which&&192!=e.which&&(59!=e.which&&222!=e.which&&(219!=e.which&&220!=e.which&&221!=e.which&&(111!=e.which&&106!=e.which&&109!=e.which&&107!=e.which&&110!=e.which))))));"keyup"==e.type&&a.setHex(this.value),a.setHex(this.value)}),s(this.body).unbind("mouseup.colorPicker"),s(this.body).bind("mouseup.colorPicker",function(e){a._onMouseUp(e)}),s("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).unbind("mousedown.colorPicker"),s("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).bind("mousedown.colorPicker",function(e){if(this.style.cursor="none",s(a.body).bind("mousemove.colorPicker",function(e){a.dragging=!0;var t=s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).offset(),i=e.pageX-t.left,n=e.pageY-t.top;i<0&&(i=0),n<0&&(n=0),i>s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).width()&&(i=s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).width()),n>s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).height()&&(n=s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).height()),a.S=i/1.5,a.V=(150-n)/1.5,i-=Math.ceil(s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).width()/2),n-=Math.ceil(s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).height()/2),s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).css({left:i+"px",top:n+"px"}),a._updateColor()}),s(this).bind("mouseup.colorPicker",function(e){a._onMouseUp(e)}),!e.layerX){var t=s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).offset();e.layerX=e.clientX+a.body.scrollLeft+document.documentElement.scrollLeft-t.left,e.layerY=e.clientY+a.body.scrollTop+document.documentElement.scrollTop-t.top}a.S=e.layerX/1.5,a.V=(150-e.layerY)/1.5;var i=e.layerX-Math.ceil(s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).width()/2),n=e.layerY-Math.ceil(s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).height()/2);return s("#"+a.colorPickerID+"-SV-selKnob",a.colorPicker).css({left:i+"px",top:n+"px"}),a._updateColor(),e.stopPropagation(),!1}),s("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mousedown.colorPicker"),s("#"+this.colorPickerID+"-H-selArea",this.colorPicker).bind("mousedown.colorPicker",function(e){if(this.style.cursor="none",s(a.body).bind("mousemove.colorPicker",function(e){a.dragging=!0;var t=s("#"+a.colorPickerID+"-H-selArea",a.colorPicker).offset(),i=e.pageY-t.top;i<0&&(i=0),i>s("#"+a.colorPickerID+"-H-selArea",a.colorPicker).height()&&(i=s("#"+a.colorPickerID+"-H-selArea",a.colorPicker).height()),a.H=i/1.5*360/100,360==a.H&&(a.H=0),i-=Math.ceil(s("#"+a.colorPickerID+"-H-selKnob",a.colorPicker).height()/2),s("#"+a.colorPickerID+"-H-selKnob",a.colorPicker).css({top:i+"px"}),a._updateColor()}),s(a.body).bind("mouseup.colorPicker",function(e){a._onMouseUp(e)}),!e.layerX){var t=s("#"+a.colorPickerID+"-SV-selArea",a.colorPicker).offset();e.layerX=e.clientX+a.body.scrollLeft+document.documentElement.scrollLeft-t.left,e.layerY=e.clientY+a.body.scrollTop+document.documentElement.scrollTop-t.top}a.H=e.layerY/1.5*360/100;var i=e.layerY-Math.ceil(s("#"+a.colorPickerID+"-H-selKnob",this.colorPicker).height()/2);return s("#"+a.colorPickerID+"-H-selKnob",this.colorPicker).css({top:i+"px"}),a._updateColor(),e.stopPropagation(),!1}),this.showing=!0,this.options.show&&this.options.show.call(this.element)}},hide:function(){if(this.showing){var e=s("#"+this.colorPickerID+"-input input",this.colorPicker).val();e&&""!=e&&this._setPreviousHex(e),s("#"+this.colorPickerID+"-extras",this.colorPicker).is(":visible")&&(s("#"+this.colorPickerID+"-container",this.colorPicker).height(this.originalHeight),s("#"+this.colorPickerID+"-extras",this.colorPicker).hide()),this.colorPicker.hide(),this.showing=!1,"function"==typeof this.options.hide&&this.options.hide()}},_onMouseUp:function(e){s("#"+this.colorPickerID+"-SV-selArea",this.b).unbind("mousemove.colorPicker"),s("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).unbind("mouseup.colorPicker"),s("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).css({cursor:"default"}),s("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mousemove.colorPicker"),s("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mouseup.colorPicker"),s("#"+this.colorPickerID+"-H-selArea",this.colorPicker).css({cursor:"default"}),s(this.body).unbind("mousemove.colorPicker"),this.dragging=!1},_updateColor:function(e){this.H||(this.H=0);var t=this._HSVtoRGB(this.H,this.S/100,this.V/100),i=this._RGBtoHEX(t[0],t[1],t[2]);this.hex=i,s("#"+this.colorPickerID+"-preview",this.colorPicker).css({backgroundColor:"#"+i}),e||(s("#"+this.colorPickerID+"-input input",this.colorPicker).val(i),this.options.allowTransparent&&(this.transparentInput.removeAttr("checked"),this.transparent=!1));t=this._HSVtoRGB(this.H,1,1),i=this._RGBtoHEX(t[0],t[1],t[2]);s("#"+this.colorPickerID+"-SV",this.colorPicker).css({backgroundColor:"#"+i}),this.options.autoUpdate&&this._update()},_update:function(){var e="";this.options.update&&(e=this.hex),this.options.allowTransparent&&this.transparent&&(e="transparent"),this.options.update.call(this.element,e)},getHex:function(){return s("#"+this.colorPickerID+"-input input",this.colorPicker).val()},setHex:function(e){if(e&&""!=e){var t=e.length;if(3==t||6==t){var i=3==t?e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2):e;s("#"+this.colorPickerID+"-input input",this.colorPicker).val()!=e&&s("#"+this.colorPickerID+"-input input",this.colorPicker).val(e);var n=this._HEXtoRGB(i),a=this._RGBtoHSV(n[0],n[1],n[2]);this.H=a[0],this.S=100*a[1],this.V=100*a[2],this._updateColor(!0),this._updateKnobs()}}},_setPreviousHex:function(e){s("#"+this.colorPickerID+"-previous",this.colorPicker).css({backgroundColor:"#"+e}),this.previousHex=e,this.options.allowTransparent&&(this.previousTransparent=!!this.transparent)},_updateKnobs:function(){var e,t;e=1.5*this.S-Math.ceil(s("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).width()/2),t=150-1.5*this.V-Math.ceil(s("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).height()/2),s("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).css({left:e,top:t}),t=this.H/360*150-Math.ceil(s("#"+this.colorPickerID+"-H-selKnob",this.colorPicker).height()/2),s("#"+this.colorPickerID+"-H-selKnob",this.colorPicker).css({top:t})},_HEXtoRGB:function(e){return e=e.replace(/^#/,""),[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]},_RGBtoHEX:function(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),e+t+i},_RGBtoHSV:function(e,t,i){var n,a=Math.max(e,t,i),o=a-Math.min(e,t,i);0==o?n=0:a==e?(n=(t-i)/o%6)<0&&(n+=6):a==t?n=(i-e)/o+2:a==i&&(n=(e-t)/o+4);var r,s=a/255;return r=0==o?0:o/s,[60*n,r/=255,s]},_HSVtoRGB:function(e,t,i){var n,a,o,r=i*t;Hp=e/60,X=r*(1-Math.abs(Hp%2-1)),Hp<1?(n=r,a=X,o=0):Hp<2?(n=X,a=r,o=0):Hp<3?(n=0,a=r,o=X):Hp<4?(n=0,a=X,o=r):Hp<5?(n=X,a=0,o=r):Hp<6&&(n=r,a=0,o=X);var s=i-r;return n+=s,a+=s,o+=s,n*=255,a*=255,o*=255,[n=Math.round(n),a=Math.round(a),o=Math.round(o)]}}),s.colorPicker=function(e,t){if("string"==typeof e)return s(document.body).colorPicker(e,t);s(document.body).colorPicker({noElement:!0})},s.extend(s.ui.colorPicker,{version:"1.8.2"})}(jQuery),function(o){o.widget("ui.combobox",{options:{position:{my:"left top",at:"left bottom",of:"mouse",collision:"flip",offset:"0 2"},onOpen:null,onClick:null,menuId:null},_create:function(){var n=this,e=n.options.menuId||n.element.next().attr("class");if(void 0!==e){var a=o("#"+e);a.addClass("c-menu"),void 0!==a&&n.element.on("click",function(t){if(a.is(":visible"))a.hide();else{o(".c-menu").hide();var e=o.extend({},n.options.position);"self"==e.of?e.of=n.element:"mouse"==e.of&&(e.of=t),o("html").is(".ie7")?(e.my="right top",e.at="right bottom"):a.width()<n.element.width()&&a.width(n.element.width()-6),n.options.onOpen&&n.options.onOpen.call(n.element,a),a.show(),a.position(e),a.unbind("click.cb").one("click.cb","li",function(){n.options.onClick&&n.options.onClick.call(n.element,this),a.hide()});var i=n.element.get(0).ownerDocument;o(i).on("mousedown.cb",function(e){0==o(e.target).closest(".c-menu").length&&o(e.target).closest(".combobox").get(0)!=o(t.target).closest(".combobox").get(0)&&(a.unbind("click.cb"),o(this).unbind("mousedown.cb"),a.hide())})}})}}}),o.extend(o.ui.combobox,{version:"1.8.2"})}(jQuery),function(c){c.widget("ui.contextMenu",c.ui.mouse,{options:{},_create:function(){var t=this;c(this.element).addClass("ui-menu-context"),c(document).bind("mouseup",function(e){t.documentMouseUp(e)}),c(this.element).bind("contextmenu.ui-contextMenu",function(e){return!1}),this.menu=c(this.element).menu()},documentMouseUp:function(e){for(var t=!1,i=e.target;!t&&i;)i===this.element[0]&&(t=!0),i=i.parentNode;t||c(this.element).hide()},attach:function(e){var t=this,i=e.type,n=e.selector,a=e.callback;if("bind"==i)c(n).bind("mousedown.ui-contextMenu",function(e){t._onElementMouseDown(e,this,a)}).bind("contextmenu.ui-contextMenu",function(e){return!1});else if("delegate"==i){var o=e.parent;c(o).on("mousedown.ui-contextMenu",n,function(e){t._onElementMouseDown(e,this,a)}).on("contextmenu.ui-contextMenu",n,function(e){return!1})}},detach:function(e,t){"unbind"==e?c(t).unbind("mousedown.ui-contextMenu").unbind("contextmenu.ui-contextMenu"):"die"==e&&c(t).die("mousedown.ui-contextMenu").die("contextmenu.ui-contextMenu")},_onElementMouseDown:function(o,r,s){var l=this;2==o.button&&(o.stopPropagation(),c(r).bind("mouseup.ui-contextMenu",function(e){e.stopPropagation(),c(r).unbind("mouseup.ui-contextMenu"),l.menu.menu("clearClickCallback"),l.menu.menu("setClickCallback",function(e){l._optionClick(e,o,r,s)});for(var t=o.clientX,i=o.clientY,n=o.target;n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.frameElement;){n=n.ownerDocument.defaultView.frameElement;var a=c(n).offset();t+=a.left,i+=a.top}return c(l.element).css({left:t,top:i}).show(),!1}))},_optionClick:function(e,t,i,n){for(var a=e.target;a&&"li"!=a.nodeName.toLowerCase();)a=a.parentNode;if(a){var o=c(a).attr("id");""!=o&&(n.call(this,t,o,i)||c(this.element).hide())}}}),c.extend(c.ui.sortable,{version:"1.8.2"})}(jQuery),function(n){n.widget("ui.counter",{options:{begin:null,end:null,toFixed:0,duration:null,interval:100,callback:function(){}},_create:function(){},_init:function(){var e=this;if(null!=this.options.end&&null!=this.options.duration&&(null==this.options.begin?(this.options.begin=Number(n(this.element).text()),"number"!=typeof this.options.begin&&(this.options.begin=0)):n(this.element).text(this.options.begin),this.options.begin!=this.options.end)){var t;this.options.begin<this.options.end?(this.direction="up",t=this.options.end-this.options.begin):(this.direction="down",t=this.options.begin-this.options.end);var i=Math.ceil(this.options.duration/this.options.interval);this.change_value=t/i,this.value=Number(this.options.begin),setTimeout(function(){e._tick()},this.options.interval)}},_tick:function(){var e=this;"up"==this.direction?(this.value+=this.change_value,this.value>this.options.end&&(this.value=Number(this.options.end))):(this.value-=this.change_value,this.value<this.options.end&&(this.value=Number(this.options.end))),n(this.element).text(this.value.toFixed(this.options.toFixed)),"up"==this.direction&&this.value>=this.options.end||"down"==this.direction&&this.value<=this.options.end?"function"==typeof this.options.callback&&this.options.callback.call(this):setTimeout(function(){e._tick()},this.options.interval)}}),n.extend(n.ui.counter,{version:"1.8.2"})}(jQuery),function(o){o.widget("ui.displaybox",{options:{friendlies:[],position:null},_create:function(){var a=this;this.element.addClass("ui-displaybox"),o(document).bind("mousedown.displaybox",function(e){if(!o(a.element).is(":hidden")&&e.target!=o(a.element)[0]&&o(e.target).parents(".ui-displaybox")[0]!=o(a.element)[0]){for(var t,i=e.target,n=a.options.friendlies.length;i&&"html"!=i.nodeName.toLowerCase();){for(t=0;t<n;++t)if(i===o(a.options.friendlies[t])[0])return;i=i.parentNode}a.element.hide()}})},toggle:function(e){this.element.is(":hidden")?this.show(e):this.hide()},hide:function(){this.element.hide()},show:function(e){e||(e=this.options.position),this.element.show(),e&&this.element.position(e)}}),o.extend(o.ui.displaybox,{version:"1.8.5"})}(jQuery),function(m){m.widget("ui.filterlist",{options:{filters:[],values:[],change:null,delay:200,filters_only:!1,datePlaceholder:"yyyy-mm-dd",dateValidation:function(e){if(!new RegExp(/(\d{4})-(\d{2})-(\d{2})/).test(e))return!1;var t=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10)-1,n=parseInt(RegExp.$3,10),a=new Date(Date.UTC(t,i,n)),o=a.getUTCFullYear(),r=a.getUTCMonth(),s=a.getUTCDate();return t==o&&i==r&&s==n}},_create:function(){var e,t,i=this,n="";if(this.element.addClass("ui-filterlist"),this.filter_index={},e=this.options.filters.length,this.options.filters_only){for(t=0;t<e;++t)this.filter_index[this.options.filters[t].name]=t;for(this.list=m('<div class="list simple"></div>').appendTo(this.element),t=0;t<e;++t)i._addSimpleFilter(t)}else{for(m(this.element).append('<div class="filters-title">Add Filters</div>'),this.filters=m('<ul class="filters"></ul>').appendTo(this.element),t=0;t<e;++t)n+='<li class="filter filter-'+t+' button">'+this.options.filters[t].display+"</li>",this.filter_index[this.options.filters[t].name]=t;this.filters.append(n),m("li",this.filters).bind("click.ui-filterlist",function(){if(!m(this).hasClass("title")){var e=m(this).attr("class").match(/filter\-([0-9]+)/);i._addFilter(e[1])}}),this.list=m('<div class="list"><table></table></div>').appendTo(this.element)}},cleanFilterVal:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},addFilter:function(e,t,i){if(void 0===this.filter_index[e])return!1;var n=this._addFilter(this.filter_index[e],t,i);return m(".filter-input",n).val(e+":"+t+":"+i),n},_addFilter:function(e,t,i){var n,a,o,l=this,r=this.options.filters[e],s=r.condition_input_options,c=r.value_input_type,d=parseInt(r.value_input_size)||16,u=r.value_input_options,p=m('<tr class="filter filter-'+e+'"></tr>');if(n='<td class="display">'+r.display+'<input class="filter-input" type="hidden" name="filters[]" value="" /></td>',s&&0!=s.length){for(n+='<td><select class="condition-input filter-condition-input">',a=s.length,o=0;o<a;++o){var h=s[o];n+='<option value="'+h[0]+'"'+(t&&t==h[0]?' selected="selected"':"")+">"+h[1]+"</option>"}n+="</select>"}else n+='<td class="condition-input">';if("date"==c)n+='<input class="filter-value-input date" type="text" value="'+(i?this.cleanFilterVal(i):"")+'" size="'+d+'" placeholder="'+this.options.datePlaceholder+'" />';else if("text"==c||"searchbox"==c||"ip"==c){n+='<input class="filter-value-input'+("text"==c?" count-value":"")+'" type="text" value="'+(i?this.cleanFilterVal(i):"")+'" size="'+d+'" />'}else if("select"==c&&"object"==typeof u){for(n+='<select class="filter-value-input">',a=u.length,o=0;o<a;++o){var f=u[o];n+='<option value="'+f[0]+'"'+(void 0!==f[2]?' style="'+f[2]+'"':"")+(i&&i==f[0]?' selected="selected"':"")+">"+f[1]+"</option>"}n+="</select>"}return n+='<div class="ui-filter-loading hide"></div></td><td><div class="filter-remove"><span>remove</span></div></td>',p.append(n),r.add_class&&m(".filter-value-input",p).addClass(r.add_class),m("> table",this.list).append(p),"custom"==this.options.filters[e].value_input_type&&this.options.filters[e].callback.call(this.element,p,m(".filter-input",p)),m(".filter-remove",p).on("click.ui-filterlist",function(){l.removeFilter(this.parentNode.parentNode)}),m(".filter-condition-input, .filter-value-input",p).not(".ui-searchbox-input").on("change.ui-filterlist, keyup.ui-filterlist",function(){var e=m(this),t=this.parentNode.parentNode,i=m(".filter-input",t);clearTimeout(e.data("timeout")),l._updateFilter(t);var n=i.data("old_value")||"",a=i.val(),o=n.split(":",3);if((""!=a.split(":",3)[2]||""!=o&&""!=o[2])&&a!=n){var r=!0,s="Make sure the date is valid and it is in the format: "+l.options.datePlaceholder+".";e.is(".date")&&!l.options.dateValidation(e.val())?(m.inputError(e,s),r=!1):e.is(".ip")&&!e.val().match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)?r=!1:e.is(".count-value")&&e.val().match(/[^\d,]/)&&(m.inputError(e,"This value must be a valid number."),r=!1),r&&(m(".ui-filter-loading",t).removeClass("hide"),clearTimeout(l.timeout),l.searching=!0,l.timeout=setTimeout(function(){m(".filter-input",t).data("old_value",a),l._change(),l.searching=!1},l.options.delay))}}),m(this.list).show(),p},addSimpleFilter:function(e,t,i){if(void 0===this.filter_index[e])return!1;var n=this._addSimpleFilter(this.filter_index[e],t,i);return m(".filter-input",n).val(e+":"+t+":"+i),n},_addSimpleFilter:function(e,t,i){var n=null;return 0==m(".filter-"+e).length?(n=m('<div class="filter filter-'+e+'"><div class="condition-input"></div><input class="filter-input" type="hidden" name="filters[]" value="" /></div>'),m(this.list).append(n),"custom"==this.options.filters[e].value_input_type&&this.options.filters[e].callback.call(this.element,n,m(".filter-input",n))):n=m(".filter-"+e),m(this.list).hide().show(),n},searching:function(){return this.searching},_updateFilter:function(e){var t="";if(""!=(m(".filter-value-input",e).val()||"")){var i=m(e).attr("class").match(/filter\-([0-9]+)/);t+=this.options.filters[i[1]].name+":",t+=(m(".filter-condition-input",e).val()||"eq")+":";var n=m(".filter-value-input",e)[0].getAttribute("placeholder");n&&n==m(".filter-value-input",e)[0].value||(t+=m(".filter-value-input",e).val()||"")}m(".filter-input",e).val(t)},refresh:function(){this._change()},_change:function(){var e,t=[],i=m(".filter-input",this.element),n=i.length;for(e=0;e<n;++e){var a=i[e].value.split(":",3);""!=i[e].value&&""!=a[2]&&t.push(i[e].value)}this._trigger("change",null,{values:t}),m(".ui-filter-loading",this.element).addClass("hide")},removeAll:function(e){var t,i=m(".list .filter",this.element),n=i.length;for(t=0;t<n;++t)this.removeFilter(i[t],e)},removeFilter:function(e,t){var i=m(".filter-input",e).val(),n=i.split(":",3);m(".filter-condition-input, .filter-value-input",e).unbind(".filter.edit"),clearTimeout(m(".filter-condition-input",e).data("timeout")),clearTimeout(m(".filter-value-input",e).data("timeout")),m(e).remove(),t||""==i||""==n[2]||this._change(),0==m("tr",this.list).length&&m(this.list).hide()}}),m.extend(m.ui.filterlist,{version:"1.8.5"})}(jQuery),function(g){g.widget("ui.form",{options:{create:function(){},beforeSubmit:function(){},submit:function(){},validations:[],errors:{},positionError:null},get_options:function(){return this.options},_create:function(){var e,t=this;for(e in this.existsRegexp=/(.*)\s+if\s+([^\s]+)\s+(!){0,1}exists/,this.inputIndex={},g('input[type="submit"]',this.element).removeData("form.disabled"),g(this.element).bind("submit",function(e){return t._submit(e)}),0==g(".ui-form-error").length&&g('<div class="ui-form-error"></div>').appendTo(document.body),g.style_checkboxes(),this.options.errors)break;e&&0<this.options.errors[e].length&&g.inputError(this.element[0].elements[e],this.options.errors[e][0],this.options.positionError)},_submit:function(e){return!g('input[type="submit"]:focus',this.element).data("form.disabled")&&(!1!==this.options.beforeSubmit.call(this.element[0],e)&&(!!this.validateAll()&&(g("input",this.element[0]).each(function(){g(this).attr("placeholder")!=g(this).val()||g(this).hasClass("state-editing")||g(this).val("")}),void 0!==g.data(this.element[0],"events")&&void 0!==g.data(this.element[0],"events").validated?(g(this.element).trigger("validated"),!1):!1!==this.options.submit.call(this.element[0],e)&&(g('input[type="submit"]',this.element).not(".no-disable").data("form.disabled",!0),!0))))},validateAll:function(){for(var e=this.options.validations,t=0,i=e.length;t<i&&t<100;t++)if(!this.validate(e[t]))return!1;return!0},validateSpecified:function(e){for(var t={},i=0,n=e.length;i<n;i++)t[e[i]]=!0;var a=this.options.validations;for(i=0,n=a.length;i<n;i++){var o=a[i];if(t[o.field]&&!this.validate(o))return!1}return!0},validate:function(e,t){if(g("input").removeAttr("aria-invalid"),g("input").removeClass("has-error"),t){if(!e.opts.if_exists)return!0;if("object"!=typeof e.opts.if_exists&&(e.opts.if_exists=[e.opts.if_exists]),-1==g.inArray(t,e.opts.if_exists))return!0}if(e.opts.if_exists){"object"!=typeof e.opts.if_exists&&(e.opts.if_exists=[e.opts.if_exists]);for(var i=!0,n=0;n<e.opts.if_exists.length&&i;n++){if(void 0!==(l=this.element[0].elements[e.opts.if_exists[n]])){if(l.name==t)continue;if(l.length&&0<l.length){for(var a=l,o=null,r=0;r<a.length&&!o;r++)a[r].checked&&!a[r].disabled&&(o=a[r]);o&&""!=o.value&&0!=o.value||(i=!1)}else i=!l.disabled&&("checkbox"==l.type?l.checked:g.check_exists(g.getInputValue(l)))}}if(!i)return!0}if(e.opts.if_not_exists){"object"!=typeof e.opts.if_not_exists&&(e.opts.if_not_exists=[e.opts.if_not_exists]);var s=!0;for(n=0;n<e.opts.if_not_exists.length&&s;n++){var l;if(void 0!==(l=this.element[0].elements[e.opts.if_not_exists[n]])){if(l.name==t)continue;if(l.length&&0<l.length){for(a=l,o=null,r=0;r<a.length&&!o;r++)a[r].checked&&(o=a[r]);o&&""!=o.value&&0!=o.value&&(s=!1)}else s="checkbox"==l.type?!l.checked:!g.check_exists(g.getInputValue(l))}}if(!s)return!0}if("count"==e.name){var c,d=this.element[0].elements[e.field+"[]"],u=0;for(n=0;n<d.length;n++)""==g.trim(d[n].value)?c||(c=d[n]):u++;return!!g.check_amount(u,e.opts)||(c||(c=d[d.length-1]),g.inputError(c,e.message,this.options.positionError),!1)}if(void 0!==(l=this.element[0].elements[e.field])){var p=g.getInputValue(l);if(e.opts.fields){e.opts.values={};for(n=0;n<e.opts.fields.length;n++)e.opts.values[e.opts.fields[n]]=g.getInputValue(this.element[0].elements[e.opts.fields[n]])}if("function"!=typeof g["check_"+e.name])return alert("Invalid validation check: "+e.name+"."),!1;if(!g["check_"+e.name](p,e.opts)){if(void 0!==e.opts.area_of_effect){var h=g(e.opts.area_of_effect),f=h.offset();window.scrollTo(0,f.top),h.flashError(),l=h}return g.inputError(l,e.message,this.options.positionError),!1}}return!0}}),g.check_exists=function(e,t){if(t&&t.values)var i=t.values.message_mode;return"bbcode"==i?e=(e=e.replace(/\[\/?(b|i|p|u|s|em|div|sub|sup|font|span|strong)(\s+.*?)?\]/gim,"")).replace(/\[br\]/gi,""):"visual"==i&&(e=(e=e.replace(/<\/?(b|i|p|u|s|em|div|sub|sup|font|span|strong)(\s+.*?)?>/gim,"")).replace(/<br(\s?\/)?>/gi,"")),e=e.replace(/&nbsp;/g,""),""!=(e=g.trim(e))},g.check_date_format=function(e,t){if(""===e)return!0;var i=null,n=null,a=null;if(t.input_date_format&&t.input_date_regex){var o=new RegExp(t.input_date_regex),r=e.match(o);if(r){var s=t.input_date_format.replace(/[^dmY]/g,"").split("");for(r.shift();s.length;){var l=parseInt(r.shift(),10);switch(s.shift()){case"d":a=l;break;case"m":n=l;break;case"Y":i=l}}}}if(!i||!n||!a)return!1;var c=proboards.time.createDate(e,"00:00",{utc:!0});if(!c)return!1;var d=c.getUTCFullYear(),u=c.getUTCMonth()+1,p=c.getUTCDate();return i==d&&n==u&&p==a},g.check_time_format=function(e,t){return!(""!==e&&!/^(?:(?:(?:(?:0?[1-9])|(?:1[0-2])):[0-5][0-9]\s?[ap]m)|(?:(?:(?:[01]?[0-9])|(?:20|21|22|23)):[0-5][0-9]))$/i.test(e))},g.check_url=function(e,t){return new RegExp("^(?:(?:https?:)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff0-9-]{2,63})))(?::\\d{2,5})?(?:(?:/|\\?)\\S*)?$","i").test(e)},g.check_matching_values=function(e,t){return e==g('[name|="'+t.field+'"]').val()},g.check_date_range=function(e,t){var i=t.start_date||"start_date";return!(!g.check_date_format(e,t)||!g.check_date_format(t.values[i],t))&&proboards.time.createDate(t.values[i],"00:00",{utc:!0})<=proboards.time.createDate(e,"00:00",{utc:!0})},g.check_date_and_time_range=function(e,t){if(!g.check_date_range(e,t))return!1;var i=proboards.time.createDate(t.values.start_date,"00:00",{utc:!0}),n=proboards.time.createDate(e,"00:00",{utc:!0}),a=i.getTime()==n.getTime(),o=t.values.start_time,r=t.values.end_time;if(!(a&&o&&r))return!0;var s=t.values.start_time.split(":"),l=t.values.end_time.split(":"),c=parseInt(s[0]),d=parseInt(s[1].substr(0,2)),u=/(am|pm)/i;if(u.test(s[1])){var p=RegExp.$1.toLowerCase();"pm"==p&&12!=c?c+=12:"am"==p&&12==c&&(c=0)}var h=parseInt(l[0]),f=parseInt(l[1].substr(0,2));if(u.test(l[1])){var m=RegExp.$1.toLowerCase();"pm"==m&&12!=h?h+=12:"am"==m&&12==h&&(h=0)}return 60*c+d<=60*h+f},g.check_email=function(e,t){return!!(new RegExp("^[a-z0-9.!#$%&'\"*+-=?^`_{|}~\\\\ ]{1,63}@(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff0-9-]{2,63}))$","i").test(e)&&e.length<255)},g.check_value=function(e,t){return void 0!==t.case_sensitive&&t.case_sensitive?e==t.value:e.toString().toLowerCase()==t.value.toString().toLowerCase()},g.check_dollar=function(e,t){var i=void 0!==t.allow_sign&&t.allow_sign?"^\\$?":"^";return i+=void 0!==t.allow_commas&&t.allow_commas?"(\\d+|[1-9]\\d{0,2}(,\\d{3})*)":"\\d+",i+="(\\.[0-9]{2})?$",!!(i=new RegExp(i)).test(e)},g.check_amount=function(e,t){if(!g.check_numeric(e,t))return!1;if(void 0!==t.allow_commas&&t.allow_commas&&(e=e.toString().replace(",","")),e=parseFloat(e,10),void 0!==t.less_than){if(e<t.less_than)return!0}else if(void 0!==t.less_than_equal_to){if(e<=t.less_than_equal_to)return!0}else if(void 0!==t.equal_to){if(e==t.equal_to)return!0}else if(void 0!==t.not_equal_to){if(e!=t.not_equal_to)return!0}else if(void 0!==t.greater_than_equal_to){if(e>=t.greater_than_equal_to)return!0}else if(void 0!==t.greater_than){if(e>t.greater_than)return!0}else alert("Invalid amount check option provided.");return!1},g.check_length=function(e,t){if(e=e.toString(),void 0!==t.less_than){if(e.length<t.less_than)return!0}else if(void 0!==t.less_than_equal_to){if(e.length<=t.less_than_equal_to)return!0}else if(void 0!==t.equal_to){if(e.length===t.equal_to)return!0}else if(void 0!==t.greater_than_equal_to){if(e.length>=t.greater_than_equal_to)return!0}else if(void 0!==t.greater_than){if(e.length>t.greater_than)return!0}else alert("Invalid amount check option provided.");return!1},g.check_message_length=function(e,t){return"bbcode"!=g('input[name="message_mode"]').val()&&!t.bbcode||!((e=(e=e.replace(/\n/gm,"[br]")).replace(/\r/gm,"")).length>t.max_length)},g.check_numeric=function(e,t){var i=void 0!==t&&void 0!==t.allow_commas&&t.allow_commas?"^(\\d*|[1-9]\\d{0,2}(,\\d{3})*)$":"^\\d*$";return!!(i=new RegExp(i)).test(e)},g.check_regex=function(e,t){var i=!!new RegExp(t.regex,t.case_insensitive?"i":"").test(e);return t.negate?!i:i},g.clearInputError=function(){g(".ui-form-error").hide()},g.getInputValue=function(e){if(e.length&&1<e.length&&!g(e).is("select")){for(var t=null,i=0;i<e.length&&!t;i++)e[i].checked&&(t=e[i]);if(null==t)return"";e=t}return("checkbox"!=g(e).attr("type")||void 0!==g(e).attr("checked")&&""!=g(e).attr("checked"))&&(g(e).attr("placeholder")!=e.value||g(e).hasClass("state-editing"))&&e?e.value:""},g.inputError=function(e,t,i){var n=g(e),a=g(".ui-form-error");if(n.is(":hidden")){var o=g("."+n.attr("name")+"_alt");0<o.length&&(n=o.eq(0))}if(e=n.get(0),0==a.length&&(a=g('<div class="ui-form-error"></div>').appendTo(document.body)),a.one("click",g.clearInputError),n.addClass("has-error"),"function"==typeof i)i.call(n,t);else{var r;n.is(":hidden")?(n.show(),n.is('[type="hidden"]')?(e.type="text",(r=n.offset()).top+=n.outerHeight(),e.type="hidden"):r=n.offset(),n.hide()):r=n.offset(),r&&(r.top+=n.outerHeight(),a.css({top:r.top+"px",left:r.left+"px"})),a.text(t).attr("role","alert").show(),n.attr("aria-invalid","true");var s=n.get(0).tagName.toLowerCase();if(-1!=g.inArray(s,["a","input","select","textarea"]))n.focus().flashError();else{var l=n.offset().top-60;l<0&&(l=0),window.scrollTo(0,l)}}g.handleError(e)},g.handleError=function(e){0==(e=g(e)).filter(":visible").length&&(e=e.closest("body")),e.one("keypress.form click.form change.form",function(e){g.clearInputError()})},g.fn.flashError=function(e){var t=this;void 0===e&&(e="ui-error"),g(t).addClass(e),clearTimeout(i);var i=setTimeout(function(){g(t).removeClass(e),i=setTimeout(function(){g(t).addClass(e),i=setTimeout(function(){g(t).removeClass(e)},200)},200)},200)},g.fn.input_placeholder=function(e){return""==g(this).val()&&(g(this).val(e),g(this).addClass("ui-active")),g(this).addClass("ui-input-placeholder"),g(this).bind("focus",function(){g(this).val()==e&&(g(this).val(""),g(this).removeClass("ui-active"))}),g(this).bind("blur",function(){""==g(this).val()&&g(this).val(e),g(this).val()==e&&g(this).addClass("ui-active")}),this},g.style_checkboxes=function(){g(".styled_checkbox").each(function(){g(this);g(this).on("click",function(){g(this).parent().find("label").toggleClass("checked",g(this).prop("checked"))})})},g.extend(g.ui.form,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.loadingStatus",{options:{loadingClass:"loading",loadingCss:null,loadingText:"Saving...",successClass:"success",successCss:null,successText:"Saved",errorClass:"error",errorCss:null,errorText:"Error",successDisplayTime:3e3,errorDisplayTime:4e3},_create:function(){this.element.addClass("ui-status")},_init:function(){this.timeout=null,this.originalStyle=this.element.attr("style"),this.element.css("display",""),this.element.css("opacity",""),this.baseStyle=this.element.attr("style"),this.element.css("opacity",0).hide(),this.visible=!1},_destroy:function(){this.element.removeClass("ui-status").attr("style",this.originalStyle),e.Widget.prototype.destroy.call(this)},setStatus:function(e,t){var i=this,n=this.options;this.clearStatus("loading"==e),"loading"==e?(this.element.html(t||n.loadingText).addClass(n.loadingClass),n.loadingCss&&this.element.css(n.loadingCss),this.toggle(!0)):"success"==e?(this.element.html(t||n.successText).addClass(n.successClass),n.successCss&&this.element.css(n.successCss),i.toggle(!0),this.timeout=setTimeout(function(){i.toggle(!1)},n.successDisplayTime)):"error"==e&&(this.element.html(t||n.errorText).addClass(n.errorClass),n.errorCss&&this.element.css(n.errorCss),i.toggle(!0),this.timeout=setTimeout(function(){i.toggle(!1)},n.errorDisplayTime))},classes:function(){var e=this.options;return[e.loadingClass,e.successClass,e.errorClass]},clearStatus:function(e){clearTimeout(this.timeout),this.element.html("").removeClass(this.classes().join(" ")).attr("style",this.baseStyle),e&&(this.element.css("opacity",0).hide(),this.visible=!1)},toggle:function(e){var t=this;if(void 0===e&&(e=!this.visible),e!==this.visible){var i=e?{opacity:1}:{opacity:0},n=e?null:function(){t.element.hide()};this.element.animate(i,n),this.visible=e}}})}(jQuery),function(o){o.widget("ui.menu",{options:{showOn:"hover",show:null,hide:null,beforeShow:null,onClose:null,button:null,click:null,clickHide:!0,position:{my:"left top",at:"left top",of:"mouse",collision:"flipfit"},addedMenu:null,showDelay:0},_create:function(){var n=this;this.element.addClass("ui-menu ui-helper-clearfix").hide(),o("li:has(ul)",this.element).addClass("ui-menu-has-sub-menu"),o("li > a",this.element).on("mouseenter",function(e){var t=o(this).closest("li");o("> ul",t).removeClass("state-timeout-hiding");var i,n=t.parents("li"),a=n.length;for(i=0;i<a;++i)o("> ul",n[i]).removeClass("state-timeout-hiding")}),o("li:has(ul) > a",this.element).on("mouseenter",function(e){var t=o(this).closest("li");return clearTimeout(n.hidingTimeout),n._hideTimedOutMenus(),n._showMenu(o("> ul",t)),!1}),o("li > a",this.element).on("blur",function(e){n.element.addClass("state-timeout-hiding"),o(this).parentsUntil(n.element,"ul").addClass("state-timeout-hiding"),clearTimeout(n.hidingTimeout),n.hidingTimeout=setTimeout(function(){n._hideTimedOutMenus()},500)}),o("li:has(ul)",this.element).on("mouseleave",function(e){o("> ul",this).addClass("state-timeout-hiding"),clearTimeout(n.hidingTimeout),n.hidingTimeout=setTimeout(function(){n._hideTimedOutMenus()},500)}),o("li",this.element).append('<span class="arrow right"><span></span></span>').live("click.menu",function(e){o(this).hasClass("state-disabled")||(n._trigger("click",e,{item:this}),(!o(this).hasClass("no-hide")&&!o(this).hasClass("ui-menu-has-sub-menu")||o(this).hasClass("actionable"))&&n.options.clickHide&&n.hide()),e.stopPropagation()}),o(this.element).bind("contextmenu.ui-menu",function(e){if(n.disableContextMenu)return n.disableContextMenu=!1}).bind("mouseenter",function(){n.element.data("hotkey-open",!1)}),this.options.button&&"rightClick"==this.options.showOn&&o(this.options.button).bind("contextmenu.ui-menu",function(e){return e.preventDefault(),!1}),this.options.button&&(o("a:first",o(this.options.button)).on("mouseenter",function(e){if("hover"==n.options.showOn){var t=setTimeout(function(){n.show(e)},n.options.showDelay);o(this).data("timeout",t)}}),o("a:first",o(this.options.button)).on("mouseleave",function(e){"hover"==n.options.showOn&&clearTimeout(o(this).data("timeout"))}),o(this.options.button).bind("mousedown.ui-menu",function(e){("click"==n.options.showOn&&1==e.which||"rightClick"==n.options.showOn&&3==e.which)&&(n.element.is(":visible")?n.hide():n.show(e),n.disableContextMenu=!0)})),o(document).bind("mousedown.ui-menu",function(e){if(n.element.data("hotkey-open",!1),!n.element.is(":hidden")){for(var t=e.target,i=!1;!i&&t&&t.nodeName&&"body"!=t.nodeName.toLowerCase();)(t===n.element[0]||n.options.button&&t===o(n.options.button)[0]||n.options.addedMenu&&t===o(n.options.addedMenu)[0])&&(i=!0),t=t.parentNode;i||n.hide()}})},_showMenu:function(e){var t={my:"left top",at:"right top",of:o(e).parent("li"),offset:"-2 -3",collision:"flipfit"};o(e).show().position(t)},_hideMenu:function(e){o(e).hide()},_hideTimedOutMenus:function(){var e,t=o("ul.state-timeout-hiding",self.element),i=t.length;for(e=0;e<i;++e)o(t[e]).removeClass("state-timeout-hiding"),this._hideMenu(t[e])},show:function(e){if("function"!=typeof this.options.beforeShow||!1!==this.options.beforeShow.call(this.element)){if(this.element.show(),"rightClick"==this.options.showOn){var t=o.extend({},this.options.position);t.of=e,this.element.position(t)}else this.element.position(this.options.position);this._trigger("show")}},hide:function(){this.element.is(":hidden")||this.element.data("hotkey-open")||(this.element.hide(),this._trigger("hide"),this.options.onClose&&this.options.onClose.call())},clearClickCallback:function(){o("li",this.element).die("mouseup.ui-menu")},setClickCallback:function(t){var i=this;o("li",this.element).live("mouseup.ui-menu",function(e){e.stopPropagation(),t.call(i,e)})},showOption:function(e){o("li."+e,this.element).show()},hideOption:function(e){o("li."+e,this.element).hide()},showAllOptions:function(){o("li",this.element).show()},hideAllOptions:function(){o("li",this.element).hide()},enableOption:function(e){o("li."+e,this.element).removeClass("state-disabled")},disableOption:function(e){o("li."+e,this.element).addClass("state-disabled")},enableAllOptions:function(){o("li",this.element).removeClass("state-disabled")},disableAllOptions:function(){o("li",this.element).addClass("state-disabled")}}),o.extend(o.ui.menu,{version:"1.8.5"})}(jQuery),function(s){s.widget("ui.pagination",{options:{maxSlots:9,total:0,page:1,limit:10},_create:function(){var a=this;this.page=this.options.page,this.pages=Math.ceil(this.options.total/this.options.limit),this.options.limit<1&&(this.options.limit=1);var e=this.options.maxSlots;e<5&&(e=this.options.maxSlots=5),this.pivot=Math.ceil(e/2),this.evenSlots=e%2==0,this.element.hide().addClass("ui-pagination"),this.prevPage=s('<li class="ui-pagination-page ui-pagination-prev"><a>&laquo; Prev</a></li>');for(var t="",i=0;i<e;i++)t+='<li class="ui-pagination-page ui-pagination-slot"><a rel="norewrite"></a></li>';this.nextPage=s('<li class="ui-pagination-page ui-pagination-next"><a>Next &raquo;</a></li>'),this.element.append(this.prevPage,t,this.nextPage),s(".ui-pagination-page",this.element).hover(function(e){s(this).hasClass("state-disabled")||s(this).hasClass("state-selected")||s(this).addClass("state-hover")},function(e){s(this).removeClass("state-hover")}),s(this.element).on("click",".ui-pagination-page",function(e){if(!s(this).hasClass("state-disabled")&&!s(this).hasClass("state-selected")){var t=e.target;"a"==e.target.nodeName.toLowerCase()&&(t=t.parentNode);var i=s("a",t).text().replace(",","");if(-1!=i.indexOf("Prev"))n=a.page-1;else if(-1!=i.indexOf("Next"))n=a.page+1;else if(-1!=i.indexOf("..")){var n=parseInt(prompt("Enter a page number:",""),10);if(isNaN(n))return!1;n<1&&(n=1),n>a.pages&&(n=a.pages)}else n=i;a._trigger("change",e,{page:n,pages:a.pages})}return!1}),this.refresh(),this.element.show()},_commify:function(e){var t="";e=(e=(e=e.toString()).split("")).reverse();for(var i=0,n=0;i<e.length;i++)2<n&&(t+=",",n=0),t+=e[i],n++;return(t=(t=t.split("")).reverse()).join("")},gotoNextPage:function(){this.page!=this.pages&&this._trigger("change",null,{page:this.page+1,pages:this.pages})},gotoPreviousPage:function(){1!=this.page&&this._trigger("change",null,{page:this.page-1,pages:this.pages})},changeMaxSlots:function(e){this.options.maxSlots=e,this.pivot=Math.ceil(this.options.maxSlots/2),this.evenSlots=this.options.maxSlots%2==0,s(this.element).html(""),this.prevPage=s('<li class="ui-pagination-page ui-pagination-prev"><a href="">&laquo; Prev</a></li>').appendTo(s(this.element));for(var t=0;t<this.options.maxSlots;t++)s(this.element).append('<li class="ui-pagination-page ui-pagination-slot"><a></a></li>');this.nextPage=s('<li class="ui-pagination-page ui-pagination-next"><a href="">Next &raquo;</a></li>').appendTo(s(this.element))},refresh:function(e){e&&(void 0!==e.limit&&(this.options.limit=e.limit),void 0!==e.page&&(this.options.page=e.page),void 0!==e.total&&(this.options.total=e.total));var i=location.href;i.match(/page=\d+/)||(i+=location.search||location.hash?"&page=":"?page="),this.options.limit<1&&(this.options.limit=1);var n,a,t,o=this;if((n=Math.ceil(this.options.total/this.options.limit))<1&&(n=1),a=parseInt(this.options.page,10),n<a?a=n:a<1&&(a=1),t=n,this.page=a,this.pages=n,1==a?this.prevPage.addClass("state-disabled").children("a").attr("href",""):this.prevPage.removeClass("state-disabled").children("a").attr("href",i.replace(/page=\d*/,"page="+(a-1))),a==t?this.nextPage.addClass("state-disabled").children("a").attr("href",""):this.nextPage.removeClass("state-disabled").children("a").attr("href",i.replace(/page=\d*/,"page="+(a+1))),s(".ui-pagination-slot",this.element).show().removeClass("state-selected").removeClass("state-disabled"),n<=this.options.maxSlots)r=1,s(".ui-pagination-slot",this.element).each(function(e,t){r<=n?(s(t).children("a").text(o._commify(r)).attr("href",i.replace(/page=\d*/,"page="+r)),r==a&&s(t).addClass("state-selected")):s(t).hide(),r++});else{var r=1;s(".ui-pagination-slot",this.element).each(function(e,t){1==e&&a>o.pivot?(s(t).children("a").text("..").attr("href","#"),r=a<=n-o.pivot?a-(o.pivot-3):n-(o.options.maxSlots-o.pivot)-(o.pivot-3)):e==o.options.maxSlots-2&&a<n-(o.options.maxSlots-o.pivot)?(s(t).children("a").text("..").attr("href","#"),r=n):(s(t).children("a").text(o._commify(r)).attr("href",i.replace(/page=\d*/,"page="+r)),r==a&&s(t).addClass("state-selected"),r++)})}}}),s.extend(s.ui.pagination,{version:"1.8.5"})}(jQuery),function(o){o.widget("ui.passwordStrength",{options:{imageContainer:null,statusContainer:null,defaultCriteria:!0,additionalCriteria:null,visualImages:null,statusText:null},_create:function(){this.element;var e=this.options;if(e.imageContainer||e.statusContainer)e.imageContainer&&(e.imageContainer=o(e.imageContainer)),e.statusContainer&&(e.statusContainer=o(e.statusContainer));else{var t=o('<div class="ui-password-strength"></div>'),i=o("<div></div>"),n=o("<div></div>");t.append(i,n),this.element.after(t),this.generatedElem=t,e.imageContainer=i,e.statusContainer=n}var a=o("<img />");e.imageContainer.append(a),e.imageElem=a},_init:function(){var n=this;n._setup();var a=n.element,o=n.criteria,r=o.length;a.on("keyup.ps",function(){for(var e=a.val(),t=0,i=0;i<r;i++)"function"==typeof o[i]&&o[i].call(e)&&t++;n.strengthLevel=t,n._setVisual(),n._setStatus()}).trigger("keyup.ps")},_setup:function(){var e=this;e.strengthLevel=0,e.visualImages={0:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATZJREFUeNrsmGEOgyAMhUeyS/jf+1/LQ6hhYmJiTAt9FWXR95ItS0FhpR8thBjjh6IoTN/01fd9tzeGEMTOmv0GDcuns3TUNoKjPbdhaH0Lm8yw+KezzqeVH5E5Sv+75BukPf0W7Ota7+3S+JJdGksb/9imjaP4ZVjBmaapGRy1Akt6jxcWqwOfKC1IS1ChfRRoTIBIdgSUGuu6gjPP860QWLOCd6GvguXpECG+LGWYUsbyZDP0+ctLtQ0cJGDQSZ7NCDUyhBcUS9+GZax5bXJztILigeXfgr4aOFup5glABADvc56zB3pOYamGA/D6y4EEjjc1o7szEqCWna3GeynqVMaxHL6sNa61/WzJRlHNwElnnNKNRA4cBj71SnDGcRSvCt98LUtRrssBiqJ0BcJCUbh+AgwAXe5qGKZgHg0AAAAASUVORK5CYII=",1:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqBJREFUeNrsmF1u5CAMx23US8zzvq1W6v1P0UPsw5xhRhq8YGwwLDQhmqrRFEttEvOVSfzL3waJCJYtWzZnb/Hf3/ffBAEgxHCB5cgWzhG9+MLRSTsfia/TGJ+OTvundu6XfeEPkg/Ep2Pz/LFdr8M5goc/H7/i1WXPDxp9CFr/Zx+MUd+Nj8wVES977+ebbOoee79769nMtMfzjv8a37X199bv+XtrjdZv20brDJ7LlcGBxyM5QIBRMEDOOcDlCLqY+LzP8PAf6Xgv8Ikv9KE8PszNPrl2VM+v60EcQ3C/3w8BcxSWvQ/wFW0UpFtQzfYZQLMLkJ5/BpRnvFcGhx5exIUKOCRBLwFNGuAKBgkY6nNgwAn9A1DsI+3jRWEEUaQyh8CU4BJgYjOmm/wMnK2H8UxYXh2imWe5pTBbinVEzWbHf3mqxgFcAZECnrAENIJRD1UXJ/2dBDsUmBiSam5RGCxjyMmP97p286JgDM4RhTgKyp6+iHhKAPbe415QjsBytqB/HjghVSMFB3ydqiksAFlNYjunXV7VJKVs3JZhMikapPkiIPHdkTOiA7IsFHZH4MzUHrN1ykrV5gH48ZsDFGucnJpJ9KoKRCXxRYVyXYJFaUoNIw/bSQ0DtUCpqlifvgI04PARS9vtdjv01VsvftkXK46XVMuAYwt5V9K4rEwu1SERMHRGHsiULe21AAFUK46VGG3GjVRt2bLvVxyfFAcbcLg4R/OFRhPc2hVLU86vLCQ9mMBsuDVjeW7stC1bdsoaR6KfdLsZ6w0wMClUVYRE4Kx6yM5atTttVcYCqHA07a3iLFt2SnAena2sXG80eRfaolHgQhlAIhMRBO4nYKXhVO10o63+fYEng4P/bxYsW3YWw1UoL1s2b/8EGADc3ycBPHlyUwAAAABJRU5ErkJggg==",2:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuJJREFUeNrsmNGO4yAMRW20PzFP+7JP+3Gr/et+Q2dSvEkbyPXFNI00K1UtSG3AGEgrH65BzUxGGWWUY+XH8vX155eJrpblqQr19SN2v+3G2/ZcSuL6Oj7BPIl9oT/NHjpXattg3FIj23V9o/dYfaK22Ga79mc/l+Rat/U3Zrs9y7bz++9PncsH/8FPtjGdjrxjsWM/+7LPkf6lHthP8+cD7dH6kT1aq7c+9/XW6fwvpys4kqfNmnSDYA8OBkUQGugzsBv0s12K7/zAcWWMCczh/avtHiwZoKohnz1stvnbOncu3tf3utWNwPn8/HyJnbQXpHtQHfXpQPMQIJH9CCjfsaGt4FxgdQYEAEKQQqhIPZRUwUFmm/pgsCNYJZiTeOhwfrSptEoi5t7DQScekAqFtG3uE7TPlfP5/JLQHIVqz2cPpkcV75Hx/z1V28CxVlkiaBRAiPqNbDmAgdUHIYE0bFMVHEfpXFG/mnL596oggEpYmfoOLPW3sg/Vl/JM4PQCSFUPjekF5VFYni3ovw0cu0xBGtU701h83sF+I3vy6hPaOWVTjG4BpfGpX4UBoTAIetuUQQgc5ycxQEJPA1hwjVdVnD2g3vpyQK7gwJ+B55VumtZTHPMKg4HOsJi1QK0qgEEvBIdLk+C8hIAgABWETKBkGB8pCY4XTl/FKdk0TeOq6e3AyVN7IWCsLEbKcsfmDum3uUzvBD1BgsEeqUqFZL2Fa2BhILRVkQYKAkiilE1iiMYG/LbgXNbIo2tkPlxHB26xdtdOlPJgoKIyJGnPHxE4HKAJILANoBrUBabIjjCkAAiFsVBvIGN1HuUNwZm+/PVyhaiFw+X5AIZrW7DTa6AoBoFpLWh1jgJY9ooTpXPOxulZJkCyNDeD0bmmuT0c4AxwXKoGKVUJamxnhoWvcbUDU4J+ac8PojvgmJ9fAjAcINqqTKgwATB8q2h0NY+Ko2kE0LsWHTcko4xyvPwTYADMMjEE7vo9DwAAAABJRU5ErkJggg==",3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAvRJREFUeNrsWVuOGkEMbEt7if3KT75ygdw+19kzwBIqMJsB213VDwRSpLSleeB2t4ehyo/GAJQlS5bMydv19Pnr+509dj2stmzp870NjPXm+KttZzTn2GX4GgQ2HZINnM6PIY0xHao1sF3h7P0z+nmIz5D1JdtB6/YrQOyiny0WXu7P55vVJj9+frOLvOefUAXPXe/Hs222mRm/3hP9x+V493rmn+mZL+U/jyk/4r18vH3dnSKSIUCu9CMCRSD07a3jFwncfhEkQIaxCGIQ3X3Nvz7gfZBn9wDP/kp6Riu1DtD2xRHDffX92NcD4qz9ejwe+z+TAGmPVLM2gjRDBGH6GaL0iDGccQp+Pyd/Af2MowAHlilGyAhKjNuLsQQ8NCI/2FoJ1IqElPWo303R80HMUWpS+NhWUVyR6HI6HA7TpJklVc+mR6bRjDcy/+Wl2p046KSLBNgmOfIUkMzDSirimpZxiHOQyyIFXojMo6L8HGmQnvcG9HQNyT2Pu++KRIowluYwEnl9izijRHmELP8a6J9GHNxKNXTIksoRaatIBZ15VMaxnh+4cg6cSIaaaEWXVBlwNwsbI8MMcVgOatoogpEsE6rvBzNOj1D/9ebAV48DXXoV1SeIPqPVvwAi40CvmW2UH9QNeQBUIRG+kJLIIvhgpNsQJPDPW72xxhxajoEHELSLXpmVTqfT2g57PnEaIKQZAu3sk8sfaxAQEGVYJ/r6zymqB7A2In/VQ+R1S1wTA7uB2SZ8ht7sYFmiIlejPEZvrSWv6HFUra9IgNgjEHKEZrcRhWm5MhDBkTYCMQB2lkn2+wDUorNRGSAQWPQf3YJv2Yq1m1svtoD+GuKcP1lrmcIUQsRTTesGTNMRMPQLDMwMbNafS0nlS68isosiISmXMEOCRwhjuuSSmzCz90teUarFxpiSgjWqDJCpQYVpMAbwGt+Gbe40WepDcskmSjXlj5FXjQ392TtKlMk/k21gvtkizivE1g7JkiXz8keAAQBaA14mwov2OQAAAABJRU5ErkJggg==",4:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+hJREFUeNrsWjGS2zAMJG6uSpsqTar8/1tp0/ruyI1sizKwXFDyJI1mrBmdKICkaGoXC1JnAMrreB2v47nj/frn88+vG306hVDMlf252K0kPn22Euu3SR2+b2u7ZsWWe7Skjre1pWa438qgdrj2+3hGOBHthmDn56/nMkpDYx8wjmV5bl1npbo+Kz23Gh5jFc/3dqx9Rp/zr2O8zmPs1z0f0e77urYprq8a6sTnYPCB3stSxvre2oqP9f7bz+/LLyk/ekC/Xn1wn9m9b2ZTvuw56lh8v9/vpS9ntkeFCeOQ+JH4NrtxvQj0cpCIow0bOAsBCxkhPJgRAQwqc30MZMvtGxFcX3UAnSYEAX8YI1972ZNAtS0O/G34rRgCDROFr7UkxLgBLV4lUNbrx8fHLkGU/Rmi7BHjsOJcp+VZghQJckx8fo6QEAOy3UylAjmgiDECn4HMAB4Jl9uzMiuTUhbl90FgUCBg+N2sMrEv6HlKVKwKQgzBBG7cnhCOKEyG29UiKAJu3Yu9XC6SJJntf5LhH4iDlB6jkuAAkUI4kESb349k4dSrlwv10SSgRyCxWsV2HPk1Ee+npYrTMBJuTKtGO4RKqfEqsrSk/3uAoeCDnqrF+0AQG5VDKkrmK6Pq+Po9VeuKc4o1DspXAPdeopYBXrV9jihIFSar3wRZZAoEFaFLSG/aDsEyZTlmj+TICBvGh6RfkB9lW6/5tqBrc+lyCEhwQCaw8xv1dWTUVNe+AsBOKnOifaptjYMym4lsNpQqYUdBEj8gFAZ5WjYQQCuIXqM4PzKVeEThDsoUyL3ft9GX9l8ioHvdkMIZtYdu1zccFEkahHJbkm5N1F7F1enGEK9nyk6+f0rirIqDgQC5kmxlYDoL3AcOEQwhGg5g9ZGWo7BR2uF8DMwNQBhBXqneEeIU21EiN8aGXEm2MRmpR9LflDgK1LaTUkHsnNp+6qXAr9qnCnM+4lS9xQEcADvylAsxHYAHJOXRnH4wKPoouU5YDyACqCakU3UzxfEArsh3zm7EeaPxiU2CRrOd/uZC6Rf0GiVL1eQc03xKlcGIBJXeMdAHhWISGNU9+efDNVX7TBJQ0gpBhNsLdfbqFnwq8lVnLx7wAjweuL7eQBYigx8LA6/Cf5+JZKgJgDllSnfPbLLbhgPb19BtszUPklTNp2FSeUxs/0PvEHOb3U2gDEE2Xwickzh9c8CRoxOCVaOJvLkRoNO2Lso398Iq7er0+ilYfUpFYKnJWBl4FZEQu6ngBPBHiBPGYIl6IO8f4rdiQlIkH4jl5sDk08p2b3PCpCSy+P1OksfORxx7/cvN63gdzx9/BRgArTdZhiaGbR4AAAAASUVORK5CYII=",5:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0dJREFUeNrsmt2S2yAMhdFMH2Xv+lx9/95vymmSxrEQRz/E2c5emMxsQgyCgD4dGa8AaGc5y1nWyo/bn5+fHzs9109yfen6VgT8+6lA2yLtEXzH7cj9L/L+2D/8G3urAmM7U9fvNphsdXRM8xM1R7nVjL17X/jr4/4mbXuxX7De0tQc5WEHDbTfPnc8x7Rtt7p93+eJwZa+fvs8re1jr6H66f3QdgZbHc+93/cW4/i2vx5jq2s/6nxNf/+C3MG5XF9PODQ0K8UBSdJu8O2gAGmbgdnf+SYz2xqkaaOiwFBx4KPg1KBYhktY4OncSa29FJhHf1E2hzVWjj8EF7MfAzhqT62jM5sS2HF9Qa9JJ3WtOH+ur3cU5rxMceCQgIwQpg7NXwxhykKUxI7NIeQqtQTOIlRyAAraphFwnMCiFGDv1uGC49mY9wDDvjGb0xhwxmX9lYPrjGOAwAYMUofz/fbdAM6KQ6PV7o2EtQeJ5nbhEsWhjm4+C+vDFGZKL9ou9UyNhvTVpLGvgvNG4BrggCMuODR11YGlo5T2WhURR0VsGjuN3wMnX1kbYw9s7boDEhLFueASOmAGTVSXEDYswehtWJQmeJtWStWC/P/tioP/oDhYUJz53oM7eeU3IFBAFIEwbcFcCQ4IGVgoQGTm8rzHmdKTNt4jWIn0YLLpj1TTI5JSVSIba7tdEweUoW93FhYLjhGpY/9m4AgBh7XN1iVre4euOKfK74lUqDpG5XAqS3HHVO0yA9AQKskQ7e2p1uCc2fVEwaKN6sGi6jQhgwDrwNC5SdHRigDg1VQtsC2iAxFZt57YQ7FtK6x5a2ungxVwMsWx1wkgQFFxbvc4GpTsvQyYPhzowQYwGII8lYJDnB7RBvUFxWlJWwsO1iPY2xXHg1HNUSrrY5UTibo2Z+2w6MRB2oWVRxsrJ5HZIxILzuf1ZaGwQEw37j2IKpkisIlnMGzSj2I0tI7Rk43R/Xty+nL8ecobDgCOn6pRwLGgOI0Ep8q8q8fpr0Cw8nywHQRne45DT5d6EHWY4wd9gUR9vEjdA7VYUZRqfr6avrSDTv5Kqta+AJzo5nkV1soJWRWYI+BUYcraSTOnqee/3JzlLMvlrwADAI42NJ/UjLbOAAAAAElFTkSuQmCC"},e.visualImages=o.extend(e.visualImages,e.options.visualImages),e.statusText={0:"",1:"VERY WEAK!",2:"WEAK",3:"AVERAGE",4:"STRONG",5:"VERY STRONG!"},e.statusText=o.extend(e.statusText,e.options.statusText);var t=e.options.additionalCriteria||[];if(e.options.defaultCriteria){var i={moreThan10Chars:function(){return 10<this.length},hasCapital:function(){return/[A-Z]/.test(this)},hasLowercase:function(){return/[a-z]/.test(this)},hasNumber:function(){return/[0-9]/.test(this)},hasSpecialChar:function(){return/[^A-z0-9]/.test(this)}};for(var n in i)i.hasOwnProperty(n)&&t.push(i[n])}e.criteria=t},_setOption:function(e,t){o.Widget.prototype._setOption.apply(this,arguments);({defaultCriteria:!0,additionalCriteria:!0,visualImages:!0,statusText:!0})[e]&&this._setup()},_setVisual:function(e){var t=isNaN(e)?this.strengthLevel:e,i=this.visualImages[t];i&&this.options.imageElem.attr("src",i)},_setStatus:function(e){var t=isNaN(e)?this.strengthLevel:e,i=this.statusText[t];i&&this.options.statusContainer.html(i)},_destroy:function(){this.element.off("keyup.ps"),this.generatedElem&&this.generatedElem.remove(),o.Widget.prototype.destroy.call(this)}})}(jQuery),function($){$.widget("ui.poll",{options:{url:"/",openOrCloseUrl:"/",data:{},question:"",answers:[],maxAnswers:0,votes:0,preview:0,hasVoted:0,canVote:1,canClose:0,canOpen:0,votedFor:[],expired:0,expiresOn:0,viewVotes:0,viewVoters:0,cooldownTime:5e3,maxbarwidth:0,pollImgTitle:"Poll",pollImgAlt:"Poll",pollImgSrc:"",checkImgSrc:""},_create:function(){var i=this;this.element.addClass("ui-poll"),this.selectedAnswers={},this.selectedAnswerCount=0,this.lastSelectedAnswerID=0,this.answerIDs=[],this.answerVotes=[],this.answerHash={},$(this.element).append('<h3><span class="icon icon-poll"><img src="'+this.options.pollImgSrc+'" alt="'+this.options.pollImgAlt+'" title="'+this.options.pollImgTitle+'" /></span>'+this.options.question+"</h3>"),1<this.options.maxAnswers&&$(this.element).append('<p class="small note">You may select up to '+this.options.maxAnswers+" answer"+(1!=this.options.maxAnswers?"s":"")+".</p>");for(var e='<table class="results">',t=0;t<this.options.answers.length;t++)e+='<tr class="answer-'+this.options.answers[t].id+'"><td><div class="select-box"><img src="'+this.options.checkImgSrc+'" alt="+" /></div></td><td class="answer"><div>'+this.options.answers[t].text+'</div></td><td class="view-votes"><div class="poll-vote-bar"><div class="bar"></div><div class="rank"><div class="number"></div></div></div><span class="stats small"><span class="votes">0</span> vote<span class="plural">s</span> (<span class="percent">0</span>%)</span></td></tr>',this.answerIDs.push(this.options.answers[t].id),this.answerVotes.push(this.options.answers[t].votes),this.answerHash[this.options.answers[t].id]=this.options.answers[t];e+="</table>",$(this.element).append(e),$(".results tr",this.element).bind("mouseenter mouseleave",function(e){$(this).toggleClass("ui-hover")}),$(".results tr",this.element).bind("click",function(e){var t=$(this).attr("class").match(/answer\-(\d+)/);i._answerClick(t[1])}),$(this.element).append('<span class="total-votes note"></span>&nbsp;<span class="view-voters"><a href="#">View Voters</a></span><span class="poll-closed"></span>'),$(".view-voters a",this.element).bind("click",function(e){e.preventDefault(),0==$("#poll-voters").length&&($(document.body).append('<div id="poll-voters"></div>'),$("#poll-voters").dialog({autoOpen:!1,width:452,maxHeight:600,title:"Voters"})),proboards.ajax({url:proboards.route("voters"),data:i.options.data,dataType:"html",success:function(e){$("#poll-voters").html(e),$("#poll-voters").dialog("open"),553<$("#poll-voters").height()&&($("#poll-voters").dialog("option","height",600),$("#poll-voters").dialog("close"),$("#poll-voters").dialog("open"))}})}),$(this.element).append('<div class="loading note small"></div>'),this.determineMaxWidth(),this._update()},_update:function(){var t=this,e=$(".loading",this.element).html(""),i=$(".results .view-votes",this.element),n=$(".select-box",this.element),a=[];this.options.expired?a.push("This poll has expired or has been locked."):this.options.canVote?this.options.preview?a.push("This poll is in preview mode and is not accepting votes."):0!=this.options.expiresOn&&e.append("This poll will automatically lock on ",this.options.expiresOn,".<br />"):a.push("You may not vote in this poll."),1==this.options.viewVotes?a.push("The results of this poll are hidden until voted upon."):2!=this.options.viewVotes||this.options.expired?3==this.options.viewVotes&&a.push("The results of this poll are hidden for regular users."):a.push("The results of this poll are hidden until it is locked or expires."),e.append(a.join(" ")),this.options.votes=this.options.voters&&(this.options.votes<=0||this.options.votes<this.options.voters)?this.options.voters:this.options.votes,$(".total-votes",this.element).html("There "+(1==this.options.votes?"has":"have")+" been <b>"+this.options.votes+"</b> vote"+(1!=this.options.votes?"s":"")+" by <b>"+this.options.voters+"</b> voter"+(1!=this.options.voters?"s":"")+".");for(var o=0;o<this.options.votedFor.length;o++)this._selectAnswer(this.options.votedFor[o]);if(this.options.viewVoters||$(".view-voters",this.element).remove(),i.hide(),n.hide(),this.options.expired)if(n.hide(),3!=this.options.viewVotes&&i.show(),this.options.canOpen){var r={};for(var s in this.options.data)r[s]=this.options.data[s];r.type="open",$(".poll-closed a",this.element).unbind("click"),$(".poll-closed",this.element).html((this.options.viewVoters?"&nbsp;-&nbsp;":"")+'<a href="javascript:void(0);">Open Poll</a>'),$(".poll-closed a",this.element).bind("click",function(){proboards.confirm("Are you sure you want to open this poll?",function(){proboards.ajax({url:t.options.openOrCloseUrl,data:r,async:!0,type:"post",dataType:"json",success:function(e){t.options.expired=0,t._update()},error:function(e){$(".loading",t.element).html(e.error)}})})})}else $(".poll-closed",this.element).html("");else if(this.options.canVote&&n.show(),1!=this.options.viewVotes||this.options.hasVoted?2==this.options.viewVotes?i.remove():3==this.options.viewVotes?i.remove():i.show():i.hide(),this.options.canClose){r={};for(var s in this.options.data)r[s]=this.options.data[s];r.type="close",$(".poll-closed a",this.element).unbind("click"),$(".poll-closed",this.element).html((this.options.viewVoters?"&nbsp;-&nbsp;":"")+'<a href="javascript:void(0);">Lock Poll</a>'),$(".poll-closed a",this.element).bind("click",function(){proboards.confirm("Are you sure you want to lock this poll?",function(){proboards.ajax({url:t.options.openOrCloseUrl,data:r,async:!0,type:"post",dataType:"json",success:function(e){e.error?$(".loading",t.element).html(e.error):(t.options.expired=1,t._update())}})})})}this.options.preview&&$(".poll-closed",this.element).remove();var l=[];for(o=0;o<this.options.answers.length;o++)this.options.answers[o].votes=this.options.answers[o].votes<0?0:this.options.answers[o].votes,l.push([this.options.answers[o].id,this.options.answers[o].votes]);l.sort(function(){return parseInt(arguments[1][1],10)-parseInt(arguments[0][1],10)});var c=0,d=0,u=0,p=!1,h=0==this.options.votes?0:parseInt(l[0][1]);for(o=0;o<l.length;o++){var f,m=0==this.options.votes?0:parseInt(l[o][1],10)/this.options.votes,g=0==this.options.votes?0:parseInt(l[o][1],10)/h,v=this.options.maxbarwidth*g+5;l[o][1]==u?c++:(d+=c+1,c=0),0==d&&(d=1,p=!0);var b=d.toString().substr(-1);f=b<4&&(d<10||20<d)?1==b?"st":2==b?"nd":"rd":"th",$(".answer-"+l[o][0]+" .poll-vote-bar",this.element).attr("class","").addClass("poll-vote-bar rank-"+(p?"0":d)),$(".answer-"+l[o][0]+" .poll-vote-bar .rank .number",this.element).html(d+f),$(".answer-"+l[o][0]+" .poll-vote-bar .bar",this.element).animate({width:v+"px"},1e3),1==l[o][1]?$(".answer-"+l[o][0]+" .stats .plural",this.element).hide():$(".answer-"+l[o][0]+" .stats .plural",this.element).show(),$(".answer-"+l[o][0]+" .stats .votes",this.element).counter({end:l[o][1],duration:1e3}),$(".answer-"+l[o][0]+" .stats .percent",this.element).counter({end:(100*m).toFixed(2),toFixed:2,duration:1e3}),u=l[o][1]}},_answerClick:function(e){if(this.options.canVote&&!this.options.preview&&!this.options.expired&&!$(".answer-"+e,this.element).hasClass("answer-cooling"))if($(".answer-"+e,self.element).addClass("answer-cooling"),setTimeout(function(){$(".answer-"+e,self.element).removeClass("answer-cooling")},this.options.cooldownTime),void 0!==this.selectedAnswers[e]&&1==this.selectedAnswers[e])this._unselectAnswer(e),this._onVoteInputClick(e,"retract");else{if(this.options.votedFor.length>=this.options.maxAnswers)return;this._selectAnswer(e),this._onVoteInputClick(e,"submit")}},_selectAnswer:function(e){if(!this.selectedAnswers[e]){if(this.selectedAnswerCount==this.options.maxAnswers&&0<this.options.maxAnswers){if(1!=this.options.maxAnswers)return;this._unselectAnswer(this.lastSelectedAnswerID)}$(".answer-"+e,this.element).addClass("ui-selected"),this.selectedAnswers[e]=!0,this.lastSelectedAnswerID=e,this.selectedAnswerCount++}},_unselectAnswer:function(e){this.selectedAnswers[e]&&($(".answer-"+e,this.element).removeClass("ui-selected"),this.selectedAnswers[e]=!1,this.selectedAnswerCount--)},_onVoteInputClick:function(id,type){var self=this;$(".vote-input",this.element).attr("disabled",!0);var data={};for(var key in this.options.data)data[key]=this.options.data[key];"submit"==type?(data.type="cast",data.answer_id=id,proboards.ajax({url:this.options.url,data:data,async:!0,type:"post",dataType:"json",success:function(response){self.answerHash[data.answer_id].votes++,self.options.votes++,self.options.hasVoted=1,self.options.votedFor=eval(response.answer_ids),1==eval(response.answer_ids).length&&self.options.voters++,self._update()},error:function(e){$(".loading",self.element).html(e.error)}})):"retract"==type&&(data.type="retract",data.answer_id=id,proboards.ajax({url:this.options.url,data:data,async:!0,type:"post",dataType:"json",success:function(response){self.answerHash[data.answer_id].votes--,self.options.votes--,self.options.votedFor=eval(response.answer_ids),0==eval(response.answer_ids).length&&(self.options.voters--,self.options.hasVoted=0),self._update()},error:function(e){$(".loading",self.element).html(e.error),self.options.canVote=0}}))},_cooldownVoteInput:function(e){},determineMaxWidth:function(){var e=$("h3",this.element).outerWidth(),t=$("table.results tr td:first",this.element).outerWidth(),i=0;$("table.results tr td.answer",this.element).each(function(){$(this).outerWidth()>i&&(i=$(this).outerWidth())});var n=parseInt(.4*e);n<i&&($("table.results tr td.answer div",this.element).css("width",n+"px").addClass("break-word"),i=n);var a=t+i+41+151;this.options.maxbarwidth=e-a}}),$.extend($.ui.poll,{version:"1.8.2"})}(jQuery),function(l){l.widget("ui.selectMenu",l.ui.mouse,{options:{container:null,status:null,statusClick:null,staticStatus:!1,click:null,menuOptions:{clickHide:!0,click:null},beforeShow:null,onTextClick:null,onOptionClick:null,onClose:null,updateText:!0,updateInput:null},_create:function(){var i=this;this.options.container?this.box=l(this.options.container).append('<div class="status"></div>').append('<div class="icon"><span class="arrow down"><span></span></span></div>'):this.box=l('<div class="ui-selectMenu-box"></div>').append('<div class="status"></div>').append('<div class="icon"><span class="arrow down"><span></span></span></div>').insertAfter(this.element),this.options.statusClick?(l(".status",this.box).bind("click.selectMenu",function(e){i._trigger("statusClick",e,{})}),l(".icon",this.box).bind("click.selectMenu",function(e){i._trigger("click",e,{})})):l(this.box).bind("click.selectMenu",function(e){i._trigger("click",e,{})});var e={};l.extend(!0,e,{type:"vertical",showOn:"click",button:this.box,position:{my:"right top",at:"right bottom",of:this.box,collision:"flipfit"},beforeShow:i.options.beforeShow,onClose:i.options.onClose},this.options.menuOptions),e.click=function(e,t){"function"==typeof i.options.menuOptions.click&&i.options.menuOptions.click.call(i.element,e,t),i.options.staticStatus||l(".status",i.box).html(l("a",t.item).html())},this.menu=l(this.element).menu(e).addClass("ui-selectMenu"),this.options.status?l(".status",this.box).html(this.options.status):l(".status",this.box).html(l("li:first-child",this.menu).attr("title"))},documentMouseUp:function(e){for(var t=!1,i=e.target;!t&&i;)i!==this.element[0]&&i!==this.options.menu[0]||(t=!0),i=i.parentNode;t||(this.hide(),this.options.onClose.call(this))},isShowing:function(){return!l(this.options.menu).is(":hidden")},menu:function(e,t){this.options.menu.menu(e,t)},getMenu:function(){return this.options.menu},_onMouseDown:function(r){var s=this;1==r.which&&(r.stopPropagation(),l(this.element).bind("mouseup.ui-selectMenu",function(e){if(l(this).unbind("mouseup.ui-selectMenu"),e.stopPropagation(),l(".ui-selectMenu").each(function(e,t){t!==s.element[0]&&(l(t).removeClass("state-active"),l(t).selectMenu("hide"))}),l(s.options.menu).is(":visible"))s.hide(),s.options.onClose.call(s);else{s.options.menu.menu("clearClickCallback"),s.options.menu.menu("setClickCallback",function(e){s._optionClick(e,r)});for(var t=l(s.element).offset(),i=(l(s.element).outerWidth(),l(s.element).outerHeight()),n=t.left,a=t.top+i,o=r.target;o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.frameElement;){o=o.ownerDocument.defaultView.frameElement,n+=(t=l(o).offset()).left,a+=t.top}l(s.options.menu).css({left:n,top:a}),s.show()}}))},reposition:function(){var e=l(self.element).offset(),t=(l(self.element).outerWidth(),l(self.element).outerHeight()),i=e.left,n=e.top+t;l(self.options.menu).css({left:i,top:n})},_optionClick:function(e,t){for(var i=e.target;i&&"li"!=i.nodeName.toLowerCase();)i=i.parentNode;if(i&&!l(i).hasClass("state-disabled")){var n=l(i).html(),a=l(i).attr("id");this.value=a,this.options.staticStatus||l(".status",this.element).html(n),this.options.updateInput&&l(this.options.updateInput).val(a.replace("value-","")),this.options.onOptionClick&&!1===this.options.onOptionClick.call(this.element,a)||(this.hide(),this.options.onClose.call(this))}},updateValue:function(e){if(this.value=e,!this.options.staticStatus){this.updateStatus(e);for(var t=l("li",this.options.menu),i=!1,n=0;n<t.length&&!i;n++)e==t[n].id&&(l(".status",this.element).html(l(t[n]).html()),i=!0);i||l(".status",this.element).html(this.options.status)}},updateStatus:function(e){l(".status",this.box).html(e)}}),l.extend(l.ui.sortable,{version:"1.8.2"})}(jQuery),function(s){var e=0;s.widget("ui.selectlist",{options:{listedItemFormat:"{item.name}",selectedItemFormat:"{item.name}",blockListFormat:"{item.item_id}",blockListOptionFormat:"{}",blockListOptions:[],id:"id",maxSelectable:0,maxSelectableApplies:!0,selection:null,select:null,deselect:null,getData:null,formId:0,checkedHash:{},isPendingList:0,onCreateItem:function(){},showAdded:!0,disabledMessage:""},_create:function(){this.element.addClass("ui-selectlist"),s(this.options.selection).addClass("ui-selectlist-selection"),this.options.index=e,++e,this.selectedIDsStr="",this.selectedIDs={},this.selectedCount=0,this.data={},this.options.maxSelectableApplies||(this.options.maxSelectable=0),this.refresh()},refresh:function(e){var t=this;if(this.element.empty(),e&&0!=e.length){this.empty=!1;for(var i=0;i<e.length;i++){var n=e[i][this.options.id];this.data[n]=e[i];var a=this._createListedItem(e[i]);void 0!==this.selectedIDs[n]&&s(a).addClass("state-selected"),0==i&&s(a).addClass("state-current"),this.element.append(a)}s("li",this.element).click(function(e){t.options.selection&&t.select()}).hover(function(e){s(".state-current",t.element).removeClass("state-current"),s(this).addClass("state-current")},function(e){})}else this.empty=!0,this.element.append('<li class="empty">No results found.</li>')},select:function(e,t,i){var n=null;if(void 0===e){if(!(n=s(".state-current",this.element)).is(":visible"))return;if(null==(e=this._getItemID(n)))return}else n=s(".item-"+e,this.element);if(void 0===this.selectedIDs[e])if(n.is(".disabled"))this.options.disabledMessage&&proboards.alert(this.options.disabledMessage);else if(0<this.options.maxSelectable&&this.selectedCount>=this.options.maxSelectable)0==s("#max-selectable-container").length?(s(document.body).append('<div id="max-selectable-container" style="text-align: justify;">You have already reached the maximum number of items you may select.</div>'),s("#max-selectable-container").dialog({autoOpen:!0,width:310,title:"Too Many Selections"})):s("#max-selectable-container").text("You have already reached the maximum number of items you may select.").dialog("open");else{if(0==this.selectedCount&&s(".empty",this.options.selection).hide(),0!==i&&this.options.showAdded){var a=this._createSelectedItem(this.data[e]);s(this.options.selection).append(a)}this.selectedIDs[e]=!0,++this.selectedCount,""!=this.selectedIDsStr&&(this.selectedIDsStr+=","),this.selectedIDsStr+=e,n.addClass("state-selected"),t||this._trigger("select",null,{id:e,ids:this.selectedIDsStr.split(","),itemData:this.data[e]})}else this.deselect(e)},deselect:function(e){var t;void 0===e&&null==(e=this._getItemID(s(".state-current",this.element)))||(void 0!==this.selectedIDs[e]?(s(".item-"+e,this.options.selection).remove(),this.selectedIDs[e]=void 0,--this.selectedCount,t=new RegExp("^"+e+"$|^"+e+",|,"+e+"$"),this.selectedIDsStr=this.selectedIDsStr.replace(t,""),t=new RegExp(","+e+","),this.selectedIDsStr=this.selectedIDsStr.replace(t,","),s(".item-"+e,this.element).removeClass("state-selected"),0==this.selectedCount&&s(".empty",this.options.selection).show(),this._trigger("deselect",null,{id:e,ids:""!=this.selectedIDsStr?this.selectedIDsStr.split(","):[]})):this.select(e))},manipulateIds:function(e,t){if("select"==t);else if("deselect"==t)for(var i=0;i<e.length;i++){var n,a=parseInt(e[i]);this.selectedIDs[a]=void 0,--this.selectedCount,n=new RegExp("^"+a+"$|^"+a+",|,"+a+"$"),this.selectedIDsStr=this.selectedIDsStr.replace(n,""),n=new RegExp(","+a+","),this.selectedIDsStr=this.selectedIDsStr.replace(n,",")}},next:function(){var e=s(".state-current",this.element);e=0==e.length?s("li:first",this.element):e[0].nextSibling?e[0].nextSibling:s("li:first",this.element),s(".state-current",this.element).removeClass("state-current"),s(e).addClass("state-current")},previous:function(){var e=s(".state-current",this.element);e=0==e.length?s("li:last",this.element):e[0].previousSibling?e[0].previousSibling:s("li:last",this.element),s(".state-current",this.element).removeClass("state-current"),s(e).addClass("state-current")},getData:function(){return this.options.getData()},_getItemID:function(e){if(void 0!==e&&0!=s(e).length){var t=s(e).attr("class").match(/item\-(\d+)/);return null==t?null:t[1]}},_createListedItem:function(e){var t=this._getFormattedHTML(this.options.listedItemFormat,e),i="item-"+e[this.options.id]+" ui-selectlist-item ui-selectlist-"+this.options.index+"-item ui-helper-clearfix";e.disabled&&(i+=" disabled");var n=s('<li class="'+i+'">\t\t\t\t<div class="content">'+t+"</div>\t\t\t</li>");return this.options.onCreateItem(n),n},_createSelectedItem:function(e){var i=this,t=e[this.options.id],n="";if(this.options.formId){for(var a=this.options.blockListOptions,o=0;o<a.length;o++)n+=this._getFormattedHTML(this.options.blockListOptionFormat,{form_id:this.options.formId,item_id:t,option_id:o,option_checked:this.options.checkedHash[t]&&1==this.options.checkedHash[t][o]?' checked="checked"':"",option_label:a[o]});n=n?this._getFormattedHTML(this.options.blockListFormat,{block_list_options:n}):""}var r=s('<li class="item-'+t+" ui-selectlist-item ui-selectlist-"+this.options.index+'-item ui-helper-clearfix">'+(n?'<div class="selectlist-wrapper">':"")+'<div class="content">'+this._getFormattedHTML(this.options.selectedItemFormat,e)+'</div><div class="close"><span>x</span></div>'+(this.options.isPendingList?this._getFormattedHTML(this.options.pendingListItemFormat,{item_id:t}):"")+(n?"</div>"+n:"")+"</li>");return s(".close",r).bind("click.selectlist",function(e){var t=s(e.target).parents(".ui-selectlist-item").attr("class").match(/item\-(\d+)/);i.deselect(t[1])}),n&&e.is_staff&&s(".block-list-1",r).remove(),r},_getFormattedHTML:function(e,t){var i=e;for(var n in t){var a=new RegExp("{item."+n+"}","g");i=i.replace(a,t[n])}return i},isSelected:function(e){return void 0!==this.itemData[e]},changeMaxSelectable:function(e){if(this.options.maxSelectableApplies){if(this.selectedCount>e)return!1;this.options.maxSelectable=e}return!0},getNumSelected:function(){return this.selectedCount},apply_selected:function(e,t){if(s.isArray(e)){this.refresh(e),this.options.loadingExisting=!0;for(var i=0;i<e.length;i++)this.select(e[i].id,null,t);this.options.loadingExisting=!1,this.refresh([])}}}),s.extend(s.ui.selectlist,{version:"1.8.5"})}(jQuery),function(a){a.widget("ui.slidable",{options:{autoChange:5e3,navigation:".navigation",items:".items",relative:!1,padding:10},_create:function(){var t=this;a(this.options.items).width(a(this.options.items).width()-2*this.options.padding),this.width=a(this.options.items).width(),this.actualWidth=this.width+2*this.options.padding;var e=a(this.options.items,this.element).children();if(this.itemContainer=a("<div></div>").css({position:"absolute",left:this.actualWidth+"px",width:this.actualWidth*e.length+"px"}),a(this.options.items,this.element).append(this.itemContainer),this.itemContainer.append(e),a(this.itemContainer).children().css({width:this.width+"px",float:"left"}),0<a(this.options.navigation,this.element).length){this.navigationContainer=a(this.options.navigation,this.element);var i=a('<span class="arrow left"><span></span></span>').bind("click",function(e){t._change(0)});a(this.navigationContainer).prepend(i),i=a('<span class="arrow right"><span></span></span>').bind("click",function(e){t._change(1)}),a(this.navigationContainer).append(i)}else a("#news .arrow.left").bind("click",function(e){t._change(0)}),a("#news .arrow.right").bind("click",function(e){t._change(1)});!1!==this.options.autoChange&&(this.options.autoChange<1e3&&(this.options.autoChange=1e3),this.itemContainer.bind("mouseenter",function(e){clearTimeout(t.autoChangeTimeout)}),this.itemContainer.bind("mouseleave",function(e){t.autoChangeTimeout=setTimeout(function(){t._change()},t.options.autoChange)})),t._change(2)},_change:function(e){var t=this;clearTimeout(this.autoChangeTimeout),(e=void 0===e?this.index+1:2==e?0:0==e?this.index-1:this.index+1)<0?e=this.itemContainer.children().length-1:e>this.itemContainer.children().length-1&&(e=0);var i=e*this.actualWidth*-1;if(this.itemContainer.stop().animate({left:i+"px"},750),this.index=e,this.options.relative){var n=a(this.itemContainer).children("div").eq(e).text();this.options.autoChange=this.calcChangeSpeed(n)}!1!==this.options.autoChange&&(this.autoChangeTimeout=setTimeout(function(){t._change()},this.options.autoChange))},calcChangeSpeed:function(e){return 1500+50*e.length}}),a.extend(a.ui.slidable,{version:"1.8.2"})}(jQuery),function(s){s.widget("ui.stripe",{options:{stripeKey:"",paymentUrl:"",fieldNames:{cardList:"card_list",cardName:"card_name",cardNumber:"card_number",cardExpireMonth:"card_expiration_month",cardExpireYear:"card_expiration_year",cardSecurity:"card_security",cardAddress:"billing_address",cardAddress2:"billing_address_2",cardZip:"billing_zip",cardState:"billing_state",cardCountry:"billing_country",isNewCard:"is_new_card"},newCardFormElem:".new-card, #billing-address",removeCardUrl:"",removeCardButton:"#remove_card",removeableCardClass:".removeable",addDataOnSubmit:null,success:null,error:function(e){proboards.error(e.error)},onCardValidationError:function(){}},_create:function(){var o=this,t=this.element;t.on("validated",function(e){e.preventDefault();var t=o.options.fieldNames,i=o.options.addDataOnSubmit,n={name:s('input[name="'+t.cardName+'"]',this),number:s('input[name="'+t.cardNumber+'"]',this),expire_month:s('select[name="'+t.cardExpireMonth+'"]',this),expire_year:s('select[name="'+t.cardExpireYear+'"]',this),security:s('input[name="'+t.cardSecurity+'"]',this),address:s('input[name="'+t.cardAddress+'"]',this),address2:s('input[name="'+t.cardAddress2+'"]',this),zip:s('input[name="'+t.cardZip+'"]',this),state:s('input[name="'+t.cardState+'"]',this),country:s('select[name="'+t.cardCountry+'"]',this)},a={};if("function"==typeof i&&s.extend(a,i()),o._isNewCard()){if(!o.validate())return;o._loading(!0),Stripe.setPublishableKey(o.options.stripeKey),Stripe.createToken({name:n.name.val(),number:n.number.val(),cvc:n.security.val(),exp_month:n.expire_month.val(),exp_year:n.expire_year.val(),address_line1:n.address.val(),address_line2:n.address2.val(),address_zip:n.zip.val(),address_state:n.state.val().toUpperCase(),address_country:n.country.val()},function(e,t){if(t.error)proboards.error(t.error.message),o._loading(!1);else{var i=t.id;a.token=i,proboards.ajax({url:o.options.paymentUrl,data:a,success:o.options.success,error:o.options.error,complete:function(){o._loading(!1)}})}})}else o._loading(!0),a.customer=s('select[name="'+o.options.fieldNames.cardList+'"]',o.element).val(),proboards.ajax({url:o.options.paymentUrl,data:a,success:o.options.success,error:o.options.error,complete:function(){o._loading(!1)}})}),o._setupCardSelection();s('input[type="text"], input[type="password"]',t).on("keydown",function(e){13==(e.keyCode||e.which)&&(e.preventDefault(),t.submit())})},_setupCardSelection:function(){var n=this,e=this.element,a=s('select[name="'+n.options.fieldNames.cardList+'"]',e),i=s('input[name="'+n.options.fieldNames.isNewCard+'"]',e),o=s(n.options.newCardFormElem),r=s(n.options.removeCardButton);a.on("change",function(e){var t="new"==s(this).val();r.toggle(!t),o.toggle(t),i.val(t?1:""),s.clearInputError()}).change(),r.on("click",function(e){e.preventDefault();var t=s("option:selected",a),i=n.options.removeableCardClass;if(i&&!t.is(i))return proboards.error("This card can only be removed when it is no longer being used to pay for any subscriptions.");proboards.confirm("Are you sure you wish to remove the card "+t.text()+"?",function(){a.prop("disabled",!0),proboards.ajax({url:n.options.removeCardUrl,data:{card:t.val()},success:function(){t.remove(),a.change()},complete:function(){a.prop("disabled",!1)}})})})},_loading:function(e){proboards.loading(e),s("#loading-dialog").dialog("option","title","Processing...")},_isNewCard:function(){var e=this.element;return"new"==s('select[name="'+this.options.fieldNames.cardList+'"]',e).val()},validate:function(){if(!this._isNewCard())return!0;var e=s(this.element),t=this.options.fieldNames;if(!e.data("form").validateAll())return!1;var i={number:s('input[name="'+t.cardNumber+'"]',e),expire_month:s('select[name="'+t.cardExpireMonth+'"]',e),expire_year:s('select[name="'+t.cardExpireYear+'"]',e),security:s('input[name="'+t.cardSecurity+'"]',e)};return Stripe.validateCardNumber(i.number.val())?Stripe.validateExpiry(i.expire_month.val(),i.expire_year.val())?!!Stripe.validateCVC(i.security.val())||(this.options.onCardValidationError.call(this,i.security),s.inputError(i.security,"Please enter a valid security number."),!1):(this.options.onCardValidationError.call(this,i.expire_year),s.inputError(i.expire_year,"Please enter a valid expiration date."),!1):(this.options.onCardValidationError.call(this,i.number),s.inputError(i.number,"Please enter a valid credit card number."),!1)}})}(jQuery),function(d){d.widget("ui.timepicker",{options:{onSelect:function(){},military:0},_create:function(){var n=this;n.element.hasClass("military")&&(n.options.military=1),this.element.addClass("ui-timepicker").bind("mousedown.ui-timepicker focus.ui-timepicker",function(){if(n.menu.is(":visible"))setTimeout(function(){n.menu.zIndex(n.element.zIndex()+1)},1);else{var e={my:"left top",at:"left bottom",of:d(n.element)};n.menu.show().position(e).position(e),setTimeout(function(){n.menu.zIndex(n.element.zIndex()+1)},1)}}).bind("click.ui-timerpicker",function(){this.select()}).bind("keydown.ui-timepicker",function(e){9==e.keyCode&&n.menu.hide()});var e=[],t=[12,1,2,3,4,5,6,7,8,9,10,11],i=["00","30"];n.options.military&&(t=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]);for(var a=0;a<t.length;a++){t[a];for(var o=0;o<i.length;o++){var r=t[a]+":"+i[o];e.push(r)}}if(!n.options.military){var s=e;e=[];var l=["AM","PM"];for(a=0;a<l.length;a++)for(o=0;o<s.length;o++)e.push(s[o]+" "+l[a])}var c="";for(a=0;a<e.length;a++)c+="<li>"+e[a]+"</li>";this.menu=d('<ul class="ui-timepicker-menu">'+c+"</ul>").hide().appendTo(document.body),""==this.element.val()&&this.setTime(e[0]),d("li",this.menu).bind("click.ui-timepicker",function(){n.element.val(d(this).text()),n.element.focus(),n.options.onSelect.call(n.element,this),setTimeout(function(){n.menu.hide()},1)}),d(document).bind("mousedown.ui-timepicker",function(e){for(var t=e.target,i=!0;i&&t&&"html"!=t.nodeName.toLowerCase();)t!==n.element[0]&&t!==n.menu[0]||(i=!1),t=t.parentNode;i&&n.menu.hide()})},setTime:function(){this.element.val(d("li:first-child",this.menu).text())},getTime:function(){var e=this.element.val();if(e){if(1==this.options.military){var t=/^(\d{1,2}):(\d{2})$/g.exec(e);return 3600*parseInt(t[1])+60*parseInt(t[2])}var i=(t=/^(\d\d?):(\d{2})\s?(am|pm)$/gi.exec(e))[3].toLowerCase(),n=parseInt(t[1]);return"pm"==i&&12!=n&&(n+=12),12==n&&"am"==i&&(n=0),3600*n+60*parseInt(t[2])}return 0}}),d.extend(d.ui.timepicker,{version:"1.8.5"})}(jQuery);var rangeType=window.getSelection&&(!$.browser.msie||9<parseInt($.browser.version))?"w3c":"ie";!function(y){y.widget("ui.wysiwyg",{editors:{},currentEditorName:"",menus:{},pressedButtons:[],controls:{fontName:{title:"Font Name"},foreColor:{title:"Font Color"},fontSize:{title:"Font Size"},bold:{title:"Bold",tag:"b"},italic:{title:"Italic",tag:"i"},underline:{title:"Underline",tag:"u"},strikethrough:{title:"Strike Through",tag:"s"},superscript:{title:"Superscript",tag:"sup"},subscript:{title:"Subscript",tag:"sub"},removeFormat:{title:"Remove Formatting"},justifyLeft:{title:"Justify Left",tag:"div",attrs:{align:"left"}},justifyCenter:{title:"Justify Center",tag:"div",attrs:{align:"center"}},justifyRight:{title:"Justify Right",tag:"div",attrs:{align:"right"}},justifyFull:{title:"Justify Full",tag:"div",attrs:{align:"justify"}},insertTable:{title:"Table"},insertUnorderedList:{title:"List"},insertHorizontalRule:{title:"Horizontal Rule"},createLink:{title:"Link"},createEmail:{title:"Email"},insertImage:{title:"Insert Image"},insertVideo:{title:"Insert Video"},insertUserLink:{title:"Insert User Link"},insertCode:{title:"Insert Code",tag:"code"},insertQuote:{title:"Insert Quote",tag:"quote"},insertSmiley:{title:"Insert Smiley"},insertEmbed:{title:"Insert Embed"}},tagCommandAlias:{b:"bold",strong:"bold",i:"italic",em:"italic",u:"underline",strike:"strikethrough",sup:"superscript",sub:"subscript",div:[{command:"justifyLeft",attrs:{align:"left"}},{command:"justifyCenter",attrs:{align:"center"}},{command:"justifyRight",attrs:{align:"right"}},{command:"justifyFull",attrs:{align:"justify"}}],p:[{command:"justifyLeft",attrs:{align:"left"}},{command:"justifyCenter",attrs:{align:"center"}},{command:"justifyRight",attrs:{align:"right"}},{command:"justifyFull",attrs:{align:"justify"}}]},uneditableElements:"span.attachment_preview, span[atuser]",options:{varName:"",formId:"",editors:["visual","bbcode"],defaultEditor:"visual",defaultFormat:"visual",height:360},_create:function(){var s=this;this.element.hide(),this.container=y('<div class="ui-wysiwyg"></div>'),this.controlsContainer=y('<div class="controls ui-helper-clearfix"></div>'),this.editorContainer=y('<div class="editors"></div>');var l=this.editorContainer,c=this.options,e=(c.defaultFormat,c.defaultEditor);this.$nosmiles=y("#"+c.formId+"_"+c.varName+"_nosmiles_input"),isNaN(parseInt(this.$nosmiles.val()))&&this.$nosmiles.val(0);for(var t=c.editors.length;t--;){var i=this.options.editors[t];this.editors[i]=this["_"+i+"Editor"];var n=y('<div class="editor '+i+'-editor"></div>').height(c.height).hide();l.append(n)}if(this.container.append(this.controlsContainer).append(l).insertAfter(this.element),this.switchEditor(e),l.resizable({minWidth:400,maxWidth:y(this.container).parent().width(),minHeight:200,handles:"s",start:function(e,t){s.showOverlay()},stop:function(e,t){s.hideOverlay()},resize:function(e,t){var i=t.size.height,n=t.size.height-32;s.overlay.width(l.width()),s.overlay.height(n);for(var a=c.editors.length;a--;){var o=s.editors[c.editors[a]];y(o.container).height(n),y(o.resizable).height(n)}s.options.height=n;var r=y("div.ui-wysiwyg div.editors.ui-resizable").attr("style");r=r.replace(/height: \d+px/,"height: "+i+"px"),y("div.ui-wysiwyg div.editors.ui-resizable").attr("style",r)}}),-1<navigator.userAgent.toLowerCase().indexOf("opera")&&"bbcode"!=this.options.defaultEditor){var a=this.editors.visual,o=a.document.body.lastChild;if(null!==o){var r=a.getRange();r.setEndAfter(o),r.setStartAfter(o);var d=a.getSelection();d.addRange(r),d.collapseToEnd()}}/iphone|ipod|ipad/.test(navigator.userAgent.toLowerCase())&&y(".editor.visual-editor").css({"-webkit-overflow-scrolling":"touch",overflow:"auto"});var u=this.element.attr("tabindex");u&&y("textarea",this.container).attr("tabindex",u)},preload:function(e){y(e).each(function(){y("<img/>")[0].src=this})},startLoading:function(){0==y(".loadingOverlay",this.container).length&&(this.loadingOverlay=y('<div class="loadingOverlay"></div>').prependTo(this.editorContainer)),this.loadingOverlay.width(this.editorContainer.width()).height(this.editorContainer.height()).show()},stopLoading:function(){this.loadingOverlay.hide()},_getControl:function(e){if(void 0!==this.editors[this.currentEditorName].controls[e])return this.editors[this.currentEditorName].controls[e];proboards.alert("The "+e+" control could not be found.")},getContent:function(){return this.editors[this.currentEditorName].getContent()},setContent:function(e){this.editors[this.currentEditorName].setContent(e)},showOverlay:function(){this.overlay||(this.overlay=y('<div class="resize-overlay"></div>').appendTo(this.editorContainer)),this.overlay.width(this.editorContainer.width()),this.overlay.height(this.editorContainer.height()),this.overlay.show()},log:function(e){if(0==y(".wysiwyg-log").length&&y("<div></div>").addClass("wysiwyg-log").appendTo(document.body),"object"==typeof e){var t=e;for(var i in e='<b onclick="$(this.nextSibling.nextSibling).toggle();">object'+(null!=t&&void 0!==t.nodeName?" "+t.nodeName.toLowerCase():"")+'</b><br /><table width="100%" style="display: none;">',t)try{e+='<tr><td style="white-space: nowrap; padding-right: 10px; width: 15%;">'+i+"</td><td>"+t[i]+"</td></tr>"}catch(e){}e+="</table>"}y(".wysiwyg-log").append(e+"<br />")},execCommand:function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=null),this.focusOnSelected(),"visual"==this.currentEditorName){var n=this.editors.visual.genericSelection;if(0<y(n.startContainer()).closest("code").length||0<y(n.endContainer()).closest("code").length)return!1}var a=this.editors[this.currentEditorName];"function"==typeof a.beforeExecCommand&&a.beforeExecCommand.call(this,a);try{if("function"==typeof a.commands[e])a.commands[e].call(this,a,e,t,i);else if(void 0!==a.document&&!0===a.document.queryCommandEnabled(e)){a.document.execCommand(e,t,i),this.latestCommands||(this.latestCommands={});try{this.latestCommands[e]=a.document.queryCommandState(e)}catch(e){console.log("Error: ",e.message)}a.window&&a.window.focus()}else!0}catch(e){console.log("Error: ",e.message),this.log(e.message),!0}"function"==typeof a.afterExecCommand&&a.afterExecCommand.call(this,a)},hideOverlay:function(){this.overlay&&this.overlay.hide()},switchEditor:function(t){var i=this,e=this.options,n=this.editors;if(this.currentEditorName&&this.currentEditorName===t)return this.element;if(void 0===n[t])return this.element;var a=!1;if(!n[t].built){a=!0;for(var o=e.editors.length;o--;){var r=e.editors[o],s=n[r],l=y("."+r+"-editor",this.editorContainer);s.build(this,l),s.controls=y.extend({},this.controls,s.controls),this._buildControls(r,s.controls,s.controlGroups),s.built=!0}}if(a){var c="visual"==(this.currentEditorName=t)?this.options.visualHtml:this.element.val();return this.setContent(c),y(".visual-editor",this.container).toggle("visual"==t),y(".bbcode-editor",this.container).toggle("bbcode"==t),this.element}""==this.currentEditorName&&(this.currentEditorName="visual"==t?"bbcode":"visual");c=this.editors[this.currentEditorName].getContent();var d=y("#"+this.options.formId+"_"+this.options.varName+"_mode_input"),u=function(){y("#menu-item-visual").toggleClass("ui-active","visual"==i.currentEditorName),y("#menu-item-bbcode").toggleClass("ui-active","bbcode"==i.currentEditorName)};return!1===this.readyToSwitch?u():(this.readyToSwitch=!1,c=this["visual"==t?"bbcode2html":"html2bbcode"].call(this,c,{success:function(e){y("."+i.currentEditorName+"-editor",i.container).hide(),y("."+t+"-editor",i.container).show(),i.currentEditorName=t,d.val(t),i.setContent(e)},error:u,complete:function(){i.readyToSwitch=!0}})),this.element},_buildControls:function(e,t,i){for(var n=this,a=y('<div class="'+e+'-editor ui-helper-clearfix"></div>'),o=i.length,r=0;r<o;r++){for(var s=y('<div class="group ui-helper-clearfix"></div>'),l=i[r].length,c=0;c<l;c++){for(var d=y("<ul></ul>"),u=i[r][c].length,p=0;p<u;p++){var h=i[r][c][p],f=t[h],m=wysiwyg_buttons[h],g=wysiwyg_buttons[h+"-active"];if(" "==h);else{var v="";if(null!=m&&(v+='<img class="inactive" alt="" src="'+m+'" />'),null!=g&&(v+='<img class="active" alt="" src="'+g+'" />'),"fontName"==h||"foreColor"==h||"fontSize"==h||"insertSmiley"==h||"insertUserLink"==h||"insertEmbed"==h)this._createSelectMenu(h,f).addClass("button button-"+h).attr("title",f.title).append(v).appendTo(d);else y('<li class="button button-'+h+'" title="'+f.title+'" data-control="'+h+'">'+v+"</li>").bind("click",function(e){n.execCommand(y(this).data("control"))}).appendTo(d)}}s.append(d)}a.append(s),this.controlsContainer.append(a)}var b=this.editors[e],_="visual"==e?"keypress.wysiwyg":"keyup.wysiwyg";y(b.bindable).on(_,function(e){e||(e=window.event);var t=(e.ctrlKey?"ctrl+":"")+String.fromCharCode(e.which).toLowerCase();if(b.controlShortcuts[t])return void 0!==e.cancelBubble&&(e.cancelBubble=!0),void 0!==e.stopPropagation&&e.stopPropagation(),void 0!==e.preventDefault&&e.preventDefault(),n.execCommand(b.controlShortcuts[t]),!1}),"bbcode"==e&&y(b.bindable).on("keydown.wysiwyg keypress.wysiwyg",function(e){e||(e=window.event);var t=(e.ctrlKey?"ctrl+":"")+String.fromCharCode(e.which).toLowerCase();if(b.controlShortcuts[t])return void 0!==e.cancelBubble&&(e.cancelBubble=!0),void 0!==e.stopPropagation&&e.stopPropagation(),void 0!==e.preventDefault&&e.preventDefault(),!1})},_createSelectMenu:function(e,t){var i=this["_get"+e.substr(0,1).toUpperCase()+e.substr(1)+"Menu"](t);return this.menus[e]=i.menu,i.button},_closeAllMenus:function(){for(var e in this.menus)y(this.menus[e]).menu("hide");y.colorPicker("hide")},_getFontNameMenu:function(e){var n=this,t=y("<li></li>").addClass("selectMenuButton");return{menu:y("<ul></ul>").addClass("select_menu_list").append('<li class="arial"><a style="font-family: arial;">Arial</a></li><li class="comic_sans_ms"><a style="font-family: comic sans ms;">Comic Sans MS</a></li><li class="courier_new"><a style="font-family: courier new;">Courier New</a></li><li class="georgia"><a style="font-family: georgia;">Georgia</a></li><li class="impact"><a style="font-family: impact;">Impact</a></li><li class="times_new_roman"><a style="font-family: times new roman;">Times New Roman</a></li><li class="trebuchet_ms"><a style="font-family: trebuchet ms;">Trebuchet MS</a></li><li class="verdana"><a style="font-family: verdana;">Verdana</a></li>').appendTo(t).selectMenu({status:"Font Face",staticStatus:!0,updateInput:!1,onShow:function(e){n.showOverlay()},onHide:function(e){n.hideOverlay()},menuOptions:{position:{my:"left top",at:"left bottom",of:this.box,collision:"flipfit"},click:function(e,t){var i=y(t.item).attr("class").replace(/_/g," ");n.execCommand("fontName",!1,i)}}}),button:t}},_getFontSizeMenu:function(e){var n=this,t=y("<li></li>").addClass("selectMenuButton");return{menu:y("<ul></ul>").addClass("select_menu_list").append('<li class="1" style="font-size: 8pt;"><a>1 (8pt)</a></li><li class="2" style="font-size: 10pt;"><a>2 (10pt)</a></li><li class="3" style="font-size: 12pt;"><a>3 (12pt)</a></li><li class="4" style="font-size: 14pt;"><a>4 (14pt)</a></li><li class="5" style="font-size: 18pt;"><a>5 (18pt)</a></li><li class="6" style="font-size: 24pt;"><a>6 (24pt)</a></li><li class="7" style="font-size: 36pt;"><a>7 (36pt)</a></li>').appendTo(t).selectMenu({status:"Font Size",staticStatus:!0,updateInput:!1,onShow:function(e){n.showOverlay()},onHide:function(e){n.hideOverlay()},menuOptions:{position:{my:"left top",at:"left bottom",of:this.box,collision:"flipfit"},click:function(e,t){var i=y(t.item).attr("class");n.execCommand("fontSize",!1,i)}}}),button:t}},_getForeColorMenu:function(e){var d=this,u=y("<li></li>");return y(u).colorPicker({extraHTML:function(){var e;d.editors[d.currentEditorName].iframe?e=d.editors[d.currentEditorName].document.body.innerHTML.match(/color="{0,1}#{0,1}[a-f0-9]{6}"{0,1}/gi):e=d.editors[d.currentEditorName].textarea.value.match(/color="{0,1}#{0,1}[a-f0-9]{6}"{0,1}/gi);var t={},i=y("<tbody></tbody>");if(null==e&&(e=[]),0==e.length)return"";for(var n=0,a=y("<tr></tr>"),o=0;o<e.length;o++){var r=e[o].replace(/color=/,"").replace(/"/,"").replace(/#/,"").replace(/"/,"");if(!t[r]){6==n&&(i.append(a),a=y("<tr></tr>"),n=0);var s=y("<div></div>").css({width:"15px",height:"15px",backgroundColor:"#"+r,margin:"2px"}).bind("mouseenter",function(){y(this).css({margin:"1px",border:"1px solid #827"})}).bind("mouseleave",function(){y(this).css({margin:"2px",border:"none"})}).bind("click",function(){var e,t=y(this).css("background-color");if(e=t.match(/rgb\((\d+), (\d+), (\d+)\)/)){var i=parseInt(e[1],10).toString(16),n=parseInt(e[2],10).toString(16),a=parseInt(e[3],10).toString(16);i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),t=i+n+a}y("#foreColorPreview").css({backgroundColor:"#"+t}),d.execCommand("foreColor",!1,t),y(u).colorPicker("hide")}),l=y("<td></td>").append(s);a.append(l),n++,t[r]=!0}}for(;n<4;){s=y('<div class="wysiwyg-missing-tds"></div>');a.append(y("<td></td>").append(s)),n++}i.append(a);var c=y("<table></table>").append(i);return y("<div><strong>Previously Used Colors:</strong><br /></div>").append(c)},autoUpdate:!1,update:function(e){y(this).colorPicker("hide"),y("#foreColorPreview").css({backgroundColor:"#"+e}),d.execCommand("foreColor",!1,e)}}),{menu:null,button:u}},_getInsertSmileyMenu:function(e){for(var d=this,t=y("<li></li>"),i="",n=this.options.smiles,u=this.$nosmiles,a=n.length,o=0;o<a;o++){var r=n[o];i+='<li class="'+r+'"><a><img src="'+n[++o]+'" alt="'+r+'" title="'+r+'" /></a></li>'}proboards.data("nosmiles")&&0!=proboards.data("nosmiles")?(i+='<li style="display: block; text-align: center;" class="no-smiles no-hide"><a href="#">Enable Smiles</a></li>',u.val(1)):i+='<li style="display: block; text-align: center;" class="no-smiles"><a href="#">Disable Smiles</a></li>';var s=y('<ul class="wysiwyg-smiley-menu"></ul>');return s.addClass("smiley-menu").append(i).appendTo(document.body).menu({button:t,position:{my:"right top",at:"right bottom",of:t,collision:"flipfit"},showOn:"click",clickHide:!0,click:function(e,t){e.preventDefault();var i=y(t.item).attr("class"),n=y("> a > img",t.item).attr("src"),a=y(this),o=y("> .no-smiles",a),r=y("> .no-smiles > a",a),s=y(this).data("menu");if(-1==i.indexOf("no-smiles"))d.execCommand("insertSmiley",!1,{symbol:i,url:n});else{if("visual"==d.currentEditorName){var l=[];l.push(function(e){d.setContent(e);var t=d.editors.visual,i=t.range||t.getRange();window.getSelection?(i.selectNodeContents(i.commonAncestorContainer),i.collapse(!1),t.selection.collapseToEnd()):i.moveStart("textedit")}),1==u.val()?(u.val(0),o.addClass("no-hide"),l.push(function(){r.html("Disable Smiles"),s.enableAllOptions()})):(u.val(1),r.html("Enable Smiles"),o.removeClass("no-hide"),s.disableAllOptions(),s.enableOption("no-smiles"));var c=d.editors[d.currentEditorName].getContent();d.html2bbcode2html.call(d,c,{success:function(e){for(var t=l.length,i=0;i<t;i++)l[i].call(this,e)}})}else 1==u.val()?(u.val(0),r.html("Disable Smiles"),o.addClass("no-hide"),s.enableAllOptions()):(u.val(1),r.html("Enable Smiles"),o.removeClass("no-hide"),s.disableAllOptions(),s.enableOption("no-smiles"));y(this).menu("show")}return!1}}),""!=u.val()&&0!=u.val()&&s.menu("disableAllOptions").menu("enableOption","no-smiles"),{menu:s,button:t}},_getInsertEmbedMenu:function(e){var i=this,t=y("<li></li>"),n="";n+='<li class="facebook-logo" title="Facebook" data-embed-type="facebook"><a><i class="social-icon icon-facebook-squared"></i></a></li>',n+='<li class="twitter-logo" title="Twitter" data-embed-type="twitter"><a><i class="social-icon icon-twitter-squared"></i></a></li>',n+='<li class="linkedin-logo" title="LinkedIn" data-embed-type="linkedin"><a><i class="social-icon icon-linkedin-squared"></i></a></li>',n+='<li class="pinterest-logo" title="Pinterest" data-embed-type="pinterest"><a><i class="social-icon icon-pinterest-circled"></i></a></li>',n+='<li class="vine-logo" title="Vine" data-embed-type="vine"><a><i class="social-icon icon-vine"></i></a></li>',n+='<li class="spotify-logo" title="Spotify" data-embed-type="spotify"><a><i class="social-icon icon-spotify"></i></a></li>',n+='<li class="instagram-logo" title="Instagram" data-embed-type="instagram"><a><img src="'+proboards.image_path()+'/icons/social/instagram-logo.png" alt="Instagram" /></a></li>',n+='<li class="indiegogo-logo" title="Indiegogo" data-embed-type="indiegogo"><a><img src="'+proboards.image_path()+'/icons/social/indiegogo-logo.png" alt="Indiegogo" /></a></li>',n+='<li class="kickstarter-logo" title="Kickstarter" data-embed-type="kickstarter"><a><img src="'+proboards.image_path()+'/icons/social/kickstarter-logo.png" alt="Kickstarter" /></a></li>',n+='<li class="gdoc-logo" title="Google Drive&#8482;" data-embed-type="gdoc"><a><img src="'+proboards.image_path()+'/icons/social/gdoc-logo.png" alt="Google Drive&#8482;" /></a></li>';var a=y('<ul class="wysiwyg-embed-menu"></ul>');return a.addClass("embed-menu").append(n).appendTo(document.body).menu({button:t,position:{my:"right top",at:"right bottom",of:t,collision:"flipit"},showOn:"click",clickHide:!0,click:function(e,t){e.preventDefault();y(t.item);return i.execCommand("insertEmbed",t),y(this).menu("show"),!1}}),{menu:a,button:t}},_getInsertUserLinkMenu:function(e){var n=this,t=y("<li></li>"),a=y("<div></div>").addClass("wysiwyg-menu").addClass("search-menu").appendTo(document.body),o=y('<input type="hidden" />').appendTo(a);return a.menu({button:t,position:{my:"right top",at:"right bottom",of:t,collision:"flipfit"},showOn:"click",beforeShow:function(){if("visual"==n.currentEditorName){n.focusOnSelected();var e=n.editors.visual.genericSelection;if(0<y(e.startContainer()).closest("code").length||0<y(e.endContainer()).closest("code").length)return!1}},show:function(){if(0==y(".user-search",a).length){proboards.search.create_user_search({container:a,displayboxId:"at-user",input:o,change:function(e,t){"select"==t.type&&(n.execCommand("insertUserLink",!1,{id:t.itemData.id,username:t.itemData.username}),y("."+i+"-selectlist").selectlist("deselect",t.itemData.id),y("."+i+"-displaybox").hide(),a.menu("hide"))}});var i=y(".user-search",a).attr("id");y("."+i+"-input").autosearch("option","enter",function(){y("."+i+"-selectlist").selectlist("select")}),y("input.search-input",a).prop("autofocus",!0),y(this).menu("hide").menu("show")}else setTimeout(function(){y("input.search-input",a).trigger("focus")},100)},addedMenu:"#at-user",clickHide:!1,click:function(e,t){return!1}}),{menu:a,button:t}},_insertTablePrompt:function(e){this._prompt({title:"Insert Table",fields:[{title:"Columns",name:"cols",input:!0,type:"number",value:2,size:8,required:!0,className:"short",min:1,max:50},{title:"Rows",name:"rows",input:!0,type:"number",value:2,size:8,required:!0,className:"short",min:1,max:100},{title:"Cellpadding",name:"cellpadding",input:!0,type:"number",value:3,size:8,required:!0,className:"short",min:0},{title:"Cellspacing",name:"cellspacing",input:!0,type:"number",value:0,size:8,required:!0,className:"short",min:0},{title:"Border",name:"border",input:!0,type:"checkbox",checked:0,size:8,required:!1}],callback:e,ieWidth:175})},_insertEmbedPrompt:function(f,e){var t=f.name,m=y(e).data("embed-type");if("Visual"==t)var i=function(e){var t=f.window.document,i=t.createElement("span");for(var n in i.setAttribute("class","wysiwyg-embed "+m),e)if(e.hasOwnProperty(n)){var a=e[n];i.setAttribute(n,a)}if("kickstarter"==m||"indiegogo"==m||"instagram"==m||"gdoc"==m){var o=t.createElement("img");o.setAttribute("src",proboards.image_path()+"/icons/social/"+m+"-logo-lg.png"),o.setAttribute("alt",m.charAt(0).toUpperCase()+m.substring(1))}else{var r=t.createElement("i"),s="icon-";s+="facebook"==m||"linkedin"==m?m+"-squared":"pinterest"==m?m+"-circled":m,r.setAttribute("class",s)}var l="Your "+("linkedin"==m?"LinkedIn":"gdoc"==m?"Google Drive\u2122":m.charAt(0).toUpperCase()+m.substring(1))+" embed will appear here after you post...",c=t.createTextNode(l);void 0!==r?i.appendChild(r):void 0!==o&&i.appendChild(o);var d=t.createDocumentFragment(),u=t.createElement("br"),p=t.createElement("br"),h=t.createElement("br");i.appendChild(c),d.appendChild(u),d.appendChild(i),d.appendChild(p),d.appendChild(h),f.replaceSelection(d)};else i=function(e){var t=0,i=0;void 0!==f.textarea.selectionStart&&(t=f.textarea.selectionStart,i=f.textarea.selectionEnd),0!=i&&(f.textarea.selectionStart=t,f.textarea.selectionEnd=i);var n=[],a="["+m+" ";for(var o in e)if(e.hasOwnProperty(o)){var r=o+'="'+e[o]+'"';n.push(r)}a+=(n=n.join(" "))+"]",f.replaceSelection(a),void 0!==f.textarea.selectionStart?f.textarea.selectionStart=f.textarea.selectionEnd:(f.range.collapse(!1),f.range.select())};var n={callback:i,ieWidth:625,buttonText:"Embed"};if(e.is("li.facebook-logo"))y.extend(n,{title:"Embed Facebook Post",fields:[{title:"<b>Facebook Post URL<b/>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.facebook.com/ProBoardsFreeForums/posts/149123345105824</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Facebook embed help</a></div><div class="help-content hide"><h4>How do I find a Facebook post URL?</h4><p>Use the following steps to find a Facebook post URL:<br /><ol><li>Navigate to the <a href="https://www.facebook.com/">Facebook</a> page with the post you want to share.</li><li>Click on the post\'s <b>timestamp</b> link (next to the audience selector).</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol></p><h4>What type of Facebook posts are supported?</h4><p>Only <b>public</b> posts from Facebook Pages and profiles can be embedded.</p></div></div>'});else if(e.is("li.twitter-logo")){var a={title:"Embed Tweet",fields:[{title:"<b>Tweet URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://twitter.com/proboards/status/2114706069</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Twitter embed help</a></div><div class="help-content hide"><h4>How do I find a Tweet URL?</h4><p>Use the following steps to find a Tweet URL:<br /><ol><li>Locate the Tweet on <a href="https://twitter.com/" target="_blank">Twitter</a>.</li><li>Click on the Tweet. This will expand the Tweet, showing more information about when the Tweet was posted towards the bottom.</li><li>Click on <b>Details</b> next to the Tweet\'s timestamp.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'};"Visual"==f.name&&(a.callback=function(e){var t=e.url,i=f.window.document.createElement("img");i.setAttribute("src",proboards.image_path()+"/bbcode/twitter-preview.png"),i.setAttribute("tweet_url",t),i.setAttribute("alt","Twitter Placeholder"),f.replaceSelection(i)}),y.extend(n,a)}else e.is("li.linkedin-logo")?y.extend(n,{title:"Embed LinkedIn Profile",fields:[{title:"<b>LinkedIn Profile URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Member Profile:</div>https://www.linkedin.com/in/jeffweiner08</li><li><div class="embed-url-title">Company Profile:</div>https://www.linkedin.com/company/linkedin</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show LinkedIn embed help</a></div><div class="help-content hide"><h4>How do I find a LinkedIn profile URL?</h4><p>Use the following steps to find a LinkedIn profile URL:<br /><ol><li>Navigate to the <a href="https://www.linkedin.com/">LinkedIn</a> <b>member</b> or <b>company</b> profile page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.instagram-logo")?y.extend(n,{title:"Embed Instagram Post",fields:[{title:"<b>Instagram Post URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Short:</div>http://instagr.am/p/bNd86MSFv6</li><li><div class="embed-url-title">Long:</div>http://instagram.com/p/bNd86MSFv6</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Instagram embed help</a></div><div class="help-content hide"><h4>How do I find an Instagram post URL?</h4><p>Use the following steps to find an Instagram post URL:<br />&nbsp;- From the Instagram homepage:<ol style="margin-bottom:5px;"><li>Locate the <a href="http://instagram.com/">Instagram</a> post.</li><li>Click on the <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAQCAMAAADUOCSZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjE4RERBNzRCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjE4RERBNzNCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iRThEOTQ0NTRGMUE1NEMwRjg5QTU3QTQwQUUyQzJCQjEiIHN0UmVmOmRvY3VtZW50SUQ9IkU4RDk0NDU0RjFBNTRDMEY4OUE1N0E0MEFFMkMyQkIxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7HpxSgAAAL1QTFRF9PT08/Pz9fX18vLy8PDwk5OT8fHx9vb29/f3j4+PpKSk6enpw8PDn5+f6OjooaGhnp6emJiYnZ2dmpqaoKCg29vbxcXF5OTkra2t+vr6mZmZwMDA1dXVkJCQtbW1lpaWtLS0+fn5lJSU4uLim5ubnJyc0NDQsrKypaWl1NTUycnJxMTEpqam2NjYlZWVkpKSl5eX0tLSoqKi5ubmurq6+Pj44+Pj1tbWs7Oz6urq7+/v6+vr7Ozs7u7u7e3tmerH7wAAANhJREFUeNqskEVuRTEMRR14/BnKzMwU0/6XVSeTjip1UEu+snx8Eyegv4TAT2nJRUtdCLMSCkkiwZQxMkshJICMxL5mVI7eZjh7JEU3MGjwKTWcQF9BrInmkfZierd2bm/Vf7rm+urlGdDONeI/ptVhrzQ+qVbKffUwO3WC+R5/P58tljp5OlssJ8P5zni+diJqJKbLrnqDeLTffTl/8NhtBUeUPQyboxvikEa3Q1vTxm4KQhptNyLwDRLW7XFgCe/bplw2yC+VorUQq6IKmsIf/u0/yLcAAwBKH0wXq5lr6QAAAABJRU5ErkJggg==" alt="ellipse button"> button towards the bottom right of the post.</li><li>Select <b>View Photo Page</b>.</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol>&nbsp;- From an Instagram user\'s page:<ol><li>Click on the user\'s <b>post</b> that you want to share.</li><li>After the Instagram post pops up, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.pinterest-logo")?y.extend(n,{title:"Embed Pinterest Pin/Board",fields:[{title:"<b>Pinterest Pin/Board URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Pin:</div>https://www.pinterest.com/pin/99360735500167749/</li><li><div class="embed-url-title">Board:</div>https://www.pinterest.com/pinterest/official-news/</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Pinterest embed help</a></div><div class="help-content hide"><h4>How do I find a Pinterest pin or board URL?</h4><p>Use the following steps to find a Pinterest pin or board URL:<br />&nbsp;- Pinterest board:<ol><li>Navigate to the user\'s <a href="http://www.pinterest.com/" target="_blank">Pinterest</a> page.</li><li>Click on the <b>board</b> that you want to share.</li><li>After the board page loads, copy the URL from the browser\'s address bar.</li></ol>&nbsp;- Pinterest pin:<ol><li>Navigate to the <a href="http://www.pinterest.com/" target="_blank">Pinterest</a> board that contains the pin you want to share (check the steps listed above if you need help on how to find a board). </li><li>Click on the <b>pin</b> you want to share.</li><li>After the pin pops up, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.vine-logo")?y.extend(n,{title:"Embed Vine Post",fields:[{title:"<b>Vine Post URL</b>",name:"url",input:!0,type:"text",value:"",required:!0},{title:"<b>Embed Type</b>",name:"type",value:"postcard",selectMenu:!0,options:[["postcard","Postcard"],["simple","Simple"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://vine.co/v/Oqz3DWiZdmY</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Vine embed help</a></div><div class="help-content hide"><h4>How do I find a Vine video URL?</h4><p>Use the following steps to find a Vine video URL:<br /><ol><li>Navigate to the <a href="https://vine.co/" target="_blank">Vine</a> page that contains the video you want to share.</li><li>Locate the video and click on the <img style="vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAaCAMAAABfE/ZQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjE4RERBNzBCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjE4RERBNkZCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iQ0UxNkYxOTVBRjVGQzQ0RDE5ODIyNUE2NEM2MTlGNjYiIHN0UmVmOmRvY3VtZW50SUQ9IkNFMTZGMTk1QUY1RkM0NEQxOTgyMjVBNjRDNjE5RjY2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FvcxcQAAAGZQTFRF+vr6+fn5wMDA8fHxtLS0o6Oj9fX1pqamrq6ul5eXz8/PqampsrKykZGR5+fnnZ2doKCgjIyMzMzMvr6+e3t75ubm6urqiIiIr6+vfn5+ubm5oaGh3d3d+/v7/Pz8/f39/v7+////GA1+9QAAAIxJREFUeNqckMcSwzAIRJHklh6nNxb4/59M7ImEfbUOkt4w7MKSzQ8tYlUVZzWKbQy/NzOOl4OzGba7h5jkunC6JdKixxh+XFi1SY0i94uFalW5ngjVzzdJ0VPE+sxa/BQC5qIvwHj7PHT97OH+hq7vwmQ/3txbTObn02sN33d0Ypnl80/EeVm+XwEGAIw/LXNiLVjVAAAAAElFTkSuQmCC" alt="Vertical ellipse"> button at the top right.</li><li>Select the <b>View post page</b> option.</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.spotify-logo")?y.extend(n,{title:"Embed Spotify",fields:[{title:"<b>Spotify URL/URI</b>",name:"data-id",input:!0,type:"text",value:"",required:!0},{title:"<b>Size</b>",name:"size",value:"large",selectMenu:!0,options:[["large","Large"],["compact","Compact"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Track:</div>http://open.spotify.com/track/7n9Q6bXSjm74uCtajkddPt</li><li><div class="embed-url-title">Album:</div>http://open.spotify.com/album/112eEMM7VwHVEknE4hHjjY</li><li><div class="embed-url-title">Playlist:</div>http://open.spotify.com/user/topsify/playlist/4hiQvXxxJJqsWNVlMkaERP</li></ul><b>Example URIs:</b><br><ul><li><div class="embed-url-title">Track:</div>spotify:track:7n9Q6bXSjm74uCtajkddPt</li><li><div class="embed-url-title">Album:</div>spotify:album:112eEMM7VwHVEknE4hHjjY</li><li><div class="embed-url-title">Playlist:</div>spotify:user:topsify:playlist:4hiQvXxxJJqsWNVlMkaERP</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Spotify embed help</a></div><div class="help-content hide"><h4>How do I find a Spotify URL/URI?</h4><p>Use the following steps to find a Spotify URL/URI:<br />&nbsp;- Spotify URL:<ol><li>From within the <a href="https://www.spotify.com" target="_blank">Spotify</a> App right-click any song, album, or playlist.</li><li>Select <b>Copy HTTP Link</b>.</li></ol></p>&nbsp;- Spotify URI:<ol><li>From within the <a href="https://www.spotify.com" target="_blank">Spotify</a> App right-click any song, album, or playlist.</li><li>Select <b>Copy Spotify URI</b>.</li></ol></p></div></div>'}):e.is("li.indiegogo-logo")?y.extend(n,{title:"Embed IndieGoGo Campaign",fields:[{title:"<b>Indiegogo Campaign URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.indiegogo.com/projects/bluesmart-world-s-first-smart-connected-carry-on</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Indiegogo embed help</a></div><div class="help-content hide"><h4>How do I find an Indiegogo campaign URL?</h4><p>Use the following steps to find an Indiegogo campaign URL:<br /><ol><li>Navigate to the <a href="https://www.indiegogo.com/" target="_blank">Indiegogo</a> <b>campaign</b> page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.kickstarter-logo")?y.extend(n,{title:"Embed Kickstarter Project",fields:[{title:"<b>Kickstarter Project URL</b>",name:"url",input:!0,type:"text",value:"",required:!0},{title:"<b>Embed Type</b>",name:"type",value:"card",selectMenu:!0,options:[["card","Card"],["video","Video"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.kickstarter.com/projects/1916334303/video-games-live-level-4-lets-do-it-again</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Kickstarter embed help</a></div><div class="help-content hide"><h4>How do I find a Kickstarter project URL?</h4><p>Use the following steps to find a Kickstarter project URL:<br /><ol><li>Navigate to the <a href="https://www.kickstarter.com/" target="_blank">Kickstarter</a> <b>project</b> page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):e.is("li.gdoc-logo")&&y.extend(n,{title:"Embed from Google Drive&#8482;",fields:[{title:"<b>Google Drive&#8482; URL</b>",name:"data-url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-help"><div class="help-title"><a href="#">Show Google Drive&#8482; help</a></div><div class="help-content hide"><h4>How do I embed a Google Drive&#8482; document?</h4><ol><li>In the document you wish to embed, go to File -> Publish to the web.</li><li>In the Link tab, click the Publish button. This will only appear on documents still set as private.</li><li>When the document is published, copy the link the page will provide into the box above.</li></ol><h4>What types of documents are supported?</h4><p>You can embed documents, spreadsheets, forms and presentations.</p></div></div>'});this._prompt(n);var o=y(".embed-url-title");if(o.length){var r=0;o.each(function(){y(this).width()>r&&(r=y(this).width())}),o.width(r+1)}var s=y(".embed-help"),l=y(".help-title a"),c=y(".help-content");s.css("maxWidth",y(".ui-dialog form").width()),l.on("click",function(e){e.preventDefault(),c.slideToggle(c.hasClass("hide")),l.text(function(){return 0==y(this).text().indexOf("Show")?y(this).text().replace("Show","Hide"):0==y(this).text().indexOf("Hide")?y(this).text().replace("Hide","Show"):void 0}),c.hasClass("hide")?c.removeClass("hide"):c.addClass("hide")})},_insertListPrompt:function(e){this._prompt({title:"Insert List",fields:[{title:"Number of items",name:"count",input:!0,type:"number",value:3,size:8,required:!0,className:"short",min:1,max:1e3},{title:"List Style",name:"list_type",value:"disc",selectMenu:!0,options:[["disc","&#9679; List Item"],["circle","&#9675; List Item"],["square","&#9632; List Item"],["decimal","1, 2, 3 ..."],["upper-alpha","A, B, C ..."],["lower-alpha","a, b, c ..."],["upper-roman","I, II, III ..."],["lower-roman","i, ii, iii ..."]],required:!0}],callback:e,ieWidth:250})},_createLinkPrompt:function(e,t){var i=this.editors[this.currentEditorName].getSelectedText(),n="http://";i&&-1!=i.indexOf("http")&&(n=i);var a=[];a.push({title:"Text",name:"text",input:!0,type:"text",value:i||"link",size:20,required:!0}),a.push({title:"URL",name:"href",input:!0,type:"text",value:n,size:20,required:!0}),this._prompt({title:"Create Link",fields:a,callback:t,ieWidth:400})},_createEmailPrompt:function(e,t){var i=this.editors[this.currentEditorName].getSelectedText(),n="";i&&-1!=i.indexOf("@")&&(n=i);var a=[];a.push({title:"Text",name:"text",input:!0,type:"text",value:i||"link",size:20,required:!0}),a.push({title:"Email Address",name:"email",input:!0,type:"text",value:n,size:20,required:!0}),this._prompt({title:"Insert Email",fields:a,callback:t,ieWidth:450})},_insertImagePrompt:function(e){var t=this.editors[this.currentEditorName].getSelectedText(),i="http://";t&&-1!=t.indexOf("http")&&(i=t);var n=[];n.push({title:"Image URL",name:"src",input:!0,type:"text",value:i,size:20,required:!0}),n.push({title:"Alt Text",name:"alt",input:!0,type:"text",value:t||"",size:20,required:!1}),this._prompt({title:"Insert Image",fields:n,callback:e,ieWidth:425})},_insertVideoPrompt:function(e){var t=this.editors[this.currentEditorName].getSelectedText(),i=[];i.push({title:"Video URL",name:"url",input:!0,type:"text",value:t||"",size:20,required:!0}),i.push({title:"Size",name:"size",selectMenu:!0,value:"default",options:[["default","Default"],["small","Small"],["medium","Medium"],["large","Large"]],required:!0}),this._prompt({title:"Insert Video",fields:i,extraInfo:'<div id="video-list-info"><h1>Supported Video Sites</h1><ul><li><a href="http://www.collegehumor.com" target="_blank">CollegeHumor</a></li><li><a href="http://www.dailymotion.com" target="_blank">Dailymotion</a></li><li><a href="http://www.metacafe.com" target="_blank">Metacafe</a></li><li><a href="http://www.myspace.com/video" target="_blank">MySpace videos</a></li><li><a href="http://www.twitch.tv" target="_blank">Twitch.tv</a></li><li><a href="http://www.ustream.tv" target="_blank">UStream</a></li><li><a href="http://www.veoh.com" target="_blank">Veoh</a></li><li><a href="http://vimeo.com" target="_blank">Vimeo</a></li><li><a href="http://www.youtube.com" target="_blank">YouTube</a></li><li><a href="http://www.imgur.com" target="_blank">Imgur GIFV</a></li><li>And any direct link to .wmv / .avi / .mpg / .mov / .mp4 / .ogv / .webm</li></ul></div>',callback:e,ieWidth:425})},_getTags:function(e,t,i){for(var n=e.length-1,a=0,o=[],r=0;a<=n&&r<100;){var s=e.indexOf(t,a);if(-1==s){var l=e.substr(a,n-a+1);o.push({text:l}),a=n+1}else{var c=e.indexOf(i,s);if(-1==c){l=e.substr(a,n-a+1);o.push({text:l}),a=n}else{var d=e.indexOf(t,s);if(d<c&&(s=d),a<s){l=e.substr(a,s-a);o.push({text:l})}l=e.substr(s+1,c-s-1);var u=this._getTag(l);u?o.push(u):o.push({text:t+l+i}),a=c+1}}r++}return o},_getTag:function(e){var t,i;0==e.indexOf("/")?(e=e.substr(1),t=!(i=!1)):t=!(i=!0),e.lastIndexOf("/")==e.length-1&&(t=!0,e=(e=e.substr(0,e.length-1)).replace(/\s*$/,""));var n,a={},o=e.indexOf(" ");if(-1==o)n=e;else{n=e.substr(0,o);for(var r=(e=e.substr(o+1)).split("="),s="",l="",c=0;c<r.length;c++)""==s?s=r[c]:c+1==r.length?(l=r[c].replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),a[s]=l):(o=r[c].lastIndexOf(" "),l=r[c].substr(0,o).replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),a[s]=l,s=r[c].substr(o+1))}return{name:n,attrs:a,open:i,close:t}},_correctRange:function(e){if(void 0!==e.startContainer&&!e.collapsed){for(;"#text"==e.startContainer.nodeName.toLowerCase()&&e.startOffset==e.startContainer.length&&0<e.startContainer.length||"#text"!=e.startContainer.nodeName.toLowerCase()&&e.startOffset==e.startContainer.childNodes.length&&0<e.startContainer.childNodes.length;)null==e.startContainer.nextSibling?e.setStart(e.startContainer.parentNode,e.startContainer.parentNode.childNodes.length):e.setStart(e.startContainer.nextSibling,0);for(;0==e.endOffset;){if(null==e.endContainer.previousSibling)e.setEnd(e.endContainer.parentNode,0);else i="#text"==(t=e.endContainer.previousSibling).nodeName.toLowerCase()?t.length:t.childNodes.length,e.setEnd(t,i)}for(;0==e.startOffset&&0<e.startContainer.childNodes.length&&"#text"!=e.startContainer.nodeName.toLowerCase();)e.setStart(e.startContainer.childNodes[0],0);for(;e.endOffset==e.endContainer.childNodes.length-1&&0<e.endContainer.childNodes.length&&"#text"!=e.endContainer.nodeName.toLowerCase();){var t,i;i="#text"==(t=e.endContainer.childNodes[e.endContainer.childNodes.length-1]).nodeName.toLowerCase()?t.length:t.childNodes.length,e.setEnd(t,i)}}},_prompt:function(u){void 0===u.dialog&&(u.dialog={}),0==y(this.dialog).length&&(this.dialog=y("<div></div>").hide().appendTo(document.body).dialog({autoOpen:!1,height:"auto",width:"auto",dialogClass:"wysiwyg-dialog",close:function(){y.clearInputError()}})),y(".wysiwyg-dialog .ui-dialog-content").css("overflow","visible");var e,p=this,t=y("<table></table>"),i=u.fields,n=u.extraInfo,a=i.length,o=u.buttonText||u.title;for(e=0;e<a;++e){var r=y('<tr><td class="pad-bottom">'+i[e].title+":&nbsp;</td></tr>"),s=y('<td class="pad-bottom"></td>');if(i[e].input)"textarea"==i[e].type?s.append('<textarea name="'+i[e].name+'" rows="'+(i[e].rows?i[e].rows:8)+'" cols="'+(i[e].cols?i[e].cols:30)+'"'+(i[e].required?' required="required"':"")+">"+(null!=i[e].value?i[e].value:"")+"</textarea>"):s.append('<input name="'+i[e].name+'"'+(i[e].className?' class="'+i[e].className+'"':"")+(i[e].checked?' checked="checked"':"")+' type="'+i[e].type+'" value="'+(null!=i[e].value?i[e].value:"")+'" size="'+(i[e].size?i[e].size:16)+'"'+(i[e].required?' required="required"':"")+(i[e].min?' min="'+i[e].min+'"':"")+(i[e].max?' max="'+i[e].max+'"':"")+(i[e].placeholder?' placeholder="'+i[e].placeholder+'"':"")+" />");else if(i[e].selectMenu){for(var l=y('<input id="wysiwyg-input-'+i[e].name+'" type="hidden" name="'+i[e].name+'" value="'+i[e].value+'" />'),c="",d=0;d<i[e].options.length;d++)i[e].value&&i[e].value==i[e].options[d][0]&&(text=i[e].options[d][1]),c+='<li class="value-'+i[e].options[d][0]+'"><a>'+i[e].options[d][1]+"</a></li>";var h=y('<ul class="select_menu_list list-style ui-menu ui-selectMenu hide"></ul>').append(c),f=y("<div></div>").addClass("selectMenuButton").append(h);h.selectMenu({status:i[e].options[0][1],updateInput:l,menuOptions:{click:function(e,t){y(t.item).parents(".select_menu_list").data("selectMenu").option("updateInput").val(y(t.item).attr("class").replace("value-",""))}}});s.append(l),s.append(f)}else if(i[e].select){var m='<select name="'+i[e].name+'">';for(d=0;d<i[e].options.length;d++)m+='<option value="'+i[e].options[d][0]+'"'+(i[e].value==i[e].options[d][0]?' selected="selected"':"")+">"+i[e].options[d][1]+"</option>";m+="</select>",s.append(m)}r.append(s),t.append(r)}var g=y("<form></form>").bind("submit.wysiwyg",function(e){void 0!==e.cancelBubble&&(e.cancelBubble=!0),void 0!==e.stopPropagation&&e.stopPropagation(),void 0!==e.preventDefault&&e.preventDefault();var t,i=!1,n={},a=this.elements,o=a.length;for(t=0;t<o;++t){var r=a[t].getAttribute("required"),s=(a[t].name,a[t].value),l=a[t].getAttribute("type"),c=a[t].getAttribute("min")?parseInt(a[t].getAttribute("min")):null,d=a[t].getAttribute("max")?parseInt(a[t].getAttribute("max")):null;if(null!=r&&"required"==r&&""==s){i=!0,y.inputError(a[t],"This field is required.");break}if("number"==l&&!s.match(/^-?[0-9]+$/)){i=!0,y.inputError(a[t],"This field must be an integer.");break}if(c&&(intVal=parseInt(s),intVal<c)){i=!0,y.inputError(a[t],"This field must be at least "+c+".");break}if(d&&(intVal=parseInt(s),intVal>d)){i=!0,y.inputError(a[t],"This field cannot be more than "+d+".");break}n[a[t].name]="border"==a[t].name?a[t].checked:a[t].value}return i||(p.dialog.dialog("close"),u.callback.call(this,n)),!1}).append(t);for(option in this.dialog.html("").append(g,n),u.dialog.height="auto",u.dialog.width="auto",y("html").is(".ie7")&&(u.dialog.width=u.ieWidth),u.dialog.buttons=[{text:o,click:function(){y("form",this).submit()}}],u.dialog.title=u.title,u.dialog.open=function(){proboards.dialogEnter(y(this))},u.dialog)this.dialog.dialog("option",option,u.dialog[option]);this.dialog.dialog("open"),setTimeout(function(){y("div.ui-dialog tr:first-child td input:visible").eq(0).focus().select()},0)},_onButtonClick:function(e){this.buttons[e].command&&this.execCommand(this.buttons[e].command,!1,!1)},_getSelection:function(){var e;if("bbcode"!=this.currentEditorName)return this.editors[this.currentEditorName].window.getSelection?e=this.editors[this.currentEditorName].window.getSelection():this.editors[this.currentEditorName].document.selection&&(e=this.editors[this.currentEditorName].document.selection.createRange()),e&&(this.editors[this.currentEditorName].selection=e),this.editors[this.currentEditorName].selection},_getRange:function(e){if(e||(e=this._getSelection()),e.getRangeAt){if(0==e.rangeCount)(t=this.editors.wysiwyg.document.createRange()).setStart(this.editors.wysiwyg.document.body,0),t.setEnd(this.editors.wysiwyg.document.body,0),e.addRange(t);return e.getRangeAt(0)}var t;return(t=this.editors.wysiwyg.document.createRange()).setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),t},getContentFor:function(e){if("bbcode"==e||"visual"!=e)if(this.currentEditorName&&"wysiwyg"==this.currentEditorName&&this.editors.wysiwyg){for(var t=this.editors.wysiwyg.document.body.innerHTML;null!=t.match(/<br\s*\/?>$/)||t.match(/\s+$/)||t.match(/(&nbsp;)+$/);)t=t.replace(/<br\s*\/?>/,"").replace(/\s+$/,"").replace(/(&nbsp;)+$/,"");if("visual"==e)return t;if("bbcode"==e)return this.html2bbcode(t)}else{if(!this.currentEditorName||"bbcode"!=this.currentEditorName||!this.editors.bbcode)return;if("visual"==e)return this.bbcode2html(y(this.editors.bbcode.textarea).val());if("bbcode"==e)return y(this.editors.bbcode.textarea).val()}},_updateSelection:function(){this.editors.wysiwyg.window.getSelection?this.selection=this.editors.wysiwyg.window.getSelection():this.editors.wysiwyg.document.selection&&(this.selection=this.editors.wysiwyg.document.selection.createRange())},_updateButtonStates:function(){if("bbcode"!=this.currentEditorName){var e=this._getSelection(),t=this._getRange(e);this._correctRange(t);var i=t.commonAncestorContainer;y(".button.ui-active",this.controlsContainer).removeClass("ui-active");for(var n,a="",o="",r="";"body"!=i.nodeName.toLowerCase();)this.buttonStateIndex[i.nodeName.toLowerCase()]&&y(".button-"+this.buttonStateIndex[i.nodeName.toLowerCase()],this.controlsContainer).addClass("ui-active"),"font"==i.nodeName.toLowerCase()&&(""==a&&""!=i.face&&(a=i.face),""==o&&""!=i.color&&(o=i.color),""==r&&""!=i.size&&(r=i.size)),i=i.parentNode;if(n=o.match(/rgb\((\d+), (\d+), (\d+)\)/)){var s=parseInt(n[1],10).toString(16),l=parseInt(n[2],10).toString(16),c=parseInt(n[3],10).toString(16);s.length<2&&(s="0"+s),l.length<2&&(l="0"+l),c.length<2&&(c="0"+c),o=s+l+c}""==o&&(o="000000"),o=o.replace("#",""),y("#foreColorPreview").css({backgroundColor:"#"+o})}},_removeNode:function(e){var t=e.parentNode;for(t.removeChild(e);0==t.childNodes.length&&"body"!=t.nodeName.toLowerCase();)(t=(e=t).parentNode).removeChild(e)},_nodeIsEmpty:function(e,t){void 0===t&&(t=0);for(var i=0;i<t;++i)"--";if(" ","#text"==e.nodeName.toLowerCase())return!(!e.isElementContentWhitespace||""!=e.data);if(1==e.childNodes.length&&"br"==e.childNodes[0].nodeName.toLowerCase())return!0;var n=e.childNodes,a=n.length;for(i=0;i<a;++i)if(!this._nodeIsEmpty(n[i],t+1))return!1;return!0},_transferChildNodes:function(e,t){for(e.childNodes.length;0<e.childNodes.length;)t.appendChild(e.childNodes[0])},_cleanTags:function(e,t){void 0===t&&(t=0);for(var i=0;i<t;++i)"--";for(" ",void 0===e&&(e=this.editors.wysiwyg.document.body.childNodes[0]);null!=e;)if(this._nodeIsEmpty(e)){var n=e.nextSibling;this._removeNode(e),e=n}else{if(null!=e.nextSibling&&"#text"!=e.nodeName.toLowerCase()&&"#text"!=e.nextSibling.nodeName.toLowerCase())for(var a=!0;a;)if("#text"!=e.nodeName.toLowerCase()&&null!=e.nextSibling&&"#text"!=e.nextSibling.nodeName.toLowerCase())if(e.nodeName.toLowerCase()!=e.nextSibling.nodeName.toLowerCase()){var o,r,s,l;for(o=r=e,s=e.nextSibling.nodeName.toLowerCase(),l=!1;1==r.childNodes.length&&!l;)"#text"!=(r=r.childNodes[0]).nodeName.toLowerCase()&&r.nodeName.toLowerCase()==s&&(l=!0);if(l){(c=r.parentNode).removeChild(r),o.parentNode.insertBefore(r,o.nextSibling),this._transferChildNodes(r,c),r.appendChild(o),e=r}else{for(o=r=e.nextSibling,s=e.nodeName.toLowerCase(),l=!1;1==r.childNodes.length&&!l;)"#text"!=(r=r.childNodes[0]).nodeName.toLowerCase()&&r.nodeName.toLowerCase()==s&&(l=!0);var c;if(l)(c=r.parentNode).removeChild(r),o.parentNode.insertBefore(r,o.nextSibling),this._transferChildNodes(r,c),r.appendChild(o);else a=!1}}else{var d=e.nextSibling;this._transferChildNodes(d,e),e.parentNode.removeChild(d)}else a=!1;"#text"!=e.nodeName.toLowerCase()&&this._cleanTags(e.childNodes[0],t+1),e=e.nextSibling}},_splitParentsUntilNodeName:function(e,t,i){for(var n=e.parentNode,a=!1;!a;){this._compareTagToNode(t,i,n)&&(a=!0);for(var o=this.editors.wysiwyg.document.createElement(n.nodeName),r=e.nextSibling;r;)r.isElementContentWhitespace?n.removeChild(r):o.appendChild(r),r=e.nextSibling;if(0<o.childNodes.length&&n.parentNode.insertBefore(o,n.nextSibling),a)n.parentNode.insertBefore(e,n.nextSibling),this._removeEmptyTextNodes(n),0==n.childNodes.length&&n.parentNode.removeChild(n);else{var s=this.editors.wysiwyg.document.createElement(n.nodeName);s.appendChild(e),n.parentNode.insertBefore(s,n.nextSibling),e=s,this._removeEmptyTextNodes(n),0==n.childNodes.length&&n.parentNode.removeChild(n)}n=e.parentNode}return e},_compareTagToNode:function(e,t,i){if(i.nodeName.toLowerCase()!=e)return!1;var n,a=0,o=0,r=i.attributes;r.length;for(n=0;n<r;++n){var s=i.attributes[n].nodeName.toLowerCase();0!=s.indexOf("_")&&(t[s]&&""!=t[s]&&(i.removeAttribute(s),++a),++o)}return a==o},_compareTagToParentNodes:function(e,t,i){for(i=i.parentNode;i&&"body"!=i.nodeName.toLowerCase();){if(this._compareTagToNode(e,t,i))return!0;i=i.parentNode}return!1},_insertAroundSelection:function(e,t){var i=this._getSelection(),n=this._getRange(i);if(n.collapsed){var a=n.commonAncestorContainer;this._compareTagToParentNodes(e,t,a)?(o=this.editors.wysiwyg.document.createTextNode(""),n.insertNode(o),this._splitParentsUntilNodeName(o,e,t)):(o=this._createNode(e,t),n.insertNode(o)),n.selectNodeContents(o)}else{this._correctRange(n);var o;a=n.commonAncestorContainer;if(!this._compareTagToNode(e,t,a)&&!this._compareTagToParentNodes(e,t,a)){r=n.extractContents();this._clearAllTaggedBranches(r.childNodes,e,t),o=this._createNode(e,t);s=r.firstChild,l=r.lastChild;return}var r=n.extractContents();o=this.editors.wysiwyg.document.createTextNode(""),n.insertNode(o),this._splitParentsUntilNodeName(o,e,t);var s=r.firstChild,l=r.lastChild;o.parentNode.insertBefore(r,o),o.parentNode.removeChild(o),n.setStartBefore(s),l.nextSibling?n.setEnd(l.nextSibling,0):n.setEnd(l,l.childNodes.length);var c=this;setTimeout(function(){c._cleanTags()},1)}},_createNode:function(e,t){var i=this.editors.wysiwyg.document.createElement(e);for(var n in t)i[n]=t[n];return i},_clearAllTaggedBranches:function(e,t,i){for(var n=0;n<e.length;n++){var a=e[n];if(this._compareTagToNode(t,i,a)){for(var o=a.childNodes;0<o.length;)a.parentNode.insertBefore(o[0],a);a.parentNode.removeChild(a),n--}else"#text"!=a.nodeName.toLowerCase()&&this._clearAllTaggedBranches(a.childNodes,t,i)}},_removeEmptyTextNodes:function(e){for(var t=e.childNodes,i=0;i<t.length;i++)t[i].isElementContentWhitespace&&""==t[i].wholeText&&e.removeChild(t[i])},_insertAfterSelection:function(e,t){var i=this._createNode(e,t),n=this._getSelection(),a=this._getRange(n);a.collapse(!1),a.insertNode(i),this._cleanTags()},_replaceSelected:function(e){var t=this._getSelection();if(this.editors.wysiwyg.window.getSelection){var i=this._getRange(t);i.deleteContents(),i.insertNode(e),i.setEndAfter(e),t.addRange(i),t.collapseToEnd&&t.collapseToEnd(),this.editors.wysiwyg.window.focus()}else this.wysiwyg_editor.selection&&(t.pasteHTML(e.innerHTML),t.collapse(!1),t.select())},overwriteSelection:function(e){var t=this.editors[this.currentEditorName];"BBCode"==t.name?t.replaceSelection(e):"Visual"==t.name&&t.replaceSelection(t.document.createTextNode(e))},focusOnSelected:function(){var e=this.editors[this.currentEditorName];e.window?e.window.focus():e.textarea.focus(),e.editable.focus(),y.browser.msie&&e.window&&(e.selection&&e.selection.addRange&&e.selection.addRange(e.range),e.range&&e.range.select&&e.range.select())}}),y.extend(y.ui.wysiwyg,{version:"1.8.5"})}(jQuery),function(f){f.extend(f.ui.wysiwyg.prototype,{_visualEditor:{name:"Visual",controls:{},controlGroups:[[["fontName","fontSize"],["foreColor","bold","italic","underline","strikethrough","superscript","subscript","removeFormat"]],[["justifyLeft","justifyCenter","justifyRight","justifyFull","insertTable","insertUnorderedList","insertHorizontalRule"],["createLink","createEmail","insertImage","insertVideo","insertUserLink","insertCode","insertQuote","insertSmiley","insertEmbed"]]],controlShortcuts:{"ctrl+b":"bold","ctrl+i":"italic","ctrl+u":"underline"},commands:{fontName:function(e,t,i,n){e.document.execCommand(t,!1,n)},foreColor:function(e,t,i,n){e.document.execCommand(t,!1,n)},fontSize:function(e,t,i,n){e.document.execCommand(t,!1,n)},removeFormat:function(e,t,i,n){e.document.execCommand(t,!1,null)},insertTable:function(s,e,t,i){s.getSelection(),s.getRange();this._insertTablePrompt(function(e){if(!(parseInt(e.rows,10)<=0||parseInt(e.cols)<=0)){var t=s.document.createElement("table");0!=e.cellspacing&&(t.style.borderCollapse="separate",t.style.borderSpacing=e.cellspacing+"px");for(var i=s.document.createElement("tbody"),n=0;n<e.rows;n++){for(var a=s.document.createElement("tr"),o=0;o<e.cols;o++){var r=s.document.createElement("td");r.innerHTML="Row "+(n+1)+" column "+(o+1),e.border&&(r.style.border="1px solid #000"),0!=e.cellpadding&&(r.style.padding=e.cellpadding+"px"),a.appendChild(r)}i.appendChild(a)}t.appendChild(i),s.replaceSelection(t),f(t).before("<br>").after("<br>"),void 0!==s.range.selectNodeContents?(s.getRange(),s.range.selectNodeContents(t.getElementsByTagName("td")[0]),s.window.focus()):(s.getRange(),s.range.findText("Row 1 column 1"),s.range.select())}})},insertUnorderedList:function(r,e,t,i){var s=r.getSelection(),l=r.getRange(),c=document.createElement("li"),d=void 0!==r.range.collapsed?r.range.collapsed:!(0<r.range.boundingWidth);this._insertListPrompt(function(e){if(d)c.innerHTML="List item 1";else if(r.window.getSelection)c.appendChild(l.extractContents());else{var t=l.text;t=t.replace(/\n/g,"<br>"),c.innerHTML=t}if(0!=e.count){var i;(i="disc"==e.list_type||"circle"==e.list_type||"square"==e.list_type?r.document.createElement("ul"):r.document.createElement("ol")).style.listStyleType=e.list_type,i.appendChild(c);for(var n=1;n<e.count;++n){var a=r.document.createElement("li");a.innerHTML="List item "+(n+1),i.appendChild(a)}if(r.replaceSelection(i),r.window.getSelection){l.collapse(!1);var o=r.document.createElement("br");l.insertNode(o),l.setEndAfter(o),s.removeAllRanges(),s.addRange(l),s.collapseToEnd()}else l.pasteHTML("<br>"),l.select();void 0!==r.range.selectNodeContents?(r.getRange(),r.range.selectNodeContents(i.getElementsByTagName("li")[0]),r.window.focus()):(r.getRange(),r.range.findText(c.nodeValue),r.range.select())}else l.select?l.select():r.window.focus()})},createLink:function(i,e,t,n){i.range||(i.range=i.getRange());var a=void 0!==i.range.collapsed?i.range.collapsed:!(0<i.range.boundingWidth);this._createLinkPrompt(a,function(e){var t=i.document.createElement("a");t.setAttribute("href",e.href),void 0!==e.text?(t.innerHTML=e.text,i.replaceSelection(t)):i.surroundSelection(t)})},createEmail:function(i,e,t,n){i.range||(i.range=i.getRange());var a=void 0!==i.range.collapsed?i.range.collapsed:!(0<i.range.boundingWidth);this._createEmailPrompt(a,function(e){var t=i.document.createElement("a");t.setAttribute("href","mailto:"+e.email),void 0!==e.text?(t.innerHTML=e.text,i.replaceSelection(t)):i.surroundSelection(t)})},insertImage:function(i,e,t,n){this._insertImagePrompt(function(e){var t=f(i.window.document.createElement("img"));-1==e.src.indexOf(":")&&(e.src="http://"+e.src),t.attr("src",e.src),t.attr("alt",e.alt),proboards.data("display_large_images")||t.attr("style","max-width:100%;"),i.replaceSelection(t.get(0))})},insertVideo:function(i,e,t,n){this._insertVideoPrompt(function(e){var t=i.document.createElement("img");t.setAttribute("src",proboards.image_path()+"/bbcode/video-preview.png"),t.setAttribute("video",e.url.replace('"',"&quot;")),t.setAttribute("alt","Video Preview"),"default"==e.size||"small"!=e.size&&"medium"!=e.size&&"large"!=e.size||t.setAttribute("size",e.size),i.replaceSelection(t)})},insertEmbed:function(e,t,i,n){this._insertEmbedPrompt(e,f(i.item))},insertUserLink:function(e,t,i,n){var a=e.document.createTextNode("@"+n.username);e.replaceSelection(a)},insertCode:function(e,t,i,n){var a=e.document.createElement("code"),o=(e.getSelection(),e.getRange());if(void 0!==e.range.collapsed?e.range.collapsed:!(0<e.range.boundingWidth))a.innerHTML="insert code here",f.browser.msie&&7==parseInt(f.browser.version)&&(a.innerHTML+="<br>");else if(e.window.getSelection){var r=o.extractContents();a.appendChild(r)}else{var s=o.text;s=s.replace(/\n/g,"<br>"),a.innerHTML=s}e.replaceSelection(a),f(a).before("<br>").after("<br>")},insertQuote:function(e,t,i,n){var a=e.document.createElement("div");a.setAttribute("class","quote_body");e.getSelection();var o=e.getRange();if(void 0!==e.range.collapsed?e.range.collapsed:!(0<e.range.boundingWidth))a.innerHTML="insert quote here";else if(e.window.getSelection){var r=o.extractContents();a.appendChild(r)}else{var s=o.text;s=s.replace(/\n/g,"<br>"),a.innerHTML=s}var l=e.document.createElement("div");l.setAttribute("class","quote no_header"),l.appendChild(a),e.replaceSelection(l),f(l).before("<br>").after("<br>")},insertSmiley:function(e,t,i,n){var a="";if(parseInt(this.$nosmiles.val()))a=e.document.createTextNode(" "+n.symbol);else{var o=null;e.document.createRange?o=e.document.createTextNode(" "):(o=e.document.createElement("span")).setAttribute("class","remove-me"),e.replaceSelection(o),e.range.collapse(!1),e.getSelection(),(a=e.document.createElement("img")).setAttribute("text",n.symbol),a.setAttribute("alt"," "+n.symbol),a.setAttribute("src",n.url)}e.replaceSelection(a),e.range.collapse(!1);var r=e.getSelection();r.collapseToEnd&&r.collapseToEnd(),e.document.createRange?(r.removeAllRanges(),r.addRange(e.range)):f(e.document).find(".remove-me").replaceWith(" ")},addAttachment:function(e,t,i,n){var a=e.document.createElement("span");a.setAttribute("class","attachment_preview"),a.setAttribute("attachment",n.id),-1==n.thumbnail.indexOf("/uploader/no-preview.png")&&n.thumbnail?(a.setAttribute("thumbnail",1),a.innerHTML='<img src="'+n.thumbnail+'" />'):a.innerHTML='<a href="#">'+n.filename+"</a> ("+n.size+")",e.replaceSelection(a)},removeAttachment:function(e,t,i,n){f('span[attachment="'+n.id+'"]',e.document).remove()},removeAttachments:function(e,t,i,n){f("span[attachment]",e.document).remove()}},build:function(e,t){var u=this,i='<!DOCTYPE HTML><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8" />'+proboards.data("css_wysiwyg_style")+proboards.data("css_wysiwyg_non_editable")+"<title></title></head><body></body></html>",n=f("<iframe></iframe>").height(t.height()).appendTo(t);this.parent=e,this.container=t,this.iframe=n[0],this.window=this.iframe.contentWindow,this.document=this.window.document,this.document.designMode="On",this.document.open(),this.document.write(i),this.document.close(),this.resizable=this.iframe,this.editable=this.document.body,this.bindable=this.document,this.genericSelection=new proboards.genericSelection(u.window);var p=this.genericSelection;f(this.document).bind("mousedown.wysiwyg",function(e){f(document).trigger("mousedown",e)}),f(this.document).bind("blur.wysiwyg",function(){u.getRange()}),BlockFix.init({window:u.window,selector:this.parent.uneditableElements});var a,h=function(){var e,t=new proboards.genericSelection(u.window);0<f(t.startContainer()).closest("code").length||0<f(t.endContainer()).closest("code").length?e=u.document.createTextNode("\t"):(e=u.document.createElement("span")).innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;";var i=u.getRange();i.insertNode(e),i.setStartAfter(e),i.setEndAfter(e)},o=navigator.userAgent.toLowerCase();-1<o.indexOf("applewebkit")?f(this.document).bind("keydown.wysiwyg",function(e){if(!e.ctrlKey||e.which!=Keys.b&&e.which!=Keys.i&&e.which!=Keys.u){if(13==e.which){if(!u.shiftADiv()&&u.window.getSelection){var t=u.getRange(),i=u.document.createElement("br"),n=u.document.createElement("br");if("LI"==t.endContainer.parentElement.nodeName||"LI"==t.endContainer.nodeName)return!0;var a=u.getSelection().focusOffset,o=t.endContainer.parentElement;o.normalize();var r=o.childNodes.length-1,s=t.endContainer,l=null;if(null!=s){var c=s.isEqualNode(o.childNodes[r]);l=s.nextSibling}t.deleteContents(),t.insertNode(i),t.setStartAfter(i),t.setEndAfter(i),null!=s&&t.collapse(!1);var d=u.getSelection().focusOffset;"Text"!=t.endContainer&&d<=a&&c&&null==l&&"HTML"!=o.nodeName&&(t.insertNode(n),t.setStartAfter(n),t.setEndAfter(n)),u.selection.removeAllRanges(),u.selection.addRange(t),u.selection.collapseToEnd&&u.selection.collapseToEnd()}return!(e.cancelBubble=!0)}9==e.which&&(h(),e.preventDefault(),e.stopPropagation())}else if(0<f(p.startContainer()).closest("code").length||0<f(p.endContainer()).closest("code").length)return e.stopImmediatePropagation(),!1}):-1<o.indexOf("opera")?f(this.document).bind("keypress.wysiwyg",function(e){if(13==e.which){if(u.shiftADiv())return e.preventDefault(),e.stopPropagation(),!1;var t=u.getRange(),i=u.document.createElement("br");if("LI"==t.endContainer.parentNode.nodeName||"LI"==t.endContainer.nodeName)return!0;t.deleteContents(),t.insertNode(i),t.setStartAfter(i),t.setEndAfter(i),u.selection.removeAllRanges(),u.selection.addRange(t),u.selection.collapseToEnd(),e.preventDefault(),e.stopPropagation()}else 9==e.which&&(h(),e.preventDefault(),e.stopPropagation())}):-1<o.indexOf("msie")?f(this.document).bind("keydown.wysiwyg",function(e){var t=new proboards.genericSelection(u.window);if(!e.ctrlKey||e.which!=Keys.b&&e.which!=Keys.i&&e.which!=Keys.u){if(13==e.which){var i=u.document.createElement("br");if(u.window.getSelection){if(u.shiftADiv())return!(e.cancelBubble=!0);if("LI"==(n=u.getRange()).endContainer.parentNode.nodeName||"LI"==n.endContainer.nodeName)return!0;n.deleteContents(),n.insertNode(i),n.setEndAfter(i),u.selection.addRange(n),u.selection.collapseToEnd&&u.selection.collapseToEnd()}else if(u.document.selection){if(u.shiftADiv())return!(e.cancelBubble=!0);if("LI"==(n=u.getRange()).parentElement().nodeName)return!0;n.pasteHTML(i.outerHTML),n.select()}return!(e.cancelBubble=!0)}if(9==e.which){if(u.window.getSelection)h();else if(u.document.selection){var n=u.getRange(),a=u.document.createElement("span");a.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;","CODE"==n.parentElement().nodeName?n.pasteHTML(a.innerHTML):n.pasteHTML(a.outerHTML),n.select()}return!(e.cancelBubble=!0)}}else if(0<f(t.startContainer()).closest("code").length||0<f(t.endContainer()).closest("code").length)return e.stopImmediatePropagation(),!1}):f(this.document).bind("keydown.wysiwyg",function(e){if(13==e.which){if(u.shiftADiv())return e.preventDefault(),e.stopPropagation(),!1}else 9==e.which&&(h(),e.preventDefault(),e.stopPropagation())}),f(this.document.body).on("paste.wyswiwyg",function(e){if(u.window.clipboardData)e.preventDefault(),u.replaceSelection(u.breakText(u.window.clipboardData.getData("Text"),u.document));else if(e.originalEvent.clipboardData)e.preventDefault(),u.replaceSelection(u.breakText(e.originalEvent.clipboardData.getData("text/plain"),u.document));else{var t=f("body",u.document),i=u.getSelection(),n=u.range||u.getRange(),a=f('<div style="visibility: hidden;"></div>');t.append(a);var o=u.document.createRange();o.selectNodeContents(a.get(0)),i.removeAllRanges(),i.addRange(o),setTimeout(function(){i.removeAllRanges(),i.addRange(n),u.replaceSelection(u.plainText(a.contents(),u.document)),a.remove()},0)}}),f(this.document).bind("keyup.wysiwyg mouseup.wysiwyg",function(e){var t=u.getRange();a&&(t.startContainer?t.startContainer===a.startContainer&&t.startOffset==a.startOffset&&t.endContainer===a.endContainer&&t.endOffset==a.endOffset||(u.parent.latestCommands={}):t.offsetLeft==a.offsetLeft&&t.offsetTop==a.offsetTop||(u.parent.latestCommands={})),a=t,u.updateControlStates()}),this.tableContextMenu=f('<ul><li><a><span>Row</span></a><ul><li id="insertRowBefore"><a><span class="icon"></span><span>Insert row before</span></a></li><li id="insertRowAfter"><a><span class="icon"></span><span>Insert row after</span></a></li><li id="deleteRow"><a><span class="icon"></span><span>Delete row</span></a></li></ul></li><li><a><span>Column</span></a><ul><li id="insertColumnBefore"><a><span class="icon"></span><span>Insert column before</span></a></li><li id="insertColumnAfter"><a><span class="icon"></span><span>Insert column after</span></a></li><li id="deleteColumn"><a><span class="icon"></span><span>Delete column</span></a></li></ul></li><li class="separator"></li><li id="deleteTable"><a><span class="icon"></span><span>Delete table</span></a></li></ul>').appendTo(document.body).hide().contextMenu(),this.tableContextMenu.contextMenu("attach",{type:"delegate",parent:this.document.body,selector:"table",callback:function(e,t,i){if(t){var n=e.target,a=f(n).closest("table").find("td"),o="";if(a.length){o=a.attr("style");for(var r=1;r<a.length;++r)if(o!=a.eq(r).attr("style")){o="";break}""!=o&&(o=' style="'+o+'"')}if(t.match(/Row/)){for(;n&&"tr"!=n.nodeName.toLowerCase();)n=n.parentNode;if(!n)return}else if(t.match(/Column/)){for(;n&&"td"!=n.nodeName.toLowerCase();)n=n.parentNode;if(!n)return}if("insertRowBefore"==t){for(var s=f(n).children("td").length,l=f("<tr></tr>"),c=0;c<s;c++)l.append("<td"+o+"><br /></td>");f(n).before(l)}else if("insertRowAfter"==t){for(s=f(n).children("td").length,l=f("<tr></tr>"),c=0;c<s;c++)l.append("<td"+o+"><br /></td>");f(n).after(l)}else if("deleteRow"==t){if(0==f(n).siblings("tr").length)for(;n&&"table"!=n.nodeName.toLowerCase();)n=n.parentNode;f(n).remove()}else if("insertColumnBefore"==t){var d=f(n).index();f(n).parent().parent().find("tr").each(function(){f(f(this).children("td")[d]).before("<td"+o+"><br /></td>")})}else if("insertColumnAfter"==t){d=f(n).index();f(n).parent().parent().find("tr").each(function(){f(f(this).children("td")[d]).after("<td"+o+"><br /></td>")})}else if("deleteColumn"==t){if(0==f(n).siblings("td").length){for(;n&&"table"!=n.nodeName.toLowerCase();)n=n.parentNode;f(n).remove()}else{d=f(n).index();f(n).parent().parent().find("tr").each(function(){f(f(this).children("td")[d]).remove()})}}else"deleteTable"==t&&(f(i).remove(),u.document.body.focus())}}})},getContent:function(){for(var e=this.document.getElementsByTagName("span"),t=0;t<e.length;t++){var i=e[t];if(null!=i.getAttribute("atuser")||"attachment_preview"==i.className){var n=f("a",i).first();n.length&&""==f.trim(n.html())&&n.remove(),""==f.trim(f(i).html())&&f(i).remove()}}return this.document.body.innerHTML},setContent:function(e){f("body",this.document).html(e)},beforeExecCommand:function(t){try{t.document.execCommand("styleWithCSS",!1,!1)}catch(e){try{t.document.execCommand("useCSS",!1,!1)}catch(e){}}try{t.document.execCommand("enableObjectResizing",!0,!0)}catch(e){}},afterExecCommand:function(e){e.updateControlStates(),f("code",e.document).each(function(){f(this).html(e.plainText(f(this).contents(),e.document))})},replaceSelection:function(e){this.window.focus();var t=this.getSelection(),i=this.range||this.getRange();if(this.window.getSelection)i.deleteContents(),i.insertNode(e),"#document-fragment"!=e.nodeName.toLowerCase()&&(i.setStartAfter(e),i.setEndAfter(e)),t.removeAllRanges(),t.addRange(i),t.collapseToEnd();else if(this.document.selection){if("#text"==e.nodeName.toLowerCase())i.pasteHTML(e.nodeValue);else if("#document-fragment"==e.nodeName.toLowerCase()){for(var n="",a=0;a<e.childNodes.length;a++)n+="#text"==e.childNodes[a].nodeName.toLowerCase()?e.childNodes[a].nodeValue:e.childNodes[a].outerHTML;i.pasteHTML(n)}else{n=e.outerHTML;"table"!=e.nodeName.toLowerCase()&&"code"!=e.nodeName.toLowerCase()&&"div"!=e.nodeName.toLowerCase()||(n="<br>"+e.outerHTML+"<br>"),i.pasteHTML(n)}i.collapse(!1),i.select()}},surroundSelection:function(e){var t=this.selection||this.getSelection();if(this.window.getSelection){var i=(n=this.range||this.getRange()).extractContents();e.appendChild(i),n.insertNode(e),n.collapse(!0),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),t.collapseToEnd()}else if(this.document.selection){var n=this.range||this.getRange();e.innerHTML=n.text,n.pasteHTML(e.outerHTML),n.collapse(!1),n.select()}this.window.focus()},getSelectedText:function(){var e=this.range||this.getRange();return(void 0!==e&&void 0!==e.collapsed?e.collapsed:!(0<e.boundingWidth))?null:this.window.getSelection?f(e.cloneContents()).text():e.text},getSelection:function(){var e;return this.window.getSelection?e=this.window.getSelection():this.document.selection&&(e=this.document.selection),e&&(this.selection=e),this.selection},getRange:function(e){var t;return e||(e=this.getSelection()),e.getRangeAt?0==e.rangeCount?((t=this.document.createRange()).setStart(this.document.body,0),t.setEnd(this.document.body,0),e.addRange(t)):t=e.getRangeAt(0):t=e.createRange(),t&&(this.range=t),this.range},updateControlStates:function(){f(".button.state-active",this.parent.controlsContainer).removeClass("state-active");var e=this.range?this.range:this.getRange();if(void 0!==e.commonAncestorContainer||void 0!==e.parentElement){var t=e.commonAncestorContainer?e.commonAncestorContainer:e.parentElement();if(null!==t){this.parent._correctRange(e);for(var i="";t&&"body"!=t.nodeName.toLowerCase();){var n=t.nodeName.toLowerCase();if(void 0!==this.parent.tagCommandAlias[n])if("object"==typeof this.parent.tagCommandAlias[n]){var a={},o=t.attributes.length;for(d=0;d<o;++d)if(a[t.attributes[d].name]=t.attributes[d].value,"style"==t.attributes[d].name&&-1!=t.attributes[d].value.indexOf("text-align")){var r=t.attributes[d].value.substr(12);a.align=r.slice(0,r.length-1)}var s=this.parent.tagCommandAlias[n];o=s.length;e:for(d=0;d<o;++d)if(void 0!==s[d].attrs){var l=!0;t:for(var c in s[d].attrs){if("align"==c&&""!=i){l=!1;break t}if(void 0===s[d].attrs[c]||void 0===a[c]||s[d].attrs[c]!=a[c]){l=!1;break t}}if(l){-1!=s[d].command.indexOf("justify")&&(i=s[d].command),f(".button-"+s[d].command,this.parent.controlsContainer).addClass("state-active");break e}}else f(".button-"+s[d].command,this.parent.controlsContainer).addClass("state-active")}else f(".button-"+this.parent.tagCommandAlias[n],this.parent.controlsContainer).addClass("state-active");t=t.parentNode}if(void 0!==this.parent.latestCommands)for(var c in this.parent.latestCommands)this.parent.latestCommands[c]?f(".button-"+c,this.parent.controlsContainer).addClass("state-active"):f(".button-"+c,this.parent.controlsContainer).removeClass("state-active");var d,u=["justifyLeft","justifyCenter","justifyRight","justifyFull"];o=u.length;if(""==i)for(var c in this.parent.latestCommands)this.parent.latestCommands[c]&&-1!=c.indexOf("justify")&&(i=c);for(d=0;d<o;++d)u[d]!=i&&(void 0!==this.parent.latestCommands&&delete this.parent.latestCommands[u[d]],f(".button-"+u[d],this.parent.controlsContainer).removeClass("state-active"))}}},plainText:function(e,t,i){var n=this,a=t.createDocumentFragment();return e.each(function(){if(this==i)return!1;3==this.nodeType?a.appendChild(t.createTextNode(this.nodeValue)):f(this).is("br")?a.appendChild(t.createElement("br")):a.appendChild(n.plainText(f(this).contents(),t))}),a},breakText:function(e,t){for(var i=e.split("\n"),n=t.createDocumentFragment(),a=0;a<i.length;a++){var o=i[a];(f.browser.msie||-1!=navigator.userAgent.indexOf("Trident"))&&(o=o.replace("\r",""),parseInt(f.browser.version)<9&&(o=o.replace("\t","&nbsp;&nbsp;&nbsp;&nbsp;"))),n.appendChild(t.createTextNode(o)),a<i.length-1&&n.appendChild(t.createElement("br"))}return n},nodesBetween:function(e,t){for(var i=[],n=e.nextSibling;n&&n!=t;)i.push(n),n=n.nextSibling;return i},log:function(e){this.parent.log(e)}}})}(jQuery),function(s){s.extend(s.ui.wysiwyg.prototype,{_bbcodeEditor:{name:"BBCode",controls:{},controlGroups:[[["fontName","fontSize"],["foreColor","bold","italic","underline","strikethrough","superscript","subscript"]],[["justifyLeft","justifyCenter","justifyRight","justifyFull","insertTable","insertUnorderedList","insertHorizontalRule"],["createLink","createEmail","insertImage","insertVideo","insertUserLink","insertCode","insertQuote","insertSmiley","insertEmbed"]]],controlShortcuts:{"ctrl+b":"bold","ctrl+i":"italic","ctrl+u":"underline"},commands:{fontName:function(e,t,i,n){e.surroundSelection("font",{face:n},!0)},foreColor:function(e,t,i,n){e.surroundSelection("font",{color:n},!0)},fontSize:function(e,t,i,n){e.surroundSelection("font",{size:n},!0)},bold:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},italic:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},underline:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},strikethrough:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},superscript:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},subscript:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},justifyLeft:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},justifyCenter:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},justifyRight:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},justifyFull:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0)},insertTable:function(r,e,t,i){var s=0,l=0;void 0!==r.textarea.selectionStart&&(s=r.textarea.selectionStart,l=r.textarea.selectionEnd),this._insertTablePrompt(function(e){if(!(parseInt(e.rows,10)<=0||parseInt(e.cols)<=0)){var t;t=0!=e.cellspacing?'[table style="border-collapse: separate; border-spacing: '+e.cellspacing+'px;"][tbody]\n':"[table][tbody]\n";for(var i=0;i<e.rows;i++){t+="[tr]\n";for(var n=0;n<e.cols;n++){var a="";e.border&&(a+="border: 1px solid #000;"),0!=e.cellpadding&&(""!=a&&(a+=" "),a+="padding: "+e.cellpadding+"px;"),t+=""!=a?'[td style="'+a+'"]Row '+(i+1)+" column "+(n+1)+"[/td]\n":"[td]Row "+(i+1)+" column "+(n+1)+"[/td]\n"}t+="[/tr]\n"}t+="[/tbody][/table]\n",0!=l&&(r.textarea.selectionStart=s,r.textarea.selectionEnd=l),r.replaceSelection(t);var o="Row 1 column 1";void 0!==r.textarea.selectionStart?(r.textarea.selectionStart=r.textarea.value.indexOf(o,r.textarea.selectionStart),r.textarea.selectionEnd=r.textarea.selectionStart+o.length,r.textarea.focus()):(r.range.findText(o),r.range.select())}})},insertUnorderedList:function(a,e,t,i){var o="List item 1",r=0,s=0;void 0!==a.textarea.selectionStart?(r=a.textarea.selectionStart,s=a.textarea.selectionEnd,a.textarea.selectionStart!=a.textarea.selectionEnd&&(o=a.textarea.value.substring(a.textarea.selectionStart,a.textarea.selectionEnd))):a.selection&&(""!=a.selection.createRange().text?o=a.selection.createRange().text:a.getRange()),this._insertListPrompt(function(e){if(0!=e.count){var t,i="\n["+(t="disc"==e.list_type||"circle"==e.list_type||"square"==e.list_type?"ul":"ol")+' type="'+e.list_type+'"]\n';i+="[li]"+o+"[/li]\n";for(var n=1;n<e.count;++n)i+="[li]List item "+(n+1)+"[/li]\n";i+="[/"+t+"]",0!=s&&(a.textarea.selectionStart=r,a.textarea.selectionEnd=s),a.replaceSelection(i),void 0!==a.textarea.selectionStart?(a.textarea.selectionStart=a.textarea.value.indexOf(o,a.textarea.selectionStart),a.textarea.selectionEnd=a.textarea.selectionStart+o.length,a.textarea.focus()):(a.range.findText(o),a.range.select())}else a.selection?a.range.select():(a.textarea.selectionStart=a.textarea.selectionEnd,a.textarea.focus())})},insertHorizontalRule:function(e,t,i,n){e.replaceSelection("[hr]"),void 0!==e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},createLink:function(i,e,t,n){var a=!0,o=0,r=0;void 0!==i.textarea.selectionStart?(a=i.textarea.selectionStart==i.textarea.selectionEnd,o=i.textarea.selectionStart,r=i.textarea.selectionEnd):a=!i.range||!(0<i.range.boundingWidth),this._createLinkPrompt(a,function(e){if(0!=r&&(i.textarea.selectionStart=o,i.textarea.selectionEnd=r),void 0!==e.text){var t='[a href="'+e.href+'"]'+e.text+"[/a]";i.replaceSelection(t)}else i.surroundSelection("a",{href:e.href}),void 0===i.textarea.selectionStart&&(i.range.collapse(!1),i.range.move("character",4));void 0!==i.textarea.selectionStart?i.textarea.selectionStart=i.textarea.selectionEnd:(i.range.collapse(!1),i.range.select())})},createEmail:function(i,e,t,n){var a=!0,o=0,r=0;void 0!==i.textarea.selectionStart?(a=i.textarea.selectionStart==i.textarea.selectionEnd,o=i.textarea.selectionStart,r=i.textarea.selectionEnd):a=!i.range||!(0<i.range.boundingWidth),this._createEmailPrompt(a,function(e){if(0!=r&&(i.textarea.selectionStart=o,i.textarea.selectionEnd=r),void 0!==e.text){var t='[a href="mailto:'+e.email+'"]'+e.text+"[/a]";i.replaceSelection(t)}else i.surroundSelection("a",{href:"mailto:"+e.email}),void 0===i.textarea.selectionStart&&(i.range.collapse(!1),i.range.move("character",4));void 0!==i.textarea.selectionStart?i.textarea.selectionStart=i.textarea.selectionEnd:(i.range.collapse(!1),i.range.select())})},insertImage:function(i,e,t,n){var a=0,o=0;void 0!==i.textarea.selectionStart&&(a=i.textarea.selectionStart,o=i.textarea.selectionEnd),this._insertImagePrompt(function(e){0!=o&&(i.textarea.selectionStart=a,i.textarea.selectionEnd=o),-1==e.src.indexOf(":")&&(e.src="http://"+e.src),""==e.alt&&(e.alt=" ");var t='[img src="'+e.src+'" alt="'+e.alt+'"]';i.replaceSelection(t),void 0!==i.textarea.selectionStart?i.textarea.selectionStart=i.textarea.selectionEnd:(i.range.collapse(!1),i.range.select())})},insertVideo:function(n,e,t,i){var a=0,o=0;void 0!==n.textarea.selectionStart&&(a=n.textarea.selectionStart,o=n.textarea.selectionEnd),this._insertVideoPrompt(function(e){0!=o&&(n.textarea.selectionStart=a,n.textarea.selectionEnd=o);var t="";"default"==e.size||"small"!=e.size&&"medium"!=e.size&&"large"!=e.size||(t+=' size="'+e.size+'"');var i="[video"+t+"]"+e.url+"[/video]";n.replaceSelection(i),void 0!==n.textarea.selectionStart?n.textarea.selectionStart=n.textarea.selectionEnd:(n.range.collapse(!1),n.range.select())})},insertUserLink:function(e,t,i,n){var a="@"+n.username;e.replaceSelection(a),void 0!==e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},insertCode:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0,"insert code here")},insertQuote:function(e,t,i,n){var a=this._getControl(t);e.surroundSelection(a.tag,a.attrs,!0,"insert quote here")},insertSmiley:function(e,t,i,n){var a=" "+n.symbol;e.replaceSelection(a),void 0!==e.textarea.selectionStart?(e.textarea.selectionStart=e.textarea.selectionEnd,-1<navigator.userAgent.toLowerCase().indexOf("msie")&&e.range.collapse(!1)):(e.range.collapse(!1),e.range.select())},insertEmbed:function(e,t,i,n){this._insertEmbedPrompt(e,s(i.item))},addAttachment:function(e,t,i,n){var a="";a=-1==n.thumbnail.indexOf("/uploader/no-preview.png")&&n.thumbnail?'[attachment id="'+n.id+'" thumbnail="1"]':'[attachment id="'+n.id+'"]',e.replaceSelection(a),void 0!==e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},removeAttachment:function(e,t,i,n){this.setContent(this.getContent().replace(new RegExp('\\[attachment id="'+n.id+'".*?\\]',"g"),""))},removeAttachments:function(e,t,i,n){this.setContent(this.getContent().replace(new RegExp("\\[attachment.+?\\]","g"),""))}},build:function(e,t){var i=this;this.parent=e;var n=s('<textarea style="width: 100%; border: 0; padding: 0;"></textarea>').height(t.height()).appendTo(t);this.container=t,this.textarea=n[0],this.resizable=this.textarea,this.editable=this.textarea,this.bindable=this.textarea,s.browser.msie&&parseInt(s.browser.version)<10&&s(this.textarea).bind("keyup.wysiwyg mouseup.wysiwyg",function(){i.getRange()})},getContent:function(){return this.textarea.value},setContent:function(e){this.textarea.value=e},surroundSelection:function(e,t,i,n){var a,o;if(void 0===n&&(n=""),a="["+e,t)for(var r in t)a+=" "+r+'="'+t[r]+'"';if(a+="]",o="[/"+e+"]",void 0!==this.textarea.selectionStart){this.textarea.scrollTop;var s=this.textarea.value.substr(0,this.textarea.selectionStart),l=this.textarea.value.substr(this.textarea.selectionEnd,this.textarea.value.length-this.textarea.selectionEnd),c=this.textarea.value.substr(this.textarea.selectionStart,this.textarea.selectionEnd-this.textarea.selectionStart);""==c&&(c=n),this.textarea.value=s+a+c+o+l,this.textarea.focus(),i?(this.textarea.selectionStart=s.length+a.length,this.textarea.selectionEnd=this.textarea.selectionStart+c.length):(this.textarea.selectionStart=s.length,this.textarea.selectionEnd=this.textarea.selectionStart+a.length+c.length+o.length)}else{var d=this.range||this.getRange(),u=d.text;""==u&&(u=n),""==u&&(u=this.textarea.innerText,this.textarea.value=""),d.text=a+u+o,""!=u?d.findText(u,-1*u.length):(d.moveStart("character",-1*o.length),d.moveEnd("character",-1*o.length)),d.select()}},replaceSelection:function(e){s(this.textarea).replaceSelection(e),s(this.textarea).focus()},getSelectedText:function(){this.textarea.focus();var e=this.getRange();return"w3c"==rangeType?this.textarea.selectionStart==this.textarea.selectionEnd?null:this.textarea.value.substr(this.textarea.selectionStart,this.textarea.selectionEnd-this.textarea.selectionStart):0==e.compareEndPoints("StartToEnd",e)?null:e.text},getSelection:function(){return this.selection="w3c"==rangeType?window.getSelection():document.selection,this.selection},getRange:function(e){if(e||(e=this.getSelection()),e){if("w3c"==rangeType){if(0==e.rangeCount){var t=document.createRange();t.setStart(document.body,0),t.setEnd(document.body,0),e.addRange(t)}this.range=e.getRangeAt(0)}else this.range=e.createRange();return this.range}},log:function(e){this.parent.log(e)}},html2bbcode:function(t,i){var n=this,a="";if(i||(i={}),void 0!==this.html&&void 0!==this.html[t])a=this.html[t],"function"==typeof i.success&&i.success.call(n,a),"function"==typeof i.complete&&i.complete.call(n);else{void 0===this.html&&(this.html=new Array);var o={};s(".template-download").each(function(e){var t=s(this).find("input"),i=s(this).find(".preview img");o[t.val()]={id:t.val(),thumbnail_url:i.attr("src")}}),this.startLoading(),t=proboards.validateUnicode(t),proboards.ajax({url:proboards.route("filter_html2bbcode"),data:{html:t,attachments:JSON.stringify(o)},dataType:"json",success:function(e){a=e.bbcode,n.html[t]=e.bbcode,"function"==typeof i.success&&i.success.call(n,a)},error:function(){throw"function"==typeof i.error&&i.error.call(n),"There was an error while trying to load the BBCode editor."},complete:function(){n.stopLoading(),"function"==typeof i.complete&&i.complete.call(n)}})}return a},bbcode2html:function(t,i){var n=this,a="",o=parseInt(n.$nosmiles.val());if(i||(i={}),void 0!==this.bbcode&&void 0!==this.bbcode[t]&&void 0!==this.bbcode[t][o])a=this.bbcode[t][o],"function"==typeof i.success&&i.success.call(n,a),"function"==typeof i.complete&&i.complete.call(n);else{void 0===this.bbcode&&(this.bbcode={});var r={};s(".template-download").each(function(e){var t=s(this).find("input"),i=s(this).find(".preview img"),n=s(this).find(".name span"),a=s(this).find(".size");r[t.val()]={id:t.val(),thumbnail_url:i.attr("src"),file_name:s.trim(n.text()),file_size:s.trim(a.text())}}),this.startLoading(),t=proboards.validateUnicode(t),proboards.ajax({url:proboards.route("filter_bbcode2html"),data:{bbcode:t,nosmiles:o,attachments:JSON.stringify(r)},dataType:"json",success:function(e){a=e.html,void 0===n.bbcode[t]&&(n.bbcode[t]={}),n.bbcode[t][o]=e.html,"function"==typeof i.success&&i.success.call(n,a)},error:function(){throw"function"==typeof i.error&&i.error.call(n),"There was an error while trying to load the Preview Editor."},complete:function(){n.stopLoading(),"function"==typeof i.complete&&i.complete.call(n)}})}return a},html2bbcode2html:function(t,i){var n=this,a="",o=parseInt(n.$nosmiles.val());return i||(i={}),void 0!==this.bbcode&&void 0!==this.bbcode[t]&&void 0!==this.bbcode[t][o]?(a=this.bbcode[t][o],"function"==typeof i.success&&i.success.call(n,a)):(void 0===this.bbcode&&(this.bbcode={}),this.startLoading(),t=proboards.validateUnicode(t),proboards.ajax({url:proboards.route("filter_html2bbcode2html"),data:{html:t,nosmiles:o},dataType:"json",success:function(e){a=e.html,void 0===n.bbcode[t]&&(n.bbcode[t]={}),n.bbcode[t][o]=e.html,"function"==typeof i.success&&i.success.call(n,a)},error:function(){throw"There was an error while trying to manipulate content."},complete:function(){n.stopLoading()}})),a}})}(jQuery),function(o){o.extend(o.ui.wysiwyg.prototype._visualEditor,{checkAtStart:function(){if(window.getSelection){var e=(i=this.getRange()).startContainer,t=this.getSelection();if("#text"==e.nodeName&&(e=e.parentNode),t.rangeCount)return(a=(n=t.getRangeAt(0)).cloneRange()).selectNodeContents(e),a.setEnd(n.startContainer,n.startOffset),""==a.toString()}else if(document.selection){var i,n,a;e=(i=this.getRange()).parentElement();return(a=(n=i).duplicate()).moveToElementText(e),a.setEndPoint("EndToStart",n),""==a.text}return!1},shiftADiv:function(){var e=this.getRange(),t=this.document.createElement("br"),i=".quote, code";if(window.getSelection&&this.checkAtStart()){var n=e.commonAncestorContainer;if((a=o(n).parents(i)).length)return a.eq(0).before(t),!0}else if(document.selection&&this.checkAtStart()){n=e.parentElement();var a=o(n);if(o(n).is(i)||(a=o(n).parents(i)),a.length)return a.eq(0).before(t),!0}return!1}})}(jQuery);var BlockFix={init:function(e){$(e.window.document).bind("click mouseup"+($.browser.opera?" keypress":" keydown"),{window:e.window,selector:e.selector},BlockFix.handler)},keepClean:function(e){var t=e.data;e.which||e.keyCode,e.type;setTimeout(function(){var e=new proboards.genericSelection(t.window);if(!$(e.container()).is(t.selection.container)||e.offset()!=t.selection.offset){try{$(t.node).text().length||$(t.node).remove()}catch(e){}$(t.bind).unbind("keydown click mouseup",t.handler)}},10)},handler:function(e){var t=new proboards.genericSelection(e.data.window),i=$(t.startContainer()).closest(e.data.selector);if("click"==e.type&&t.collapsed()){if(i.length){var n=t.offset();0!=n&&n!=i.text().length&&(t.selectNode(i.get(0)),e.preventDefault())}}else if("mouseup"!=e.type||t.collapsed()){if("keydown"==e.type||"keypress"==e.type){var a=e.which||e.keyCode;$.browser.opera&&"keypress"==e.type&&e.which==e.keyCode&&97<=a&&a<=122&&(a-=32);var o=Keys.modifies_text(a);if(i.length&&o&&a!=Keys.del&&a!=Keys.backspace){t.collapsed()||t.remove();var r=t.offset()?"after":"before",s=document.createTextNode("_");if(i[r](s),"after"==r){var l=document.createTextNode("_");i[r](l);var c=function(){1==l.nodeValue.length?$(l).remove():l.nodeValue=l.nodeValue.substr(1),32===a&&t.move(1,"start",!0),$(this).unbind("keyup keydown",c)};$.browser.safari&&-1==navigator.userAgent.toLowerCase().indexOf("chrome")?$(this).bind("keyup keydown",c):setTimeout(c,1)}t.selectNode(s);var d=function(e){BlockFix.keepClean(e)};return void $(this).bind("keydown click mouseup",{node:s,handler:d,bind:this,window:e.data.window,selection:{offset:t.offset(),container:t.container()}},d)}r="none";a==Keys.right||a==Keys.del?r="right":a!=Keys.left&&a!=Keys.backspace||(r="left");var u=a==Keys.backspace||a==Keys.del;if("none"==r||u&&!t.collapsed())i.length&&o&&i.remove();else{var p="left"==r?"start":"end",h=t.move("left"==r?-1:1,p,!1),f=t[p+"Container"](h),m=$(f).closest(e.data.selector);if(m.length){s=document.createTextNode("");m["right"!=r||u?"before":"after"](s),t.selectNode(s),u&&m.remove();d=function(e){BlockFix.keepClean(e)};return $(this).bind("keydown click mouseup",{node:s,handler:d,bind:this,window:e.data.window,selection:{offset:t.offset(),container:t.container()}},d),e.preventDefault(),!1}}}}else{var g,v=$(t.startContainer()).closest(e.data.selector),b=$(t.endContainer()).closest(e.data.selector);if(!v.length&&!b.length)return;if(e.preventDefault(),v.length&&(g=t.selectNode(v.get(0),"start")),b.length&&(g=t.selectNode(b.get(0),"end")),$.browser.opera)return void setTimeout(function(){g.apply()},1)}}};function reverse(e){return e.toString().split("").reverse().join("")}function interpret_iframe_transport(t,i){if(null!=i.dataType&&i.dataType.match(/iframe/)){var n=i.result[0].body.innerText;try{i.result=$.parseJSON(n,{throwError:!0})}catch(e){return t.responseText=JSON.stringify({error:n}),i.error(t,i),!1}}return!0}function check_control_bar(){var e=$("#wrapper").width(),t=$("#content .control-bar"),i=$(t).find(".ui-pagination").width(),n=$(t).find(".controls").width(),a=$(t).find(".ui-search").width();0<i&&0<n&&0<a&&e<i+n+a&&$(t).addClass("center")}function check_control_bar_ie(){var e=$("#content .control-bar");27<$(e).find(".ui-pagination").height()&&($(e).find(".controls").after('<br class="clear" />'),$(e).addClass("center"))}!function($){var forum_format_regex=/^[a-z0-9\-]+$/,email_format_regex=/^[A-Za-z0-9\_\-\.\+]+\@[A-Za-z0-9\-\_]+\.[A-Za-z0-9\-\.]+$/,date_format_regexp=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/,length_regexp=/^length\s+([^\s]+)\s+(.*)/;$.validate=function(type,value){var options={};if(length_regexp.test(type)){var matches=length_regexp.exec(type);options.operator=matches[1],options.value=matches[2],type="length"}var func_name="validate_"+type;return"function"!=eval("typeof "+func_name)||eval(func_name+".call(this, value, options)");function validate_length(e,t){return"=="==t.operator&&e.length==t.value||(">="==t.operator&&e.length>=t.value||(">"==t.operator&&e.length>t.value||("<="==t.operator&&e.length<=t.value||("<"==t.operator&&e.length<t.value||"!="==t.operator&&e.length!=t.value))))}function validate_forum_format(e,t){return!!forum_format_regex.test(e)}function validate_email_format(e,t){return!!email_format_regex.test(e)}function validate_date(e,t){var i=date_format_regexp.exec(e);if(!function(e,t,i){function n(e,t){var i,n=[31,28,31,30,31,30,31,31,30,31,30,31][t-1];return 2==t&&((i=e)%400==0||i%100!=0&&i%4==0)&&n++,n}if(t<1||12<t)return!1;var n=n(e,t);return!(i<1||n<i)}(i[1],i[2],i[3]))return!1}function validate_date_format(e,t){return!!date_format_regexp.test(e)}}}(jQuery),window.Modernizr=function(n,d,r){function i(e){m.cssText=e}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var i in e){var n=e[i];if(!a(n,"-")&&m[n]!==r)return"pfx"!=t||n}return!1}function e(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+y.join(n+" ")+n).split(" ");return o(t,"string")||o(t,"undefined")?s(a,t):function(e,t,i){for(var n in e){var a=t[e[n]];if(a!==r)return!1===i?e[n]:o(a,"function")?a.bind(i||t):a}return!1}(a=(e+" "+A.join(n+" ")+n).split(" "),t,i)}var t,l,c,u={},p=d.documentElement,h="modernizr",f=d.createElement(h),m=f.style,g=d.createElement("input"),v=":)",b=" -webkit- -moz- -o- -ms- ".split(" "),_="Webkit Moz O ms",y=_.split(" "),A=_.toLowerCase().split(" "),w={},x={},k={},$=[],C=$.slice,S=function(e,t,i,n){var a,o,r,s=d.createElement("div"),l=d.body,c=l||d.createElement("body");if(parseInt(i,10))for(;i--;)(r=d.createElement("div")).id=n?n[i]:h+(i+1),s.appendChild(r);return a=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),s.id=h,(l?s:c).innerHTML+=a,c.appendChild(s),l||(c.style.background="",p.appendChild(c)),o=t(s,e),l?s.parentNode.removeChild(s):c.parentNode.removeChild(c),!!o},T=(c={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(e,t){t=t||d.createElement(c[e]||"div");var i=(e="on"+e)in t;return i||(t.setAttribute||(t=d.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i=o(t[e],"function"),o(t[e],"undefined")||(t[e]=r),t.removeAttribute(e))),t=null,i}),D={}.hasOwnProperty;for(var E in l=o(D,"undefined")||o(D.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return D.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(n){var a=this;if("function"!=typeof a)throw new TypeError;var o=C.call(arguments,1),r=function(){if(this instanceof r){var e=function(){};e.prototype=a.prototype;var t=new e,i=a.apply(t,o.concat(C.call(arguments)));return Object(i)===i?i:t}return a.apply(n,o.concat(C.call(arguments)))};return r}),w.flexbox=function(){return e("flexWrap")},w.postmessage=function(){return!!n.postMessage},w.indexedDB=function(){return!!e("indexedDB",n)},w.hashchange=function(){return T("hashchange",n)&&(d.documentMode===r||7<d.documentMode)},w.history=function(){return!!n.history&&!!history.pushState},w.draganddrop=function(){var e=d.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},w.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),a(m.backgroundColor,"rgba")},w.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),a(m.backgroundColor,"rgba")||a(m.backgroundColor,"hsla")},w.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},w.backgroundsize=function(){return e("backgroundSize")},w.borderimage=function(){return e("borderImage")},w.borderradius=function(){return e("borderRadius")},w.boxshadow=function(){return e("boxShadow")},w.textshadow=function(){return""===d.createElement("div").style.textShadow},w.opacity=function(){return e="opacity:.55",i(b.join(e+";")+(t||"")),/^0.55$/.test(m.opacity);var e,t},w.cssanimations=function(){return e("animationName")},w.csscolumns=function(){return e("columnCount")},w.cssgradients=function(){var e="background-image:";return i((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+b.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),a(m.backgroundImage,"gradient")},w.cssreflections=function(){return e("boxReflect")},w.csstransforms=function(){return!!e("transform")},w.csstransforms3d=function(){var i=!!e("perspective");return i&&"webkitPerspective"in p.style&&S("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e,t){i=9===e.offsetLeft&&3===e.offsetHeight}),i},w.csstransitions=function(){return e("transition")},w.fontface=function(){var o;return S('@font-face {font-family:"font";src:url("https://")}',function(e,t){var i=d.getElementById("smodernizr"),n=i.sheet||i.styleSheet,a=n?n.cssRules&&n.cssRules[0]?n.cssRules[0].cssText:n.cssText||"":"";o=/src/i.test(a)&&0===a.indexOf(t.split(" ")[0])}),o},w.generatedcontent=function(){var t;return S(['#modernizr:after{content:"',v,'";visibility:hidden}'].join(""),function(e){t=1<=e.offsetHeight}),t},w.video=function(){var e=d.createElement("video"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return t},w.audio=function(){var e=d.createElement("audio"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return t},w.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(e){return!1}},w.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(e){return!1}},w.applicationcache=function(){return!!n.applicationCache},w)l(w,E)&&(t=E.toLowerCase(),u[t]=w[E](),$.push((u[t]?"":"no-")+t));return u.input||(u.input=function(e){for(var t=0,i=e.length;t<i;t++)k[e[t]]=e[t]in g;return k.list&&(k.list=!!d.createElement("datalist")&&!!n.HTMLDataListElement),k}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),u.inputtypes=function(e){for(var t,i,n,a=0,o=e.length;a<o;a++)g.setAttribute("type",i=e[a]),(t="text"!==g.type)&&(g.value=v,g.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&g.style.WebkitAppearance!==r?(p.appendChild(g),t=(n=d.defaultView).getComputedStyle&&"textfield"!==n.getComputedStyle(g,null).WebkitAppearance&&0!==g.offsetHeight,p.removeChild(g)):/^(search|tel)$/.test(i)||(t=/^(url|email)$/.test(i)?g.checkValidity&&!1===g.checkValidity():g.value!=v)),x[e[a]]=!!t;return x}("search tel url email datetime date month week time datetime-local number range color".split(" "))),u.addTest=function(e,t){if("object"==typeof e)for(var i in e)l(e,i)&&u.addTest(i,e[i]);else{if(e=e.toLowerCase(),u[e]!==r)return u;t="function"==typeof t?t():t,p.className+=" "+(t?"":"no-")+e,u[e]=t}return u},i(""),f=g=null,function(e,l){function c(){var e=f.elements;return"string"==typeof e?e.split(" "):e}function d(e){var t=s[e[n]];return t||(t={},r++,e[n]=r,s[r]=t),t}function u(e,t,i){return t||(t=l),h?t.createElement(e):(i||(i=d(t)),(n=i.cache[e]?i.cache[e].cloneNode():o.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e)).canHaveChildren&&!a.test(e)?i.frag.appendChild(n):n);var n}function t(e){e||(e=l);var t,i,n,a,o,r,s=d(e);return f.shivCSS&&!p&&!s.hasCSS&&(s.hasCSS=(a="article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}",o=(n=e).createElement("p"),r=n.getElementsByTagName("head")[0]||n.documentElement,o.innerHTML="x<style>"+a+"</style>",!!r.insertBefore(o.lastChild,r.firstChild))),h||(t=e,(i=s).cache||(i.cache={},i.createElem=t.createElement,i.createFrag=t.createDocumentFragment,i.frag=i.createFrag()),t.createElement=function(e){return f.shivMethods?u(e,t,i):i.createElem(e)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return i.createElem(e),i.frag.createElement(e),'c("'+e+'")'})+");return n}")(f,i.frag)),e}var p,h,i=e.html5||{},a=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,n="_html5shiv",r=0,s={};!function(){try{var e=l.createElement("a");e.innerHTML="<xyz></xyz>",p="hidden"in e,h=1==e.childNodes.length||function(){l.createElement("a");var e=l.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){h=p=!0}}();var f={elements:i.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==i.shivCSS,supportsUnknownElements:h,shivMethods:!1!==i.shivMethods,type:"default",shivDocument:t,createElement:u,createDocumentFragment:function(e,t){if(e||(e=l),h)return e.createDocumentFragment();for(var i=(t=t||d(e)).frag.cloneNode(),n=0,a=c(),o=a.length;n<o;n++)i.createElement(a[n]);return i}};e.html5=f,t(l)}(this,d),u._version="2.6.1",u._prefixes=b,u._domPrefixes=A,u._cssomPrefixes=y,u.mq=function(e){var t,i=n.matchMedia||n.msMatchMedia;return i?i(e).matches:(S("@media "+e+" { #"+h+" { position: absolute; } }",function(e){t="absolute"==(n.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),t)},u.hasEvent=T,u.testProp=function(e){return s([e])},u.testAllProps=e,u.testStyles=S,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+$.join(" "),u}(this,this.document),function(e,p,t){function u(e){return"[object Function]"==o.call(e)}function h(e){return"string"==typeof e}function f(){}function m(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function g(){var e=y.shift();A=1,e?e.t?b(function(){("c"==e.t?v.injectCss:v.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),g()):A=0}function i(e,t,i,n,a){return A=0,t=t||"j",h(e)?function(i,n,e,t,a,o,r){function s(e){if(!c&&m(l.readyState)&&(u.r=c=1,!A&&g(),l.onload=l.onreadystatechange=null,e))for(var t in"img"!=i&&b(function(){x.removeChild(l)},50),C[n])C[n].hasOwnProperty(t)&&C[n][t].onload()}r=r||v.errorTimeout;var l=p.createElement(i),c=0,d=0,u={t:e,s:n,e:a,a:o,x:r};1===C[n]&&(d=1,C[n]=[]),"object"==i?l.data=n:(l.src=n,l.type=i),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){s.call(this,d)},y.splice(t,0,u),"img"!=i&&(d||2===C[n]?(x.insertBefore(l,w?null:_),b(s,r)):C[n].push(l))}("c"==t?c:l,e,t,this.i++,i,n,a):(y.splice(this.i++,0,e),1==y.length&&g()),this}function s(){var e=v;return e.loader={load:i,i:0},e}var n,v,a=p.documentElement,b=e.setTimeout,_=p.getElementsByTagName("script")[0],o={}.toString,y=[],A=0,r="MozAppearance"in a.style,w=r&&!!p.createRange().compareNode,x=w?a:_.parentNode,l=(a=e.opera&&"[object Opera]"==o.call(e.opera),a=!!p.attachEvent&&!a,r?"object":a?"script":"img"),c=a?"script":l,k=Array.isArray||function(e){return"[object Array]"==o.call(e)},$=[],C={},S={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};(v=function(e){function d(e,t,i,n,a){var o=function(e){e=e.split("!");var t,i,n,a=$.length,o=e.pop(),r=e.length;for(o={url:o,origUrl:o,prefixes:e},i=0;i<r;i++)n=e[i].split("="),(t=S[n.shift()])&&(o=t(o,n));for(i=0;i<a;i++)o=$[i](o);return o}(e),r=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(t&&(t=u(t)?t:t[e]||t[n]||t[e.split("/").pop().split("?")[0]]),o.instead?o.instead(e,t,i,n,a):(C[o.url]?o.noexec=!0:C[o.url]=1,i.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":void 0,o.noexec,o.attrs,o.timeout),(u(t)||u(r))&&i.load(function(){s(),t&&t(o.origUrl,a,n),r&&r(o.origUrl,a,n),C[o.url]=2})))}function t(e,t){function i(i,e){if(i){if(h(i))e||(s=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),d(i,s,t,0,o);else if(Object(i)===i)for(a in n=function(){var e,t=0;for(e in i)i.hasOwnProperty(e)&&t++;return t}(),i)i.hasOwnProperty(a)&&(!e&&!--n&&(u(s)?s=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:s[a]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),c()}}(l[a])),d(i[a],s,t,a,o))}else!e&&c()}var n,a,o=!!e.test,r=e.load||e.both,s=e.callback||f,l=s,c=e.complete||f;i(o?e.yep:e.nope,!!r),r&&i(r)}var i,n,a=this.yepnope.loader;if(h(e))d(e,0,a,0);else if(k(e))for(i=0;i<e.length;i++)h(n=e[i])?d(n,0,a,0):k(n)?v(n):Object(n)===n&&t(n,a);else Object(e)===e&&t(e,a)}).addPrefix=function(e,t){S[e]=t},v.addFilter=function(e){$.push(e)},v.errorTimeout=1e4,null==p.readyState&&p.addEventListener&&(p.readyState="loading",p.addEventListener("DOMContentLoaded",n=function(){p.removeEventListener("DOMContentLoaded",n,0),p.readyState="complete"},0)),e.yepnope=s(),e.yepnope.executeStack=g,e.yepnope.injectJs=function(e,t,i,n,a,o){var r,s,l=p.createElement("script");n=n||v.errorTimeout;for(s in l.src=e,i)l.setAttribute(s,i[s]);t=o?g:t||f,l.onreadystatechange=l.onload=function(){!r&&m(l.readyState)&&(r=1,t(),l.onload=l.onreadystatechange=null)},b(function(){r||t(r=1)},n),a?l.onload():_.parentNode.insertBefore(l,_)},e.yepnope.injectCss=function(e,t,i,n,a,o){var r;n=p.createElement("link"),t=o?g:t||f;for(r in n.href=e,n.rel="stylesheet",n.type="text/css",i)n.setAttribute(r,i[r]);a||(_.parentNode.insertBefore(n,_),b(t,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(p,h,e){"use strict";function t(){if(!("scrollBehavior"in h.documentElement.style)){var e=p.HTMLElement||p.Element,r=468,l={scroll:p.scroll||p.scrollTo,scrollBy:p.scrollBy,elScroll:e.prototype.scroll||d,scrollIntoView:e.prototype.scrollIntoView},c=p.performance&&p.performance.now?p.performance.now.bind(p.performance):Date.now;p.scroll=p.scrollTo=function(){n(arguments[0])?l.scroll.call(p,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):a.call(p,h.body,~~arguments[0].left,~~arguments[0].top)},p.scrollBy=function(){n(arguments[0])?l.scrollBy.call(p,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):a.call(p,h.body,~~arguments[0].left+(p.scrollX||p.pageXOffset),~~arguments[0].top+(p.scrollY||p.pageYOffset))},e.prototype.scroll=e.prototype.scrollTo=function(){if(n(arguments[0]))l.elScroll.call(this,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);else{var e=arguments[0].left,t=arguments[0].top;a.call(this,this,"number"==typeof e?e:this.scrollLeft,"number"==typeof t?t:this.scrollTop)}},e.prototype.scrollBy=function(){var e=arguments[0];"object"==typeof e?this.scroll({left:e.left+this.scrollLeft,top:e.top+this.scrollTop,behavior:e.behavior}):this.scroll(this.scrollLeft+e,this.scrollTop+arguments[1])},e.prototype.scrollIntoView=function(){if(n(arguments[0]))l.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);else{var e=function(e){for(var t,i,n;t=(e=e.parentNode)===h.body,i=e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth,n="visible"===p.getComputedStyle(e,null).overflow,!t&&(!i||n););return t=i=n=null,e}(this),t=e.getBoundingClientRect(),i=this.getBoundingClientRect();e!==h.body?(a.call(this,e,e.scrollLeft+i.left-t.left,e.scrollTop+i.top-t.top),p.scrollBy({left:t.left,top:t.top,behavior:"smooth"})):p.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}}function d(e,t){this.scrollLeft=e,this.scrollTop=t}function n(e){if("object"!=typeof e||null===e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior not valid")}function u(e){var t,i,n,a,o=(c()-e.startTime)/r;a=o=1<o?1:o,t=.5*(1-Math.cos(Math.PI*a)),i=e.startX+(e.x-e.startX)*t,n=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,i,n),i===e.x&&n===e.y||p.requestAnimationFrame(u.bind(p,e))}function a(e,t,i){var n,a,o,r,s=c();e===h.body?(a=(n=p).scrollX||p.pageXOffset,o=p.scrollY||p.pageYOffset,r=l.scroll):(a=(n=e).scrollLeft,o=e.scrollTop,r=d),u({scrollable:n,method:r,startTime:s,startX:a,startY:o,x:t,y:i})}}"object"==typeof exports?module.exports={polyfill:t}:t()}(window,document),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";var h=/gecko\/\d/i.test(navigator.userAgent),e=/MSIE \d/.test(navigator.userAgent),t=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),y=e||t,A=y&&(e?document.documentMode||6:t[1]),f=/WebKit\//.test(navigator.userAgent),i=f&&/Qt\/\d+\.\d+/.test(navigator.userAgent),n=/Chrome\//.test(navigator.userAgent),m=/Opera\//.test(navigator.userAgent),l=/Apple Computer/.test(navigator.vendor),a=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),c=/PhantomJS/.test(navigator.userAgent),r=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=r||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),g=r||/Mac/.test(navigator.platform),o=/win/i.test(navigator.platform),s=m&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);s&&(s=Number(s[1])),s&&15<=s&&(f=!(m=!1));var u=g&&(i||m&&(null==s||s<12.11)),p=h||y&&9<=A,v=!1,b=!1;function _(e,t){if(!(this instanceof _))return new _(e,t);this.options=t=t?co(t):{},co(Wi,t,!1),M(t);var i=t.value;"string"==typeof i&&(i=new sa(i,t.mode)),this.doc=i;var n=new _.inputStyles[t.inputStyle](this),a=this.display=new w(e,i,n);D(a.wrapper.CodeMirror=this),S(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!d&&a.input.focus(),L(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Qa,keySeq:null,specialChars:null};var o=this;for(var r in y&&A<11&&setTimeout(function(){o.display.input.reset(!0)},20),function(a){var o=a.display;La(o.scroller,"mousedown",qt(a,ti)),La(o.scroller,"dblclick",y&&A<11?qt(a,function(e){if(!Wa(a,e)){var t=ei(a,e);if(t&&!ni(a,e)&&!Zt(a.display,e)){Ia(e);var i=a.findWordAt(t);je(a.doc,i.anchor,i.head)}}}):function(e){Wa(a,e)||Ia(e)});p||La(o.scroller,"contextmenu",function(e){wi(a,e)});var i,n={end:0};function r(){o.activeTouch&&(i=setTimeout(function(){o.activeTouch=null},1e3),(n=o.activeTouch).end=+new Date)}function s(e,t){if(null==t.left)return!0;var i=t.left-e.left,n=t.top-e.top;return 400<i*i+n*n}La(o.scroller,"touchstart",function(e){if(!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)){clearTimeout(i);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-n.end<=300?n:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}}),La(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),La(o.scroller,"touchend",function(e){var t=o.activeTouch;if(t&&!Zt(o,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var i,n=a.coordsChar(o.activeTouch,"page");i=!t.prev||s(t,t.prev)?new De(n,n):!t.prev.prev||s(t,t.prev.prev)?a.findWordAt(n):new De(de(n.line,0),Me(a.doc,de(n.line+1,0))),a.setSelection(i.anchor,i.head),a.focus(),Ia(e)}r()}),La(o.scroller,"touchcancel",r),La(o.scroller,"scroll",function(){o.scroller.clientHeight&&(ri(a,o.scroller.scrollTop),si(a,o.scroller.scrollLeft,!0),Fa(a,"scroll",a))}),La(o.scroller,"mousewheel",function(e){ui(a,e)}),La(o.scroller,"DOMMouseScroll",function(e){ui(a,e)}),La(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={simple:function(e){Wa(a,e)||Oa(e)},start:function(e){!function(e,t){if(y&&(!e.state.draggingText||+new Date-ai<100))return Oa(t);if(Wa(e,t)||Zt(e.display,t))return;if(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!l){var i=_o("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),m&&i.parentNode.removeChild(i)}}(a,e)},drop:qt(a,oi)};var e=o.input.getField();La(e,"keyup",function(e){bi.call(a,e)}),La(e,"keydown",qt(a,vi)),La(e,"keypress",qt(a,_i)),La(e,"focus",uo(yi,a)),La(e,"blur",uo(Ai,a))}(this),function(){if(Do)return;La(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,To(Qt)},100))}),La(window,"blur",function(){To(Ai)}),Do=!0;var e}(),Ot(this),this.curOp.forceUpdate=!0,ua(this,i),t.autofocus&&!d||o.hasFocus()?setTimeout(uo(yi,this),20):Ai(this),Vi)Vi.hasOwnProperty(r)&&Vi[r](this,t[r],Bi);H(this),t.finishInit&&t.finishInit(this);for(var s=0;s<Gi.length;++s)Gi[s](this);Nt(this),f&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function w(e,t,i){var n=this;this.input=i,n.scrollbarFiller=_o("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=_o("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=_o("div",null,"CodeMirror-code"),n.selectionDiv=_o("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=_o("div",null,"CodeMirror-cursors"),n.measure=_o("div",null,"CodeMirror-measure"),n.lineMeasure=_o("div",null,"CodeMirror-measure"),n.lineSpace=_o("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=_o("div",[_o("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=_o("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=_o("div",null,null,"position: absolute; height: "+Ya+"px; width: 1px;"),n.gutters=_o("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=_o("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=_o("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),y&&A<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),f||h&&d||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function x(e){e.doc.mode=_.getMode(e.options,e.doc.modeOption),k(e)}function k(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Qe(e,100),e.state.modeGen++,e.curOp&&Bt(e)}function $(n){var a=Tt(n.display),o=n.options.lineWrapping,r=o&&Math.max(5,n.display.scroller.clientWidth/Dt(n.display)-3);return function(e){if(Mn(n.doc,e))return 0;var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;i++)e.widgets[i].height&&(t+=e.widgets[i].height);return o?t+(Math.ceil(e.text.length/r)||1)*a:t+a}}function C(e){var t=e.doc,i=$(e);t.iter(function(e){var t=i(e);t!=e.height&&ma(e,t)})}function S(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),vt(e)}function T(e){D(e),Bt(e),setTimeout(function(){q(e)},20)}function D(e){var t=e.display.gutters,i=e.options.gutters;yo(t);for(var n=0;n<i.length;++n){var a=i[n],o=t.appendChild(_o("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",E(e)}function E(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function I(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Sn(n);){n=(a=t.find(0,!0)).from.line,i+=a.from.ch-a.to.ch}for(n=e;t=Tn(n);){var a=t.find(0,!0);i-=n.text.length-a.from.ch,i+=(n=a.to.line).text.length-a.to.ch}return i}function P(e){var i=e.display,t=e.doc;i.maxLine=pa(t,t.first),i.maxLineLength=I(i.maxLine),i.maxLineChanged=!0,t.iter(function(e){var t=I(e);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=e)})}function M(e){var t=oo(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function O(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+it(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+at(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function N(e,t,i){this.cm=i;var n=this.vert=_o("div",[_o("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=_o("div",[_o("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(a),La(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),La(a,"scroll",function(){a.clientWidth&&t(a.scrollLeft,"horizontal")}),this.checkedOverlay=!1,y&&A<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function j(){}function L(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&$o(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new _.scrollbarModel[i.options.scrollbarStyle](function(e){i.display.wrapper.insertBefore(e,i.display.scrollbarFiller),La(e,"mousedown",function(){i.state.focused&&setTimeout(function(){i.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){"horizontal"==t?si(i,e):ri(i,e)},i),i.display.scrollbars.addClass&&Co(i.display.wrapper,i.display.scrollbars.addClass)}function R(e,t){t||(t=O(e));var i=e.display.barWidth,n=e.display.barHeight;F(e,t);for(var a=0;a<4&&i!=e.display.barWidth||n!=e.display.barHeight;a++)i!=e.display.barWidth&&e.options.lineWrapping&&G(e),F(e,O(e)),i=e.display.barWidth,n=e.display.barHeight}function F(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function z(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-tt(e));var a=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,o=va(t,n),r=va(t,a);if(i&&i.ensure){var s=i.ensure.from.line,l=i.ensure.to.line;s<o?r=va(t,ba(pa(t,o=s))+e.wrapper.clientHeight):Math.min(l,t.lastLine())>=r&&(o=va(t,ba(pa(t,l))-e.wrapper.clientHeight),r=l)}return{from:o,to:Math.max(r,o+1)}}function q(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=V(t)-t.scroller.scrollLeft+e.doc.scrollLeft,a=t.gutters.offsetWidth,o=n+"px",r=0;r<i.length;r++)if(!i[r].hidden){e.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=o);var s=i[r].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+a+"px")}}function H(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=W(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var a=n.measure.appendChild(_o("div",[_o("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=a.firstChild.offsetWidth,r=a.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-r)+1,n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",E(e),!0}return!1}function W(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function V(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function U(e,t,i){var n=e.display;this.viewport=t,this.visible=z(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=ot(e),this.force=i,this.dims=Q(e),this.events=[]}function B(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return Kt(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Xt(e))return!1;H(e)&&(Kt(e),t.dims=Q(e));var a=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),r=Math.min(a,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(a,i.viewTo)),b&&(o=In(e.doc,o),r=Pn(e.doc,r));var s=o!=i.viewFrom||r!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;!function(e,t,i){var n=e.display;0==n.view.length||t>=n.viewTo||i<=n.viewFrom?(n.view=Ut(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=Ut(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Jt(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(Ut(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,Jt(e,i))));n.viewTo=i}(e,o,r),i.viewOffset=ba(pa(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=Xt(e);if(!s&&0==l&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=xo();return 4<l&&(i.lineDiv.style.display="none"),function(i,e,t){var n=i.display,a=i.options.lineNumbers,o=n.lineDiv,r=o.firstChild;function s(e){var t=e.nextSibling;return f&&g&&i.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var l=n.view,c=n.viewFrom,d=0;d<l.length;d++){var u=l[d];if(u.hidden);else if(u.node&&u.node.parentNode==o){for(;r!=u.node;)r=s(r);var p=a&&null!=e&&e<=c&&u.lineNumber;u.changes&&(-1<oo(u.changes,"gutter")&&(p=!1),Z(i,u,c,t)),p&&(yo(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(W(i.options,c)))),r=u.node.nextSibling}else{var h=re(i,u,c,t);o.insertBefore(h,r)}c+=u.size}for(;r;)r=s(r)}(e,i.updateLineNumbers,t.dims),4<l&&(i.lineDiv.style.display=""),i.renderedView=i.view,c&&xo()!=c&&c.offsetHeight&&c.focus(),yo(i.cursorDiv),yo(i.selectionDiv),i.gutters.style.height=0,s&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Qe(e,400)),!(i.updateLineNumbers=null)}function Y(e,t){t.force;for(var i=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=ot(e))!0;else if(!1,i&&null!=i.top&&(i={top:Math.min(e.doc.height+it(e.display)-rt(e),i.top)}),t.visible=z(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!B(e,t))break;G(e);var a=O(e);Ye(e),J(e,a),R(e,a)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function K(e,t){var i=new U(e,t);if(B(e,i)){G(e),Y(e,i);var n=O(e);Ye(e),J(e,n),R(e,n),i.finish()}}function J(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var i=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=i+"px",e.display.gutters.style.height=Math.max(i+at(e),t.clientHeight)+"px"}function G(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var a,o=t.view[n];if(!o.hidden){if(y&&A<8){var r=o.node.offsetTop+o.node.offsetHeight;a=r-i,i=r}else{var s=o.node.getBoundingClientRect();a=s.bottom-s.top}var l=o.line.height-a;if(a<2&&(a=Tt(t)),(.001<l||l<-.001)&&(ma(o.line,a),X(o.line),o.rest))for(var c=0;c<o.rest.length;c++)X(o.rest[c])}}}function X(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Q(e){for(var t=e.display,i={},n={},a=t.gutters.clientLeft,o=t.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[e.options.gutters[r]]=o.offsetLeft+o.clientLeft+a,n[e.options.gutters[r]]=o.clientWidth;return{fixedPos:V(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Z(e,t,i,n){for(var a=0;a<t.changes.length;a++){var o=t.changes[a];"text"==o?ie(e,t):"gutter"==o?ae(e,t,i,n):"class"==o?ne(t):"widget"==o&&oe(e,t,n)}t.changes=null}function ee(e){return e.node==e.text&&(e.node=_o("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),y&&A<8&&(e.node.style.zIndex=2)),e.node}function te(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Gn(e,t)}function ie(e,t){var i=t.text.className,n=te(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,ne(t)):i&&(t.text.className=i)}function ne(e){!function(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=ee(e);e.background=i.insertBefore(_o("div",null,t),i.firstChild)}}(e),e.line.wrapClass?ee(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ae(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var o=ee(t),r=t.gutter=_o("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px");if(e.display.input.setUneditable(r),o.insertBefore(r,t.text),t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(_o("div",W(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=a.hasOwnProperty(l)&&a[l];c&&r.appendChild(_o("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function oe(e,t,i){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild;n;n=a){var a=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}se(e,t,i)}function re(e,t,i,n){var a=te(e,t);return t.text=t.node=a.pre,a.bgClass&&(t.bgClass=a.bgClass),a.textClass&&(t.textClass=a.textClass),ne(t),ae(e,t,i,n),se(e,t,n),t.node}function se(e,t,i){if(le(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)le(e,t.rest[n],t,i,!1)}function le(e,t,i,n,a){if(t.widgets)for(var o=ee(i),r=0,s=t.widgets;r<s.length;++r){var l=s[r],c=_o("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),ce(l,c,i,n),e.display.input.setUneditable(c),a&&l.above?o.insertBefore(c,i.gutter||i.text):o.appendChild(c),qa(l,"redraw")}}function ce(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var a=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(a-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=a+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}N.prototype=co({update:function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var a=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+a)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(i?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&0<e.clientHeight&&(0==n&&this.overlayHack(),this.checkedOverlay=!0),{right:i?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=g&&!a?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,i=function(e){Na(e)!=t.vert&&Na(e)!=t.horiz&&qt(t.cm,ti)(e)};La(this.vert,"mousedown",i),La(this.horiz,"mousedown",i)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},N.prototype),j.prototype=co({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},j.prototype),_.scrollbarModel={native:N,null:j},U.prototype.signal=function(e,t){Ua(e,t)&&this.events.push(arguments)},U.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Fa.apply(null,this.events[e])};var de=_.Pos=function(e,t){if(!(this instanceof de))return new de(e,t);this.line=e,this.ch=t},ue=_.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function pe(e){return de(e.line,e.ch)}function he(e,t){return ue(e,t)<0?t:e}function fe(e,t){return ue(e,t)<0?e:t}function me(e){e.state.focused||(e.display.input.focus(),yi(e))}function ge(e){return e.options.readOnly||e.doc.cantEdit}var ve=null;function be(e,t,i,n){var a=e.doc;e.display.shift=!1,n||(n=a.sel);var o=jo(t),r=null;e.state.pasteIncoming&&1<n.ranges.length&&(ve&&ve.join("\n")==t?r=n.ranges.length%ve.length==0&&ro(ve,jo):o.length==n.ranges.length&&(r=ro(o,function(e){return[e]})));for(var s=n.ranges.length-1;0<=s;s--){var l=n.ranges[s],c=l.from(),d=l.to();l.empty()&&(i&&0<i?c=de(c.line,c.ch-i):e.state.overwrite&&!e.state.pasteIncoming&&(d=de(d.line,Math.min(pa(a,d.line).text.length,d.ch+no(o).length))));var u=e.curOp.updateInput,p={from:c,to:d,text:r?r[s%r.length]:o,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(Ti(e.doc,p),qa(e,"inputRead",e,p),t&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&l.head.ch<100&&(!s||n.ranges[s-1].head.line!=l.head.line)){var h=e.getModeAt(l.head),f=xi(p);if(h.electricChars){for(var m=0;m<h.electricChars.length;m++)if(-1<t.indexOf(h.electricChars.charAt(m))){Ri(e,f.line,"smart");break}}else h.electricInput&&h.electricInput.test(pa(a,f.line).text.slice(0,f.ch))&&Ri(e,f.line,"smart")}}ji(e),e.curOp.updateInput=u,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function _e(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var a=e.doc.sel.ranges[n].head.line,o={anchor:de(a,0),head:de(a+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function ye(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function Ae(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Qa,this.inaccurateSelection=!1,this.hasSelection=!1}function we(){var e=_o("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=_o("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return f?e.style.width="1000px":e.setAttribute("wrap","off"),r&&(e.style.border="1px solid black"),ye(e),t}function xe(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Qa,this.gracePeriod=!1}function ke(e,t){var i=ct(e,t.line);if(!i||i.hidden)return null;var n=pa(e.doc,t.line),a=st(i,n,t.line),o=_a(n);o&&Ko(o,t.ch);var r=ft(a.map,t.ch,"left");return r.offset="right"==r.collapse?r.end:r.start,r}function $e(e,t){return t&&(e.bad=!0),e}function Ce(e,t,i){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[i]))return $e(e.clipPos(de(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var a=0;a<e.display.view.length;a++){var o=e.display.view[a];if(o.node==n)return Se(o,t,i)}}function Se(c,e,t){var i=c.text.firstChild,n=!1;if(!e||!wo(i,e))return $e(de(ga(c.line),0),!0);if(e==i&&(n=!0,e=i.childNodes[t],t=0,!e)){var a=c.rest?no(c.rest):c.line;return $e(de(ga(a),a.text.length),n)}var o=3==e.nodeType?e:null,r=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));r.parentNode!=i;)r=r.parentNode;var d=c.measure,u=d.maps;function s(e,t,i){for(var n=-1;n<(u?u.length:0);n++)for(var a=n<0?d.map:u[n],o=0;o<a.length;o+=3){var r=a[o+2];if(r==e||r==t){var s=ga(n<0?c.line:c.rest[n]),l=a[o]+i;return(i<0||r!=e)&&(l=a[o+(i?1:0)]),de(s,l)}}}var l=s(o,r,t);if(l)return $e(l,n);for(var p=r.nextSibling,h=o?o.nodeValue.length-t:0;p;p=p.nextSibling){if(l=s(p,p.firstChild,0))return $e(de(l.line,l.ch-h),n);h+=p.textContent.length}var f=r.previousSibling;for(h=t;f;f=f.previousSibling){if(l=s(f,f.firstChild,-1))return $e(de(l.line,l.ch+h),n);h+=p.textContent.length}}function Te(e,t){this.ranges=e,this.primIndex=t}function De(e,t){this.anchor=e,this.head=t}function Ee(e,t){var i=e[t];e.sort(function(e,t){return ue(e.from(),t.from())}),t=oo(e,i);for(var n=1;n<e.length;n++){var a=e[n],o=e[n-1];if(0<=ue(o.to(),a.from())){var r=fe(o.from(),a.from()),s=he(o.to(),a.to()),l=o.empty()?a.from()==a.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new De(l?s:r,l?r:s))}}return new Te(e,t)}function Ie(e,t){return new Te([new De(e,t||e)],0)}function Pe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Me(e,t){if(t.line<e.first)return de(e.first,0);var i,n,a,o=e.first+e.size-1;return t.line>o?de(o,pa(e,o).text.length):(n=pa(e,(i=t).line).text.length,null==(a=i.ch)||n<a?de(i.line,n):a<0?de(i.line,0):i)}function Oe(e,t){return t>=e.first&&t<e.first+e.size}function Ne(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var a=t.anchor;if(n){var o=ue(i,a)<0;o!=ue(n,a)<0?(a=i,i=n):o!=ue(i,n)<0&&(i=n)}return new De(a,i)}return new De(n||i,i)}function je(e,t,i,n){qe(e,new Te([Ne(e,e.sel.primary(),t,i)],0),n)}function Le(e,t,i){for(var n=[],a=0;a<e.sel.ranges.length;a++)n[a]=Ne(e,e.sel.ranges[a],t[a],null);qe(e,Ee(n,e.sel.primIndex),i)}function Re(e,t,i,n){var a=e.sel.ranges.slice(0);a[t]=i,qe(e,Ee(a,e.sel.primIndex),n)}function Fe(e,t,i,n){qe(e,Ie(t,i),n)}function ze(e,t,i){var n=e.history.done,a=no(n);a&&a.ranges?He(e,n[n.length-1]=t,i):qe(e,t,i)}function qe(e,t,i){He(e,t,i),function(e,t,i,n){var a=e.history,o=n&&n.origin;i==a.lastSelOp||o&&a.lastSelOrigin==o&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==o||(r=e,s=o,l=no(a.done),c=t,d=s.charAt(0),"*"==d||"+"==d&&l.ranges.length==c.ranges.length&&l.somethingSelected()==c.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)))?a.done[a.done.length-1]=t:ka(t,a.done);var r,s,l,c,d;a.lastSelTime=+new Date,a.lastSelOrigin=o,a.lastSelOp=i,n&&!1!==n.clearRedo&&wa(a.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function He(e,t,i){var n,a,o;(Ua(e,"beforeSelectionChange")||e.cm&&Ua(e.cm,"beforeSelectionChange"))&&(n=e,o={ranges:(a=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new De(Me(n,e[t].anchor),Me(n,e[t].head))}},Fa(n,"beforeSelectionChange",n,o),n.cm&&Fa(n.cm,"beforeSelectionChange",n.cm,o),t=o.ranges!=a.ranges?Ee(o.ranges,o.ranges.length-1):a),We(e,Ue(e,t,i&&i.bias||(ue(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||ji(e.cm)}function We(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Va(e.cm)),qa(e,"cursorActivity",e))}function Ve(e){We(e,Ue(e,e.sel,null,!1))}function Ue(e,t,i,n){for(var a,o=0;o<t.ranges.length;o++){var r=t.ranges[o],s=Be(e,r.anchor,i,n),l=Be(e,r.head,i,n);(a||s!=r.anchor||l!=r.head)&&(a||(a=t.ranges.slice(0,o)),a[o]=new De(s,l))}return a?Ee(a,t.primIndex):t}function Be(e,t,i,n){var a=!1,o=t,r=i||1;e.cantEdit=!1;e:for(;;){var s=pa(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(d.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(Fa(d,"beforeCursorEnter"),d.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!d.atomic)continue;var u=d.find(r<0?-1:1);if(0==ue(u,o)&&(u.ch+=r,u.ch<0?u=u.line>e.first?Me(e,de(u.line-1)):null:u.ch>s.text.length&&(u=u.line<e.first+e.size-1?de(u.line+1,0):null),!u)){if(a)return n?(e.cantEdit=!0,de(e.first,0)):Be(e,t,i,!0);a=!0,u=t,r=-r}o=u;continue e}}return o}}function Ye(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ke(e,t){for(var i=e.doc,n={},a=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++)if(!1!==t||r!=i.sel.primIndex){var s=i.sel.ranges[r],l=s.empty();(l||e.options.showCursorWhenSelecting)&&Je(e,s,a),l||Ge(e,s,o)}return n}function Je(e,t,i){var n=xt(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),a=i.appendChild(_o("div","\xa0","CodeMirror-cursor"));if(a.style.left=n.left+"px",a.style.top=n.top+"px",a.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=i.appendChild(_o("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Ge(a,e,t){var i=a.display,o=a.doc,r=document.createDocumentFragment(),n=nt(a.display),f=n.left,m=Math.max(i.sizerWidth,ot(a)-i.sizer.offsetLeft)-n.right;function g(e,t,i,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),r.appendChild(_o("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?m-e:i)+"px; height: "+(n-t)+"px"))}function s(i,l,c){var d,u,n=pa(o,i),p=n.text.length;function h(e,t){return wt(a,de(i,e),"div",n,t)}return function(e,t,i,n){if(!e)return n(t,i,"ltr");for(var a=!1,o=0;o<e.length;++o){var r=e[o];(r.from<i&&r.to>t||t==i&&r.to==t)&&(n(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr"),a=!0)}a||n(t,i,"ltr")}(_a(n),l||0,null==c?p:c,function(e,t,i){var n,a,o,r=h(e,"left");if(e==t)a=o=(n=r).left;else{if(n=h(t-1,"right"),"rtl"==i){var s=r;r=n,n=s}a=r.left,o=n.right}null==l&&0==e&&(a=f),3<n.top-r.top&&(g(a,r.top,null,r.bottom),a=f,r.bottom<n.top&&g(a,r.bottom,null,n.top)),null==c&&t==p&&(o=m),(!d||r.top<d.top||r.top==d.top&&r.left<d.left)&&(d=r),(!u||n.bottom>u.bottom||n.bottom==u.bottom&&n.right>u.right)&&(u=n),a<f+1&&(a=f),g(a,n.top,o-a,n.bottom)}),{start:d,end:u}}var l=e.from(),c=e.to();if(l.line==c.line)s(l.line,l.ch,c.ch);else{var d=pa(o,l.line),u=pa(o,c.line),p=En(d)==En(u),h=s(l.line,l.ch,p?d.text.length+1:null).end,v=s(c.line,p?0:null,c.ch).start;p&&(h.top<v.top-2?(g(h.right,h.top,null,h.bottom),g(f,v.top,v.left,v.bottom)):g(h.right,h.top,v.left-h.right,h.bottom)),h.bottom<v.top&&g(f,h.bottom,null,v.top)}t.appendChild(r)}function Xe(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Qe(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,uo(Ze,e))}function Ze(s){var l=s.doc;if(l.frontier<l.first&&(l.frontier=l.first),!(l.frontier>=s.display.viewTo)){var c=+new Date+s.options.workTime,d=Qi(l.mode,et(s,l.frontier)),u=[];l.iter(l.frontier,Math.min(l.first+l.size,s.display.viewTo+500),function(e){if(l.frontier>=s.display.viewFrom){var t=e.styles,i=Vn(s,e,d,!0);e.styles=i.styles;var n=e.styleClasses,a=i.classes;a?e.styleClasses=a:n&&(e.styleClasses=null);for(var o=!t||t.length!=e.styles.length||n!=a&&(!n||!a||n.bgClass!=a.bgClass||n.textClass!=a.textClass),r=0;!o&&r<t.length;++r)o=t[r]!=e.styles[r];o&&u.push(l.frontier),e.stateAfter=Qi(l.mode,d)}else Bn(s,e.text,d),e.stateAfter=l.frontier%5==0?Qi(l.mode,d):null;if(++l.frontier,+new Date>c)return Qe(s,s.options.workDelay),!0}),u.length&&zt(s,function(){for(var e=0;e<u.length;e++)Yt(s,u[e],"text")})}}function et(i,n,e){var a=i.doc,o=i.display;if(!a.mode.startState)return!0;var r=function(e,t,i){for(var n,a,o=e.doc,r=i?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;r<s;--s){if(s<=o.first)return o.first;var l=pa(o,s-1);if(l.stateAfter&&(!i||s<=o.frontier))return s;var c=Za(l.text,null,e.options.tabSize);(null==a||c<n)&&(a=s-1,n=c)}return a}(i,n,e),s=r>a.first&&pa(a,r-1).stateAfter;return s=s?Qi(a.mode,s):Zi(a.mode),a.iter(r,n,function(e){Bn(i,e.text,s);var t=r==n-1||r%5==0||r>=o.viewFrom&&r<o.viewTo;e.stateAfter=t?Qi(a.mode,s):null,++r}),e&&(a.frontier=r),s}function tt(e){return e.lineSpace.offsetTop}function it(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function nt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Ao(e.measure,_o("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function at(e){return Ya-e.display.nativeBarWidth}function ot(e){return e.display.scroller.clientWidth-at(e)-e.display.barWidth}function rt(e){return e.display.scroller.clientHeight-at(e)-e.display.barHeight}function st(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(n=0;n<e.rest.length;n++)if(ga(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function lt(e,t,i,n){return ut(e,dt(e,t),i,n)}function ct(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Jt(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function dt(e,t){var i=ga(t),n=ct(e,i);n&&!n.text?n=null:n&&n.changes&&Z(e,n,i,Q(e)),n||(n=function(e,t){var i=ga(t=En(t)),n=e.display.externalMeasured=new Vt(e.doc,t,i);n.lineN=i;var a=n.built=Gn(e,n);return n.text=a.pre,Ao(e.display.lineMeasure,a.pre),n}(e,t));var a=st(n,t,i);return{line:t,view:n,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function ut(e,t,i,n,a){t.before&&(i=-1);var o,r=i+(n||"");return t.cache.hasOwnProperty(r)?o=t.cache[r]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,i){var n=e.options.lineWrapping,a=n&&ot(e);if(!t.measure.heights||n&&t.measure.width!=a){var o=t.measure.heights=[];if(n){t.measure.width=a;for(var r=t.text.firstChild.getClientRects(),s=0;s<r.length-1;s++){var l=r[s],c=r[s+1];2<Math.abs(l.bottom-c.bottom)&&o.push((l.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,i,n){var a,o=ft(t.map,i,n),r=o.node,s=o.start,l=o.end,c=o.collapse;if(3==r.nodeType){for(var d=0;d<4;d++){for(;s&&bo(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&bo(t.line.text.charAt(o.coverStart+l));)++l;if(y&&A<9&&0==s&&l==o.coverEnd-o.coverStart)a=r.parentNode.getBoundingClientRect();else if(y&&e.options.lineWrapping){var u=go(r,s,l).getClientRects();a=u.length?u["right"==n?u.length-1:0]:ht}else a=go(r,s,l).getBoundingClientRect()||ht;if(a.left||a.right||0==s)break;l=s,s-=1,c="right"}y&&A<11&&(a=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Fo)return Fo;var t=Ao(e,_o("span","x")),i=t.getBoundingClientRect(),n=go(t,0,1).getBoundingClientRect();return Fo=1<Math.abs(i.left-n.left)}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,a))}else{0<s&&(c=n="right"),a=e.options.lineWrapping&&1<(u=r.getClientRects()).length?u["right"==n?u.length-1:0]:r.getBoundingClientRect()}if(y&&A<9&&!s&&(!a||!a.left&&!a.right)){var p=r.parentNode.getClientRects()[0];a=p?{left:p.left,right:p.left+Dt(e.display),top:p.top,bottom:p.bottom}:ht}for(var h=a.top-t.rect.top,f=a.bottom-t.rect.top,m=(h+f)/2,g=t.view.measure.heights,d=0;d<g.length-1&&!(m<g[d]);d++);var v=d?g[d-1]:0,b=g[d],_={left:("right"==c?a.right:a.left)-t.rect.left,right:("left"==c?a.left:a.right)-t.rect.left,top:v,bottom:b};a.left||a.right||(_.bogus=!0);e.options.singleCursorHeightPerLine||(_.rtop=h,_.rbottom=f);return _}(e,t,i,n)).bogus||(t.cache[r]=o)),{left:o.left,right:o.right,top:a?o.rtop:o.top,bottom:a?o.rbottom:o.bottom}}Ae.prototype=co({init:function(t){var i=this,n=this.cm,e=this.wrapper=we(),a=this.textarea=e.firstChild;function o(e){if(n.somethingSelected())ve=n.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,a.value=ve.join("\n"),ao(a));else{var t=_e(n);ve=t.text,"cut"==e.type?n.setSelections(t.ranges,null,Ja):(i.prevInput="",a.value=t.text.join("\n"),ao(a))}"cut"==e.type&&(n.state.cutIncoming=!0)}t.wrapper.insertBefore(e,t.wrapper.firstChild),r&&(a.style.width="0px"),La(a,"input",function(){y&&9<=A&&i.hasSelection&&(i.hasSelection=null),i.poll()}),La(a,"paste",function(){if(f&&!n.state.fakedLastChar&&!(new Date-n.state.lastMiddleDown<200)){var e=a.selectionStart,t=a.selectionEnd;a.value+="$",a.selectionEnd=t,a.selectionStart=e,n.state.fakedLastChar=!0}n.state.pasteIncoming=!0,i.fastPoll()}),La(a,"cut",o),La(a,"copy",o),La(t.scroller,"paste",function(e){Zt(t,e)||(n.state.pasteIncoming=!0,i.focus())}),La(t.lineSpace,"selectstart",function(e){Zt(t,e)||Ia(e)})},prepareSelection:function(){var e=this.cm,t=e.display,i=e.doc,n=Ke(e);if(e.options.moveInputWithCursor){var a=xt(e,i.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),r=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,a.top+r.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,a.left+r.left-o.left))}return n},showSelection:function(e){var t=this.cm.display;Ao(t.cursorDiv,e.cursors),Ao(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,i,n=this.cm,a=n.doc;if(n.somethingSelected()){this.prevInput="";var o=a.sel.primary(),r=(t=Ro&&(100<o.to().line-o.from().line||1e3<(i=n.getSelection()).length))?"-":i||n.getSelection();this.textarea.value=r,n.state.focused&&ao(this.textarea),y&&9<=A&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",y&&9<=A&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!d||xo()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function e(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))})},poll:function(){var e=this.cm,t=this.textarea,i=this.prevInput;if(!e.state.focused||Lo(t)&&!i||ge(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var n=t.value;if(n==i&&!e.somethingSelected())return!1;if(y&&9<=A&&this.hasSelection===n||g&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var a=n.charCodeAt(0);if(8203!=a||i||(i="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var o=0,r=Math.min(i.length,n.length);o<r&&i.charCodeAt(o)==n.charCodeAt(o);)++o;var s=this;return zt(e,function(){be(e,n.slice(o),i.length-o),1e3<n.length||-1<n.indexOf("\n")?t.value=s.prevInput="":s.prevInput=n}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){y&&9<=A&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var i=this,n=i.cm,a=n.display,o=i.textarea,t=ei(n,e),r=a.scroller.scrollTop;if(t&&!m){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(t)&&qt(n,qe)(n.doc,Ie(t),Ja);var s=o.style.cssText;if(i.wrapper.style.position="absolute",o.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(y?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",f)var l=window.scrollY;if(a.input.focus(),f&&window.scrollTo(null,l),a.input.reset(),n.somethingSelected()||(o.value=i.prevInput=" "),i.contextMenuPending=!0,a.selForContextMenu=n.doc.sel,clearTimeout(a.detectingSelectAll),y&&9<=A&&d(),p){Oa(e);var c=function(){Ra(window,"mouseup",c),setTimeout(u,20)};La(window,"mouseup",c)}else setTimeout(u,50)}function d(){if(null!=o.selectionStart){var e=n.somethingSelected(),t="\u200b"+(e?o.value:"");o.value="\u21da",o.value=t,i.prevInput=e?"":"\u200b",o.selectionStart=1,o.selectionEnd=t.length,a.selForContextMenu=n.doc.sel}}function u(){if(i.contextMenuPending=!1,i.wrapper.style.position="relative",o.style.cssText=s,y&&A<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=r),null!=o.selectionStart){(!y||y&&A<9)&&d();var e=0,t=function(){a.selForContextMenu==n.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"\u200b"==i.prevInput?qt(n,en.selectAll)(n):e++<10?a.detectingSelectAll=setTimeout(t,500):a.input.reset()};a.detectingSelectAll=setTimeout(t,200)}}},setUneditable:so,needsContentAttribute:!1},Ae.prototype),xe.prototype=co({init:function(e){var a=this,o=a.cm,t=a.div=e.lineDiv;function i(e){if(o.somethingSelected())ve=o.getSelections(),"cut"==e.type&&o.replaceSelection("",null,"cut");else{var t=_e(o);ve=t.text,"cut"==e.type&&o.operation(function(){o.setSelections(t.ranges,0,Ja),o.replaceSelection("",null,"cut")})}if(e.clipboardData&&!r)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",ve.join("\n"));else{var i=we(),n=i.firstChild;o.display.lineSpace.insertBefore(i,o.display.lineSpace.firstChild),n.value=ve.join("\n");var a=document.activeElement;ao(n),setTimeout(function(){o.display.lineSpace.removeChild(i),a.focus()},50)}}t.contentEditable="true",ye(t),La(t,"paste",function(e){var t=e.clipboardData&&e.clipboardData.getData("text/plain");t&&(e.preventDefault(),o.replaceSelection(t,null,"paste"))}),La(t,"compositionstart",function(e){var t=e.data;if(a.composing={sel:o.doc.sel,data:t,startData:t},t){var i=o.doc.sel.primary(),n=o.getLine(i.head.line).indexOf(t,Math.max(0,i.head.ch-t.length));-1<n&&n<=i.head.ch&&(a.composing.sel=Ie(de(i.head.line,n),de(i.head.line,n+t.length)))}}),La(t,"compositionupdate",function(e){a.composing.data=e.data}),La(t,"compositionend",function(e){var t=a.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||a.applyComposition(t),a.composing==t&&(a.composing=null)},50))}),La(t,"touchstart",function(){a.forceCompositionEnd()}),La(t,"input",function(){a.composing||a.pollContent()||zt(a.cm,function(){Bt(o)})}),La(t,"copy",i),La(t,"cut",i)},prepareSelection:function(){var e=Ke(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),i=Ce(this.cm,e.anchorNode,e.anchorOffset),n=Ce(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!n||n.bad||0!=ue(fe(i,n),t.from())||0!=ue(he(i,n),t.to())){var a=ke(this.cm,t.from()),o=ke(this.cm,t.to());if(a||o){var r=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(a){if(!o){var l=r[r.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else a={node:r[0].measure.map[2],offset:0};try{var d=go(a.node,a.offset,o.offset,o.node)}catch(e){}d&&(e.removeAllRanges(),e.addRange(d),s&&null==e.anchorNode?e.addRange(s):h&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Ao(this.cm.display.cursorDiv,e.cursors),Ao(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return wo(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var t=this;this.selectionInEditor()?this.pollSelection():zt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var i=Ce(t,e.anchorNode,e.anchorOffset),n=Ce(t,e.focusNode,e.focusOffset);i&&n&&zt(t,function(){qe(t.doc,Ie(i,n),Ja),(i.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e,t=this.cm,i=t.display,n=t.doc.sel.primary(),a=n.from(),o=n.to();if(a.line<i.viewFrom||o.line>i.viewTo-1)return!1;if(a.line==i.viewFrom||0==(e=Jt(t,a.line)))var r=ga(i.view[0].line),s=i.view[0].node;else r=ga(i.view[e].line),s=i.view[e-1].node.nextSibling;var l=Jt(t,o.line);if(l==i.view.length-1)var c=i.viewTo-1,d=i.view[l].node;else c=ga(i.view[l+1].line)-1,d=i.view[l+1].node.previousSibling;for(var u=jo(function(l,e,t,c,d){var u="",p=!1;function h(e){if(1==e.nodeType){var t=e.getAttribute("cm-text");if(null!=t)return""==t&&(t=e.textContent.replace(/\u200b/g,"")),void(u+=t);var i,n=e.getAttribute("cm-marker");if(n){var a=l.findMarks(de(c,0),de(d+1,0),(s=+n,function(e){return e.id==s}));return void(a.length&&(i=a[0].find())&&(u+=ha(l.doc,i.from,i.to).join("\n")))}if("false"==e.getAttribute("contenteditable"))return;for(var o=0;o<e.childNodes.length;o++)h(e.childNodes[o]);/^(pre|div|p)$/i.test(e.nodeName)&&(p=!0)}else if(3==e.nodeType){var r=e.nodeValue;if(!r)return;p&&(u+="\n",p=!1),u+=r}var s}for(;h(e),e!=t;)e=e.nextSibling;return u}(t,s,d,r,c)),p=ha(t.doc,de(r,0),de(c,pa(t.doc,c).text.length));1<u.length&&1<p.length;)if(no(u)==no(p))u.pop(),p.pop(),c--;else{if(u[0]!=p[0])break;u.shift(),p.shift(),r++}for(var h=0,f=0,m=u[0],g=p[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var b=no(u),_=no(p),y=Math.min(b.length-(1==u.length?h:0),_.length-(1==p.length?h:0));f<y&&b.charCodeAt(b.length-f-1)==_.charCodeAt(_.length-f-1);)++f;u[u.length-1]=b.slice(0,b.length-f),u[0]=u[0].slice(h);var A=de(r,h),w=de(c,p.length?no(p).length-f:0);return 1<u.length||u[0]||ue(A,w)?(Mi(t.doc,u,A,w,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&qt(this.cm,be)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),qt(this.cm,be)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:so,resetPosition:so,needsContentAttribute:!0},xe.prototype),_.inputStyles={textarea:Ae,contenteditable:xe},Te.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=ue(i.anchor,n.anchor)||0!=ue(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new De(pe(this.ranges[t].anchor),pe(this.ranges[t].head));return new Te(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(0<=ue(t,n.from())&&ue(e,n.to())<=0)return i}return-1}},De.prototype={from:function(){return fe(this.anchor,this.head)},to:function(){return he(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var pt,ht={left:0,right:0,top:0,bottom:0};function ft(e,t,i){for(var n,a,o,r,s=0;s<e.length;s+=3){var l=e[s],c=e[s+1];if(t<l?(a=0,o=1,r="left"):t<c?o=(a=t-l)+1:(s==e.length-3||t==c&&e[s+3]>t)&&(a=(o=c-l)-1,c<=t&&(r="right")),null!=a){if(n=e[s+2],l==c&&i==(n.insertLeft?"left":"right")&&(r=i),"left"==i&&0==a)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)n=e[2+(s-=3)],r="left";if("right"==i&&a==c-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)n=e[(s+=3)+2],r="right";break}}return{node:n,start:a,end:o,collapse:r,coverStart:l,coverEnd:c}}function mt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function gt(e){e.display.externalMeasure=null,yo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)mt(e.display.view[t])}function vt(e){gt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function bt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function _t(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function yt(e,t,i,n){if(t.widgets)for(var a=0;a<t.widgets.length;++a)if(t.widgets[a].above){var o=Ln(t.widgets[a]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var r=ba(t);if("local"==n?r+=tt(e.display):r-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();r+=s.top+("window"==n?0:_t());var l=s.left+("window"==n?0:bt());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function At(e,t,i){if("div"==i)return t;var n=t.left,a=t.top;if("page"==i)n-=bt(),a-=_t();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();n+=o.left,a+=o.top}var r=e.display.lineSpace.getBoundingClientRect();return{left:n-r.left,top:a-r.top}}function wt(e,t,i,n,a){return n||(n=pa(e.doc,t.line)),yt(e,n,lt(e,n,t.ch,a),i)}function xt(n,e,a,o,r,s){function l(e,t){var i=ut(n,r,e,t?"right":"left",s);return t?i.left=i.right:i.right=i.left,yt(n,o,i,a)}function t(e,t){var i=c[t],n=i.level%2;return e==Ho(i)&&t&&i.level<c[t-1].level?(e=Wo(i=c[--t])-(i.level%2?0:1),n=!0):e==Wo(i)&&t<c.length-1&&i.level<c[t+1].level&&(e=Ho(i=c[++t])-i.level%2,n=!1),n&&e==i.to&&e>i.from?l(e-1):l(e,n)}o=o||pa(n.doc,e.line),r||(r=dt(n,o));var c=_a(o),i=e.ch;if(!c)return l(i);var d=t(i,Ko(c,i));return null!=zo&&(d.other=t(i,zo)),d}function kt(e,t){var i=0;t=Me(e.doc,t);e.options.lineWrapping||(i=Dt(e.display)*t.ch);var n=pa(e.doc,t.line),a=ba(n)+tt(e.display);return{left:i,right:i,top:a,bottom:a+n.height}}function $t(e,t,i,n){var a=de(e,t);return a.xRel=n,i&&(a.outside=!0),a}function Ct(e,t,i){var n=e.doc;if((i+=e.display.viewOffset)<0)return $t(n.first,0,!0,-1);var a=va(n,i),o=n.first+n.size-1;if(o<a)return $t(n.first+n.size-1,pa(n,o).text.length,!0,1);t<0&&(t=0);for(var r=pa(n,a);;){var s=St(e,r,a,t,i),l=Tn(r),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&0<s.xRel))return s;a=ga(r=c.to.line)}}function St(i,n,a,e,t){var o=t-ba(n),r=!1,s=2*i.display.wrapper.clientWidth,l=dt(i,n);function c(e){var t=xt(i,de(a,e),"line",n,l);return r=!0,o>t.bottom?t.left-s:o<t.top?t.left+s:(r=!1,t.left)}var d=_a(n),u=n.text.length,p=Vo(n),h=Uo(n),f=c(p),m=r,g=c(h),v=r;if(g<e)return $t(a,h,v,1);for(;;){if(d?h==p||h==Go(n,p,1):h-p<=1){for(var b=e<f||e-f<=g-e?p:h,_=e-(b==p?f:g);bo(n.text.charAt(b));)++b;return $t(a,b,b==p?m:v,_<-1?-1:1<_?1:0)}var y=Math.ceil(u/2),A=p+y;if(d){A=p;for(var w=0;w<y;++w)A=Go(n,A,1)}var x=c(A);e<x?(h=A,g=x,(v=r)&&(g+=1e3),u=y):(p=A,f=x,m=r,u-=y)}}function Tt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==pt){pt=_o("pre");for(var t=0;t<49;++t)pt.appendChild(document.createTextNode("x")),pt.appendChild(_o("br"));pt.appendChild(document.createTextNode("x"))}Ao(e.measure,pt);var i=pt.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),yo(e.measure),i||1}function Dt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=_o("span","xxxxxxxxxx"),i=_o("pre",[t]);Ao(e.measure,i);var n=t.getBoundingClientRect(),a=(n.right-n.left)/10;return 2<a&&(e.cachedCharWidth=a),a||10}var Et,It,Pt=null,Mt=0;function Ot(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Mt},Pt?Pt.ops.push(e.curOp):e.curOp.ownsGroup=Pt={ops:[e.curOp],delayedCallbacks:[]}}function Nt(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var n=0;n<e.ops.length;n++){var a=e.ops[n];if(a.cursorActivityHandlers)for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;)a.cursorActivityHandlers[a.cursorActivityCalled++](a.cm)}}while(i<t.length)}(t)}finally{Pt=null;for(var i=0;i<t.ops.length;i++)t.ops[i].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)jt(t[i]);for(var i=0;i<t.length;i++)n=t[i],n.updatedDisplay=n.mustUpdate&&B(n.cm,n.update);var n;for(var i=0;i<t.length;i++)Lt(t[i]);for(var i=0;i<t.length;i++)Rt(t[i]);for(var i=0;i<t.length;i++)Ft(t[i])}(t)}}function jt(e){var t,i,n=e.cm,a=n.display;!(i=(t=n).display).scrollbarsClipped&&i.scroller.offsetWidth&&(i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth,i.heightForcer.style.height=at(t)+"px",i.sizer.style.marginBottom=-i.nativeBarWidth+"px",i.sizer.style.borderRightWidth=at(t)+"px",i.scrollbarsClipped=!0),e.updateMaxLine&&P(n),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<a.viewFrom||e.scrollToPos.to.line>=a.viewTo)||a.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new U(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Lt(e){var t=e.cm,i=t.display;e.updatedDisplay&&G(t),e.barMeasure=O(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=lt(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+at(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-ot(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Rt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&si(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&J(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&R(t,e.barMeasure),e.selectionChanged&&Xe(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&me(e.cm)}function Ft(e){var t=e.cm,i=t.display,n=t.doc;if(e.updatedDisplay&&Y(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==e.scrollTop||i.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop)),i.scrollbars.setScrollTop(n.scrollTop),i.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||i.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-ot(t),e.scrollLeft)),i.scrollbars.setScrollLeft(n.scrollLeft),i.scroller.scrollLeft=n.scrollLeft,q(t)),e.scrollToPos){var a=function(e,t,i,n){null==n&&(n=0);for(var a=0;a<5;a++){var o=!1,r=xt(e,t),s=i&&i!=t?xt(e,i):r,l=Oi(e,Math.min(r.left,s.left),Math.min(r.top,s.top)-n,Math.max(r.left,s.left),Math.max(r.bottom,s.bottom)+n),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(ri(e,l.scrollTop),1<Math.abs(e.doc.scrollTop-c)&&(o=!0)),null!=l.scrollLeft&&(si(e,l.scrollLeft),1<Math.abs(e.doc.scrollLeft-d)&&(o=!0)),!o)break}return r}(t,Me(n,e.scrollToPos.from),Me(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(Wa(e,"scrollCursorIntoView"))return;var i=e.display,n=i.sizer.getBoundingClientRect(),a=null;t.top+n.top<0?a=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1);if(null!=a&&!c){var o=_o("div","\u200b",null,"position: absolute; top: "+(t.top-i.viewOffset-tt(e.display))+"px; height: "+(t.bottom-t.top+at(e)+i.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(a),e.display.lineSpace.removeChild(o)}}(t,a)}var o=e.maybeHiddenMarkers,r=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Fa(o[s],"hide");if(r)for(s=0;s<r.length;++s)r[s].lines.length&&Fa(r[s],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Fa(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function zt(e,t){if(e.curOp)return t();Ot(e);try{return t()}finally{Nt(e)}}function qt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ot(e);try{return t.apply(e,arguments)}finally{Nt(e)}}}function Ht(e){return function(){if(this.curOp)return e.apply(this,arguments);Ot(this);try{return e.apply(this,arguments)}finally{Nt(this)}}}function Wt(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Ot(e);try{return t.apply(this,arguments)}finally{Nt(e)}}}function Vt(e,t,i){this.line=t,this.rest=function(e){var t,i;for(;t=Tn(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?ga(no(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Mn(e,t)}function Ut(e,t,i){for(var n,a=[],o=t;o<i;o=n){var r=new Vt(e.doc,pa(e.doc,o),o);n=o+r.size,a.push(r)}return a}function Bt(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var a=e.display;if(n&&i<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>t)&&(a.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=a.viewTo)b&&In(e.doc,t)<a.viewTo&&Kt(e);else if(i<=a.viewFrom)b&&Pn(e.doc,i+n)>a.viewFrom?Kt(e):(a.viewFrom+=n,a.viewTo+=n);else if(t<=a.viewFrom&&i>=a.viewTo)Kt(e);else if(t<=a.viewFrom){(o=Gt(e,i,i+n,1))?(a.view=a.view.slice(o.index),a.viewFrom=o.lineN,a.viewTo+=n):Kt(e)}else if(i>=a.viewTo){var o;(o=Gt(e,t,t,-1))?(a.view=a.view.slice(0,o.index),a.viewTo=o.lineN):Kt(e)}else{var r=Gt(e,t,t,-1),s=Gt(e,i,i+n,1);r&&s?(a.view=a.view.slice(0,r.index).concat(Ut(e,r.lineN,s.lineN)).concat(a.view.slice(s.index)),a.viewTo+=n):Kt(e)}var l=a.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(a.externalMeasured=null))}function Yt(e,t,i){e.curOp.viewChanged=!0;var n=e.display,a=e.display.externalMeasured;if(a&&t>=a.lineN&&t<a.lineN+a.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[Jt(e,t)];if(null!=o.node){var r=o.changes||(o.changes=[]);-1==oo(r,i)&&r.push(i)}}}function Kt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Jt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,n=0;n<i.length;n++)if((t-=i[n].size)<0)return n}function Gt(e,t,i,n){var a,o=Jt(e,t),r=e.display.view;if(!b||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var s=0,l=e.display.viewFrom;s<o;s++)l+=r[s].size;if(l!=t){if(0<n){if(o==r.length-1)return null;a=l+r[o].size-t,o++}else a=l-t;t+=a,i+=a}for(;In(e.doc,i)!=i;){if(o==(n<0?0:r.length-1))return null;i+=n*r[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:i}}function Xt(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var a=t[n];a.hidden||a.node&&!a.changes||++i}return i}function Qt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Zt(e,t){for(var i=Na(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function ei(e,t,i,n){var a=e.display;if(!i&&"true"==Na(t).getAttribute("cm-not-content"))return null;var o,r,s=a.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,r=t.clientY-s.top}catch(t){return null}var l,c=Ct(e,o,r);if(n&&1==c.xRel&&(l=pa(e.doc,c.line).text).length==c.ch){var d=Za(l,l.length,e.options.tabSize)-l.length;c=de(c.line,Math.max(0,Math.round((o-nt(e.display).left)/Dt(e.display))-d))}return c}function ti(e){var t=this.display;if(!(t.activeTouch&&t.input.supportsTouch()||Wa(this,e)))if(t.shift=e.shiftKey,Zt(t,e))f||(t.scroller.draggable=!1,setTimeout(function(){t.scroller.draggable=!0},100));else if(!ni(this,e)){var i,n=ei(this,e);switch(window.focus(),ja(e)){case 1:n?function(e,t,i){y?setTimeout(uo(me,e),0):e.curOp.focus=!0;var n,a=+new Date;It&&It.time>a-400&&0==ue(It.pos,i)?n="triple":Et&&Et.time>a-400&&0==ue(Et.pos,i)?(n="double",It={time:a,pos:i}):(n="single",Et={time:a,pos:i});var o,r=e.doc.sel,s=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&Po&&!ge(e)&&"single"==n&&-1<(o=r.contains(i))&&!r.ranges[o].empty()?function(t,i,n,a){var o=t.display,r=qt(t,function(e){f&&(o.scroller.draggable=!1),t.state.draggingText=!1,Ra(document,"mouseup",r),Ra(o.scroller,"drop",r),Math.abs(i.clientX-e.clientX)+Math.abs(i.clientY-e.clientY)<10&&(Ia(e),a||je(t.doc,n),f||y&&9==A?setTimeout(function(){document.body.focus(),o.input.focus()},20):o.input.focus())});f&&(o.scroller.draggable=!0);t.state.draggingText=r,o.scroller.dragDrop&&o.scroller.dragDrop();La(document,"mouseup",r),La(o.scroller,"drop",r)}(e,t,i,s):function(m,e,g,v,t){var o=m.display,b=m.doc;Ia(e);var _,y,A=b.sel,i=A.ranges;t&&!e.shiftKey?(y=b.sel.contains(g),_=-1<y?i[y]:new De(g,g)):(_=b.sel.primary(),y=b.sel.primIndex);if(e.altKey)v="rect",t||(_=new De(g,g)),g=ei(m,e,!0,!0),y=-1;else if("double"==v){var n=m.findWordAt(g);_=m.display.shift||b.extend?Ne(b,_,n.anchor,n.head):n}else if("triple"==v){var a=new De(de(g.line,0),Me(b,de(g.line+1,0)));_=m.display.shift||b.extend?Ne(b,_,a.anchor,a.head):a}else _=Ne(b,_,g);t?-1==y?(y=i.length,qe(b,Ee(i.concat([_]),y),{scroll:!1,origin:"*mouse"})):1<i.length&&i[y].empty()&&"single"==v&&!e.shiftKey?(qe(b,Ee(i.slice(0,y).concat(i.slice(y+1)),0)),A=b.sel):Re(b,y,_,Ga):(qe(b,new Te([_],y=0),Ga),A=b.sel);var w=g;var r=o.wrapper.getBoundingClientRect(),s=0;function l(e){var t=++s,i=ei(m,e,!0,"rect"==v);if(i)if(0!=ue(i,w)){m.curOp.focus=!0,function(e){if(0==ue(w,e))return;if(w=e,"rect"==v){for(var t=[],i=m.options.tabSize,n=Za(pa(b,g.line).text,g.ch,i),a=Za(pa(b,e.line).text,e.ch,i),o=Math.min(n,a),r=Math.max(n,a),s=Math.min(g.line,e.line),l=Math.min(m.lastLine(),Math.max(g.line,e.line));s<=l;s++){var c=pa(b,s).text,d=eo(c,o,i);o==r?t.push(new De(de(s,d),de(s,d))):c.length>d&&t.push(new De(de(s,d),de(s,eo(c,r,i))))}t.length||t.push(new De(g,g)),qe(b,Ee(A.ranges.slice(0,y).concat(t),y),{origin:"*mouse",scroll:!1}),m.scrollIntoView(e)}else{var u=_,p=u.anchor,h=e;if("single"!=v){if("double"==v)var f=m.findWordAt(e);else var f=new De(de(e.line,0),Me(b,de(e.line+1,0)));0<ue(f.anchor,p)?(h=f.head,p=fe(u.from(),f.anchor)):(h=f.anchor,p=he(u.to(),f.head))}var t=A.ranges.slice(0);t[y]=new De(Me(b,p),h),qe(b,Ee(t,y),Ga)}}(i);var n=z(o,b);(i.line>=n.to||i.line<n.from)&&setTimeout(qt(m,function(){s==t&&l(e)}),150)}else{var a=e.clientY<r.top?-20:e.clientY>r.bottom?20:0;a&&setTimeout(qt(m,function(){s==t&&(o.scroller.scrollTop+=a,l(e))}),50)}}function c(e){s=1/0,Ia(e),o.input.focus(),Ra(document,"mousemove",d),Ra(document,"mouseup",u),b.history.lastSelOrigin=null}var d=qt(m,function(e){ja(e)?l(e):c(e)}),u=qt(m,c);La(document,"mousemove",d),La(document,"mouseup",u)}(e,t,i,n,s)}(this,e,n):Na(e)==t.scroller&&Ia(e);break;case 2:f&&(this.state.lastMiddleDown=+new Date),n&&je(this.doc,n),setTimeout(function(){t.input.focus()},20),Ia(e);break;case 3:p?wi(this,e):((i=this).state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,Ai(i))},100))}}}function ii(e,t,i,n,a){try{var o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&Ia(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(r>l.bottom||!Ua(e,i))return Ma(t);r-=l.top-s.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var d=s.gutters.childNodes[c];if(d&&d.getBoundingClientRect().right>=o)return a(e,i,e,va(e.doc,r),e.options.gutters[c],t),Ma(t)}}function ni(e,t){return ii(e,t,"gutterClick",!0,qa)}var ai=0;function oi(e){var n=this;if(!Wa(n,e)&&!Zt(n.display,e)){Ia(e),y&&(ai=+new Date);var a=ei(n,e,!0),t=e.dataTransfer.files;if(a&&!ge(n))if(t&&t.length&&window.FileReader&&window.File)for(var o=t.length,r=Array(o),s=0,i=function(e,t){var i=new FileReader;i.onload=qt(n,function(){if(r[t]=i.result,++s==o){var e={from:a=Me(n.doc,a),to:a,text:jo(r.join("\n")),origin:"paste"};Ti(n.doc,e),ze(n.doc,Ie(a,xi(e)))}}),i.readAsText(e)},l=0;l<o;++l)i(t[l],l);else{if(n.state.draggingText&&-1<n.doc.sel.contains(a))return n.state.draggingText(e),void setTimeout(function(){n.display.input.focus()},20);try{if(r=e.dataTransfer.getData("Text")){if(n.state.draggingText&&!(g?e.altKey:e.ctrlKey))var c=n.listSelections();if(He(n.doc,Ie(a,a)),c)for(l=0;l<c.length;++l)Mi(n.doc,"",c[l].anchor,c[l].head,"drag");n.replaceSelection(r,"around","paste"),n.display.input.focus()}}catch(e){}}}}function ri(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,h||K(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),h&&K(e),Qe(e,100))}function si(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,q(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var li=0,ci=null;y?ci=-.53:h?ci=15:n?ci=-.7:l&&(ci=-1/3);var di=function(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}};function ui(e,t){var i=di(t),n=i.x,a=i.y,o=e.display,r=o.scroller;if(n&&r.scrollWidth>r.clientWidth||a&&r.scrollHeight>r.clientHeight){if(a&&g&&f)e:for(var s=t.target,l=o.view;s!=r;s=s.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==s){e.display.currentWheelTarget=s;break e}if(n&&!h&&!m&&null!=ci)return a&&ri(e,Math.max(0,Math.min(r.scrollTop+a*ci,r.scrollHeight-r.clientHeight))),si(e,Math.max(0,Math.min(r.scrollLeft+n*ci,r.scrollWidth-r.clientWidth))),Ia(t),void(o.wheelStartX=null);if(a&&null!=ci){var d=a*ci,u=e.doc.scrollTop,p=u+o.wrapper.clientHeight;d<0?u=Math.max(0,u+d-50):p=Math.min(e.doc.height,p+d+50),K(e,{top:u,bottom:p})}li<20&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=n,o.wheelDY=a,setTimeout(function(){if(null!=o.wheelStartX){var e=r.scrollLeft-o.wheelStartX,t=r.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(ci=(ci*li+i)/(li+1),++li)}},200)):(o.wheelDX+=n,o.wheelDY+=a))}}function pi(e,t,i){if("string"==typeof t&&!(t=en[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,a=!1;try{ge(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),a=t(e)!=Ka}finally{e.display.shift=n,e.state.suppressEdits=!1}return a}_.wheelEventPixels=function(e){var t=di(e);return t.x*=ci,t.y*=ci,t};var hi=new Qa;function fi(e,t,i,n){var a=e.state.keySeq;if(a){if(on(t))return"handled";hi.set(50,function(){e.state.keySeq==a&&(e.state.keySeq=null,e.display.input.reset())}),t=a+" "+t}var o=function(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var a=an(t,e.state.keyMaps[n],i,e);if(a)return a}return e.options.extraKeys&&an(t,e.options.extraKeys,i,e)||an(t,e.options.keyMap,i,e)}(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&qa(e,"keyHandled",e,t,i),"handled"!=o&&"multi"!=o||(Ia(i),Xe(e)),a&&!o&&/\'$/.test(t)?(Ia(i),!0):!!o}function mi(t,e){var i=rn(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?fi(t,"Shift-"+i,e,function(e){return pi(t,e,!0)})||fi(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return pi(t,e)}):fi(t,i,e,function(e){return pi(t,e)}))}var gi=null;function vi(e){if(this.curOp.focus=!0,!Wa(this,e)){y&&A<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var i=mi(this,e);m&&(gi=i?t:null,!i&&88==t&&!Ro&&(g?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||($o(t,"CodeMirror-crosshair"),Ra(document,"keyup",i),Ra(document,"mouseover",i))}Co(t,"CodeMirror-crosshair"),La(document,"keyup",i),La(document,"mouseover",i)}(this)}}function bi(e){16==e.keyCode&&(this.doc.sel.shift=!1),Wa(this,e)}function _i(e){if(!(Zt(this.display,e)||Wa(this,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var t=e.keyCode,i=e.charCode;if(m&&t==gi)return gi=null,void Ia(e);if(!m||e.which&&!(e.which<10)||!mi(this,e)){var n,a=String.fromCharCode(null==i?t:i);if(!fi(n=this,"'"+a+"'",e,function(e){return pi(n,e,!0)}))this.display.input.onKeyPress(e)}}}function yi(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Fa(e,"focus",e),e.state.focused=!0,Co(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),f&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Xe(e))}function Ai(e){e.state.delayingBlurEvent||(e.state.focused&&(Fa(e,"blur",e),e.state.focused=!1,$o(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function wi(e,t){var i,n;Zt(e.display,t)||(n=t,Ua(i=e,"gutterContextMenu")&&ii(i,n,"gutterContextMenu",!1,Fa))||e.display.input.onContextMenu(t)}var xi=_.changeEnd=function(e){return e.text?de(e.from.line+e.text.length-1,no(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function ki(e,t){if(ue(e,t.from)<0)return e;if(ue(e,t.to)<=0)return xi(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=xi(t).ch-t.to.ch),de(i,n)}function $i(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var a=e.sel.ranges[n];i.push(new De(ki(a.anchor,t),ki(a.head,t)))}return Ee(i,e.sel.primIndex)}function Ci(e,t,i){return e.line==t.line?de(i.line,e.ch-t.ch+i.ch):de(i.line+(e.line-t.line),e.ch)}function Si(a,e,t){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return t&&(i.update=function(e,t,i,n){e&&(this.from=Me(a,e)),t&&(this.to=Me(a,t)),i&&(this.text=i),void 0!==n&&(this.origin=n)}),Fa(a,"beforeChange",a,i),a.cm&&Fa(a.cm,"beforeChange",a.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ti(e,t,i){if(e.cm){if(!e.cm.curOp)return qt(e.cm,Ti)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(Ua(e,"beforeChange")||e.cm&&Ua(e.cm,"beforeChange"))||(t=Si(e,t,!0))){var n=v&&!i&&function(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=oo(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var a=[{from:t,to:i}],o=0;o<n.length;++o)for(var r=n[o],s=r.find(0),l=0;l<a.length;++l){var c=a[l];if(!(ue(c.to,s.from)<0||0<ue(c.from,s.to))){var d=[l,1],u=ue(c.from,s.from),p=ue(c.to,s.to);(u<0||!r.inclusiveLeft&&!u)&&d.push({from:c.from,to:s.from}),(0<p||!r.inclusiveRight&&!p)&&d.push({from:s.to,to:c.to}),a.splice.apply(a,d),l+=d.length-1}}return a}(e,t.from,t.to);if(n)for(var a=n.length-1;0<=a;--a)Di(e,{from:n[a].from,to:n[a].to,text:a?[""]:t.text});else Di(e,t)}}function Di(e,i){if(1!=i.text.length||""!=i.text[0]||0!=ue(i.from,i.to)){var t=$i(e,i);xa(e,i,t,e.cm?e.cm.curOp.id:NaN),Pi(e,i,t,bn(e,i));var n=[];da(e,function(e,t){t||-1!=oo(n,e.history)||(Ea(e.history,i),n.push(e.history)),Pi(e,i,null,bn(e,i))})}}function Ei(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,a=e.history,o=e.sel,r="undo"==t?a.done:a.undone,s="undo"==t?a.undone:a.done,l=0;l<r.length&&(n=r[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=r.length){for(a.lastOrigin=a.lastSelOrigin=null;(n=r.pop()).ranges;){if(ka(n,s),i&&!n.equals(e.sel))return void qe(e,n,{clearRedo:!1});o=n}var c=[];ka(o,s),s.push({changes:c,generation:a.generation}),a.generation=n.generation||++a.maxGeneration;var d=Ua(e,"beforeChange")||e.cm&&Ua(e.cm,"beforeChange");for(l=n.changes.length-1;0<=l;--l){var u=n.changes[l];if(u.origin=t,d&&!Si(e,u,!1))return void(r.length=0);c.push(Aa(e,u));var p=l?$i(e,u):no(r);Pi(e,u,p,yn(e,u)),!l&&e.cm&&e.cm.scrollIntoView({from:u.from,to:xi(u)});var h=[];da(e,function(e,t){t||-1!=oo(h,e.history)||(Ea(e.history,u),h.push(e.history)),Pi(e,u,null,yn(e,u))})}}}}function Ii(e,t){if(0!=t&&(e.first+=t,e.sel=new Te(ro(e.sel.ranges,function(e){return new De(de(e.anchor.line+t,e.anchor.ch),de(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Bt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)Yt(e.cm,n,"gutter")}}function Pi(e,t,i,n){if(e.cm&&!e.cm.curOp)return qt(e.cm,Pi)(e,t,i,n);if(t.to.line<e.first)Ii(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var a=t.text.length-1-(e.first-t.from.line);Ii(e,a),t={from:de(e.first,0),to:de(t.to.line+a,t.to.ch),text:[no(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:de(o,pa(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ha(e,t.from,t.to),i||(i=$i(e,t)),e.cm?function(e,t,i){var n=e.doc,a=e.display,o=t.from,r=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=ga(En(pa(n,o.line))),n.iter(l,r.line+1,function(e){if(e==a.maxLine)return s=!0}));-1<n.sel.contains(t.from,t.to)&&Va(e);na(n,t,i,$(e)),e.options.lineWrapping||(n.iter(l,o.line+t.text.length,function(e){var t=I(e);t>a.maxLineLength&&(a.maxLine=e,a.maxLineLength=t,a.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));n.frontier=Math.min(n.frontier,o.line),Qe(e,400);var c=t.text.length-(r.line-o.line)-1;t.full?Bt(e):o.line!=r.line||1!=t.text.length||ia(e.doc,t)?Bt(e,o.line,r.line+1,c):Yt(e,o.line,"text");var d=Ua(e,"changes"),u=Ua(e,"change");if(u||d){var p={from:o,to:r,text:t.text,removed:t.removed,origin:t.origin};u&&qa(e,"change",e,p),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,n):na(e,t,n),He(e,i,Ja)}}function Mi(e,t,i,n,a){if(n||(n=i),ue(n,i)<0){var o=n;n=i,i=o}"string"==typeof t&&(t=jo(t)),Ti(e,{from:i,to:n,text:t,origin:a})}function Oi(e,t,i,n,a){var o=e.display,r=Tt(e.display);i<0&&(i=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=rt(e),c={};l<a-i&&(a=i+l);var d=e.doc.height+it(o),u=i<r,p=d-r<a;if(i<s)c.scrollTop=u?0:i;else if(s+l<a){var h=Math.min(i,(p?d:a)-l);h!=s&&(c.scrollTop=h)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=ot(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=m<n-t;return g&&(n=t+m),t<10?c.scrollLeft=0:t<f?c.scrollLeft=Math.max(0,t-(g?0:10)):m+f-3<n&&(c.scrollLeft=n+(g?0:10)-m),c}function Ni(e,t,i){null==t&&null==i||Li(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function ji(e){Li(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?de(t.line,t.ch-1):t,n=de(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Li(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=kt(e,t.from),n=kt(e,t.to),a=Oi(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(a.scrollLeft,a.scrollTop)}}function Ri(e,t,i,n){var a,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?a=et(e,t):i="prev");var r=e.options.tabSize,s=pa(o,t),l=Za(s.text,null,r);s.stateAfter&&(s.stateAfter=null);var c,d=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==i&&((c=o.mode.indent(a,s.text.slice(d.length),s.text))==Ka||150<c)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>o.first?Za(pa(o,t-1).text,null,r):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var u="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/r);h;--h)p+=r,u+="\t";if(p<c&&(u+=io(c-p)),u!=d)Mi(o,u,de(t,0),de(t,d.length),"+input");else for(h=0;h<o.sel.ranges.length;h++){var f=o.sel.ranges[h];if(f.head.line==t&&f.head.ch<d.length){Re(o,h,new De(p=de(t,d.length),p));break}}s.stateAfter=null}function Fi(e,t,i,n){var a=t,o=t;return"number"==typeof t?o=pa(e,Pe(e,t)):a=ga(t),null==a?null:(n(o,a)&&e.cm&&Yt(e.cm,a,i),o)}function zi(t,e){for(var i=t.doc.sel.ranges,n=[],a=0;a<i.length;a++){for(var o=e(i[a]);n.length&&ue(o.from,no(n).to)<=0;){var r=n.pop();if(ue(r.from,o.from)<0){o.from=r.from;break}}n.push(o)}zt(t,function(){for(var e=n.length-1;0<=e;e--)Mi(t.doc,"",n[e].from,n[e].to,"+delete");ji(t)})}function qi(n,e,a,t,o){var r=e.line,s=e.ch,i=a,l=pa(n,r),c=!0;function d(e){var t,i=(o?Go:Xo)(l,s,a,!0);if(null==i){if(e||!((t=r+a)<n.first||t>=n.first+n.size?c=!1:l=pa(n,r=t)))return c=!1;s=o?(a<0?Uo:Vo)(l):a<0?l.text.length:0}else s=i;return!0}if("char"==t)d();else if("column"==t)d(!0);else if("word"==t||"group"==t)for(var u=null,p="group"==t,h=n.cm&&n.cm.getHelper(e,"wordChars"),f=!0;!(a<0)||d(!f);f=!1){var m=l.text.charAt(s)||"\n",g=fo(m,h)?"w":p&&"\n"==m?"n":!p||/\s/.test(m)?null:"p";if(!p||f||g||(g="s"),u&&u!=g){a<0&&(a=1,d());break}if(g&&(u=g),0<a&&!d(!f))break}var v=Be(n,de(r,s),i,!0);return c||(v.hitSide=!0),v}function Hi(e,t,i,n){var a,o=e.doc,r=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);a=t.top+i*(s-(i<0?1.5:.5)*Tt(e.display))}else"line"==n&&(a=0<i?t.bottom+3:t.top-3);for(;;){var l=Ct(e,r,a);if(!l.outside)break;if(i<0?a<=0:a>=o.height){l.hitSide=!0;break}a+=5*i}return l}_.prototype={constructor:_,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Vi.hasOwnProperty(e)&&qt(this,Vi[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](sn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Ht(function(e,t){var i=e.token?e:_.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Bt(this)}),removeOverlay:Ht(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void Bt(this)}}),indentLine:Ht(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Oe(this.doc,e)&&Ri(this,e,t,i)}),indentSelection:Ht(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var a=t[n];if(a.empty())a.head.line>i&&(Ri(this,a.head.line,e,!0),i=a.head.line,n==this.doc.sel.primIndex&&ji(this));else{var o=a.from(),r=a.to(),s=Math.max(i,o.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=s;l<i;++l)Ri(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&0<c[n].from().ch&&Re(this.doc,n,new De(o,c[n].to()),Ja)}}}),getTokenAt:function(e,t){return Hn(this,e,t)},getLineTokens:function(e,t){return Hn(this,de(e),t,!0)},getTokenTypeAt:function(e){e=Me(this.doc,e);var t,i=Un(this,pa(this.doc,e.line)),n=0,a=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var r=n+a>>1;if((r?i[2*r-1]:0)>=o)a=r;else{if(!(i[2*r+1]<o)){t=i[2*r+2];break}n=r+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?_.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Xi.hasOwnProperty(t))return i;var n=Xi[t],a=this.getModeAt(e);if("string"==typeof a[t])n[a[t]]&&i.push(n[a[t]]);else if(a[t])for(var o=0;o<a[t].length;o++){var r=n[a[t][o]];r&&i.push(r)}else a.helperType&&n[a.helperType]?i.push(n[a.helperType]):n[a.name]&&i.push(n[a.name]);for(o=0;o<n._global.length;o++){var s=n._global[o];s.pred(a,this)&&-1==oo(i,s.val)&&i.push(s.val)}return i},getStateAfter:function(e,t){var i=this.doc;return et(this,(e=Pe(i,null==e?i.first+i.size-1:e))+1,t)},cursorCoords:function(e,t){var i=this.doc.sel.primary();return xt(this,null==e?i.head:"object"==typeof e?Me(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return wt(this,Me(this.doc,e),t||"page")},coordsChar:function(e,t){return Ct(this,(e=At(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=At(this,{top:e,left:0},t||"page").top,va(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:n<e&&(e=n,i=!0);var a=pa(this.doc,e);return yt(this,a,{top:0,left:0},t||"page").top+(i?this.doc.height-ba(a):0)},defaultTextHeight:function(){return Tt(this.display)},defaultCharWidth:function(){return Dt(this.display)},setGutterMarker:Ht(function(e,i,n){return Fi(this.doc,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[i]=n)&&mo(t)&&(e.gutterMarkers=null),!0})}),clearGutter:Ht(function(t){var i=this,e=i.doc,n=e.first;e.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&(e.gutterMarkers[t]=null,Yt(i,n,"gutter"),mo(e.gutterMarkers)&&(e.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!Oe(this.doc,e))return null;var t=e;if(!(e=pa(this.doc,e)))return null}else{if(null==(t=ga(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,a){var o,r,s,l,c,d,u=this.display,p=(e=xt(this,Me(this.doc,e))).bottom,h=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),u.sizer.appendChild(t),"over"==n)p=e.top;else if("above"==n||"near"==n){var f=Math.max(u.wrapper.clientHeight,this.doc.height),m=Math.max(u.sizer.clientWidth,u.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?p=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(p=e.bottom),h+t.offsetWidth>m&&(h=m-t.offsetWidth)}t.style.top=p+"px",t.style.left=t.style.right="","right"==a?(h=u.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==a?h=0:"middle"==a&&(h=(u.sizer.clientWidth-t.offsetWidth)/2),t.style.left=h+"px"),i&&(o=this,s=p,l=(r=h)+t.offsetWidth,c=p+t.offsetHeight,null!=(d=Oi(o,r,s,l,c)).scrollTop&&ri(o,d.scrollTop),null!=d.scrollLeft&&si(o,d.scrollLeft))},triggerOnKeyDown:Ht(vi),triggerOnKeyPress:Ht(_i),triggerOnKeyUp:bi,execCommand:function(e){if(en.hasOwnProperty(e))return en[e](this)},findPosH:function(e,t,i,n){var a=1;t<0&&(a=-1,t=-t);for(var o=0,r=Me(this.doc,e);o<t&&!(r=qi(this.doc,r,a,i,n)).hitSide;++o);return r},moveH:Ht(function(t,i){var n=this;n.extendSelectionsBy(function(e){return n.display.shift||n.doc.extend||e.empty()?qi(n.doc,e.head,t,i,n.options.rtlMoveVisually):t<0?e.from():e.to()},Xa)}),deleteH:Ht(function(i,n){var e=this.doc.sel,a=this.doc;e.somethingSelected()?a.replaceSelection("",null,"+delete"):zi(this,function(e){var t=qi(a,e.head,i,n,!1);return i<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,i,n){var a=1,o=n;t<0&&(a=-1,t=-t);for(var r=0,s=Me(this.doc,e);r<t;++r){var l=xt(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Hi(this,l,a,i)).hitSide)break}return s},moveV:Ht(function(n,a){var o=this,r=this.doc,s=[],l=!o.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(e){if(l)return n<0?e.from():e.to();var t=xt(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),s.push(t.left);var i=Hi(o,t,n,a);return"page"==a&&e==r.sel.primary()&&Ni(o,null,wt(o,i,"div").top-t.top),i},Xa),s.length)for(var e=0;e<r.sel.ranges.length;e++)r.sel.ranges[e].goalColumn=s[e]}),findWordAt:function(e){var t=pa(this.doc,e.line).text,i=e.ch,n=e.ch;if(t){var a=this.getHelper(e,"wordChars");(e.xRel<0||n==t.length)&&i?--i:++n;for(var o=t.charAt(i),r=fo(o,a)?function(e){return fo(e,a)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!fo(e)};0<i&&r(t.charAt(i-1));)--i;for(;n<t.length&&r(t.charAt(n));)++n}return new De(de(e.line,i),de(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Co(this.display.cursorDiv,"CodeMirror-overwrite"):$o(this.display.cursorDiv,"CodeMirror-overwrite"),Fa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==xo()},scrollTo:Ht(function(e,t){null==e&&null==t||Li(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-at(this)-this.display.barHeight,width:e.scrollWidth-at(this)-this.display.barWidth,clientHeight:rt(this),clientWidth:ot(this)}},scrollIntoView:Ht(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:de(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Li(this),this.curOp.scrollToPos=e;else{var i=Oi(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:Ht(function(e,t){var i=this;function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&gt(this);var a=i.display.viewFrom;i.doc.iter(a,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Yt(i,a,"widget");break}++a}),i.curOp.forceUpdate=!0,Fa(i,"refresh",this)}),operation:function(e){return zt(this,e)},refresh:Ht(function(){var e=this.display.cachedTextHeight;Bt(this),this.curOp.forceUpdate=!0,vt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),E(this),(null==e||.5<Math.abs(e-Tt(this.display)))&&C(this),Fa(this,"refresh",this)}),swapDoc:Ht(function(e){var t=this.doc;return t.cm=null,ua(this,e),vt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,qa(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ba(_);var Wi=_.defaults={},Vi=_.optionHandlers={};function Ui(e,t,n,i){_.defaults[e]=t,n&&(Vi[e]=i?function(e,t,i){i!=Bi&&n(e,t,i)}:n)}var Bi=_.Init={toString:function(){return"CodeMirror.Init"}};Ui("value","",function(e,t){e.setValue(t)},!0),Ui("mode",null,function(e,t){e.doc.modeOption=t,x(e)},!0),Ui("indentUnit",2,x,!0),Ui("indentWithTabs",!1),Ui("smartIndent",!0),Ui("tabSize",4,function(e){k(e),vt(e),Bt(e)},!0),Ui("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=_.Init&&e.refresh()}),Ui("specialCharPlaceholder",function(e){var t=_o("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){e.refresh()},!0),Ui("electricChars",!0),Ui("inputStyle",d?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Ui("rtlMoveVisually",!o),Ui("wholeLineUpdateBefore",!0),Ui("theme","default",function(e){S(e),T(e)},!0),Ui("keyMap","default",function(e,t,i){var n=sn(t),a=i!=_.Init&&sn(i);a&&a.detach&&a.detach(e,n),n.attach&&n.attach(e,a||null)}),Ui("extraKeys",null),Ui("lineWrapping",!1,function(e){e.options.lineWrapping?(Co(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):($o(e.display.wrapper,"CodeMirror-wrap"),P(e)),C(e),Bt(e),vt(e),setTimeout(function(){R(e)},100)},!0),Ui("gutters",[],function(e){M(e.options),T(e)},!0),Ui("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?V(e.display)+"px":"0",e.refresh()},!0),Ui("coverGutterNextToScrollbar",!1,function(e){R(e)},!0),Ui("scrollbarStyle","native",function(e){L(e),R(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Ui("lineNumbers",!1,function(e){M(e.options),T(e)},!0),Ui("firstLineNumber",1,T,!0),Ui("lineNumberFormatter",function(e){return e},T,!0),Ui("showCursorWhenSelecting",!1,Ye,!0),Ui("resetSelectionOnContextMenu",!0),Ui("readOnly",!1,function(e,t){"nocursor"==t?(Ai(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())}),Ui("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Ui("dragDrop",!0,function(e,t,i){if(!t!=!(i&&i!=_.Init)){var n=e.display.dragFunctions,a=t?La:Ra;a(e.display.scroller,"dragstart",n.start),a(e.display.scroller,"dragenter",n.simple),a(e.display.scroller,"dragover",n.simple),a(e.display.scroller,"drop",n.drop)}}),Ui("cursorBlinkRate",530),Ui("cursorScrollMargin",0),Ui("cursorHeight",1,Ye,!0),Ui("singleCursorHeightPerLine",!0,Ye,!0),Ui("workTime",100),Ui("workDelay",100),Ui("flattenSpans",!0,k,!0),Ui("addModeClass",!1,k,!0),Ui("pollInterval",100),Ui("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Ui("historyEventDelay",1250),Ui("viewportMargin",10,function(e){e.refresh()},!0),Ui("maxHighlightLength",1e4,k,!0),Ui("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Ui("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Ui("autofocus",null);var Yi=_.modes={},Ki=_.mimeModes={};_.defineMode=function(e,t){_.defaults.mode||"null"==e||(_.defaults.mode=e),2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Yi[e]=t},_.defineMIME=function(e,t){Ki[e]=t},_.resolveMode=function(e){if("string"==typeof e&&Ki.hasOwnProperty(e))e=Ki[e];else if(e&&"string"==typeof e.name&&Ki.hasOwnProperty(e.name)){var t=Ki[e.name];"string"==typeof t&&(t={name:t}),(e=lo(t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return _.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},_.getMode=function(e,t){t=_.resolveMode(t);var i=Yi[t.name];if(!i)return _.getMode(e,"text/plain");var n=i(e,t);if(Ji.hasOwnProperty(t.name)){var a=Ji[t.name];for(var o in a)a.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=a[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)n[o]=t.modeProps[o];return n},_.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),_.defineMIME("text/plain","null");var Ji=_.modeExtensions={};_.extendMode=function(e,t){co(t,Ji.hasOwnProperty(e)?Ji[e]:Ji[e]={})},_.defineExtension=function(e,t){_.prototype[e]=t},_.defineDocExtension=function(e,t){sa.prototype[e]=t},_.defineOption=Ui;var Gi=[];_.defineInitHook=function(e){Gi.push(e)};var Xi=_.helpers={};_.registerHelper=function(e,t,i){Xi.hasOwnProperty(e)||(Xi[e]=_[e]={_global:[]}),Xi[e][t]=i},_.registerGlobalHelper=function(e,t,i,n){_.registerHelper(e,t,n),Xi[e]._global.push({pred:i,val:n})};var Qi=_.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var a=t[n];a instanceof Array&&(a=a.concat([])),i[n]=a}return i},Zi=_.startState=function(e,t,i){return!e.startState||e.startState(t,i)};_.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var en=_.commands={selectAll:function(e){e.setSelection(de(e.firstLine(),0),de(e.lastLine()),Ja)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Ja)},killLine:function(i){zi(i,function(e){if(e.empty()){var t=pa(i.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<i.lastLine()?{from:e.head,to:de(e.head.line+1,0)}:{from:e.head,to:de(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){zi(t,function(e){return{from:de(e.from().line,0),to:Me(t.doc,de(e.to().line+1,0))}})},delLineLeft:function(e){zi(e,function(e){return{from:de(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(i){zi(i,function(e){var t=i.charCoords(e.head,"div").top+5;return{from:i.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(n){zi(n,function(e){var t=n.charCoords(e.head,"div").top+5,i=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(de(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(de(e.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Bo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Yo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return function(e,t){var i,n=pa(e.doc,t);for(;i=Tn(n);)n=i.find(1,!0).line,t=null;var a=_a(n),o=a?a[0].level%2?Vo(n):Uo(n):n.text.length;return de(null==t?ga(n):t,o)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){i.extendSelectionsBy(function(e){var t=i.charCoords(e.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:t},"div")},Xa)},goLineLeft:function(i){i.extendSelectionsBy(function(e){var t=i.charCoords(e.head,"div").top+5;return i.coordsChar({left:0,top:t},"div")},Xa)},goLineLeftSmart:function(n){n.extendSelectionsBy(function(e){var t=n.charCoords(e.head,"div").top+5,i=n.coordsChar({left:0,top:t},"div");return i.ch<n.getLine(i.line).search(/\S/)?Yo(n,e.head):i},Xa)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,a=0;a<i.length;a++){var o=i[a].from(),r=Za(e.getLine(o.line),o.ch,n);t.push(new Array(n-r%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(r){zt(r,function(){for(var e=r.listSelections(),t=[],i=0;i<e.length;i++){var n=e[i].head,a=pa(r.doc,n.line).text;if(a)if(n.ch==a.length&&(n=new de(n.line,n.ch-1)),0<n.ch)n=new de(n.line,n.ch+1),r.replaceRange(a.charAt(n.ch-1)+a.charAt(n.ch-2),de(n.line,n.ch-2),n,"+transpose");else if(n.line>r.doc.first){var o=pa(r.doc,n.line-1).text;o&&r.replaceRange(a.charAt(0)+"\n"+o.charAt(o.length-1),de(n.line-1,o.length-1),de(n.line,1),"+transpose")}t.push(new De(n,n))}r.setSelections(t)})},newlineAndIndent:function(n){zt(n,function(){for(var e=n.listSelections().length,t=0;t<e;t++){var i=n.listSelections()[t];n.replaceRange("\n",i.anchor,i.head,"+input"),n.indentLine(i.from().line+1,null,!0),ji(n)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},tn=_.keyMap={};function nn(e){for(var t,i,n,a,o=e.split(/-(?!$)/),r=(e=o[o.length-1],0);r<o.length-1;r++){var s=o[r];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}tn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},tn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},tn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},tn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},tn.default=g?tn.macDefault:tn.pcDefault,_.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete e[i];continue}for(var a=ro(i.split(" "),nn),o=0;o<a.length;o++){var r,s;o==a.length-1?(s=i,r=n):(s=a.slice(0,o+1).join(" "),r="...");var l=t[s];if(l){if(l!=r)throw new Error("Inconsistent bindings for "+s)}else t[s]=r}delete e[i]}for(var c in t)e[c]=t[c];return e};var an=_.lookupKey=function(e,t,i,n){var a=(t=sn(t)).call?t.call(e,n):t[e];if(!1===a)return"nothing";if("..."===a)return"multi";if(null!=a&&i(a))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return an(e,t.fallthrough,i,n);for(var o=0;o<t.fallthrough.length;o++){var r=an(e,t.fallthrough[o],i,n);if(r)return r}}},on=_.isModifierKey=function(e){var t="string"==typeof e?e:qo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},rn=_.keyName=function(e,t){if(m&&34==e.keyCode&&e.char)return!1;var i=qo[e.keyCode],n=i;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=i&&(n="Alt-"+n),(u?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(u?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};function sn(e){return"string"==typeof e?tn[e]:e}_.fromTextArea=function(t,e){if((e=e?co(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=xo();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}function n(){t.value=s.getValue()}if(t.form&&(La(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var r=a.submit=function(){n(),a.submit=o,a.submit(),a.submit=r}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ra(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var s=_(function(e){t.parentNode.insertBefore(e,t.nextSibling)},e);return s};var ln=_.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ln.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else i=t&&(e.test?e.test(t):e(t));if(i)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Za(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Za(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Za(this.string,null,this.tabSize)-(this.lineStart?Za(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&0<n.index?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var a=function(e){return i?e.toLowerCase():e};if(a(this.string.substr(this.pos,e.length))==a(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var cn=0,dn=_.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++cn};Ba(dn),dn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ot(e),Ua(this,"clear")){var i=this.find();i&&qa(this,"clear",i.from,i.to)}for(var n=null,a=null,o=0;o<this.lines.length;++o){var r=this.lines[o],s=gn(r.markedSpans,this);e&&!this.collapsed?Yt(e,ga(r),"text"):e&&(null!=s.to&&(a=ga(r)),null!=s.from&&(n=ga(r))),r.markedSpans=vn(r.markedSpans,s),null==s.from&&this.collapsed&&!Mn(this.doc,r)&&e&&ma(r,Tt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var l=En(this.lines[o]),c=I(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&Bt(e,n,a+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ve(e.doc)),e&&qa(e,"markerCleared",e,this),t&&Nt(e),this.parent&&this.parent.clear()}},dn.prototype.find=function(e,t){var i,n;null==e&&"bookmark"==this.type&&(e=1);for(var a=0;a<this.lines.length;++a){var o=this.lines[a],r=gn(o.markedSpans,this);if(null!=r.from&&(i=de(t?o:ga(o),r.from),-1==e))return i;if(null!=r.to&&(n=de(t?o:ga(o),r.to),1==e))return n}return i&&{from:i,to:n}},dn.prototype.changed=function(){var o=this.find(-1,!0),r=this,s=this.doc.cm;o&&s&&zt(s,function(){var e=o.line,t=ga(o.line),i=ct(s,t);if(i&&(mt(i),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!Mn(r.doc,e)&&null!=r.height){var n=r.height;r.height=null;var a=Ln(r)-n;a&&ma(e,e.height+a)}})},dn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=oo(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},dn.prototype.detachLine=function(e){if(this.lines.splice(oo(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};cn=0;function un(t,n,a,e,i){if(e&&e.shared)return function(e,i,n,a,o){(a=co(a)).shared=!1;var r=[un(e,i,n,a,o)],s=r[0],l=a.widgetNode;return da(e,function(e){l&&(a.widgetNode=l.cloneNode(!0)),r.push(un(e,Me(e,i),Me(e,n),a,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;s=no(r)}),new pn(r,s)}(t,n,a,e,i);if(t.cm&&!t.cm.curOp)return qt(t.cm,un)(t,n,a,e,i);var o=new dn(t,i),r=ue(n,a);if(e&&co(e,o,!1),0<r||0==r&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=_o("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Dn(t,n.line,n,a,o)||n.line!=a.line&&Dn(t,a.line,n,a,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");b=!0}o.addToHistory&&xa(t,{from:n,to:a,origin:"markText"},t.sel,NaN);var s,l=n.line,c=t.cm;if(t.iter(l,a.line+1,function(e){var t,i;c&&o.collapsed&&!c.options.lineWrapping&&En(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=n.line&&ma(e,0),t=e,i=new mn(o,l==n.line?n.ch:null,l==a.line?a.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([i]):[i],i.marker.attachLine(t),++l}),o.collapsed&&t.iter(n.line,a.line+1,function(e){Mn(t,e)&&ma(e,0)}),o.clearOnEnter&&La(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(v=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++cn,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)Bt(c,n.line,a.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var d=n.line;d<=a.line;d++)Yt(c,d,"text");o.atomic&&Ve(c.doc),qa(c,"markerAdded",c,o)}return o}var pn=_.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function hn(e){return e.findMarks(de(e.first,0),e.clipPos(de(e.lastLine())),function(e){return e.parent})}function fn(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];da(i.primary.doc,function(e){n.push(e)});for(var a=0;a<i.markers.length;a++){var o=i.markers[a];-1==oo(n,o.doc)&&(o.parent=null,i.markers.splice(a--,1))}}}function mn(e,t,i){this.marker=e,this.from=t,this.to=i}function gn(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function vn(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function bn(e,t){if(t.full)return null;var i=Oe(e,t.from.line)&&pa(e,t.from.line).markedSpans,n=Oe(e,t.to.line)&&pa(e,t.to.line).markedSpans;if(!i&&!n)return null;var a=t.from.ch,o=t.to.ch,r=0==ue(t.from,t.to),s=function(e,t,i){if(e)for(var n,a=0;a<e.length;++a){var o=e[a],r=o.marker;if(null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==r.type&&(!i||!o.marker.insertLeft)){var s=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new mn(r,o.from,s?null:o.to))}}return n}(i,a,r),l=function(e,t,i){if(e)for(var n,a=0;a<e.length;++a){var o=e[a],r=o.marker;if(null==o.to||(r.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==r.type&&(!i||o.marker.insertLeft)){var s=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new mn(r,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,r),c=1==t.text.length,d=no(t.text).length+(c?a:0);if(s)for(var u=0;u<s.length;++u){if(null==(p=s[u]).to)(h=gn(l,p.marker))?c&&(p.to=null==h.to?null:h.to+d):p.to=a}if(l)for(u=0;u<l.length;++u){var p,h;if(null!=(p=l[u]).to&&(p.to+=d),null==p.from)(h=gn(s,p.marker))||(p.from=d,c&&(s||(s=[])).push(p));else p.from+=d,c&&(s||(s=[])).push(p)}s&&(s=_n(s)),l&&l!=s&&(l=_n(l));var f=[s];if(!c){var m,g=t.text.length-2;if(0<g&&s)for(u=0;u<s.length;++u)null==s[u].to&&(m||(m=[])).push(new mn(s[u].marker,null,null));for(u=0;u<g;++u)f.push(m);f.push(l)}return f}function _n(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function yn(e,t){var i=function(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,a=[];n<t.text.length;++n)a.push(Ca(i[n]));return a}(e,t),n=bn(e,t);if(!i)return n;if(!n)return i;for(var a=0;a<i.length;++a){var o=i[a],r=n[a];if(o&&r)e:for(var s=0;s<r.length;++s){for(var l=r[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else r&&(i[a]=r)}return i}function An(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function wn(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function xn(e){return e.inclusiveLeft?-1:0}function kn(e){return e.inclusiveRight?1:0}function $n(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),a=t.find(),o=ue(n.from,a.from)||xn(e)-xn(t);if(o)return-o;var r=ue(n.to,a.to)||kn(e)-kn(t);return r||t.id-e.id}function Cn(e,t){var i,n=b&&e.markedSpans;if(n)for(var a,o=0;o<n.length;++o)(a=n[o]).marker.collapsed&&null==(t?a.from:a.to)&&(!i||$n(i,a.marker)<0)&&(i=a.marker);return i}function Sn(e){return Cn(e,!0)}function Tn(e){return Cn(e,!1)}function Dn(e,t,i,n,a){var o=pa(e,t),r=b&&o.markedSpans;if(r)for(var s=0;s<r.length;++s){var l=r[s];if(l.marker.collapsed){var c=l.marker.find(0),d=ue(c.from,i)||xn(l.marker)-xn(a),u=ue(c.to,n)||kn(l.marker)-kn(a);if(!(0<=d&&u<=0||d<=0&&0<=u)&&(d<=0&&(0<ue(c.to,i)||l.marker.inclusiveRight&&a.inclusiveLeft)||0<=d&&(ue(c.from,n)<0||l.marker.inclusiveLeft&&a.inclusiveRight)))return!0}}}function En(e){for(var t;t=Sn(e);)e=t.find(-1,!0).line;return e}function In(e,t){var i=pa(e,t),n=En(i);return i==n?t:ga(n)}function Pn(e,t){if(t>e.lastLine())return t;var i,n=pa(e,t);if(!Mn(e,n))return t;for(;i=Tn(n);)n=i.find(1,!0).line;return ga(n)+1}function Mn(e,t){var i=b&&t.markedSpans;if(i)for(var n,a=0;a<i.length;++a)if((n=i[a]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&On(e,t,n))return!0}}function On(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return On(e,n.line,gn(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var a,o=0;o<t.markedSpans.length;++o)if((a=t.markedSpans[o]).marker.collapsed&&!a.marker.widgetNode&&a.from==i.to&&(null==a.to||a.to!=i.from)&&(a.marker.inclusiveLeft||i.marker.inclusiveRight)&&On(e,t,a))return!0}Ba(pn),pn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();qa(this,"clear")}},pn.prototype.find=function(e,t){return this.primary.find(e,t)};var Nn=_.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t};function jn(e,t,i){ba(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ni(e,null,i)}function Ln(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!wo(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),Ao(t.display.measure,_o("div",[e.node],null,i))}return e.height=e.node.offsetHeight}Ba(Nn),Nn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=ga(i);if(null!=n&&t){for(var a=0;a<t.length;++a)t[a]==this&&t.splice(a--,1);t.length||(i.widgets=null);var o=Ln(this);ma(i,Math.max(0,i.height-o)),e&&zt(e,function(){jn(e,i,-o),Yt(e,n,"widget")})}},Nn.prototype.changed=function(){var e=this.height,t=this.doc.cm,i=this.line;this.height=null;var n=Ln(this)-e;n&&(ma(i,i.height+n),t&&zt(t,function(){t.curOp.forceUpdate=!0,jn(t,i,n)}))};var Rn=_.Line=function(e,t,i){this.text=e,wn(this,t),this.height=i?i(this):1};function Fn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function zn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=_.innerMode(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function qn(e,t,i,n){for(var a=0;a<10;a++){n&&(n[0]=_.innerMode(e,i).mode);var o=e.token(t,i);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Hn(e,t,i,n){function a(e){return{start:u.start,end:u.pos,string:u.current(),type:o||null,state:e?Qi(r.mode,d):d}}var o,r=e.doc,s=r.mode;t=Me(r,t);var l,c=pa(r,t.line),d=et(e,t.line,i),u=new ln(c.text,e.options.tabSize);for(n&&(l=[]);(n||u.pos<t.ch)&&!u.eol();)u.start=u.pos,o=qn(s,u,d),n&&l.push(a(!0));return n?l:a()}function Wn(e,t,i,n,a,o,r){var s=i.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,d=null,u=new ln(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&Fn(zn(i,n),o);!u.eol();){if(u.pos>e.options.maxHighlightLength?(s=!1,r&&Bn(e,t,n,u.pos),u.pos=t.length,l=null):l=Fn(qn(i,u,n,p),o),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||d!=l){for(;c<u.start;)a(c=Math.min(u.start,c+5e4),d);d=l}u.start=u.pos}for(;c<u.pos;){var f=Math.min(u.pos,c+5e4);a(f,d),c=f}}function Vn(e,t,i,n){var o=[e.state.modeGen],a={};Wn(e,t.text,e.doc.mode,i,function(e,t){o.push(e,t)},a,n);for(var r=0;r<e.state.overlays.length;++r){var s=e.state.overlays[r],l=1,c=0;Wn(e,t.text,s.mode,!0,function(e,t){for(var i=l;c<e;){var n=o[l];e<n&&o.splice(l,1,e,o[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(s.opaque)o.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;i<l;i+=2){var a=o[i+1];o[i+1]=(a?a+" ":"")+"cm-overlay "+t}},a)}return{styles:o,classes:a.bgClass||a.textClass?a:null}}function Un(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Vn(e,t,t.stateAfter=et(e,ga(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function Bn(e,t,i,n){var a=e.doc.mode,o=new ln(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&zn(a,i);!o.eol()&&o.pos<=e.options.maxHighlightLength;)qn(a,o,i),o.start=o.pos}Ba(Rn),Rn.prototype.lineNo=function(){return ga(this)};var Yn={},Kn={};function Jn(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Kn:Yn;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Gn(e,t){var i=_o("span",null,null,f?"padding-right: .1px":null),n={pre:_o("pre",[i]),content:i,col:0,pos:0,cm:e,splitSpaces:(y||f)&&e.getOption("lineWrapping")};t.measure={};for(var a=0;a<=(t.rest?t.rest.length:0);a++){var o,r=a?t.rest[a-1]:t.line;n.pos=0,n.addToken=Xn,Oo(e.display.measure)&&(o=_a(r))&&(n.addToken=Zn(n.addToken,o)),n.map=[],ta(r,n,Un(e,r,t!=e.display.externalMeasured&&ga(r))),r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=So(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=So(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Mo(e.display.measure))),0==a?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return f&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),Fa(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=So(n.pre.className,n.textClass||"")),n}function Xn(e,t,i,n,a,o,r){if(t){var s=e.splitSpaces?t.replace(/ {3,}/g,Qn):t,l=e.cm.state.specialChars,c=!1;if(l.test(t)){g=document.createDocumentFragment();for(var d=0;;){l.lastIndex=d;var u=l.exec(t),p=u?u.index-d:t.length-d;if(p){var h=document.createTextNode(s.slice(d,d+p));y&&A<9?g.appendChild(_o("span",[h])):g.appendChild(h),e.map.push(e.pos,e.pos+p,h),e.col+=p,e.pos+=p}if(!u)break;if(d+=p+1,"\t"==u[0]){var f=e.cm.options.tabSize,m=f-e.col%f;(h=g.appendChild(_o("span",io(m),"cm-tab"))).setAttribute("role","presentation"),h.setAttribute("cm-text","\t"),e.col+=m}else{(h=e.cm.options.specialCharPlaceholder(u[0])).setAttribute("cm-text",u[0]),y&&A<9?g.appendChild(_o("span",[h])):g.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}}else{e.col+=t.length;var g=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,g),y&&A<9&&(c=!0),e.pos+=t.length}if(i||n||a||c||r){var v=i||"";n&&(v+=n),a&&(v+=a);var b=_o("span",[g],v,r);return o&&(b.title=o),e.content.appendChild(b)}e.content.appendChild(g)}}function Qn(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":"\xa0";return t+=" "}function Zn(u,p){return function(e,t,i,n,a,o,r){i=i?i+" cm-force-border":"cm-force-border";for(var s=e.pos,l=s+t.length;;){for(var c=0;c<p.length;c++){var d=p[c];if(d.to>s&&d.from<=s)break}if(d.to>=l)return u(e,t,i,n,a,o,r);u(e,t.slice(0,d.to-s),i,n,null,o,r),n=null,t=t.slice(d.to-s),s=d.to}}}function ea(e,t,i,n){var a=!n&&i.widgetNode;a&&e.map.push(e.pos,e.pos+t,a),!n&&e.cm.display.input.needsContentAttribute&&(a||(a=e.content.appendChild(document.createElement("span"))),a.setAttribute("cm-marker",i.id)),a&&(e.cm.display.input.setUneditable(a),e.content.appendChild(a)),e.pos+=t}function ta(e,t,i){var n=e.markedSpans,a=e.text,o=0;if(n)for(var r,s,l,c,d,u,p,h=a.length,f=0,m=(k=1,""),g=0;;){if(g==f){l=c=d=u=s="",p=null,g=1/0;for(var v=[],b=0;b<n.length;++b){var _=n[b],y=_.marker;_.from<=f&&(null==_.to||_.to>f)?(null!=_.to&&g>_.to&&(g=_.to,c=""),y.className&&(l+=" "+y.className),y.css&&(s=y.css),y.startStyle&&_.from==f&&(d+=" "+y.startStyle),y.endStyle&&_.to==g&&(c+=" "+y.endStyle),y.title&&!u&&(u=y.title),y.collapsed&&(!p||$n(p.marker,y)<0)&&(p=_)):_.from>f&&g>_.from&&(g=_.from),"bookmark"==y.type&&_.from==f&&y.widgetNode&&v.push(y)}if(p&&(p.from||0)==f&&(ea(t,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to))return;if(!p&&v.length)for(b=0;b<v.length;++b)ea(t,0,v[b])}if(h<=f)break;for(var A=Math.min(h,g);;){if(m){var w=f+m.length;if(!p){var x=A<w?m.slice(0,A-f):m;t.addToken(t,x,r?r+l:l,d,f+x.length==g?c:"",u,s)}if(A<=w){m=m.slice(A-f),f=A;break}f=w,d=""}m=a.slice(o,o=i[k++]),r=Jn(i[k++],t.cm.options)}}else for(var k=1;k<i.length;k+=2)t.addToken(t,a.slice(o,o=i[k]),Jn(i[k+1],t.cm.options))}function ia(e,t){return 0==t.from.ch&&0==t.to.ch&&""==no(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function na(e,n,t,a){function o(e){return t?t[e]:null}function i(e,t,i){!function(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),An(e),wn(e,i);var a=n?n(e):1;a!=e.height&&ma(e,a)}(e,t,i,a),qa(e,"change",e,n)}function r(e,t){for(var i=e,n=[];i<t;++i)n.push(new Rn(c[i],o(i),a));return n}var s=n.from,l=n.to,c=n.text,d=pa(e,s.line),u=pa(e,l.line),p=no(c),h=o(c.length-1),f=l.line-s.line;if(n.full)e.insert(0,r(0,c.length)),e.remove(c.length,e.size-c.length);else if(ia(e,n)){var m=r(0,c.length-1);i(u,u.text,h),f&&e.remove(s.line,f),m.length&&e.insert(s.line,m)}else if(d==u){if(1==c.length)i(d,d.text.slice(0,s.ch)+p+d.text.slice(l.ch),h);else(m=r(1,c.length-1)).push(new Rn(p+d.text.slice(l.ch),h,a)),i(d,d.text.slice(0,s.ch)+c[0],o(0)),e.insert(s.line+1,m)}else if(1==c.length)i(d,d.text.slice(0,s.ch)+c[0]+u.text.slice(l.ch),o(0)),e.remove(s.line+1,f);else{i(d,d.text.slice(0,s.ch)+c[0],o(0)),i(u,p+u.text.slice(l.ch),h);m=r(1,c.length-1);1<f&&e.remove(s.line+1,f-1),e.insert(s.line+1,m)}qa(e,"change",e,n)}function aa(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function oa(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var a=e[n];t+=a.chunkSize(),i+=a.height,a.parent=this}this.size=t,this.height=i,this.parent=null}aa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;i<n;++i){var a=this.lines[i];this.height-=a.height,(o=a).parent=null,An(o),qa(a,"delete")}var o;this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;e<n;++e)if(i(this.lines[e]))return!0}},oa.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],a=n.chunkSize();if(e<a){var o=Math.min(t,a-e),r=n.height;if(n.removeInner(e,o),this.height-=r-n.height,a==o&&(this.children.splice(i--,1),n.parent=null),0==(t-=o))break;e=0}else e-=a}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof aa))){var s=[];this.collapse(s),this.children=[new aa(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var a=this.children[n],o=a.chunkSize();if(e<=o){if(a.insertInner(e,t,i),a.lines&&50<a.lines.length){for(;50<a.lines.length;){var r=new aa(a.lines.splice(a.lines.length-25,25));a.height-=r.height,this.children.splice(n+1,0,r),r.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new oa(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=oo(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var n=new oa(e.children);(n.parent=e).children=[n,t],e=n}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var a=this.children[n],o=a.chunkSize();if(e<o){var r=Math.min(t,o-e);if(a.iterN(e,r,i))return!0;if(0==(t-=r))break;e=0}else e-=o}}};var ra=0,sa=_.Doc=function(e,t,i){if(!(this instanceof sa))return new sa(e,t,i);null==i&&(i=0),oa.call(this,[new aa([new Rn("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=de(i,0);this.sel=Ie(n),this.history=new ya(null),this.id=++ra,this.modeOption=t,"string"==typeof e&&(e=jo(e)),na(this,{from:n,to:n,text:e}),qe(this,Ie(n),Ja)};sa.prototype=lo(oa.prototype,{constructor:sa,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=fa(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:Wt(function(e){var t=de(this.first,0),i=this.first+this.size-1;Ti(this,{from:t,to:de(i,pa(this,i).text.length),text:jo(e),origin:"setValue",full:!0},!0),qe(this,Ie(t))}),replaceRange:function(e,t,i,n){Mi(this,e,t=Me(this,t),i=i?Me(this,i):t,n)},getRange:function(e,t,i){var n=ha(this,Me(this,e),Me(this,t));return!1===i?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Oe(this,e))return pa(this,e)},getLineNumber:function(e){return ga(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=pa(this,e)),En(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Wt(function(e,t,i){Fe(this,Me(this,"number"==typeof e?de(e,t||0):e),null,i)}),setSelection:Wt(function(e,t,i){Fe(this,Me(this,e),Me(this,t||e),i)}),extendSelection:Wt(function(e,t,i){je(this,Me(this,e),t&&Me(this,t),i)}),extendSelections:Wt(function(e,t){Le(this,function(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=Me(e,t[n]);return i}(this,e))}),extendSelectionsBy:Wt(function(e,t){Le(this,ro(this.sel.ranges,e),t)}),setSelections:Wt(function(e,t,i){if(e.length){for(var n=0,a=[];n<e.length;n++)a[n]=new De(Me(this,e[n].anchor),Me(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),qe(this,Ee(a,t),i)}}),addSelection:Wt(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new De(Me(this,e),Me(this,t||e))),qe(this,Ee(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var a=ha(this,i[n].from(),i[n].to());t=t?t.concat(a):a}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var a=ha(this,i[n].from(),i[n].to());!1!==e&&(a=a.join(e||"\n")),t[n]=a}return t},replaceSelection:function(e,t,i){for(var n=[],a=0;a<this.sel.ranges.length;a++)n[a]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:Wt(function(e,t,i){for(var n=[],a=this.sel,o=0;o<a.ranges.length;o++){var r=a.ranges[o];n[o]={from:r.from(),to:r.to(),text:jo(e[o]),origin:i}}var s=t&&"end"!=t&&function(e,t,i){for(var n=[],a=de(e.first,0),o=a,r=0;r<t.length;r++){var s=t[r],l=Ci(s.from,a,o),c=Ci(xi(s),a,o);if(a=s.to,o=c,"around"==i){var d=e.sel.ranges[r],u=ue(d.head,d.anchor)<0;n[r]=new De(u?c:l,u?l:c)}else n[r]=new De(l,l)}return new Te(n,e.sel.primIndex)}(this,n,t);for(o=n.length-1;0<=o;o--)Ti(this,n[o]);s?ze(this,s):this.cm&&ji(this.cm)}),undo:Wt(function(){Ei(this,"undo")}),redo:Wt(function(){Ei(this,"redo")}),undoSelection:Wt(function(){Ei(this,"undo",!0)}),redoSelection:Wt(function(){Ei(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new ya(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Sa(this.history.done),undone:Sa(this.history.undone)}},setHistory:function(e){var t=this.history=new ya(this.history.maxGeneration);t.done=Sa(e.done.slice(0),null,!0),t.undone=Sa(e.undone.slice(0),null,!0)},addLineClass:Wt(function(e,i,n){return Fi(this,e,"gutter"==i?"gutter":"class",function(e){var t="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(e[t]){if(ko(n).test(e[t]))return!1;e[t]+=" "+n}else e[t]=n;return!0})}),removeLineClass:Wt(function(e,o,r){return Fi(this,e,"gutter"==o?"gutter":"class",function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=e[t];if(!i)return!1;if(null==r)e[t]=null;else{var n=i.match(ko(r));if(!n)return!1;var a=n.index+n[0].length;e[t]=i.slice(0,n.index)+(n.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Wt(function(e,t,i){return a=e,o=new Nn(n=this,t,i),(r=n.cm)&&o.noHScroll&&(r.display.alignWidgets=!0),Fi(n,a,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,r&&!Mn(n,e)){var i=ba(e)<n.scrollTop;ma(e,e.height+Ln(o)),i&&Ni(r,null,o.height),r.curOp.forceUpdate=!0}return!0}),o;var n,a,o,r}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return un(this,Me(this,e),Me(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return un(this,e=Me(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=pa(this,(e=Me(this,e)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var a=i[n];(null==a.from||a.from<=e.ch)&&(null==a.to||a.to>=e.ch)&&t.push(a.marker.parent||a.marker)}return t},findMarks:function(a,o,r){a=Me(this,a),o=Me(this,o);var s=[],l=a.line;return this.iter(a.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;i++){var n=t[i];l==a.line&&a.ch>n.to||null==n.from&&l!=a.line||l==o.line&&n.from>o.ch||r&&!r(n.marker)||s.push(n.marker.parent||n.marker)}++l}),s},getAllMarks:function(){var n=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;++i)null!=t[i].from&&n.push(t[i].marker)}),n},posFromIndex:function(i){var n,a=this.first;return this.iter(function(e){var t=e.text.length+1;if(i<t)return n=i,!0;i-=t,++a}),Me(this,de(a,n))},indexFromPos:function(e){var t=(e=Me(this,e)).ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new sa(fa(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new sa(fa(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i],a=n.find(),o=e.clipPos(a.from),r=e.clipPos(a.to);if(ue(o,r)){var s=un(e,o,r,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}(n,hn(this)),n},unlinkDoc:function(e){if(e instanceof _&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),fn(hn(this));break}}if(e.history==this.history){var i=[e.id];da(e,function(e){i.push(e.id)},!0),e.history=new ya(null),e.history.done=Sa(this.history.done,i),e.history.undone=Sa(this.history.undone,i)}},iterLinkedDocs:function(e){da(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),sa.prototype.eachLine=sa.prototype.iter;var la="iter insert remove copy getEditor".split(" ");for(var ca in sa.prototype)sa.prototype.hasOwnProperty(ca)&&oo(la,ca)<0&&(_.prototype[ca]=function(e){return function(){return e.apply(this.doc,arguments)}}(sa.prototype[ca]));function da(e,s,l){!function e(t,i,n){if(t.linked)for(var a=0;a<t.linked.length;++a){var o=t.linked[a];if(o.doc!=i){var r=n&&o.sharedHist;l&&!r||(s(o.doc,r),e(o.doc,t,r))}}}(e,null,!0)}function ua(e,t){if(t.cm)throw new Error("This document is already in use.");C((e.doc=t).cm=e),x(e),e.options.lineWrapping||P(e),e.options.mode=t.modeOption,Bt(e)}function pa(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var a=i.children[n],o=a.chunkSize();if(t<o){i=a;break}t-=o}return i.lines[t]}function ha(e,i,n){var a=[],o=i.line;return e.iter(i.line,n.line+1,function(e){var t=e.text;o==n.line&&(t=t.slice(0,n.ch)),o==i.line&&(t=t.slice(i.ch)),a.push(t),++o}),a}function fa(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function ma(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function ga(e){if(null==e.parent)return null;for(var t=e.parent,i=oo(t.lines,e),n=t.parent;n;n=(t=n).parent)for(var a=0;n.children[a]!=t;++a)i+=n.children[a].chunkSize();return i+t.first}function va(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var a=e.children[n],o=a.height;if(t<o){e=a;continue e}t-=o,i+=a.chunkSize()}return i}while(!e.lines);for(n=0;n<e.lines.length;++n){var r=e.lines[n].height;if(t<r)break;t-=r}return i+n}function ba(e){for(var t=0,i=(e=En(e)).parent,n=0;n<i.lines.length;++n){var a=i.lines[n];if(a==e)break;t+=a.height}for(var o=i.parent;o;o=(i=o).parent)for(n=0;n<o.children.length;++n){var r=o.children[n];if(r==i)break;t+=r.height}return t}function _a(e){var t=e.order;return null==t&&(t=e.order=Qo(e.text)),t}function ya(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Aa(e,t){var i={from:pe(t.from),to:xi(t),text:ha(e,t.from,t.to)};return $a(e,i,t.from.line,t.to.line+1),da(e,function(e){$a(e,i,t.from.line,t.to.line+1)},!0),i}function wa(e){for(;e.length;){if(!no(e).ranges)break;e.pop()}}function xa(e,t,i,n){var a=e.history;a.undone.length=0;var o,r,s=+new Date;if((a.lastOp==n||a.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&a.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=(r=a).lastOp==n?(wa(r.done),no(r.done)):r.done.length&&!no(r.done).ranges?no(r.done):1<r.done.length&&!r.done[r.done.length-2].ranges?(r.done.pop(),no(r.done)):void 0)){var l=no(o.changes);0==ue(t.from,t.to)&&0==ue(t.from,l.to)?l.to=xi(t):o.changes.push(Aa(e,t))}else{var c=no(a.done);for(c&&c.ranges||ka(e.sel,a.done),o={changes:[Aa(e,t)],generation:a.generation},a.done.push(o);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(i),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=s,a.lastOp=a.lastSelOp=n,a.lastOrigin=a.lastSelOrigin=t.origin,l||Fa(e,"historyAdded")}function ka(e,t){var i=no(t);i&&i.ranges&&i.equals(e)||t.push(e)}function $a(t,i,e,n){var a=i["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,n),function(e){e.markedSpans&&((a||(a=i["spans_"+t.id]={}))[o]=e.markedSpans),++o})}function Ca(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Sa(e,t,i){for(var n=0,a=[];n<e.length;++n){var o=e[n];if(o.ranges)a.push(i?Te.prototype.deepCopy.call(o):o);else{var r=o.changes,s=[];a.push({changes:s});for(var l=0;l<r.length;++l){var c,d=r[l];if(s.push({from:d.from,to:d.to,text:d.text}),t)for(var u in d)(c=u.match(/^spans_(\d+)$/))&&-1<oo(t,Number(c[1]))&&(no(s)[u]=d[u],delete d[u])}}}return a}function Ta(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Da(e,t,i,n){for(var a=0;a<e.length;++a){var o=e[a],r=!0;if(o.ranges){o.copied||((o=e[a]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)Ta(o.ranges[s].anchor,t,i,n),Ta(o.ranges[s].head,t,i,n)}else{for(s=0;s<o.changes.length;++s){var l=o.changes[s];if(i<l.from.line)l.from=de(l.from.line+n,l.from.ch),l.to=de(l.to.line+n,l.to.ch);else if(t<=l.to.line){r=!1;break}}r||(e.splice(0,a+1),a=0)}}}function Ea(e,t){var i=t.from.line,n=t.to.line,a=t.text.length-(n-i)-1;Da(e.done,i,n,a),Da(e.undone,i,n,a)}Ba(sa);var Ia=_.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Pa=_.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function Ma(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var Oa=_.e_stop=function(e){Ia(e),Pa(e)};function Na(e){return e.target||e.srcElement}function ja(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}var La=_.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={});(n[t]||(n[t]=[])).push(i)}},Ra=_.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var a=0;a<n.length;++a)if(n[a]==i){n.splice(a,1);break}}},Fa=_.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),a=0;a<i.length;++a)i[a].apply(null,n)},za=null;function qa(e,t){var i=e._handlers&&e._handlers[t];if(i){var n,a=Array.prototype.slice.call(arguments,2);Pt?n=Pt.delayedCallbacks:za?n=za:(n=za=[],setTimeout(Ha,0));for(var o=0;o<i.length;++o)n.push(r(i[o]))}function r(e){return function(){e.apply(null,a)}}}function Ha(){var e=za;za=null;for(var t=0;t<e.length;++t)e[t]()}function Wa(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Fa(e,i||t.type,e,t),Ma(t)||t.codemirrorIgnore}function Va(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==oo(i,t[n])&&i.push(t[n])}function Ua(e,t){var i=e._handlers&&e._handlers[t];return i&&0<i.length}function Ba(e){e.prototype.on=function(e,t){La(this,e,t)},e.prototype.off=function(e,t){Ra(this,e,t)}}var Ya=30,Ka=_.Pass={toString:function(){return"CodeMirror.Pass"}},Ja={scroll:!1},Ga={origin:"*mouse"},Xa={origin:"+move"};function Qa(){this.id=null}Qa.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Za=_.countColumn=function(e,t,i,n,a){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,r=a||0;;){var s=e.indexOf("\t",o);if(s<0||t<=s)return r+(t-o);r+=s-o,r+=i-r%i,o=s+1}};function eo(e,t,i){for(var n=0,a=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var r=o-n;if(o==e.length||t<=a+r)return n+Math.min(r,t-a);if(a+=o-n,n=o+1,t<=(a+=i-a%i))return n}}var to=[""];function io(e){for(;to.length<=e;)to.push(no(to)+" ");return to[e]}function no(e){return e[e.length-1]}var ao=function(e){e.select()};function oo(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function ro(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function so(){}function lo(e,t){var i;return Object.create?i=Object.create(e):(so.prototype=e,i=new so),t&&co(t,i),i}function co(e,t,i){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===i&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function uo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}r?ao=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:y&&(ao=function(e){try{e.select()}catch(e){}});var po=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ho=_.isWordChar=function(e){return/\w/.test(e)||"\x80"<e&&(e.toUpperCase()!=e.toLowerCase()||po.test(e))};function fo(e,t){return t?!!(-1<t.source.indexOf("\\w")&&ho(e))||t.test(e):ho(e)}function mo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var go,vo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function bo(e){return 768<=e.charCodeAt(0)&&vo.test(e)}function _o(e,t,i,n){var a=document.createElement(e);if(i&&(a.className=i),n&&(a.style.cssText=n),"string"==typeof t)a.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)a.appendChild(t[o]);return a}function yo(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function Ao(e,t){return yo(e).appendChild(t)}go=document.createRange?function(e,t,i,n){var a=document.createRange();return a.setEnd(n||e,i),a.setStart(e,t),a}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n};var wo=_.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};function xo(){return document.activeElement}function ko(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}y&&A<11&&(xo=function(){try{return document.activeElement}catch(e){return document.body}});var $o=_.rmClass=function(e,t){var i=e.className,n=ko(t).exec(i);if(n){var a=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(a?n[1]+a:"")}},Co=_.addClass=function(e,t){var i=e.className;ko(t).test(i)||(e.className+=(i?" ":"")+t)};function So(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!ko(i[n]).test(t)&&(t+=" "+i[n]);return t}function To(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}var Do=!1;var Eo,Io,Po=function(){if(y&&A<9)return!1;var e=_o("div");return"draggable"in e||"dragDrop"in e}();function Mo(e){if(null==Eo){var t=_o("span","\u200b");Ao(e,_o("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Eo=t.offsetWidth<=1&&2<t.offsetHeight&&!(y&&A<8))}var i=Eo?_o("span","\u200b"):_o("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Oo(e){if(null!=Io)return Io;var t=Ao(e,document.createTextNode("A\u062eA")),i=go(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=go(t,1,2).getBoundingClientRect();return Io=n.right-i.right<3}var No,jo=_.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;t<=n;){var a=e.indexOf("\n",t);-1==a&&(a=e.length);var o=e.slice(t,"\r"==e.charAt(a-1)?a-1:a),r=o.indexOf("\r");-1!=r?(i.push(o.slice(0,r)),t+=r+1):(i.push(o),t=a+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Lo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ro="oncopy"in(No=_o("div"))||(No.setAttribute("oncopy","return;"),"function"==typeof No.oncopy),Fo=null;var zo,qo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function Ho(e){return e.level%2?e.to:e.from}function Wo(e){return e.level%2?e.from:e.to}function Vo(e){var t=_a(e);return t?Ho(t[0]):0}function Uo(e){var t=_a(e);return t?Wo(no(t)):e.text.length}function Bo(e,t){var i=pa(e.doc,t),n=En(i);n!=i&&(t=ga(n));var a=_a(n),o=a?a[0].level%2?Uo(n):Vo(n):0;return de(t,o)}function Yo(e,t){var i=Bo(e,t.line),n=pa(e.doc,i.line),a=_a(n);if(!a||0==a[0].level){var o=Math.max(0,n.text.search(/\S/)),r=t.line==i.line&&t.ch<=o&&t.ch;return de(i.line,r?0:o)}return i}function Ko(e,t){zo=null;for(var i,n=0;n<e.length;++n){var a=e[n];if(a.from<t&&a.to>t)return n;if(a.from==t||a.to==t){if(null!=i)return o=e,r=a.level,s=e[i].level,void 0,l=o[0].level,r==l||s!=l&&r<s?(a.from!=a.to&&(zo=i),n):(a.from!=a.to&&(zo=n),i);i=n}}var o,r,s,l;return i}function Jo(e,t,i,n){if(!n)return t+i;for(;0<(t+=i)&&bo(e.text.charAt(t)););return t}function Go(e,t,i,n){var a=_a(e);if(!a)return Xo(e,t,i,n);for(var o=Ko(a,t),r=a[o],s=Jo(e,t,r.level%2?-i:i,n);;){if(s>r.from&&s<r.to)return s;if(s==r.from||s==r.to)return Ko(a,s)==o?s:0<i==(r=a[o+=i]).level%2?r.to:r.from;if(!(r=a[o+=i]))return null;s=0<i==r.level%2?Jo(e,r.to,-1,n):Jo(e,r.from,1,n)}}function Xo(e,t,i,n){var a=t+i;if(n)for(;0<a&&bo(e.text.charAt(a));)a+=i;return a<0||a>e.text.length?null:a}_.keyNames=qo,function(){for(var e=0;e<10;e++)qo[e+48]=qo[e+96]=String(e);for(e=65;e<=90;e++)qo[e]=String.fromCharCode(e);for(e=1;e<=12;e++)qo[e+111]=qo[e+63235]="F"+e}();var Qo=function(){var _="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";var A=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,w=/[stwN]/,x=/[LRr]/,k=/[Lb1n]/,$=/[1n]/;function C(e,t,i){this.level=e,this.from=t,this.to=i}return function(e){if(!A.test(e))return!1;for(var t,i=e.length,n=[],a=0;a<i;++a)n.push(d=(t=e.charCodeAt(a))<=247?_.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?y.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L");a=0;for(var o="L";a<i;++a){"m"==(d=n[a])?n[a]=o:o=d}a=0;for(var r="L";a<i;++a){"1"==(d=n[a])&&"r"==r?n[a]="n":x.test(d)&&"r"==(r=d)&&(n[a]="R")}for(a=1,o=n[0];a<i-1;++a){"+"==(d=n[a])&&"1"==o&&"1"==n[a+1]?n[a]="1":","!=d||o!=n[a+1]||"1"!=o&&"n"!=o||(n[a]=o),o=d}for(a=0;a<i;++a){if(","==(d=n[a]))n[a]="N";else if("%"==d){for(var s=a+1;s<i&&"%"==n[s];++s);for(var l=a&&"!"==n[a-1]||s<i&&"1"==n[s]?"1":"N",c=a;c<s;++c)n[c]=l;a=s-1}}for(a=0,r="L";a<i;++a){var d=n[a];"L"==r&&"1"==d?n[a]="L":x.test(d)&&(r=d)}for(a=0;a<i;++a)if(w.test(n[a])){for(s=a+1;s<i&&w.test(n[s]);++s);var u="L"==(a?n[a-1]:"L"),p="L"==(s<i?n[s]:"L");for(l=u||p?"L":"R",c=a;c<s;++c)n[c]=l;a=s-1}var h,f=[];for(a=0;a<i;)if(k.test(n[a])){var m=a;for(++a;a<i&&k.test(n[a]);++a);f.push(new C(0,m,a))}else{var g=a,v=f.length;for(++a;a<i&&"L"!=n[a];++a);for(c=g;c<a;)if($.test(n[c])){g<c&&f.splice(v,0,new C(1,g,c));var b=c;for(++c;c<a&&$.test(n[c]);++c);f.splice(v,0,new C(2,b,c)),g=c}else++c;g<a&&f.splice(v,0,new C(1,g,a))}return 1==f[0].level&&(h=e.match(/^\s+/))&&(f[0].from=h[0].length,f.unshift(new C(0,0,h[0].length))),1==no(f).level&&(h=e.match(/\s+$/))&&(no(f).to-=h[0].length,f.push(new C(0,i-h[0].length,i))),f[0].level!=no(f).level&&f.push(new C(f[0].level,i,i)),f}}();return _.version="5.1.1",_}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var k={},$=/[^\s\u00a0]/,C=e.Pos;function p(e){var t=e.search($);return-1==t?0:t}e.commands.toggleComment=function(e){for(var t=1/0,i=e.listSelections(),n=null,a=i.length-1;0<=a;a--){var o=i[a].from(),r=i[a].to();o.line>=t||(r.line>=t&&(r=C(t,0)),t=o.line,null==n?e.uncomment(o,r)?n="un":(e.lineComment(o,r),n="line"):"un"==n?e.uncomment(o,r):e.lineComment(o,r))}},e.defineExtension("lineComment",function(a,e,o){o||(o=k);var r=this,t=r.getModeAt(a),s=o.lineComment||t.lineComment;if(s){var l=r.getLine(a.line);if(null!=l){var c=Math.min(0!=e.ch||e.line==a.line?e.line+1:e.line,r.lastLine()+1),d=null==o.padding?" ":o.padding,u=o.commentBlankLines||a.line==e.line;r.operation(function(){if(o.indent)for(var e=l.slice(0,p(l)),t=a.line;t<c;++t){var i=r.getLine(t),n=e.length;(u||$.test(i))&&(i.slice(0,n)!=e&&(n=p(i)),r.replaceRange(e+s+d,C(t,0),C(t,n)))}else for(t=a.line;t<c;++t)(u||$.test(r.getLine(t)))&&r.replaceRange(s+d,C(t,0))})}}else(o.blockCommentStart||t.blockCommentStart)&&(o.fullLines=!0,r.blockComment(a,e,o))}),e.defineExtension("blockComment",function(n,a,o){o||(o=k);var r=this,s=r.getModeAt(n),l=o.blockCommentStart||s.blockCommentStart,c=o.blockCommentEnd||s.blockCommentEnd;if(l&&c){var d=Math.min(a.line,r.lastLine());d!=n.line&&0==a.ch&&$.test(r.getLine(d))&&--d;var u=null==o.padding?" ":o.padding;n.line>d||r.operation(function(){if(0!=o.fullLines){var e=$.test(r.getLine(d));r.replaceRange(u+c,C(d)),r.replaceRange(l+u,C(n.line,0));var t=o.blockCommentLead||s.blockCommentLead;if(null!=t)for(var i=n.line+1;i<=d;++i)(i!=d||e)&&r.replaceRange(t+u,C(i,0))}else r.replaceRange(c,a),r.replaceRange(l,n)})}else(o.lineComment||s.lineComment)&&0!=o.fullLines&&r.lineComment(n,a,o)}),e.defineExtension("uncomment",function(e,t,i){i||(i=k);var a,o=this,n=o.getModeAt(e),r=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,o.lastLine()),s=Math.min(e.line,r),l=i.lineComment||n.lineComment,c=[],d=null==i.padding?" ":i.padding;e:if(l){for(var u=s;u<=r;++u){var p=o.getLine(u),h=p.indexOf(l);if(-1<h&&!/comment/.test(o.getTokenTypeAt(C(u,h+1)))&&(h=-1),-1==h&&(u!=r||u==s)&&$.test(p))break e;if(-1<h&&$.test(p.slice(0,h)))break e;c.push(p)}if(o.operation(function(){for(var e=s;e<=r;++e){var t=c[e-s],i=t.indexOf(l),n=i+l.length;i<0||(t.slice(n,n+d.length)==d&&(n+=d.length),a=!0,o.replaceRange("",C(e,i),C(e,n)))}}),a)return!0}var f=i.blockCommentStart||n.blockCommentStart,m=i.blockCommentEnd||n.blockCommentEnd;if(!f||!m)return!1;var g=i.blockCommentLead||n.blockCommentLead,v=o.getLine(s),b=r==s?v:o.getLine(r),_=v.indexOf(f),y=b.lastIndexOf(m);if(-1==y&&s!=r&&(b=o.getLine(--r),y=b.lastIndexOf(m)),-1==_||-1==y||!/comment/.test(o.getTokenTypeAt(C(s,_+1)))||!/comment/.test(o.getTokenTypeAt(C(r,y+1))))return!1;var A=v.lastIndexOf(f,e.ch),w=-1==A?-1:v.slice(0,e.ch).indexOf(m,A+f.length);if(-1!=A&&-1!=w&&w+m.length!=e.ch)return!1;w=b.indexOf(m,t.ch);var x=b.slice(t.ch).lastIndexOf(f,w-t.ch);return A=-1==w||-1==x?-1:t.ch+x,(-1==w||-1==A||A==t.ch)&&(o.operation(function(){o.replaceRange("",C(r,y-(d&&b.slice(y-d.length,y)==d?d.length:0)),C(r,y+m.length));var e=_+f.length;if(d&&v.slice(e,e+d.length)==d&&(e+=d.length),o.replaceRange("",C(s,_),C(s,e)),g)for(var t=s+1;t<=r;++t){var i=o.getLine(t),n=i.indexOf(g);if(-1!=n&&!$.test(i.slice(0,n))){var a=n+g.length;d&&i.slice(a,a+d.length)==d&&(a+=d.length),o.replaceRange("",C(t,n),C(t,a))}}}),!0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){function p(e,t,i){var n;return(n=e.getWrapperElement().appendChild(document.createElement("div"))).className=i?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?n.innerHTML=t:n.appendChild(t),n}function h(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}u.defineExtension("openDialog",function(e,t,i){i||(i={}),h(this,null);var n=p(this,e,i.bottom),a=!1,o=this;function r(e){if("string"==typeof e)l.value=e;else{if(a)return;a=!0,n.parentNode.removeChild(n),o.focus(),i.onClose&&i.onClose(n)}}var s,l=n.getElementsByTagName("input")[0];return l?(i.value&&(l.value=i.value,!1!==i.selectValueOnOpen&&l.select()),i.onInput&&u.on(l,"input",function(e){i.onInput(e,l.value,r)}),i.onKeyUp&&u.on(l,"keyup",function(e){i.onKeyUp(e,l.value,r)}),u.on(l,"keydown",function(e){i&&i.onKeyDown&&i.onKeyDown(e,l.value,r)||((27==e.keyCode||!1!==i.closeOnEnter&&13==e.keyCode)&&(l.blur(),u.e_stop(e),r()),13==e.keyCode&&t(l.value,e))}),$(l).focus(100)):(s=n.getElementsByTagName("button")[0])&&(u.on(s,"click",function(){r(),o.focus()}),!1!==i.closeOnBlur&&u.on(s,"blur",r),s.focus()),r}),u.defineExtension("openConfirm",function(e,t,i){h(this,null);var n=p(this,e,i&&i.bottom),a=n.getElementsByTagName("button"),o=!1,r=this,s=1;function l(){o||(o=!0,n.parentNode.removeChild(n),r.focus())}a[0].focus();for(var c=0;c<a.length;++c){var d=a[c];!function(t){u.on(d,"click",function(e){u.e_preventDefault(e),l(),t&&t(r)})}(t[c]),u.on(d,"blur",function(){--s,setTimeout(function(){s<=0&&l()},200)}),u.on(d,"focus",function(){++s})}}),u.defineExtension("openNotification",function(e,t){h(this,r);var i,n=p(this,e,t&&t.bottom),a=!1,o=t&&void 0!==t.duration?t.duration:5e3;function r(){a||(a=!0,clearTimeout(i),n.parentNode.removeChild(n))}return u.on(n,"click",function(e){u.e_preventDefault(e),r()}),o&&(i=setTimeout(r,o)),r})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(n){var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),m=n.Pos,g={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function u(e,t,i,n){var a=e.getLineHandle(t.line),o=t.ch-1,r=0<=o&&g[a.text.charAt(o)]||g[a.text.charAt(++o)];if(!r)return null;var s=">"==r.charAt(1)?1:-1;if(i&&0<s!=(o==t.ch))return null;var l=e.getTokenTypeAt(m(t.line,o+1)),c=p(e,m(t.line,o+(0<s?1:0)),s,l||null,n);return null==c?null:{from:m(t.line,o),to:c&&c.pos,match:c&&c.ch==r.charAt(0),forward:0<s}}function p(e,t,i,n,a){for(var o=a&&a.maxScanLineLength||1e4,r=a&&a.maxScanLines||1e3,s=[],l=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/,c=0<i?Math.min(t.line+r,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-r),d=t.line;d!=c;d+=i){var u=e.getLine(d);if(u){var p=0<i?0:u.length-1,h=0<i?u.length:-1;if(!(u.length>o))for(d==t.line&&(p=t.ch-(i<0?1:0));p!=h;p+=i){var f=u.charAt(p);if(l.test(f)&&(void 0===n||e.getTokenTypeAt(m(d,p+1))==n))if(">"==g[f].charAt(1)==0<i)s.push(f);else{if(!s.length)return{pos:m(d,p),ch:f};s.pop()}}}}return d-i!=(0<i?e.lastLine():e.firstLine())&&null}function t(e,t,i){for(var n=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],o=e.listSelections(),r=0;r<o.length;r++){var s=o[r].empty()&&u(e,o[r].head,!1,i);if(s&&e.getLine(s.from.line).length<=n){var l=s.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(s.from,m(s.from.line,s.from.ch+1),{className:l})),s.to&&e.getLine(s.to.line).length<=n&&a.push(e.markText(s.to,m(s.to.line,s.to.ch+1),{className:l}))}}if(a.length){d&&e.state.focused&&e.focus();var c=function(){e.operation(function(){for(var e=0;e<a.length;e++)a[e].clear()})};if(!t)return c;setTimeout(c,800)}}var i=null;function a(e){e.operation(function(){i&&(i(),i=null),i=t(e,!1,e.state.matchBrackets)})}n.defineOption("matchBrackets",!1,function(e,t,i){i&&i!=n.Init&&e.off("cursorActivity",a),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",a))}),n.defineExtension("matchBrackets",function(){t(this,!0)}),n.defineExtension("findMatchingBracket",function(e,t,i){return u(this,e,t,i)}),n.defineExtension("scanForBracket",function(e,t,i,n){return p(this,e,t,i,n)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(r){"use strict";function s(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function n(o){o.state.failedTagMatch=!1,o.operation(function(){if(s(o),!o.somethingSelected()){var e=o.getCursor(),t=o.getViewport();t.from=Math.min(t.from,e.line),t.to=Math.max(e.line+1,t.to);var i=r.findMatchingTag(o,e,t);if(i){if(o.state.matchBothTags){var n="open"==i.at?i.open:i.close;n&&(o.state.tagHit=o.markText(n.from,n.to,{className:"CodeMirror-matchingtag"}))}var a="close"==i.at?i.open:i.close;a?o.state.tagOther=o.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}):o.state.failedTagMatch=!0}}})}function a(e){e.state.failedTagMatch&&n(e)}r.defineOption("matchTags",!1,function(e,t,i){i&&i!=r.Init&&(e.off("cursorActivity",n),e.off("viewportChange",a),s(e)),t&&(e.state.matchBothTags="object"==typeof t&&t.bothTags,e.on("cursorActivity",n),e.on("viewportChange",a),n(e))}),r.commands.toMatchingTag=function(e){var t=r.findMatchingTag(e,e.getCursor());if(t){var i="close"==t.at?t.open:t.close;i&&e.extendSelection(i.to,i.from)}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var d=e.Pos;var t="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("<(/?)(["+t+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function u(e,t,i,n){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=n?n.from:e.firstLine(),this.max=n?n.to-1:e.lastLine()}function a(e,t){var i=e.cm.getTokenTypeAt(d(e.line,t));return i&&/\btag\b/.test(i)}function o(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function r(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function p(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(o(e))continue;return}if(a(e,t+1)){var i=e.text.lastIndexOf("/",t),n=-1<i&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t+1}}function h(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(r(e))continue;return}if(a(e,t+1)){n.lastIndex=t,e.ch=t;var i=n.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){n.lastIndex=e.ch;var t=n.exec(e.text);if(!t){if(o(e))continue;return}if(a(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(r(e))continue;return}if(a(e,t+1)){var i=e.text.lastIndexOf("/",t),n=-1<i&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t}}function f(e,t){for(var i=[];;){var n,a=l(e),o=e.line,r=e.ch-(a?a[0].length:0);if(!a||!(n=p(e)))return;if("selfClose"!=n)if(a[1]){for(var s=i.length-1;0<=s;--s)if(i[s]==a[2]){i.length=s;break}if(s<0&&(!t||t==a[2]))return{tag:a[2],from:d(o,r),to:d(e.line,e.ch)}}else i.push(a[2])}}function m(e,t){for(var i=[];;){var n=c(e);if(!n)return;if("selfClose"!=n){var a=e.line,o=e.ch,r=h(e);if(!r)return;if(r[1])i.push(r[2]);else{for(var s=i.length-1;0<=s;--s)if(i[s]==r[2]){i.length=s;break}if(s<0&&(!t||t==r[2]))return{tag:r[2],from:d(e.line,e.ch),to:d(a,o)}}}else h(e)}}e.registerHelper("fold","xml",function(e,t){for(var i=new u(e,t.line,0);;){var n,a=l(i);if(!a||i.line!=t.line||!(n=p(i)))return;if(!a[1]&&"selfClose"!=n){t=d(i.line,i.ch);var o=f(i,a[2]);return o&&{from:t,to:o.from}}}}),e.findMatchingTag=function(e,t,i){var n=new u(e,t.line,t.ch,i);if(-1!=n.text.indexOf(">")||-1!=n.text.indexOf("<")){var a=p(n),o=a&&d(n.line,n.ch),r=a&&h(n);if(a&&r&&(l=t,!(0<((s=n).line-l.line||s.ch-l.ch)))){var s,l,c={from:d(n.line,n.ch),to:o,tag:r[2]};return"selfClose"==a?{open:c,close:null,at:"open"}:r[1]?{open:m(n,r[2]),close:c,at:"close"}:{open:c,close:f(n=new u(e,o.line,o.ch,i),r[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,i){for(var n=new u(e,t.line,t.ch,i);;){var a=m(n);if(!a)break;var o=f(new u(e,t.line,t.ch,i),a.tag);if(o)return{open:a,close:o}}},e.scanForClosingTag=function(e,t,i,n){return f(new u(e,t.line,t.ch,n?{from:0,to:n}:null),i)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(t){"use strict";t.overlayMode=function(i,n,a){return{startState:function(){return{base:t.startState(i),overlay:t.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(i,e.base),overlay:t.copyState(n,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=i.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=n.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||a&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:i.indent&&function(e,t){return i.indent(e.base,t)},electricChars:i.electricChars,innerMode:function(e){return{state:e.base,mode:i}},blankLine:function(e){i.blankLine&&i.blankLine(e.base),n.blankLine&&n.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function i(e){clearTimeout(n.doRedraw),n.doRedraw=setTimeout(function(){n.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var n=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(n.doUpdate),n.doUpdate=setTimeout(function(){n.computeScale()&&i(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),!1!==t.listenForChanges&&e.on("change",this.changeHandler=function(){i(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.heightAtLine(e.lastLine()+1,"local");if(t!=this.hScale)return this.hScale=t,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){!1!==e&&this.computeScale();var t=this.cm,i=this.hScale,n=document.createDocumentFragment(),a=this.annotations;if(t.display.barWidth)for(var o,r=0;r<a.length;r++){for(var s=a[r],l=o||t.charCoords(s.from,"local").top*i,c=t.charCoords(s.to,"local").bottom*i;r<a.length-1&&!(c+.9<(o=t.charCoords(a[r+1].from,"local").top*i));)s=a[++r],c=t.charCoords(s.to,"local").bottom*i;if(c!=l){var d=Math.max(c-l,3),u=n.appendChild(document.createElement("div"));u.style.cssText="position: absolute; right: 0px; width: "+Math.max(t.display.barWidth-1,2)+"px; top: "+(l+this.buttonHeight)+"px; height: "+d+"px",u.className=this.options.className}}this.div.textContent="",this.div.appendChild(n)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(s){"use strict";function n(e,t,i){this.orientation=t,this.scroll=i,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=e+"-"+t,this.inner=this.node.appendChild(document.createElement("div"));var r=this;function n(e){var t=s.wheelEventPixels(e)["horizontal"==r.orientation?"x":"y"],i=r.pos;r.moveTo(r.pos+t),r.pos!=i&&s.e_preventDefault(e)}s.on(this.inner,"mousedown",function(e){if(1==e.which){s.e_preventDefault(e);var t="horizontal"==r.orientation?"pageX":"pageY",i=e[t],n=r.pos;s.on(document,"mousemove",o),s.on(document,"mouseup",a)}function a(){s.off(document,"mousemove",o),s.off(document,"mouseup",a)}function o(e){if(1!=e.which)return a();r.moveTo(n+(e[t]-i)*(r.total/r.size))}}),s.on(this.node,"click",function(e){s.e_preventDefault(e);var t,i=r.inner.getBoundingClientRect();t="horizontal"==r.orientation?e.clientX<i.left?-1:e.clientX>i.right?1:0:e.clientY<i.top?-1:e.clientY>i.bottom?1:0,r.moveTo(r.pos+t*r.screen)}),s.on(this.node,"mousewheel",n),s.on(this.node,"DOMMouseScroll",n)}n.prototype.moveTo=function(e,t){e<0&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),e!=this.pos&&(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",!1!==t&&this.scroll(e,this.orientation))};function i(e,t,i){this.addClass=e,this.horiz=new n(e,"horizontal",i),t(this.horiz.node),this.vert=new n(e,"vertical",i),t(this.vert.node),this.width=null}n.prototype.update=function(e,t,i){this.screen=t,this.total=e,this.size=i;var n=this.screen*(this.size/this.total);n<10&&(this.size-=10-n,n=10),this.inner.style["horizontal"==this.orientation?"width":"height"]=n+"px",this.inner.style["horizontal"==this.orientation?"left":"top"]=this.pos*(this.size/this.total)+"px"},i.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var i=this.width||0,n=e.scrollWidth>e.clientWidth+1,a=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=a?"block":"none",this.horiz.node.style.display=n?"block":"none",a&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(n?i:0)),this.vert.node.style.display="block",this.vert.node.style.bottom=n?i+"px":"0"),n&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(a?i:0)-e.barLeft),this.horiz.node.style.right=a?i+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:a?i:0,bottom:n?i:0}},i.prototype.setScrollTop=function(e){this.vert.moveTo(e,!1)},i.prototype.setScrollLeft=function(e){this.horiz.moveTo(e,!1)},i.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},s.scrollbarModel.simple=function(e,t){return new i("CodeMirror-simplescroll",e,t)},s.scrollbarModel.overlay=function(e,t){return new i("CodeMirror-overlayscroll",e,t)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(c){"use strict";function n(e,t,i,n){this.cm=e;var a={listenForChanges:!1};for(var o in n)a[o]=n[o];a.className||(a.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(a),this.query=t,this.caseFold=i,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var r=this;e.on("change",this.changeHandler=function(e,t){r.onChange(t)})}c.defineExtension("showMatchesOnScrollbar",function(e,t,i){return"string"==typeof i&&(i={className:i}),i||(i={}),new n(this,e,t,i)});function d(e,t,i){return e<=t?e:Math.max(t,e+i)}n.prototype.findMatches=function(){if(this.gap){for(var e=0;e<this.matches.length;e++){if((i=this.matches[e]).from.line>=this.gap.to)break;i.to.line>=this.gap.from&&this.matches.splice(e--,1)}for(var t=this.cm.getSearchCursor(this.query,c.Pos(this.gap.from,0),this.caseFold);t.findNext();){var i;if((i={from:t.from(),to:t.to()}).from.line>=this.gap.to)break;if(this.matches.splice(e++,0,i),1e3<this.matches.length)break}this.gap=null}},n.prototype.onChange=function(e){var t=e.from.line,i=c.changeEnd(e).line,n=i-e.to.line;if(this.gap?(this.gap.from=Math.min(d(this.gap.from,t,n),e.from.line),this.gap.to=Math.max(d(this.gap.to,t,n),e.from.line)):this.gap={from:e.from.line,to:i+1},n)for(var a=0;a<this.matches.length;a++){var o=this.matches[a],r=d(o.from.line,t,n);r!=o.from.line&&(o.from=c.Pos(r,o.from.ch));var s=d(o.to.line,t,n);s!=o.to.line&&(o.to=c.Pos(s,o.to.ch))}clearTimeout(this.update);var l=this;this.update=setTimeout(function(){l.updateAfterChange()},250)},n.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},n.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";function o(e){"object"==typeof e&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),null==this.style&&(this.style="matchhighlight"),null==this.minChars&&(this.minChars=2),null==this.delay&&(this.delay=100),null==this.wordsOnly&&(this.wordsOnly=!1),this.overlay=this.timeout=null}function r(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){s(e)},t.delay)}function s(c){c.operation(function(){var e=c.state.matchHighlighter;if(e.overlay&&(c.removeOverlay(e.overlay),e.overlay=null),c.somethingSelected()||!e.showToken){var t=c.getCursor("from"),i=c.getCursor("to");if(t.line==i.line&&(!e.wordsOnly||function(e,t,i){{if(null!==e.getRange(t,i).match(/^\w+$/)){if(0<t.ch){var n={line:t.line,ch:t.ch-1},a=e.getRange(n,t);if(null===a.match(/\W/))return!1}if(i.ch<e.getLine(t.line).length){var n={line:i.line,ch:i.ch+1},a=e.getRange(i,n);if(null===a.match(/\W/))return!1}return!0}return!1}}(c,t,i))){var n=c.getRange(t,i).replace(/^\s+|\s+$/g,"");n.length>=e.minChars&&c.addOverlay(e.overlay=d(n,!1,e.style))}}else{for(var a=!0===e.showToken?/[\w$]/:e.showToken,o=c.getCursor(),r=c.getLine(o.line),s=o.ch,l=s;s&&a.test(r.charAt(s-1));)--s;for(;l<r.length&&a.test(r.charAt(l));)++l;s<l&&c.addOverlay(e.overlay=d(r.slice(s,l),a,e.style))}})}function d(n,a,o){return{token:function(e){if(e.match(n)&&(!a||(i=a,!((t=e).start&&i.test(t.string.charAt(t.start-1))||t.pos!=t.string.length&&i.test(t.string.charAt(t.pos))))))return o;var t,i;e.next(),e.skipTo(n.charAt(0))||e.skipToEnd()}}}a.defineOption("highlightSelectionMatches",!1,function(e,t,i){if(i&&i!=a.Init){var n=e.state.matchHighlighter.overlay;n&&e.removeOverlay(n),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",r)}t&&(e.state.matchHighlighter=new o(t),s(e),e.on("cursorActivity",r))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(a){"use strict";function t(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new t)}function s(e){return"string"==typeof e&&e==e.toLowerCase()}function u(e,t,i){return e.getSearchCursor(t,i,s(t))}function i(e,t,i,n,a){e.openDialog?e.openDialog(t,a,{value:n}):a(prompt(i,n))}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function n(n,a){var o=r(n);if(o.query)return c(n,a);i(n,'Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',"Search for:",n.getSelection(),function(t){n.operation(function(){var i,e;t&&!o.query&&(o.query=l(t),n.removeOverlay(o.overlay,s(o.query)),o.overlay=(i=o.query,e=s(o.query),"string"==typeof i?i=new RegExp(i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e?"gi":"g"):i.global||(i=new RegExp(i.source,i.ignoreCase?"gi":"g")),{token:function(e){i.lastIndex=e.pos;var t=i.exec(e.string);if(t&&t.index==e.pos)return e.pos+=t[0].length,"searching";t?e.pos=t.index:e.skipToEnd()}}),n.addOverlay(o.overlay),n.showMatchesOnScrollbar&&(o.annotate&&(o.annotate.clear(),o.annotate=null),o.annotate=n.showMatchesOnScrollbar(o.query,s(o.query))),o.posFrom=o.posTo=n.getCursor(),c(n,a))})})}function c(i,n){i.operation(function(){var e=r(i),t=u(i,e.query,n?e.posFrom:e.posTo);(t.find(n)||(t=u(i,e.query,n?a.Pos(i.lastLine()):a.Pos(i.firstLine(),0))).find(n))&&(i.setSelection(t.from(),t.to()),i.scrollIntoView({from:t.from(),to:t.to()}),e.posFrom=t.from(),e.posTo=t.to())})}function o(t){t.operation(function(){var e=r(t);e.query&&(e.query=null,t.removeOverlay(e.overlay),e.annotate&&(e.annotate.clear(),e.annotate=null))})}function d(d,e){d.getOption("readOnly")||i(d,'Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',"Replace:",d.getSelection(),function(c){c&&(c=l(c),i(d,'With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',"Replace with:","",function(t){if(e)d.operation(function(){for(var e=u(d,c);e.findNext();)if("string"!=typeof c){var i=d.getRange(e.from(),e.to()).match(c);e.replace(t.replace(/\$(\d)/g,function(e,t){return i[t]}))}else e.replace(t)});else{o(d);var r=u(d,c,d.getCursor()),s=function(){var e,t,i,n,a,o=r.from();!(e=r.findNext())&&(r=u(d,c),!(e=r.findNext())||o&&r.from().line==o.line&&r.from().ch==o.ch)||(d.setSelection(r.from(),r.to()),d.scrollIntoView({from:r.from(),to:r.to()}),i="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>",n="Replace?",a=[function(){l(e)},s],(t=d).openConfirm?t.openConfirm(i,a):confirm(n)&&a[0]())},l=function(i){r.replace("string"==typeof c?t:t.replace(/\$(\d)/g,function(e,t){return i[t]})),s()};s()}}))})}a.commands.find=function(e){o(e),n(e)},a.commands.findNext=n,a.commands.findPrev=function(e){n(e,!0)},a.commands.clearSearch=o,a.commands.replace=d,a.commands.replaceAll=function(e){d(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";var h=a.Pos;function n(c,l,e,t){if(this.atOccurrence=!1,this.doc=c,null==t&&"string"==typeof l&&(t=!1),e=e?c.clipPos(e):h(0,0),this.pos={from:e,to:e},"string"!=typeof l)l.global||(l=new RegExp(l.source,l.ignoreCase?"ig":"g")),this.matches=function(e,t){if(e){l.lastIndex=0;for(var i=c.getLine(t.line).slice(0,t.ch),n=0;;){l.lastIndex=n;var a=l.exec(i);if(!a)break;if(r=(o=a).index,(n=o.index+(o[0].length||1))==i.length)break}(s=o&&o[0].length||0)||(0==r&&0==i.length?o=void 0:r!=c.getLine(t.line).length&&s++)}else{l.lastIndex=t.ch;i=c.getLine(t.line);var o,r,s=(o=l.exec(i))&&o[0].length||0;(r=o&&o.index)+s==i.length||s||(s=1)}if(o&&s)return{from:h(t.line,r),to:h(t.line,r+s),match:o}};else{var o=l;t&&(l=l.toLowerCase());var d=t?function(e){return e.toLowerCase()}:function(e){return e},u=l.split("\n");if(1==u.length)l.length?this.matches=function(e,t){if(e){var i=c.getLine(t.line).slice(0,t.ch);if(-1<(a=(n=d(i)).lastIndexOf(l)))return a=r(i,n,a),{from:h(t.line,a),to:h(t.line,a+o.length)}}else{var n,a;i=c.getLine(t.line).slice(t.ch);if(-1<(a=(n=d(i)).indexOf(l)))return a=r(i,n,a)+t.ch,{from:h(t.line,a),to:h(t.line,a+o.length)}}}:this.matches=function(){};else{var p=o.split("\n");this.matches=function(e,t){var i=u.length-1;if(e){if(t.line-(u.length-1)<c.firstLine())return;if(d(c.getLine(t.line).slice(0,p[i].length))!=u[u.length-1])return;for(var n=h(t.line,p[i].length),a=t.line-1,o=i-1;1<=o;--o,--a)if(u[o]!=d(c.getLine(a)))return;var r=(s=c.getLine(a)).length-p[0].length;if(d(s.slice(r))!=u[0])return;return{from:h(a,r),to:n}}if(!(t.line+(u.length-1)>c.lastLine())){var s;r=(s=c.getLine(t.line)).length-p[0].length;if(d(s.slice(r))==u[0]){var l=h(t.line,r);for(a=t.line+1,o=1;o<i;++o,++a)if(u[o]!=d(c.getLine(a)))return;if(d(c.getLine(a).slice(0,p[i].length))==u[i])return{from:l,to:h(a,p[i].length)}}}}}}}function r(e,t,i){if(e.length==t.length)return i;for(var n=Math.min(i,e.length);;){var a=e.slice(0,n).toLowerCase().length;if(a<i)++n;else{if(!(i<a))return n;--n}}}n.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var i=this,t=this.doc.clipPos(e?this.pos.from:this.pos.to);function n(e){var t=h(e,0);return i.pos={from:t,to:t},i.atOccurrence=!1}for(;;){if(this.pos=this.matches(e,t))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!t.line)return n(0);t=h(t.line-1,this.doc.getLine(t.line-1).length)}else{var a=this.doc.lineCount();if(t.line==a-1)return n(a);t=h(t.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,t){if(this.atOccurrence){var i=a.splitLines(e);this.doc.replaceRange(i,this.pos.from,this.pos.to,t),this.pos.to=h(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},a.defineExtension("getSearchCursor",function(e,t,i){return new n(this.doc,e,t,i)}),a.defineDocExtension("getSearchCursor",function(e,t,i){return new n(this,e,t,i)}),a.defineExtension("selectMatches",function(e,t){for(var i=[],n=this.getSearchCursor(e,this.getCursor("from"),t);n.findNext()&&!(0<a.cmpPos(n.to(),this.getCursor("to")));)i.push({anchor:n.from(),head:n.to()});i.length&&this.setSelections(i,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(a){"use strict";var r="CodeMirror-activeline",s="CodeMirror-activeline-background";function l(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",r),e.removeLineClass(e.state.activeLines[t],"background",s)}function o(t,e){for(var i=[],n=0;n<e.length;n++){var a=e[n];if(a.empty()){var o=t.getLineHandleVisualStart(a.head.line);i[i.length-1]!=o&&i.push(o)}}(function(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0})(t.state.activeLines,i)||t.operation(function(){l(t);for(var e=0;e<i.length;e++)t.addLineClass(i[e],"wrap",r),t.addLineClass(i[e],"background",s);t.state.activeLines=i})}function c(e,t){o(e,t.ranges)}a.defineOption("styleActiveLine",!1,function(e,t,i){var n=i&&i!=a.Init;t&&!n?(e.state.activeLines=[],o(e,e.listSelections()),e.on("beforeSelectionChange",c)):!t&&n&&(e.off("beforeSelectionChange",c),l(e),delete e.state.activeLines)})}),CodeMirror.controlsSetup=function(e){var t=$('<span class="CodeMirror-controls"></span>'),i=$('<span class="change-style" title="Click to cycle style.  Your style preference will be saved using a browser cookie."></span>'),n=$('<span class="toggle-fullscreen" title="Click to toggle full screen mode (F11)."></span>'),a=$('<span class="toggle-wrap" title="Click to toggle line wrapping."></span>');t.append(n,a,i),t.find("span").tipTip(),$(e.getWrapperElement()).append(t);var o=["default","ambiance","blackboard","cobalt","monokai","neat"];null===proboards.code_editor_style&&(proboards.code_editor_style=proboards.cookie("code_editor_style")||o[0]),e.setOption("theme",proboards.code_editor_style),i.on("click",function(e){var t=$.inArray(proboards.code_editor_style,o);t===o.length-1&&(t=-1),proboards.code_editor_style=o[t+1],$(".CodeMirror").each(function(){$(this).data("editor").setOption("theme",proboards.code_editor_style)}),proboards.cookie("code_editor_style",proboards.code_editor_style,{expires:"never",path:"/"})}),e.toggleFullScreen=function(){var e=$(this.getWrapperElement()),t=($(this.getGutterElement()),$(this.getScrollerElement()));e.data("isFullScreen")?(e.removeClass("fullscreen").data("isFullScreen",!1),document.documentElement.style.overflow="",e.attr("style",e.data("oldStyle")),t.attr("style",t.data("oldStyle"))):(e.addClass("fullscreen").data("isFullScreen",!0),document.documentElement.style.overflow="hidden",e.data("oldStyle",e.attr("style")).removeAttr("style"),t.data("oldStyle",t.attr("style")).removeAttr("style")),this.refresh()};var r=e.getOption("extraKeys");$.extend(r,{F11:function(e){e.toggleFullScreen()},Esc:function(e){$(e.getWrapperElement()).data("fullscreen",!0),e.toggleFullScreen()}}),e.setOption("extraKeys",r),n.on("click",function(){e.toggleFullScreen()});var s=proboards.cookie("code_editor_wrap"),l=null!=s&&"false"!=s.toLowerCase();l&&(a.addClass("wrap"),e.setOption("lineWrapping",!0)),a.on("click",function(){l=!l,$(".CodeMirror").each(function(){$(this).data("editor").setOption("lineWrapping",l),$(".CodeMirror-controls .toggle-wrap",this).toggleClass("wrap",l)}),proboards.cookie("code_editor_wrap",l,{expires:"never",path:"/"})})},CodeMirror.defineMode("pbTemplate",function(e,t){return CodeMirror.overlayMode(CodeMirror.getMode(e,t.backdrop||"text/html"),{token:function(e,t){var i;if(e.match("$["))for(;null!=(i=e.next());)if("]"==i)return"pbTemplate";for(;null!=e.next()&&!e.match("$[",!1););return null}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){"use strict";function e(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}C.defineMode("css",function(e,t){t.propertyKeywords||(t=C.resolveMode("text/css"));var n,a,o=e.indentUnit,r=t.tokenHooks,s=t.documentTypes||{},l=t.mediaTypes||{},c=t.mediaFeatures||{},d=t.propertyKeywords||{},u=t.nonStandardPropertyKeywords||{},p=t.fontProperties||{},h=t.counterDescriptors||{},i=t.colorKeywords||{},f=t.valueKeywords||{},m=t.allowNested;function g(e,t){return n=t,e}function v(a){return function(e,t){for(var i,n=!1;null!=(i=e.next());){if(i==a&&!n){")"==a&&e.backUp(1);break}n=!n&&"\\"==i}return(i==a||!n&&")"!=a)&&(t.tokenize=null),g("string","string")}}function b(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=v(")"),g(null,"(")}function _(e,t,i){this.type=e,this.indent=t,this.prev=i}function y(e,t,i){return e.context=new _(i,t.indentation()+o,e.context),i}function A(e){return e.context=e.context.prev,e.context.type}function w(e,t,i){return $[i.context.type](e,t,i)}function x(e,t,i,n){for(var a=n||1;0<a;a--)i.context=i.context.prev;return w(e,t,i)}function k(e){var t=e.current().toLowerCase();a=f.hasOwnProperty(t)?"atom":i.hasOwnProperty(t)?"keyword":"variable"}var $={top:function(e,t,i){if("{"==e)return y(i,t,"block");if("}"==e&&i.context.prev)return A(i);if(/@(media|supports|(-moz-)?document)/.test(e))return y(i,t,"atBlock");if(/@(font-face|counter-style)/.test(e))return i.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return y(i,t,"at");if("hash"==e)a="builtin";else if("word"==e)a="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return y(i,t,"interpolation");if(":"==e)return"pseudo";if(m&&"("==e)return y(i,t,"parens")}return i.context.type},block:function(e,t,i){if("word"==e){var n=t.current().toLowerCase();return d.hasOwnProperty(n)?(a="property","maybeprop"):u.hasOwnProperty(n)?(a="string-2","maybeprop"):m?(a=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(a+=" error","maybeprop")}return"meta"==e?"block":m||"hash"!=e&&"qualifier"!=e?$.top(e,t,i):(a="error","block")},maybeprop:function(e,t,i){return":"==e?y(i,t,"prop"):w(e,t,i)},prop:function(e,t,i){if(";"==e)return A(i);if("{"==e&&m)return y(i,t,"propBlock");if("}"==e||"{"==e)return x(e,t,i);if("("==e)return y(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)k(t);else if("interpolation"==e)return y(i,t,"interpolation")}else a+=" error";return"prop"},propBlock:function(e,t,i){return"}"==e?A(i):"word"==e?(a="property","maybeprop"):i.context.type},parens:function(e,t,i){return"{"==e||"}"==e?x(e,t,i):")"==e?A(i):"("==e?y(i,t,"parens"):"interpolation"==e?y(i,t,"interpolation"):("word"==e&&k(t),"parens")},pseudo:function(e,t,i){return"word"==e?(a="variable-3",i.context.type):w(e,t,i)},atBlock:function(e,t,i){if("("==e)return y(i,t,"atBlock_parens");if("}"==e)return x(e,t,i);if("{"==e)return A(i)&&y(i,t,m?"block":"top");if("word"==e){var n=t.current().toLowerCase();a="only"==n||"not"==n||"and"==n||"or"==n?"keyword":s.hasOwnProperty(n)?"tag":l.hasOwnProperty(n)?"attribute":c.hasOwnProperty(n)?"property":d.hasOwnProperty(n)?"property":u.hasOwnProperty(n)?"string-2":f.hasOwnProperty(n)?"atom":"error"}return i.context.type},atBlock_parens:function(e,t,i){return")"==e?A(i):"{"==e||"}"==e?x(e,t,i,2):$.atBlock(e,t,i)},restricted_atBlock_before:function(e,t,i){return"{"==e?y(i,t,"restricted_atBlock"):"word"==e&&"@counter-style"==i.stateArg?(a="variable","restricted_atBlock_before"):w(e,t,i)},restricted_atBlock:function(e,t,i){return"}"==e?(i.stateArg=null,A(i)):"word"==e?(a="@font-face"==i.stateArg&&!p.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==i.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,i){return"word"==e?(a="variable","keyframes"):"{"==e?y(i,t,"top"):w(e,t,i)},at:function(e,t,i){return";"==e?A(i):"{"==e||"}"==e?x(e,t,i):("word"==e?a="tag":"hash"==e&&(a="builtin"),"at")},interpolation:function(e,t,i){return"}"==e?A(i):"{"==e||";"==e?x(e,t,i):("word"==e?a="variable":"variable"!=e&&(a="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new _("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||function(e,t){var i=e.next();if(r[i]){var n=r[i](e,t);if(!1!==n)return n}return"@"==i?(e.eatWhile(/[\w\\\-]/),g("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?g(null,"compare"):'"'==i||"'"==i?(t.tokenize=v(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),g("atom","hash")):"!"==i?(e.match(/^\s*\w*/),g("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),g("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?g(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?g("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?g(null,i):"u"==i&&e.match(/rl(-prefix)?\(/)||"d"==i&&e.match("omain(")||"r"==i&&e.match("egexp(")?(e.backUp(1),t.tokenize=b,g("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),g("property","word")):g(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),g("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?g("variable-2","variable-definition"):g("variable-2","variable")):e.match(/^\w+-/)?g("meta","meta"):void 0})(e,t);return i&&"object"==typeof i&&(n=i[1],i=i[0]),a=i,t.state=$[t.state](n,e,t),a},indent:function(e,t){var i=e.context,n=t&&t.charAt(0),a=i.indent;return"prop"!=i.type||"}"!=n&&")"!=n||(i=i.prev),!i.prev||("}"!=n||"block"!=i.type&&"top"!=i.type&&"interpolation"!=i.type&&"restricted_atBlock"!=i.type)&&(")"!=n||"parens"!=i.type&&"atBlock_parens"!=i.type)&&("{"!=n||"at"!=i.type&&"atBlock"!=i.type)||(a=i.indent-o,i=i.prev),a},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var t=["domain","regexp","url","url-prefix"],i=e(t),n=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=e(n),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],r=e(o),s=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],l=e(s),c=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],d=e(c),u=e(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),p=e(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),h=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=e(h),m=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","x-large","x-small","xor","xx-large","xx-small"],g=e(m),v=t.concat(n).concat(o).concat(s).concat(c).concat(h).concat(m);function b(e,t){for(var i,n=!1;null!=(i=e.next());){if(n&&"/"==i){t.tokenize=null;break}n="*"==i}return["comment","comment"]}function _(e,t){return e.skipTo("--\x3e")?(e.match("--\x3e"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}C.registerHelper("hintWords","css",v),C.defineMIME("text/css",{documentTypes:i,mediaTypes:a,mediaFeatures:r,propertyKeywords:l,nonStandardPropertyKeywords:d,fontProperties:u,counterDescriptors:p,colorKeywords:f,valueKeywords:g,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=_)(e,t)},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=b)(e,t)}},name:"css"}),C.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:r,propertyKeywords:l,nonStandardPropertyKeywords:d,colorKeywords:f,valueKeywords:g,fontProperties:u,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=b)(e,t):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),C.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:r,propertyKeywords:l,nonStandardPropertyKeywords:d,colorKeywords:f,valueKeywords:g,fontProperties:u,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=b)(e,t):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(p){"use strict";p.defineMode("htmlmixed",function(e,t){var s=p.getMode(e,{name:"xml",htmlMode:!0,multilineTagIndentFactor:t.multilineTagIndentFactor,multilineTagIndentPastTag:t.multilineTagIndentPastTag}),l=p.getMode(e,"css"),c=[],i=t&&t.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:p.getMode(e,"javascript")}),i)for(var n=0;n<i.length;++n){var a=i[n];c.push({matches:a.matches,mode:a.mode&&p.getMode(e,a.mode)})}function o(e,t){var i=t.htmlState.tagName;i&&(i=i.toLowerCase());var n=s.token(e,t.htmlState);if("script"==i&&/\btag\b/.test(n)&&">"==e.current()){var a=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);(a=a?a[1]:"")&&/[\"\']/.test(a.charAt(0))&&(a=a.slice(1,a.length-1));for(var o=0;o<c.length;++o){var r=c[o];if("string"==typeof r.matches?a==r.matches:r.matches.test(a)){r.mode&&(t.token=d,t.localMode=r.mode,t.localState=r.mode.startState&&r.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(n)&&">"==e.current()&&(t.token=u,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return n}function r(e,t,i){var n=e.current(),a=n.search(t);return-1<a?e.backUp(n.length-a):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),i}function d(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=o,t.localState=t.localMode=null,null):r(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=o,t.localState=t.localMode=null,null):r(e,/<\/\s*style\s*>/,l.token(e,t.localState))}return c.push({matches:/./,mode:p.getMode(e,"text/plain")}),{startState:function(){return{token:o,localMode:null,localState:null,htmlState:s.startState()}},copyState:function(e){if(e.localState)var t=p.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:t,htmlState:p.copyState(s,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return!e.localMode||/^\s*<\//.test(t)?s.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t):p.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),p.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(Ce){"use strict";Ce.defineMode("javascript",function(e,d){var n,a,u=e.indentUnit,p=d.statementIndent,r=d.jsonld,s=d.json||r,h=d.typescript,l=d.wordCharacters||/[\w$\xa1-\uffff]/,c=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),n=e("keyword c"),a=e("operator"),o={type:"atom",style:"atom"},r={if:e("if"),while:t,with:t,else:i,do:i,try:i,finally:i,return:n,break:n,continue:n,new:n,delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(h){var s={type:"variable",style:"variable-3"},l={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:s,number:s,bool:s,any:s};for(var c in l)r[c]=l[c]}return r}(),f=/[+\-*&%=<>!?|~^]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(e,t,i){return n=e,a=i,t}function v(e,t){var a,i=e.next();if('"'==i||"'"==i)return t.tokenize=(a=i,function(e,t){var i,n=!1;if(r&&"@"==e.peek()&&e.match(m))return t.tokenize=v,g("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=a||n);)n=!n&&"\\"==i;return n||(t.tokenize=v),g("string","string")}),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return g("number","number");if("."==i&&e.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return g(i);if("="==i&&e.eat(">"))return g("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),g("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),g("number","number");if("/"==i)return e.eat("*")?(t.tokenize=b)(e,t):e.eat("/")?(e.skipToEnd(),g("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(function(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),g("regexp","string-2")):(e.eatWhile(f),g("operator","operator",e.current()));if("`"==i)return(t.tokenize=_)(e,t);if("#"==i)return e.skipToEnd(),g("error","error");if(f.test(i))return e.eatWhile(f),g("operator","operator",e.current());if(l.test(i)){e.eatWhile(l);var n=e.current(),o=c.propertyIsEnumerable(n)&&c[n];return o&&"."!=t.lastType?g(o.type,o.style,n):g("variable","variable",n)}}function b(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=v;break}n="*"==i}return g("comment","comment")}function _(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=v;break}n=!n&&"\\"==i}return g("quasi","string-2",e.current())}var y="([{}])";function o(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(i<0)){for(var n=0,a=!1,o=i-1;0<=o;--o){var r=e.string.charAt(o),s=y.indexOf(r);if(0<=s&&s<3){if(!n){++o;break}if(0==--n)break}else if(3<=s&&s<6)++n;else if(l.test(r))a=!0;else{if(/["'\/]/.test(r))return;if(a&&!n){++o;break}}}a&&!n&&(t.fatArrowAt=o)}}var A={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,i,n,a,o){this.indented=e,this.column=t,this.type=i,this.prev=a,this.info=o,null!=n&&(this.align=n)}function x(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var n=e.context;n;n=n.prev)for(i=n.vars;i;i=i.next)if(i.name==t)return!0}var k={state:null,column:null,marked:null,cc:null};function $(){for(var e=arguments.length-1;0<=e;e--)k.cc.push(arguments[e])}function C(){return $.apply(null,arguments),!0}function i(i){function e(e){for(var t=e;t;t=t.next)if(t.name==i)return!0;return!1}var t=k.state;if(t.context){if(k.marked="def",e(t.localVars))return;t.localVars={name:i,next:t.localVars}}else{if(e(t.globalVars))return;d.globalVars&&(t.globalVars={name:i,next:t.globalVars})}}var t={name:"this",next:{name:"arguments"}};function S(){k.state.context={prev:k.state.context,vars:k.state.localVars},k.state.localVars=t}function T(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function D(n,a){var e=function(){var e=k.state,t=e.indented;if("stat"==e.lexical.type)t=e.lexical.indented;else for(var i=e.lexical;i&&")"==i.type&&i.align;i=i.prev)t=i.indented;e.lexical=new w(t,k.stream.column(),n,null,e.lexical,a)};return e.lex=!0,e}function E(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function I(i){return function e(t){return t==i?C():";"==i?$():C(e)}}function P(e,t){return"var"==e?C(D("vardef",t.length),ee,I(";"),E):"keyword a"==e?C(D("form"),M,P,E):"keyword b"==e?C(D("form"),P,E):"{"==e?C(D("}"),X,E):";"==e?C():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==E&&k.state.cc.pop()(),C(D("form"),M,P,E,oe)):"function"==e?C(ue):"for"==e?C(D("form"),re,P,E):"variable"==e?C(D("stat"),V):"switch"==e?C(D("form"),M,D("}","switch"),I("{"),X,E,E):"case"==e?C(M,I(":")):"default"==e?C(I(":")):"catch"==e?C(D("form"),S,I("("),pe,I(")"),P,E,T):"module"==e?C(D("form"),S,ve,T,E):"class"==e?C(D("form"),he,E):"export"==e?C(D("form"),be,E):"import"==e?C(D("form"),_e,E):$(D("stat"),M,I(";"),E)}function M(e){return N(e,!1)}function O(e){return N(e,!0)}function N(e,t){if(k.state.fatArrowAt==k.stream.start){var i=t?W:H;if("("==e)return C(S,D(")"),J(te,")"),E,I("=>"),i,T);if("variable"==e)return $(S,te,I("=>"),i,T)}var n=t?F:R;return A.hasOwnProperty(e)?C(n):"function"==e?C(ue,n):"keyword c"==e?C(t?L:j):"("==e?C(D(")"),j,$e,I(")"),E,n):"operator"==e||"spread"==e?C(t?O:M):"["==e?C(D("]"),xe,E,n):"{"==e?G(B,"}",null,n):"quasi"==e?$(z,n):C()}function j(e){return e.match(/[;\}\)\],]/)?$():$(M)}function L(e){return e.match(/[;\}\)\],]/)?$():$(O)}function R(e,t){return","==e?C(M):F(e,t,!1)}function F(e,t,i){var n=0==i?R:F,a=0==i?M:O;return"=>"==e?C(S,i?W:H,T):"operator"==e?/\+\+|--/.test(t)?C(n):"?"==t?C(M,I(":"),a):C(a):"quasi"==e?$(z,n):";"!=e?"("==e?G(O,")","call",n):"."==e?C(U,n):"["==e?C(D("]"),j,I("]"),E,n):void 0:void 0}function z(e,t){return"quasi"!=e?$():"${"!=t.slice(t.length-2)?C(z):C(M,q)}function q(e){if("}"==e)return k.marked="string-2",k.state.tokenize=_,C(z)}function H(e){return o(k.stream,k.state),$("{"==e?P:M)}function W(e){return o(k.stream,k.state),$("{"==e?P:O)}function V(e){return":"==e?C(E,P):$(R,I(";"),E)}function U(e){if("variable"==e)return k.marked="property",C()}function B(e,t){return"variable"==e||"keyword"==k.style?(k.marked="property",C("get"==t||"set"==t?Y:K)):"number"==e||"string"==e?(k.marked=r?"property":k.style+" property",C(K)):"jsonld-keyword"==e?C(K):"["==e?C(M,I("]"),K):void 0}function Y(e){return"variable"!=e?$(K):(k.marked="property",C(ue))}function K(e){return":"==e?C(O):"("==e?$(ue):void 0}function J(i,n){function a(e){if(","==e){var t=k.state.lexical;return"call"==t.info&&(t.pos=(t.pos||0)+1),C(i,a)}return e==n?C():C(I(n))}return function(e){return e==n?C():$(i,a)}}function G(e,t,i){for(var n=3;n<arguments.length;n++)k.cc.push(arguments[n]);return C(D(t,i),J(e,t),E)}function X(e){return"}"==e?C():$(P,X)}function Q(e){if(h&&":"==e)return C(Z)}function Z(e){if("variable"==e)return k.marked="variable-3",C()}function ee(){return $(te,Q,ne,ae)}function te(e,t){return"variable"==e?(i(t),C()):"["==e?G(te,"]"):"{"==e?G(ie,"}"):void 0}function ie(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),C(I(":"),te,ne)):(i(t),C(ne))}function ne(e,t){if("="==t)return C(O)}function ae(e){if(","==e)return C(ee)}function oe(e,t){if("keyword b"==e&&"else"==t)return C(D("form","else"),P,E)}function re(e){if("("==e)return C(D(")"),se,I(")"),E)}function se(e){return"var"==e?C(ee,I(";"),ce):";"==e?C(ce):"variable"==e?C(le):$(M,I(";"),ce)}function le(e,t){return"in"==t||"of"==t?(k.marked="keyword",C(M)):C(R,ce)}function ce(e,t){return";"==e?C(de):"in"==t||"of"==t?(k.marked="keyword",C(M)):$(M,I(";"),de)}function de(e){")"!=e&&C(M)}function ue(e,t){return"*"==t?(k.marked="keyword",C(ue)):"variable"==e?(i(t),C(ue)):"("==e?C(S,D(")"),J(pe,")"),E,P,T):void 0}function pe(e){return"spread"==e?C(pe):$(te,Q)}function he(e,t){if("variable"==e)return i(t),C(fe)}function fe(e,t){return"extends"==t?C(M,fe):"{"==e?C(D("}"),me,E):void 0}function me(e,t){return"variable"==e||"keyword"==k.style?"static"==t?(k.marked="keyword",C(me)):(k.marked="property","get"==t||"set"==t?C(ge,ue,me):C(ue,me)):"*"==t?(k.marked="keyword",C(me)):";"==e?C(me):"}"==e?C():void 0}function ge(e){return"variable"!=e?$():(k.marked="property",C())}function ve(e,t){return"string"==e?C(P):"variable"==e?(i(t),C(we)):void 0}function be(e,t){return"*"==t?(k.marked="keyword",C(we,I(";"))):"default"==t?(k.marked="keyword",C(M,I(";"))):$(P)}function _e(e){return"string"==e?C():$(ye,we)}function ye(e,t){return"{"==e?G(ye,"}"):("variable"==e&&i(t),"*"==t&&(k.marked="keyword"),C(Ae))}function Ae(e,t){if("as"==t)return k.marked="keyword",C(ye)}function we(e,t){if("from"==t)return k.marked="keyword",C(M)}function xe(e){return"]"==e?C():$(O,ke)}function ke(e){return"for"==e?$($e,I("]")):","==e?C(J(L,"]")):$(J(O,"]"))}function $e(e){return"for"==e?C(re,$e):"if"==e?C(M,$e):void 0}return E.lex=!0,{startState:function(e){var t={tokenize:v,lastType:"sof",cc:[],lexical:new w((e||0)-u,0,"block",!1),localVars:d.localVars,context:d.localVars&&{vars:d.localVars},indented:0};return d.globalVars&&"object"==typeof d.globalVars&&(t.globalVars=d.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),o(e,t)),t.tokenize!=b&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==n?i:(t.lastType="operator"!=n||"++"!=a&&"--"!=a?n:"incdec",function(e,t,i,n,a){var o=e.cc;for(k.state=e,k.stream=a,k.marked=null,k.cc=o,k.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():s?M:P)(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return k.marked?k.marked:"variable"==i&&x(e,n)?"variable-2":t}}(t,i,n,a,e))},indent:function(e,t){if(e.tokenize==b)return Ce.Pass;if(e.tokenize!=v)return 0;var i=t&&t.charAt(0),n=e.lexical;if(!/^\s*else\b/.test(t))for(var a=e.cc.length-1;0<=a;--a){var o=e.cc[a];if(o==E)n=n.prev;else if(o!=oe)break}"stat"==n.type&&"}"==i&&(n=n.prev),p&&")"==n.type&&"stat"==n.prev.type&&(n=n.prev);var r,s,l=n.type,c=i==l;return"vardef"==l?n.indented+("operator"==e.lastType||","==e.lastType?n.info+1:0):"form"==l&&"{"==i?n.indented:"form"==l?n.indented+u:"stat"==l?n.indented+(s=t,"operator"==(r=e).lastType||","==r.lastType||f.test(s.charAt(0))||/[,.]/.test(s.charAt(0))?p||u:0):"switch"!=n.info||c||0==d.doubleIndentSwitch?n.align?n.column+(c?0:1):n.indented+(c?0:u):n.indented+(/^(?:case|default)\b/.test(t)?u:2*u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:r,jsonMode:s}}),Ce.registerHelper("wordChars","javascript",/[\w$]/),Ce.defineMIME("text/javascript","javascript"),Ce.defineMIME("text/ecmascript","javascript"),Ce.defineMIME("application/javascript","javascript"),Ce.defineMIME("application/x-javascript","javascript"),Ce.defineMIME("application/ecmascript","javascript"),Ce.defineMIME("application/json",{name:"javascript",json:!0}),Ce.defineMIME("application/x-json",{name:"javascript",json:!0}),Ce.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Ce.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Ce.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function($){"use strict";$.defineMode("xml",function(e,t){var r=e.indentUnit,s=t.multilineTagIndentFactor||1,l=t.multilineTagIndentPastTag;null==l&&(l=!0);var c,o,d=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},u=t.alignCDATA;function p(t,i){function e(e){return(i.tokenize=e)(t,i)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(a("atom","]]>")):null:t.match("--")?e(a("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function n(a){return function(e,t){for(var i;null!=(i=e.next());){if("<"==i)return t.tokenize=n(a+1),t.tokenize(e,t);if(">"==i){if(1==a){t.tokenize=p;break}return t.tokenize=n(a-1),t.tokenize(e,t)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),i.tokenize=a("meta","?>"),"meta"):(c=t.eat("/")?"closeTag":"openTag",i.tokenize=h,"tag bracket"):"&"==n?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function h(e,t){var i,n,a=e.next();if(">"==a||"/"==a&&e.eat(">"))return t.tokenize=p,c=">"==a?"endTag":"selfcloseTag","tag bracket";if("="==a)return c="equals",null;if("<"==a){t.tokenize=p,t.state=v,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(a)?(t.tokenize=(i=a,(n=function(e,t){for(;!e.eol();)if(e.next()==i){t.tokenize=h;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(i,n){return function(e,t){for(;!e.eol();){if(e.match(n)){t.tokenize=p;break}e.next()}return i}}function f(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(d.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function m(e){e.context&&(e.context=e.context.prev)}function g(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!d.contextGrabbers.hasOwnProperty(i)||!d.contextGrabbers[i].hasOwnProperty(t))return;m(e)}}function v(e,t,i){return"openTag"==e?(i.tagStart=t.column(),n):"closeTag"==e?b:v}function n(e,t,i){return"word"==e?(i.tagName=t.current(),o="tag",A):(o="error",n)}function b(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&d.implicitlyClosed.hasOwnProperty(i.context.tagName)&&m(i),i.context&&i.context.tagName==n?(o="tag",_):(o="tag error",y)}return o="error",y}function _(e,t,i){return"endTag"!=e?(o="error",_):(m(i),v)}function y(e,t,i){return o="error",_(e,0,i)}function A(e,t,i){if("word"==e)return o="attribute",w;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,a=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||d.autoSelfClosers.hasOwnProperty(n)?g(i,n):(g(i,n),i.context=new f(i,n,a==i.indented)),v}return o="error",A}function w(e,t,i){return"equals"==e?x:(d.allowMissing||(o="error"),A(e,0,i))}function x(e,t,i){return"string"==e?k:"word"==e&&d.allowUnquoted?(o="string",A):(o="error",A(e,0,i))}function k(e,t,i){return"string"==e?k:A(e,0,i)}return{startState:function(){return{tokenize:p,state:v,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;c=null;var i=t.tokenize(e,t);return(i||c)&&"comment"!=i&&(o=null,t.state=t.state(c||i,e,t),o&&(i="error"==o?i+" error":o)),i},indent:function(e,t,i){var n=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+r;if(n&&n.noIndent)return $.Pass;if(e.tokenize!=h&&e.tokenize!=p)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return l?e.tagStart+e.tagName.length+2:e.tagStart+r*s;if(u&&/<!\[CDATA\[/.test(t))return 0;var a=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(a&&a[1])for(;n;){if(n.tagName==a[2]){n=n.prev;break}if(!d.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(a)for(;n;){var o=d.contextGrabbers[n.tagName];if(!o||!o.hasOwnProperty(a[2]))break;n=n.prev}for(;n&&!n.startOfLine;)n=n.prev;return n?n.indent+r:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:t.htmlMode?"html":"xml",helperType:t.htmlMode?"html":"xml"}}),$.defineMIME("text/xml","xml"),$.defineMIME("application/xml","xml"),$.mimeModes.hasOwnProperty("text/html")||$.defineMIME("text/html",{name:"xml",htmlMode:!0})}),"function"!=typeof proboards&&(proboards=function(){}),$.extend(proboards,{dataHash:{},data:function(e,t){if(!$.isArray(e)&&void 0===t)return void 0===this.dataHash[e]?null:this.dataHash[e];$.isArray(e)||(e=[[e,t]]);for(var i=e,n=0;n<i.length;n++){e=i[n][0],t=i[n][1];"proboards."==e.substr(0,10)&&"object"==typeof this.dataHash[e]?$.extend(this.dataHash[e],t):this.dataHash[e]=t}},unsaved_changes:0,active_ajax_calls:0,ajax:function(r){r=$.extend({async:!0,type:"post"},r);var n=null;"function"==typeof r.beforeSend&&(n=r.beforeSend);var a=null;"function"==typeof r.success&&(a=r.success);var s=null;"function"==typeof r.error&&(s=r.error);var i=null;if("function"==typeof r.complete&&(i=r.complete),"post"==r.type.toLowerCase()){var e=proboards.data("csrf_token")||"null",t=proboards.analytics?proboards.analytics.google.getClientId():"";void 0===r.data&&(r.data={}),"undefined"!=typeof FormData&&r.data instanceof FormData&&r.data.append?(r.data.append("csrf_token",e),t&&r.data.append("ga_client_id",t)):"string"==typeof r.data?(r.data+="&csrf_token="+e,t&&(r.data+="&ga_client_id="+t)):(r.data.csrf_token=e,t&&(r.data.ga_client_id=t))}return r.beforeSend=function(e,t){if(t.ignorePending||proboards.active_ajax_calls++,1==proboards.data("admin_v6")){var i="admin_v6=1";"string"==typeof t.data?t.data+="&"+i:void 0===t.data&&(t.data=i)}null!=n&&n.call(this,e,t)},r.success=function(e,t,i){if(r.ignorePending||proboards.active_ajax_calls--,"object"==typeof e&&null!=e&&"object"==typeof e.pb_data)for(_key in e.pb_data)switch(_key){case"_google_analytics_events":proboards.analytics&&proboards.analytics.google.send(e.pb_data[_key]);case"_plugin_data":proboards.plugin&&proboards.plugin._add_data&&proboards.plugin._add_data(e.pb_data[_key]);break;case"_user_ids_on_page":null!=proboards.data("_user_ids_on_page")&&proboards.data(_key,$.unique_array(proboards.data(_key).concat(e.pb_data[_key])));break;default:proboards.data(_key,e.pb_data[_key])}if("object"!=typeof e||null==e||"string"!=typeof e.error){if(null!=a)try{a.call(this,e,t,i)}catch(e){console.log("JS Error ",e.stack),proboards.error("JS Error: "+e)}}else null!=s?s.call(this,e,i,"servererror"):proboards.error(e.error)},r.error=function(e,t,i){r.ignorePending||proboards.active_ajax_calls--;var n=e.getResponseHeader("Content-Type");if(null!=n&&n.match(/json/))try{var a=$.parseJSON(e.responseText,{throwError:!0}),o="object"==typeof a&&null!=a.internal_server_error;null!=s?(o&&(proboards.error(a.error),a.error="Server Error"),s.call(this,a,e,t,i)):proboards.error(a.error)}catch(e){console.log(e),proboards.error("JS Error: "+e)}else null!=s?s.call(this,e.responseText):e.responseText?proboards.error(e.responseText):console.log(t,"An AJAX request may have been interrupted.",i,e)},r.complete=function(e,t){null!=i&&i.call(this,e,t)},$.ajax(r)},error:function(e){proboards.dialog("error-message",{title:"Error",html:e})},escape_html:function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}),"function"!=typeof proboards&&(proboards=function(){}),$.extend(proboards,{item:function(e,t,i,n){if("member"==e&&(e="user"),void 0===this.dataHash["proboards."+e]&&(this.dataHash["proboards."+e]={}),void 0!==n)void 0===this.dataHash["proboards."+e][t]&&(this.dataHash["proboards."+e][t]={}),this.dataHash["proboards."+e][t][i]=n;else{if(void 0===i)return void 0===this.dataHash["proboards."+e][t]?null:this.dataHash["proboards."+e][t];this.dataHash["proboards."+e][t]=i}},nl2br:function(e){return"string"!=typeof e?e:e.replace(/\r\n|\n|\r/g,"<br />")},nbsp:function(e){return"string"!=typeof e?e:e.replace(/\t/g,"    ").replace(/  /g,"&nbsp; ").replace(/  /g,"&nbsp; ")},mono:function(e){return"string"!=typeof e?e:proboards.nl2br(proboards.nbsp(proboards.escape_html(e)))},capitalize:function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},commify:function(e){return text=reverse(e).replace(/(\d{3})(?=\d)(?!\d*\.)/g,"$1,"),reverse(text)},console_log:function(e){for(var t=0;t<e.length;++t){var i=e[t];console.log("%c ProBoards Log: ","color: #000099",i.log)}},add_commified_numbers:function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];"string"==typeof n&&(n=parseInt(n.replace(",",""))),"number"==typeof n&&(t+=n)}return this.commify(t)},size:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},preload:function(e){$(e).each(function(){$("<img/>")[0].src=this})},dialog:function(e,t){var i=$("#"+e);if(i.length||(i=$('<div id="'+proboards.escape_html(e)+'"></div>'),$(document.body).append(i)),void 0!==t){null!=t.html&&i.html(t.html);var n=t.autoOpen;t.autoOpen=!1,t.title=proboards.escape_html(t.title),i.dialog(t),i.off("dialogopen.enter").on("dialogopen.enter",function(){proboards.dialogEnter(i,t.enterButton)}),(void 0===n||n)&&i.dialog("open")}return i.add(i.closest(".ui-dialog")).css("box-sizing","content-box"),i},dialog_toggle_buttons:function(e,t){var i=$("#"+e);if(i.length){var n=i.parents(".ui-dialog").find(".ui-dialog-buttonpane .ui-button");return"boolean"!=typeof t&&(t=!n.prop("disabled")),n.length&&n.prop("disabled",t),n}},dialogEnter:function(t,e){var i=t.data("dialog");if(i){var n=i.options.buttons;if(i.options.buttons){var a=$("input, select",t);if(0!=a.length){e&&(e=e.toLowerCase());var o=null;if($.isArray(n)){if(!e&&n.length)o=n[0].click;else if(e)for(var r=1,s=n.length;r<s;r++)if(n[r].text&&n[r].text.toLowerCase()==e){o=n[r].click;break}}else if(e){for(var r in n)if(n.hasOwnProperty(r)&&r.toLowerCase()==e){o=n[r];break}}else for(var r in n)if(n.hasOwnProperty(r)){o=n[r];break}"function"==typeof o&&a.off("keyup.dialogenter").on("keyup.dialogenter",function(e){(e.keyCode?e.keyCode:e.which)==Keys.enter&&o.call(t)})}}}},confirm:function(e,t,i){return void 0!==(i=$.extend({modal:!1,onNo:function(){},onClose:function(){},title:"Confirm"},i)).width||$.browser.msie&&parseInt($.browser.version)<8||(i.width="auto"),proboards.dialog("confirmation",{title:i.title,html:e,width:i.width,modal:i.modal,buttons:{Yes:function(){$(this).dialog("close"),t()},No:function(){$(this).dialog("close"),i.onNo()}},open:function(){i.overlay&&$(this).data("overlay",$(document.body).overlay({css:{backgroundImage:"none",height:"100%",width:"100%",position:"fixed"}}))},close:function(){i.overlay&&$(this).data("overlay").remove(),"function"==typeof i.onClose&&i.onClose()}})},alert:function(e,t,i){void 0===t?(t=e,e="Alert"):void 0===i&&"object"==typeof t&&(i=t,t=e,e="Alert"),i=$.extend({title:e,html:t,buttons:{OK:function(){$(this).dialog("close")}}},i);proboards.dialog("alert",i)},loading:function(e,t){if(void 0===t){if(t=e)proboards.dialog("loading-dialog",{title:"Loading...",width:400,modal:!0,html:'<div style="text-align: center;padding: 50px 0;">'+proboards.processing_icon()+"</div>",open:function(e,t){$(".ui-dialog-titlebar-close",$(this).parent()).hide()}});else $("#loading-dialog").dialog("close")}else{var i=$(e);i.data("overlay")?i.data("overlay")&&(i.data("overlay").remove(),i.data("overlay",!1)):i.data("overlay",i.overlay())}},saving:function(e,n,a){proboards.loading($(e).closest(".content-container"),n),$(e).each(function(){var e=$(this),t=e.get(0).nodeName,i="INPUT"==t?"val":"BUTTON"==t?"text":"html";n?(e.data("original-text",e[i]()),e[i]("Saving..."),e.attr("disabled","disabled")):(e[i](e.data("original-text")),e.removeAttr("disabled"),void 0!==a&&"success"!==a||e.setStatus("saved",{position:"after"}))})},confirm_dialog:function(e,t,i,n,a){i=$.unique_array(i);var o="";o="users"==e?"forum Accounts":e;var r=e.substr(0,e.length-1),s=t.charAt(0).toUpperCase()+t.slice(1)+" "+o.charAt(0).toUpperCase()+o.substr(1,o.length-2)+(1!=i.length?"s":""),l=t;"e"==t.charAt(t.length-1)&&(l=t.substring(0,t.length-1)),l=l.charAt(0).toUpperCase()+l.slice(1)+"ing",$("#confirm-container").length||$(document.body).append('<div id="confirm-container"></div>'),proboards.dialog("confirm-container",{autoOpen:!1,width:620,title:s,buttons:[{text:s,id:"action-button",click:function(){$("#confirm-container form").submit()}}]}),$("#confirm-container").dialog("open"),$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+" Please Wait</div>"),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:proboards.route(r+"_confirm",{action:t}),dataType:"html",data:{"ids[]":i,data:a},success:function(e){$("#action-button").button("enable").removeClass("ui-state-disabled"),$("#confirm-container").html(e),$("#confirm-container form").bind("validated",function(e){return e.preventDefault(),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:$("#confirm-container form").attr("action"),data:$("#confirm-container form").serialize(),dataType:"json",success:function(e){$("#confirm-container").dialog("close"),void 0!==n&&n(e)}}),$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+l+"</div>"),!1}),$("#confirm-container").dialog("open")},error:function(e){$("#confirm-container").dialog("option","buttons",[{text:"Close",click:function(){$(this).dialog("close")}}]),void 0!==e&&""!=e?$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+e+"</div>"):$("#confirm-container").html('<div class="center pad-top-bottom-thick">Error</div>')}})},select_dialog:function(e){var o=$.extend({title:"Selection",options:[],selected:[],max:0,labelTextType:"text",onComplete:function(){},id:"selectDialog",width:400,height:300},e),t="max-"+o.max,i=1!=o.max?[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){var e=[];$(this).find(":checkbox").each(function(){null!=$(this).attr("checked")&&e.push($(this).val())}),$(this).dialog("close"),o.onComplete(e)}}]:[],n=proboards.dialog(o.id,{autoOpen:!1,title:o.title,width:o.width,height:o.height,buttons:i,open:function(){$(this).addClass(t)},close:function(){$(this).removeClass(t)}}),r=function(e){for(var t="",i=0;i<e.length;++i){var n=e[i];if(t+="<li>",null!=n.header)t+="<h2>"+proboards.escape_html(n.header)+"</h2>";else{var a=$.unique_id(i);t+='<input type="checkbox" id="'+a+'" value="'+proboards.escape_html(n.value)+'" '+(-1!=$.inArrayLoose(n.value,o.selected)?'checked="checked"':"")+"> ",t+='<label for="'+a+'">'+("html"==o.labelTextType?n.label:proboards.escape_html(n.label))+"</label>",$.browser.msie&&(t+='<script type="text/javascript">$(\'label[for="'+a+'"] img\').click(function(e){e.preventDefault();var cb=$("#'+a+'");cb.attr("checked", !cb.attr("checked")).change();})<\/script>')}null!=n.options&&(t+="<ul>"+r(n.options)+"</ul>"),t+="</li>"}return t};n.html("<ul>"+r(o.options)+"</ul>");var a=$("input",n);if(1==o.max)$.browser.msie?a.css("width",0).css("margin",0).css("padding",0):a.hide(),a.change(function(e){n.dialog("close"),o.onComplete([$(this).val()])});else if(1<o.max){var s=0;a.change(function(e){$(this).is(":checked")?s>=o.max?$(this).removeAttr("checked"):++s:--s})}return n.dialog("open")},trimmable_list:function(e){var o=$.extend({options:[],selected:[],container:null,onChange:function(){},labelTextType:"text"},e),r=[];o.container&&(r=o.container.is("ul.trim-list")?o.container:$("> ul.trim-list",o.container)),r.length||(r=$('<ul class="trim-list"></ul>'),o.container&&o.container.append(r)),o.container||(o.container=r);var s={};$(".row",r).each(function(){s[$(this).idFromClass("row")]=!1});var l=function(e){for(var t=0;t<e.length;++t){var i=e[t];if(null!=i.value){var n=$(".row-"+i.value,r);if(-1!=$.inArrayLoose(i.value,o.selected))if(s[parseInt(i.value)]=!0,n.length)r.append(n);else{var a=$('<li class="row row-'+proboards.escape_html(i.value)+'"><label>'+("html"==o.labelTextType?i.label:proboards.escape_html(i.label))+'</label><div class="delete"><span></span></div></li>');r.append(a)}}null!=i.options&&l(i.options)}r.setEven()};for(id in l(o.options),s)s[id]||$(".row-"+id,r).remove();return $(".delete",r).unbind("click"),$(".delete",r).click(function(){var e=$(this).parents("li.row"),t=""+e.idFromClass("row"),i=$.inArrayLoose(t,o.selected);o.selected.splice(i,1),e.remove(),r.setEven(),o.onChange(o.selected)}),o.container},image_preview:function(e){var t=$("<img />").attr("src",e),i=function(){proboards.dialog("image-preview",{title:"Image Preview",width:Math.min(t[0].width+5,$(window).width()-100),height:Math.min(t[0].height+56,$(window).height()-100),html:'<div style="text-align: center;margin-top: 2px;"></div>'}),$("#image-preview").css("padding","0px"),$("#image-preview > div").append(t)};t[0].complete?i():t.load(i)},code_editor:function(e){var t=$.extend({textarea:null,mode:"htmlmixed",tabMode:"indent",indentUnit:4,lineNumbers:!0,height:null,matchBrackets:!0,matchTags:!0,toMatchingTag:!0,styleActiveLine:!0,scrollbarStyle:"native",extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-/":"toggleComment"}},e);switch(t.mode){case"js":t.mode="javascript";break;case"html":t.mode="pbTemplate"}var i=$(t.textarea),n=i.parent(),a=i.is(":visible");a||$(document.body).append(i);var o=CodeMirror.fromTextArea(i.get(0),t),r=$(o.getWrapperElement()),s=$(o.getScrollerElement());return t.height&&(r.height(t.height),s.height(t.height)),a||($(n).append(i),setTimeout(function(){$(n).append(r)},1)),i.data("editor",o),r.data("editor",o),s.bind("mousewheel",function(e){var t=s.scrollTop(),i=s.get(0).scrollHeight-s.get(0).clientHeight,n=e.originalEvent.wheelDelta;(0<n&&0===t||n<0&&t===i)&&e.preventDefault()}),i.addClass("CodeMirror-textarea"),CodeMirror.controlsSetup(o),"function"==typeof t.onChange&&o.on("change",t.onChange),o},code_editor_style:null,cookie:function(e,t,i){if(void 0!==t){if("never"===(i=$.extend({},i)).expires&&(i.expires=18250),"number"==typeof i.expires){var n=i.expires;i.expires=new Date,i.expires.setDate(i.expires.getDate()+n)}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+(i.expires?"; expires="+i.expires.toUTCString():"")+(i.path?"; path="+i.path:"")+(i.domain?"; domain="+i.domain:"")+(i.secure?"; secure":"")}for(var a=document.cookie.split("; "),o=0;o<a.length;++o){var r=a[o].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return null},image_path:function(){return proboards.data("image_path")||"//storage.proboards.com/forum/images"},get_image:function(e){(e=$.extend(e,{})).src&&!e.src.match(/^(https?:)?\/\//)&&(e.src=proboards.image_path()+e.src);var i="<img ";return $.each(e,function(e,t){i+=proboards.escape_html(e)+'="'+proboards.escape_html(t)+'" '}),i+="/>"},help_icon:function(e){return void 0===e&&(e=""),$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",e).tipTip()},help_icon_plain:function(e){return e=$.extend(e,{src:"/admin/pbhelpicon.png",class:"help-icon"}),proboards.get_image(e)},processing_icon:function(e){return e=$.extend(e,{src:proboards.image_path()+"/loader/processing.gif"}),proboards.get_image(e)},is_valid_url:function(e){return $.check_url(e)},is_valid_image_url:function(e){return"url("==e.slice(0,4)&&(e=e.slice(5,-2)),!!/\.(gif|jp(?:e|g|eg)|a?png)$/i.test(e)&&$.check_url(e)},refresh_ads:function(e,t){if(!window.pbtp)return this.refresh_ads_old(e,t);window.pbtp.s=t||0,"undefined"!=typeof adServer&&adServer.renderNewAdsForAdUnitCodes()},refresh_ads_old:function(e,i){$(".pb-ads").each(function(){var e=$(this).clone(),t=e.attr("src");t=(t=t.replace(/&cb=[0-9\.]+/,"&cb="+Math.random())).replace(/&s=\d+/,"&s="+i),e.attr("src",t),$(this).replaceWith(e)})},instapost:function(e,t,i){if(e){i||(i={});var n=$('<form id="instapost" action="'+e+'" method="post"></form>');if(i.target&&n.attr("target",i.target),$("body").append(n),$.isArray(t)){var a={};$.each(t,function(e,t){a[t.name]=t.value}),t=a}t||(t={}),t.csrf_token=proboards.data("csrf_token"),$.each(t,function(e,t){var i=$('<input type="hidden">').attr("name",e).val(t);n.append(i)}),n.submit()}},validateUnicode:function(e){return e=(e=e.replace(/[\uD800-\uDBFF]($|[^\uDC00-\uDFFF])/g,"$1")).replace(/(^|[^\uD800-\uDBFF])[\uDC00-\uDFFF]/g,"$1")},reportAd:function(){$(".pb-ads").each(function(){var e=$(this).attr("src").split("#");$(this).attr("src",e[0]+"#adreport")})},consolidateParams:function(e){e&&0!=e.length||(e=["search","route","hash"]);for(var t={},i=[],n=0,a=e.length;n<a;n++)switch(e[n]){case"search":var o={},r=window.location.search;if(r&&"?"!=r){for(var s=0,l=i.length;s<l;s++)delete t[i[s]];i=[];for(var c=(h=r.substr(1).split("&")).length;c--;){var d=(f=h[c].split("="))[0],u=decodeURIComponent(f[1]);-1!=d.indexOf("[]")&&d.indexOf("[]")==d.length-2?(void 0===o[d]&&(t[d]=[],o[d]=1,i.push(d)),t[d].push(u)):t[d]=u}}break;case"route":$.extend(t,proboards.data("route").params);break;case"hash":o={};var p=window.location.hash;if(p&&"#"!=p){for(s=0,l=i.length;s<l;s++)delete t[i[s]];i=[];var h;for(c=(h=p.substr(1).split("&")).length;c--;){var f;d=(f=h[c].split("="))[0];if(2==f.length){u=decodeURIComponent(f[1]);-1!=d.indexOf("[]")&&d.indexOf("[]")==d.length-2?(void 0===o[d]&&(t[d]=[],o[d]=1,i.push(d)),t[d].push(u)):t[d]=u}}}}return t},guestsOnlineDialog:function(e){var t=$("#guests-online");t.length?t.dialog("open"):(proboards.loading(!0),proboards.ajax({url:e?proboards.route("board_guests",{board_id:e}):proboards.route("guests"),complete:function(){proboards.loading(!1)},success:function(e){if(e.ips){for(var t='<table><thead><tr><th class="name">IP Address</th></tr></thead><tbody>',i=0;i<e.ips.length;i++)t+='<tr><td class="name">'+e.ips[i]+"</td></tr>";t+="</tbody></table>",proboards.dialog("guests-online",{html:t,title:"Guests Online",width:200,height:400})}}}))},route:function(e,t){if(!proboards.routeMap||!proboards.routeMap[e])return"";var i=proboards.routeMap[e];for(var n in t)t.hasOwnProperty(n)&&(i=i.replace(":"+n,t[n]));return(proboards.data("insite_path")||"")+i},listManagers:{}}),window.onbeforeunload=function(e){return $('input[type="submit"]',this.element).removeAttr("disabled"),0<proboards.active_ajax_calls?"There are still some AJAX processes pending. If you leave the page now, you may lose any changes you have made.":proboards.unsaved_changes?"You are about to discard all changes.":void 0},$.event.props=$.event.props.join("|").replace("layerX|layerY|","").split("|"),$(document).ready(function(){if(function(){window.console||(window.console={});for(var e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],t=function(){},i=0;i<e.length;i++)window.console[e[i]]||(window.console[e[i]]=t)}(),"function"==typeof $.parseJSON){var a=$.parseJSON;$.parseJSON=function(e,t){var i=(t=$.extend({defaultValue:null,pbError:!0,throwError:!1},t)).defaultValue;try{i=a(e)}catch(e){var n="Some data could not be parsed. Refresh and try again.";if(t.throwError)throw n;t.pbError&&proboards.error(n)}return i}}var e=new Date,t=10*parseInt(e.getFullYear()/10,10),i=proboards.data("locale_settings"),n=i.input_date_format;i.input_date_dp_format=n.replace("%Y","yy").replace("%m","mm").replace("%d","dd"),$("input.date").livequery(function(){var e={changeMonth:!1,changeYear:!1,dateFormat:i.input_date_dp_format,yearRange:t-50+":"+(t+50),onSelect:function(e,t){$(this).trigger("change")}};$(this).datepicker(e)}),$("input.time").livequery(function(){$(this).timepicker({onSelect:function(){$(this).trigger("change")}})}),$('#change_version_form input[name="path"]').attr("value",window.location.pathname),$("#pbn-bar-wrapper > img, #pbn-bar-wrapper-admin > img").click(function(e){var t=$("#pbn-bar");t.toggle(),t.is(":visible")?(t.css("display","inline-block"),$(this).attr("src",proboards.image_path()+"/button_collapse.png"),$(this).attr("alt",">")):($(this).attr("src",proboards.image_path()+"/button_expand.png"),$(this).attr("alt","<")),null!==proboards.data("user")&&proboards.data("user").is_logged_in&&proboards.ajax({url:proboards.route("pbn_bar_hide"),type:"post",data:{minimized:t.is(":visible")?0:1}})}),$(".request_headers.enable").on("click",function(){var e=$(this).attr("id"),t=["override=1"];"staff_enable_headers_footers"==e?t.push("noheaders=1"):"staff_enable_plugins"==e?t.push("noplugins=1"):"staff_enable_templates"==e?t.push("notemplates=1"):"staff_enable_css"==e?t.push("nocss=1"):"staff_enable_staff"==e?t.push("pbstaff=0"):"staff_enable_all_settings"==e?t=t.concat(["noheaders=1","noplugins=1","notemplates=1","nocss=1"]):"staff_switch_pbn_bar"==e&&t.push("pbn_user_bar=1");for(var i=window.location.href.split("?"),n=i[1].split("&"),a=n.length;a--;)0<=$.inArray(n[a],t)&&n.splice(a,1);n.length?window.location=i[0]+"?"+n.join("&")+"&override=1":window.location=i[0]+"?override=1"}),$(".request_headers.disable").on("click",function(){var e=$(this).attr("id"),t=window.location.href;-1!==t.indexOf("?")?t+="&":t+="?","staff_disable_headers_footers"==e?t+="noheaders=1":"staff_disable_plugins"==e?t+="noplugins=1":"staff_disable_templates"==e?t+="notemplates=1":"staff_disable_css"==e?t+="nocss=1":"staff_disable_staff"==e?t+="pbstaff=0":"staff_disable_all_settings"==e?t+="noheaders=1&noplugins=1&notemplates=1&nocss=1":"staff_switch_pbn_bar"==e&&(t+="pbn_user_bar=1"),window.location.href=t}),$("#staff_disable_specific_plugins").on("click",function(e){var t=$("#plugin-selection-dialog"),i="",n=window.location.href,a=/disable_plugins=([0-9]+(,[0-9]+)*,?)/.exec(n),o=[];a&&(o=a[1].split(",")),t.length?t.dialog("open"):(proboards.loading(!0),proboards.ajax({url:proboards.route("pb_staff_page_plugin_list"),data:{disabled_plugins:o},complete:function(){proboards.loading(!1)},success:function(e){proboards.dialog("plugin-selection-dialog",{width:600,height:600,html:e.html,title:"Plugins",buttons:[{text:"Disable Selected Plugins",click:function(){i=$("#plugin-disable-selection input:checkbox:checked").map(function(){return this.value}).get().join(","),-1!==(n=n.replace(/[\&|\?]disable_plugins=(([0-9]+(,[0-9]+)*,?)?)/i,"")).indexOf("?")?n+="&":n+="?",i&&(n+="disable_plugins="+i),window.location.href=n}}]})}}))});var o=new Date(proboards.data("serverDate")),r=proboards.data("timezone"),s=o.getTimezoneOffset()/-60;null!==proboards.data("user")&&proboards.data("user").is_logged_in&&!proboards.data("user").assimilated&&r!=s&&proboards.ajax({url:proboards.route("update_user_timezone"),data:{timezone:s},success:function(){proboards.data("timezone",s)}});var v=Date.parse((new Date).toUTCString())-Date.parse(o.toUTCString());$("abbr.time").livequery(function(){!function e(t){var i=parseInt($(t).attr("data-timestamp"));if(0==i||!$.isNumeric(i))return $(t).text("Not Available"),void $(t).attr("title","Not Available");var n=i+v,a=new Date;n=parseInt(n,10);var o=new Date(n),r=new Date(i),s=(n=$.datepicker.formatDate(proboards.data("time_style")?"d M yy":"M d, yy",r)+" at "+$.formatTime(proboards.data("military_time")?"HH:mm":"h:mmp",r),(a.getTime()-o.getTime())/6e4),l=(a.getTime()-o.getTime())/1e3;a.getTime(),r.getTime(),a.getTime(),r.getTime();if(s/60<24&&0<s?$(t).addClass("recent_time"):$(t).removeClass("recent_time"),l<-10)$(t).text(n);else if(l<30)$(t).text("a few seconds ago"),setTimeout(function(){e(t)},15e3);else if(s<1)$(t).text("less than a minute ago"),setTimeout(function(){e(t)},15e3);else if(s<60){var c=Math.floor(s)+" minute";2<s&&(c+="s"),c+=" ago",$(t).text(c),setTimeout(function(){e(t)},15e3)}else{var d=s/60;if(d<2)$(t).text("about an hour ago"),setTimeout(function(){e(t)},15e3);else if(d<24)$(t).text(Math.floor(d)+" hours ago"),setTimeout(function(){e(t)},15e3);else if(d/24<2){var u=parseInt($.formatTime("H",o)),p=parseInt($.formatTime("m",o)),h=parseInt($.formatTime("s",o)),f=parseInt($.formatTime("H",a)),m=parseInt($.formatTime("m",a)),g=parseInt($.formatTime("s",a));f<u||u==f&&m<p||u==f&&p==m&&g<h?$(t).text(n):($(t).text("yesterday at "+(proboards.data("military_time")?$.formatTime("HH:mm",r):$.formatTime("h:mmp",r))),setTimeout(function(){e(t)},15e3))}else $(t).text(n)}$(t).attr("title",r)}(this)});var l=parseInt($.browser.version);if($.browser.msie&&l<10&&($('textarea[placeholder]:visible, input[type!="password"][placeholder]:visible').livequery(function(){var e=$(this);e.off(".placeholder"),e.on("focus.placeholder",function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).on("blur.placeholder",function(){var e=$(this);""==e.val()&&(e.val(e.attr("placeholder")),e.addClass("placeholder"))}).closest("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&e.val("")})}),$(this).prop("autofocus")||e.triggerHandler("blur")}),$('input[type="password"][placeholder]').each(function(){var e=$(this),t=e.attr("class"),i=document.createElement("input");i.id=e.attr("id"),i.class=t?t+" placeholder":"placeholder",i.type="text",i.name=e.attr("name")+"_temporary",i.value=e.attr("placeholder"),i.tabIndex=e.attr("tabindex"),e.hide().after(i),e.on("focusout",function(){""==$(this).val()&&($(this).hide(),$(i).show())}),$(i).on("focus",function(){$(this).hide(),e.show().focus()})})),$.browser.msie&&parseInt($.browser.version)<8){var c=1e3;$(".popup_html li").each(function(){$(this).css("z-index",--c)}),$("#nav-tree > li").each(function(){$(this).css("z-index",--c)});var d=$(".popup_html ul");d.css({left:"9999px"}).show(),$("> li > a",d).each(function(){var e=$(this);550<e.width()&&e.css({width:"550px",overflow:"hidden"})}),d.hide()}$("a.button").livequery(function(){$(this).attr("role","button")}),$(document).on("click",".guest-prompt",function(e){if(null!==proboards.data("user")&&proboards.data("user").is_logged_in)return!0;var t=window.location,i=proboards.data("register_url"),n=proboards.data("login_url"),a=[];n&&a.push("login"),i&&a.push("register");var o=a.join(" or ");o||(o="login or register");var r="You need to "+o+" on this forum to post.",s=400;$(this).hasClass("members-link")&&(r="You need to "+o+" on this forum to view members.",s=435),e.preventDefault(),e.stopImmediatePropagation();var l=$(this).attr("alt")?$(this).attr("alt"):$(this).text();if(0==$("#registration-helper").length){var c='<div id="registration-helper">'+r+"</div>";$(document.body).append(c);var d=null;if(proboards.data("ext_reg_only"))d=function(e){window.location=e};else{var u=$('<form id="guest-helper" method="post"><input type="hidden" name="origin" /></form>').appendTo(document.body);d=function(e){u.attr("action",e).find('input[name="origin"]').val(t).end().submit()}}for(var p={login:{text:"Login",click:function(){d(n)}},register:{text:"Register",click:function(){d(i)}},cancel:{text:"Cancel",click:function(){$(this).dialog("close")}}},h=[],f=0,m=a.length;f<m;f++)h.push(p[a[f]]);h.push(p.cancel),proboards.dialog("registration-helper",{autoOpen:!1,width:s,buttons:h})}else $("#registration-helper").html(r),$("#registration-helper").dialog("option","width",s);return proboards.dialog("registration-helper",{title:l}),$("#registration-helper").dialog("open"),!1}),proboards.data("is_current_user_guest")&&!proboards.data("ext_reg_only")&&$("#welcome a").on("click",function(e){var t=null,i=$(this).attr("href"),n=window.location;return $("#guest-helper").length?t=$("#guest-helper"):(t=$('<form id="guest-helper" method="post"><input type="hidden" name="origin" /></form>'),$(document.body).append(t)),2!=e.which&&1!=e.ctrlKey||t.attr("target","_blank"),t.attr("action",i).find('input[name="origin"]').val(n).end().submit().removeAttr("target"),!1}),$("img.help-icon, img.tiptipify").tipTip({defaultPosition:"top"}),proboards.data("shoutbox_init")&&proboards.shoutbox.init(proboards.data("shoutbox_init")),$("#staff-debug").click(function(e){e.preventDefault(),window.open((proboards.data("insite_path")||"")+"/debug/requests","staff_debug","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=1000,height=596")}),$(".recent-threads-button").bind("click",function(e){var t=$("#recent-threads");e.preventDefault(),0==t.length?(proboards.loading(!0),proboards.ajax({url:proboards.route("participated_threads"),complete:function(){proboards.loading(!1)},success:function(e){t=proboards.dialog("recent-threads",{html:e,title:"Participated",width:575,height:363}),$(".dialog-fixed",t).insertBefore(t)}})):t.is(":visible")?t.dialog("close"):t.dialog("open")}),$.browser.msie&&parseInt($.browser.version)<=7?check_control_bar_ie():check_control_bar(),$(".clickable").clickable(),$(".show-user .badge-thumb, .badges-have .badge-thumb, .badges-icons .badge-icon").live("click",function(e){e.preventDefault(),proboards.badge.summary($(this).idFromClass("user"),$(this).idFromClass("badge"))}),$("#mobile-switch").click(function(){var e=$('<form action="'+proboards.route("set_version")+'" method="post">\t<input type="hidden" name="path" value="'+proboards.route("home")+'" />\t<input type="hidden" name="version" value="mobile" /></form>');$(document.body).append(e),e.submit()}),$(".disable-maintenance-button").click(function(e){e.preventDefault(),proboards.shared.maintenance.dialog()}),$("head link").filter('[rel="prev"], [rel="next"]').length&&$("body").append('<div style="position: absolute; width: 1px; height: 1px; background-color: transparent;"></div>');try{sessionStorage&&(sessionStorage.removeItem("referrer"),document.referrer&&sessionStorage.setItem("referrer",document.referrer))}catch(e){}$("#pbn-bar #switch-account").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$('<form method="post"><input type="hidden" name="origin" /></form>').appendTo(document.body).attr("action",t).find('input[name="origin"]').val(window.location).end().submit()})}),$.fn.force_ie7_rerender=function(){$.browser.msie&&parseInt($.browser.version)<8&&$(this).hide().show()},function(h){h.fn.bind_first=function(t,i,n){return h(this).each(function(){h(this).bind(t,i,n);var e=h(this).data("events")[t];return e.unshift(e.pop()),h(this).data("events")[t]=e,this})},h.fn.progress_text=function(e){var t,i=h.extend({dots:3,tick:500},e),n=0,a=h(this),o=a.is("input")?"val":"html",r="val"==o?" ":"&nbsp;",s=a[o](),l=s,c=function(){if(a[o]()==l){l=a[o]();var e=new Array(n+1).join(".")+new Array(i.dots-n+1).join(r);a[o](s+e),n==i.dots?n=0:++n}else clearInterval(t)};return t=setInterval(c,i.tick),c(),this},h.fn.isTextNode=function(){return 3==this.get(0).nodeType},h.fn.textNodes=function(){var e=function(){return 3==this.nodeType};return h(this).contents().filter(e).add(h(this).find("*").contents().filter(e))},h.fn.nextSelectable=function(e){var t=this;do{var i=t.parent().contents(),n=h.inArray(t.get(0),i);if(n<i.length-1){if(t=h(i.get(n+1)),h(t).text().length)return t}else t=t.parent()}while(t.length&&t.not("body"));return h("")},h.fn.prevSelectable=function(e){var t=this;do{var i=t.parent().contents(),n=h.inArray(t.get(0),i);if(0<n){if(t=h(i.get(n-1)),h(t).text().length)return t}else t=t.parent()}while(t.length&&t.not("body"));return h("")},h.fn.trimValue=function(){return h(this).val(h.trim(h(this).val()))},h.fn.arrayValue=function(e){return void 0===e?""===(e=h(this).val())?[]:e.split(","):(h(this).val(e.join(",")),h(this))},h.unique_array=function(e){for(var t={},i=[],n=0,a=e.length;n<a;++n)e[n]in t||(i.push(e[n]),t[e[n]]=1);return i},h.styleSupport=function(e){var t,i=["Moz","Webkit","O","ms"],n=document.createElement("div");if((e=h.camelCase(e))in n.style)t=e;else for(var a=0;a<i.length;a++){var o=e.charAt(0).toUpperCase()+e.slice(1),r=i[a]+o;if(r in n.style){t=r;break}}return n=null,t},h.tabinate=function(i){var n,a,o=i.tabs.find(">*:first a").attr("href")+"-tab",r=function(e){return i.tabs.find('a[href="'+e.substr(0,e.length-4)+'"]').parent()};function e(){var e=1<window.location.hash.length?window.location.hash:o;if(n!=e||void 0===n){var t=r(e);t.length||(t=r(o)),t.click()}}i.tabs.children().click(function(e){e.preventDefault();var t=h(this).find("a").attr("href");a=i.tabs.children(".ui-active").children("a").attr("href"),i.tabs.children().removeClass("ui-active"),i.content.children(":not(.tab-ignore)").hide(),h(this).addClass("ui-active"),h(t,i.content).show(),i.useHash&&(window.location.hash=t+"-tab",n=window.location.hash,a+="-tab"),i.callback&&"function"==typeof i.callback&&i.callback(n?n.substr(1):null,a?a.substr(1):null)}),e(),i.useHash&&(h("html").is(".ie7")?setInterval(e,200):h(window).bind("hashchange",e))},h.fn.setEven=function(){var e=h(this).children();return e.removeClass("even"),e.filter(":odd").addClass("even"),h(this)},h.fn.autoSubmit=function(p){h.unique_id();return this.each(function(){var n=h.extend({url:"",statusElement:null,beforeSendData:function(){},beforeSend:function(){},send:null,success:function(){},wait:1500,statusTime:3e3,instantUpdate:null,skipElement:0},p),a=h(this),e=h(this).get(0).nodeName,t="INPUT"==e?a.attr("type").toLowerCase():"",o="TEXTAREA"==e||-1!=h.inArray(t,["text","password","number"]);o&&a.data("as-value",a.val());var r="INPUT"==e&&"radio"==t,s=n.instantUpdate;null==s&&(s="SELECT"==e||"INPUT"==e&&"checkbox"==t||"INPUT"==e&&"radio"==t),null==n.statusElement&&(n.statusElement=h('<span class="status-box '+a.attr("name")+'-status"></span>'),a.after(n.statusElement));var i=n.statusElement,l={display:"inline"};i.loadingStatus({loadingClass:"saved",loadingCss:l,successClass:"saved",successCss:l,successText:"Saved!",errorCss:l,saveDisplayTime:n.statusTime,errorDisplayTime:n.statusTime+1e3});var c=i.data("loadingStatus");function d(e,t){h(t).css("background",e),setTimeout(function(){h(t).css("background","white")},800)}var u=null!==n.send?n.send:function(){var i={},t=a.val();a.val()==a.attr("placeholder")&&a.hasClass("placeholder")&&(t=""),void 0===a.attr("type")||"checkbox"!=a.attr("type").toLowerCase()||a.attr("checked")||(t=0),i[a.attr("name")]=t,n.skipElement||c.setStatus("loading"),"function"==typeof n.beforeSendData&&n.beforeSendData.call(a,i),proboards.ajax({url:n.url,data:i,dataType:"json",beforeSend:function(e,t){i.error&&(proboards.active_ajax_calls--,n.skipElement||c.setStatus("error",i.error),e.abort())},success:function(e){n.skipElement?d("#57c566",n.backgroundClass):c.setStatus("success"),a.data("as-value",t),n.success.call(a,e)},error:function(e){n.skipElement?d("red",n.backgroundClass):c.setStatus("error","Error: "+e.error)}})};return a.bind(s?"change":"keyup",function(e){if(!r||a.is(":checked")){var t=a.data("as-value");if(!o||t!=a.val())if(s)u(a);else{null!=a.data("timeout")&&clearTimeout(a.data("timeout"));var i=setTimeout(function(){u(a)},n.wait);a.data("timeout",i)}}}),a}),this},h.fn.overlay=function(e,t){var i=h.extend(!0,{class:"js-overlay",includeMargins:!1,css:{backgroundColor:"#000000",backgroundImage:"url("+proboards.image_path()+"/loader/processing.gif)",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.5,position:"absolute",zIndex:"1"}},e),n=h(this),a=n.outerHeight(i.includeMargins),o=n.outerWidth(i.includeMargins);i.css.height||(i.css.height=a),i.css.width||(i.css.width=o);var r=n.offset();!t&&r||(r={top:0,left:0}),h.extend(i.css,r);var s=h("<div></div>").addClass(i.class).css(i.css);return t?h(this).css("position","relative").append(s):h(document.body).append(s),s},h.unique_id=function(e){var t;for(void 0===e&&(e="");t=e+parseInt(1e7*Math.random()),h("#"+t).length;);return t},h.inArrayLoose=function(e,t,i){if("object"!=typeof t)return-1;for(void 0===i&&(i=0);i<t.length;++i)if(t[i]==e)return i;return-1},h.byteSize=function(e,t){var i="",n=Math.pow(10,t||0);return e<1024?i="B":e<1048576?(e/=1024,i="KB"):e<1073741824?(e/=1048576,i="MB"):(e/=1073741824,i="GB"),(e=parseInt(e*n)/n)+""+i},h.fn.idFromClass=function(e){if(void 0===e&&(e=""),void 0===h(this).attr("class"))return 0;var t=new RegExp(e+"-(\\d+)"),i=h(this).attr("class").match(t);return!!i&&parseInt(i[1])};var n=h.styleSupport("transform");h.cssHooks&&n&&"transform"!==n&&(h.cssHooks.transform={get:function(e,t,i){return h.css(e,n)},set:function(e,t){e.style[n]=t}}),h.fn.resizecomplete=function(i){return this.each(function(){var t=null;h(this).bind("resize",function(e){null!==t&&clearTimeout(t),t=setTimeout(function(e){i.call(this,e)},200)})}),this},h.fn.colorPickMe=function(a,o){return a||(a={}),o||(o={}),this.each(function(){var i=h(this);if(!i.data("colorPickerReady")){var e=h('<span class="style-wrapper color-picker-wrapper"></span>'),t=h('<span role="button" class="color-picker"><img src="'+proboards.image_path()+'/admin/themes/icons/color-picker.png"></span>'),n=h('<span class="color-picker-preview"></span>');i.wrap(e).after(t),n.css("background-color","#"+i.val()),i.before(n),i.data("colorPickerReady",!0),i.add(t).bind("click focus",function(){o=h.extend({autoUpdate:!1},o),i.colorPicker(o);i.colorPicker("option","update",function(e){i.val(e);var t="transparent"!=e?"#"+e:e;n.css("background-color",t),h(this).colorPicker("hide"),"function"==typeof a.update&&a.update.call(this,e)}),i.colorPicker("show")})}})},h.fn.autoRow=function(e){var t=e;this.each(function(){var a=h(this),o=h(".row-template",this),r=0,s=function(e){var t=o.clone().removeClass("row-template"),i=++r;t.data("index",i),t.html(t.html().replace(/{i}/g,'<span class="index">'+i+"</span>"));var n=h("input",t);if(n.bind("keyup keypress",function(){n.filter('[value=""]').length!=n.length&&t.data("index")==r&&s()}),n.bind("blur",function(){r==t.data("index")||t.data("deleting")||n.filter('[value=""]').length==n.length&&(n.unbind("keydown keypress"),t.nextAll().each(function(){h(this).data("index",h(this).data("index")-1),h("span.index",this).text(h(this).data("index"))}),t.fadeOut(),t.data("deleting",!0),--r)}),h(".delete",t).click(function(){r==t.data("index")||t.data("deleting")||(n.unbind("keydown keypress"),t.nextAll().each(function(){h(this).data("index",h(this).data("index")-1),h("span.index",this).text(h(this).data("index"))}),t.fadeOut(),t.data("deleting",!0),--r)}),"object"==typeof e)for(k in e)h('*[name="'+k+'"]',t).val(e[k]);t.hide().fadeIn(),a.append(t)};if(o.hide(),void 0!==t&&h.isArray(t))for(var e=0;e<t.length;++e)s(t[e]);s()})},h.fn.clickable=function(e){var r=(e=h.extend({event:"mousedown",itemType:null,eventNamespace:"clickable"},e)).itemType,s=e.event,t=e.eventNamespace;return h(this).off("."+t),h(this).on(s+"."+t,function(t){var e=t.target,i=function(e){3==t.which||(t.ctrlKey||t.metaKey||2==t.which?window.open(e,"_blank"):location.href=e)};if(h(e).is("a")||h(e).is('input[type="checkbox"]')||h(e).hasClass("ui-label"))return!0;t.preventDefault(),t.stopImmediatePropagation();var n=h('a.target,input[type="checkbox"].target',this);if(n.length||(n=h('.target a,.target input[type="checkbox"]',this)),n.length||(n=h('a,input[type="checkbox"]',this)),n.length)if(n.is('input[type="checkbox"]'))n[n.is(":checked")?"removeAttr":"attr"]("checked","checked"),n.triggerHandler(s);else{var a=n.attr("href").replace(window.location.href.split("#")[0],"");void 0!==a&&""!=a&&"#"!=a?i(a):n.triggerHandler(s)}if(r){var o=proboards.item(r,listManagerPrototype.getItemId(e));if(null!=o)return i(o.url)}}),this},h.fn.pulse=function(e){if(e){var o=proboards.shared.hexToRgb(e).join(","),r=function(e,t,i,n,a){t+=i<t?-n:n,e.css("background-color","rgba("+o+","+t/100+")"),t!=i?setTimeout(function(){r(e,t,i,n,a)},20):a&&a.call(e)};return this.data("originalStyle",this.attr("style")||""),r(this,0,100,10),r(this,100,0,2.5,function(){this.attr("style",this.data("originalStyle"))}),this}},h.fn.targetBlank=function(e){(e.ctrlKey||e.metaKey||2==e.which)&&this.attr("target","_blank")},h.fn.replaceSelection=function(n){return h(this).each(function(){if(void 0!==this.selectionStart){var e=this.value.substring(0,this.selectionStart),t=this.value.substring(this.selectionEnd);this.value=e+n+t,this.selectionStart=e.length+n.length,this.selectionEnd=e.length+n.length}else if(void 0!==document.selection){h(this).focus();var i=document.selection.createRange();i.text=n,i.collapse(!1),i.select()}}),this}}(jQuery);var Keys={backspace:8,tab:9,enter:13,pause:19,caps:20,esc:27,space:32,page_up:33,page_down:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,del:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,substract:109,decimal:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,shift:16,ctrl:17,alt:18,plus:187,comma:188,minus:189,period:190,modifies_text:function(e){return(e<37||40<e)&&(e<112||123<e)&&16!=e&&17!=e&&20!=e&&35!=e&&27!=e&&36!=e&&144!=e&&33!=e&&34!=e&&91!=e},moves_carat:function(e){return(e<112||123<e)&&16!=e&&17!=e&&20!=e&&27!=e&&144!=e&&91!=e}};$.pushStateSupport=function(){return"function"==typeof window.history.pushState},$.fn.setStatus=function(r,e){var s=$.extend({classTime:1400,message:"",position:"append",positionOn:null,text:"",textTime:1e3},e);!s.text&&r&&(s.text=r.substr(0,1).toUpperCase()+r.substr(1)),$(this).each(function(){var e=$(this),t=s.positionOn||e,i=e.data("status"),n=e.data("statusElem");i&&(n&&n.remove(),e.removeClass(i),clearTimeout(e.data("timeout1")),clearTimeout(e.data("timeout2"))),n=$('<span class="status-box"></span>'),t[s.position](n),n.html(s.text+(""!=s.message?": "+s.message:"")).addClass(r).hide().fadeIn();var a=setTimeout(function(){n.fadeOut()},s.textTime),o=setTimeout(function(){e.removeClass(r)},s.classTime);e.addClass(r),e.data("status",r),e.data("statusElem",n),e.data("timeout1",a),e.data("timeout2",o)})},$.fn.sortableList=function(e){var l=$.extend({container:"",onComplete:function(){},exclude:""},e),t=$(l.container),n={};$(this).click(function(){var o=$(this).attr("class").match(/^([a-z0-9\-_]+)/)[1],r=[],s="number";$("> .item",t).each(function(){var e=$(this);if(!e.is(l.exclude)){var t=parseInt(e.attr("id").match(/\d+/));if($.isNumeric(t)){var i="",n=$(">."+o,this),a=$("input,select,textarea",n);i=a.length&&a.is('[type="checkbox"]')?a.is(":checked")?1:0:a.length?a.val():n.text(),"number"!==s||$.isNumeric(i)||(s="color"),"color"===s&&!i.match(/^[0-9a-fA-F]{6}$/)&&i.length&&(s="string"),r.push({id:t,element:this,value:i})}}}),void 0===n[o]?n[o]="asc":n[o]="asc"===n[o]?"desc":"asc",r.sort(function(e,t){"string"===s?(e=(""+e.value).toLowerCase(),t=(""+t.value).toLowerCase()):"number"===s?(e=parseFloat(e.value),t=parseFloat(t.value)):"color"===s&&(e=(""+e.value).toLowerCase(),t=(""+t.value).toLowerCase());var i=0;return e<t?i=-1:t<e&&(i=1),i*("asc"==n[o]?1:-1)});for(var e=r.length-1;0<=e;--e)t.prepend(r[e].element);l.onComplete(this)})},$.fn.sliderTouchscreen=function(){var o=$(this);return $(".ui-slider-handle",o).on("touchstart",function(e){var t=o.width(),i=parseInt(o.offset().left),n=i+t;o.data("x-pos-min",i),o.data("x-pos-max",n)}).on("touchmove",function(e){var t=e.originalEvent.changedTouches[0].clientX,i=parseInt(o.data("x-pos-min")),n=parseInt(o.data("x-pos-max")),a=parseInt((t-i)/(n-i)*100);o.slider("value",a)}),o},function(){if($("html").is(".ie7")){var n={},a=null;n.getIframeHash=function(){return a?a.contents().get(0).location.hash||"#":""},n.updateIframe=function(e){var t=a&&a.contents().length?a.contents().get(0):null,i=t?t.location:null;t&&i&&(t.open().close(),i.hash=e)},a||$(document).ready(function(){var i=location.hash||"#";a=$('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"></iframe>'),$("html").append(a),n.updateIframe(i);setInterval(function(){var e=null,t=location.hash||"#";t&&t!==i&&(e=!1),n.getIframeHash()!==i&&(e=!0),!1===e?(i=location.hash||"#",n.updateIframe(i)):!0===e&&(location.hash=n.getIframeHash(),i=location.hash||"#")},100)})}}(),function(e){e.fn.oldReady=e.fn.ready,e.fn.ready=function(t){return e.fn.oldReady.call(this,function(){try{t.apply(this,arguments)}catch(e){"undefined"!=typeof console&&console["function"==typeof console.error?"error":"log"]("An error occurred during a document.ready call: ",e.toString(),"\nWhile executing: ",t)}})}}(jQuery),$.extend(proboards,{shared:{manager:{summary_setup:function(e){var t=[],i=proboards.data("lm_id");if(i){$(".lm-content-"+i+" .item").each(function(){var e=$(this).attr("id").match(/[a-z]-(\d+)/i);try{t.push(e[1])}catch(e){}});var n=document.createElement("form");n.setAttribute("method","POST"),n.setAttribute("action",e);for(var a=0;a<t.length;a++){(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name","summary_ids[]"),o.setAttribute("value",t[a]),n.appendChild(o)}var o,r=$('.quick-reply [name="message"]');if(r.length&&""!=r.val())(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name","quick_message"),o.setAttribute("value",r.val()),n.appendChild(o);return(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name","csrf_token"),o.setAttribute("value",proboards.data("csrf_token")||"null"),n.appendChild(o),document.body.appendChild(n),n}}},browser:{isIE:function(){return!!window.createPopup}},maintenance:{dialog:function(){var e=this,t="Are you sure you want to disable maintenance mode?";2==proboards.data("maintenance_mode")&&1==proboards.data("maintenance_auth")&&(t="Disabling maintenance mode will reset your monthly bill<br />limit and allow unlimited pageviews. You will be charged<br />for additional pageviews according to your chosen plan.<br /><br />"+t),proboards.confirm(t,function(){e.disable()},{title:"Maintenance Mode"})},disable:function(){proboards.ajax({url:proboards.route("disable_maintenance"),success:function(){$(".maintenance-header").remove()}})}},hexToRgb:function(e){0==e.indexOf("#")&&(e=e.substr(1)),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var t=e.match(/([a-f\d]{2})/gi);return 3!=t.length?null:3==t.length?[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]:null}}});var pbFileUpload={init:function(s,e){s=$.extend({selFileUploadWidget:"#fileupload",selImgPreview:".preview img",selWysiwygInput:"",enableDragAndDrop:!0,onDragEnter:function(){}},s),e=$.extend({url:proboards.route("attachment"),maxNumberOfFiles:1,maxFileSize:1048576,updateLimits:function(){}},e),s.enableDragAndDrop||(e.dropZone=null);var t={};s.selWysiwygInput&&(t.insertButton=!0,t.deleteButton=!0),$(document.body).append(this.getUploadTemplate()).append(this.getDownloadTemplate(t));var i=$(s.selFileUploadWidget);if(i.length){i.on("mousedown",s.selImgPreview,function(e){e.preventDefault(),e.stopPropagation()}),i.fileupload(e),s.selWysiwygInput&&i.on("click",".insert button",function(e){e.preventDefault(),e.stopPropagation();var t=$(s.selWysiwygInput).data("wysiwyg"),i=$(this).parents(".template-download"),n=parseInt(i.data("id")),a=i.data("name"),o=i.data("sizef"),r=i.data("thumbnail");t.execCommand("addAttachment",0,{id:n,filename:a,size:o,thumbnail:r})}).on("click",".delete button",function(e){e.preventDefault(),e.stopPropagation();var t=$(s.selWysiwygInput).data("wysiwyg"),i=$(this).parents(".template-download"),n=parseInt(i.data("id"));t.execCommand("removeAttachment",0,{id:n})});var n=$("fileupload-overlay");if(!n.length&&s.enableDragAndDrop){(n=$('                <div id="fileupload-overlay">                    <div>Drop files here to upload</div>                    <span id="file-overlay-cancel">X</span>                </div>            ').appendTo(document.body)).css({"background-color":"#BBBBBB",display:"none",height:"100%",left:0,position:"fixed",top:0,width:"100%","z-index":10001}).find("div").css({color:"#666666","font-size":"30px",height:"24px",left:"50%","margin-top":"-12px","margin-left":"-200px",position:"fixed","text-align":"center",top:"50%",width:"400px"});var a=$("span#file-overlay-cancel");a.css({color:"rgb(102, 102, 102)",top:"0",right:"0",position:"absolute","margin-top":"50px","margin-right":"60px","font-size":"25px","font-weight":"bold",cursor:"pointer"}),a.on("click",function(){r()})}if(s.enableDragAndDrop&&(-1==navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Chrome"))&&!$.browser.msie&&-1==navigator.userAgent.indexOf("Trident")){var o=!1,r=function(){n.stop().fadeOut(500)};$(document).bind("dragenter.attachments",function(e,t){return e.stopPropagation(),e.preventDefault(),"function"==typeof s.onDragEnter&&s.onDragEnter.call(i),n.stop().fadeTo(200,1),!1}),n.bind("dragleave.attachments",function(e,t){e.stopPropagation(),e.preventDefault(),o||setTimeout(r,200)}),$(document).bind("drop,mouseup",function(e,t){r()}),$("div",n).on("dragenter.attachments",function(e){e.stopPropagation(),e.preventDefault(),o=!0}).on("dragleave.attachments",function(e){e.stopPropagation(),e.preventDefault(),o=!1})}}},getDownloadTemplate:function(e){var t=3,i="";return(e=$.extend({insertButton:!1,deleteButton:!1},e)).insertButton&&(i+='<td class="insert"><button>Insert</button></td>',t++),e.deleteButton&&(i+='<td class="delete"><button>Delete</button></td>',t++),'            <script id="template-download" type="text/x-jquery-tmpl">\n                <tr                     class="template-download{{if error}} ui-state-error{{/if}}"                    data-id="${id}"                    data-name="${name}"                    data-sizef="${sizef}"                    data-thumbnail="${thumbnail_url}"                >\n                    <td class="preview">\n                        <img src="${thumbnail_url}" alt="Thumbnail Preview">\n                        <table class="no-preview"><tr><td>No Preview</td></tr></table>\n                    </td>\n                    {{if error}}\n                        <td colspan="'+(t-1)+'">\n                            <p>Unable to upload file ${name}.</p>\n                            <p class="error">\n                                {{if error === "maxFileSize"}}\n                                    Error: File is too big\n                                {{else error === "uploadedBytes"}}\n                                    Error: Uploaded bytes exceed file size\n                                {{else error === "emptyResult"}}\n                                {{else}}\n                                    Error: {{html error}}\n                                {{/if}}\n                            </p>\n                        </td>\n                    {{else}}\n                        <td class="name">\n                            <span style="vertical-align:middle;">\n                                ${name}\n                                <input type="hidden" name="attachment_ids[]" value="${id}" />\n                                <div class="ui-progressbar">\n                                    <div class="ui-progressbar-complete"></div>\n                                </div>\n                            </span>\n                        </td>\n                        <td class="size">\n                            ${sizef}\n                        </td>\n'+i+"\n                    {{/if}}\n                </tr>\n            <\/script>        "},getUploadTemplate:function(){return'            <script id="template-upload" type="text/x-jquery-tmpl">\n                <tr class="template-upload{{if error}} ui-state-error{{/if}}">\n                    <td class="preview">\n                        <table class="no-preview"><tr><td>No Preview</td></tr></table>\n                    </td>\n                    {{if error}}\n                        <td colspan="4">\n                            <p>Unable to upload file ${name}.</p>\n                            <p class="error">\n                                {{if error === "maxFileSize"}}\n                                    Error: File is too big\n                                {{else error === "minFileSize"}}\n                                    Error: File is too small\n                                {{else error === "acceptFileTypes"}}\n                                    Error: Filetype not allowed\n                                {{else error === "maxNumberOfFiles"}}\n                                    Error: Max number of files exceeded\n                                {{else}}\n                                    Error: ${error}\n                                {{/if}}\n                            </p>\n                        </td>\n                    {{else}}\n                        <td class="name">                            ${name}<div class="progress"></div>\n                        </td>\n                        <td class="size">\n                            ${sizef}\n                        </td>\n                        <td class="cancel">\n                            <button>Cancel</button>\n                        </td>\n                        <td class="start" colspan="2">\n                            <button>Start</button>\n                        </td>\n                    {{/if}}\n                </tr>\n            <\/script>        '}},ANALYTICS_DEBUG=!1;$.extend(proboards,{analytics:{google:{getClientId:function(){if("function"==typeof ga){var t="";return ga(function(e){t=e.get("clientId")}),t}ANALYTICS_DEBUG&&console.log("Google analytics not loaded.")},send:function(e){"function"==typeof ga?e&&($.isArray(e)||(e=[e]),$.each(e,function(e,t){if("object"==typeof t){var i="send";t.trackerName&&(i=t.trackerName+"."+i),"pageview"===t.hitType?(ga(i,"pageview"),ANALYTICS_DEBUG&&console.log(">>> Pageview Sent",t)):"event"===t.hitType&&null!=t.eventCategory&&null!=t.eventAction&&(ga(i,t),ANALYTICS_DEBUG&&console.log(">>> Event Sent",t))}})):ANALYTICS_DEBUG&&console.log("Google analytics not loaded.")}}}}),$(document).ready(function(){var e=proboards.data("_google_analytics_events");proboards.analytics.google.send(e)});var AUTOSAVE_THRESHOLD=900,AUTOSAVE_NEW_THREAD=1,AUTOSAVE_THREAD_REPLY=2,AUTOSAVE_QUICK_REPLY=3,AUTOSAVE_NEW_CONV=4,AUTOSAVE_CONV_REPLY=5,AUTOSAVE_CONV_QUICK_REPLY=6;$.extend(proboards,{autosave:{options:{type:0,id:0,subject:"",message:"",oldSubVal:"",oldMessVal:"",mode:"",defaultMode:"",charCount:0,maxChar:100,saved:!1,noDialog:!1,lsKey:location.host+"_draft"},init:function(e){var t=this;if("undefined"!=typeof Storage){if((t.options.type=e)!=AUTOSAVE_NEW_THREAD&&e!=AUTOSAVE_NEW_CONV||this.bindAutosave($('input[name="subject"]'),!0,null),e!=AUTOSAVE_QUICK_REPLY&&e!=AUTOSAVE_CONV_QUICK_REPLY){if(void 0===this.options.retriesLeft&&(this.options.retriesLeft=3),2!=$(".editor.visual-editor iframe, .editor.bbcode-editor textarea").length&&this.options.retriesLeft--)return setTimeout(function(){t.init(e)},500);this.bindAutosave($(".editor.visual-editor iframe").contents(),!1,!0),this.bindAutosave($(".editor.bbcode-editor textarea"),!1,!1)}else this.bindAutosave($(".quick-reply .message textarea"),!1,!1);if(1==proboards.data("no_dialog")&&(t.options.noDialog=!0),proboards.data("message_mode")&&(t.options.defaultMode=proboards.data("message_mode")),!t.options.noDialog){var i=null;e!=AUTOSAVE_QUICK_REPLY&&e!=AUTOSAVE_CONV_QUICK_REPLY||(i="bbcode"),this.load(i)}proboards.data("autosave_override")&&t.runAutosave(t.options.defaultMode,!0)}},bindAutosave:function(e,t,i){var n=this;e.bind("keypress",function(){n.options.charCount++,n.options.saved||(n.options.saved=!0,t?(n.options.oldSubVal=e.val(),"block"==$(".editor.visual-editor").css("display")?(n.options.mode="visual",n.options.oldMessVal=$(".editor.visual-editor iframe").contents().find("body").html()):(n.options.mode="bbcode",n.options.oldMessVal=$(".editor.bbcode-editor textarea").val())):n.options.type!=AUTOSAVE_QUICK_REPLY&&n.options.type!=AUTOSAVE_CONV_QUICK_REPLY&&i?(n.options.mode="visual",n.options.oldMessVal=e.find("body").html()):(n.options.mode="bbcode",n.options.oldMessVal=e.val()),autosaveOp=setTimeout(function(){n.runAutosave()},1500))})},runAutosave:function(e,t){var i=this,n=i.options.type;if("bbcode"!=e&&"visual"!=e||(i.options.mode=e),!proboards.data("submitting")){var a,o,r="";if(n!=AUTOSAVE_NEW_THREAD&&n!=AUTOSAVE_NEW_CONV||(a=$('input[name="subject"]').val()),n!=AUTOSAVE_QUICK_REPLY&&n!=AUTOSAVE_CONV_QUICK_REPLY?"visual"==i.options.mode?(o=$(".editor.visual-editor iframe").contents().find("body").html(),r=$(".editor.visual-editor iframe").contents().find("body").text()):o=$(".editor.bbcode-editor textarea").val():o=$(".quick-reply textarea").val(),o.match(/^\s*$/)||"visual"==i.options.mode&&r.match(/^\s*$/))i.options.saved=!1;else{if(i.options.charCount<i.options.maxChar&&!t)if(n==AUTOSAVE_NEW_THREAD||n==AUTOSAVE_NEW_CONV){if(i.options.oldSubVal!=a||i.options.oldMessVal!=o)return i.options.oldSubVal=a,i.options.oldMessVal=o,void(autosaveOp=setTimeout(function(){i.runAutosave()},1500))}else if(i.options.oldMessVal!=o)return i.options.oldSubVal=a,i.options.oldMessVal=o,void(autosaveOp=setTimeout(function(){i.runAutosave()},1500));var s=i.getTypeId();if(n==AUTOSAVE_NEW_CONV||null!=s){i.options.id=s,i.options.subject=a,i.options.message=o;var l=i.options.lsKey;n!=AUTOSAVE_QUICK_REPLY&&n!=AUTOSAVE_CONV_QUICK_REPLY||n--;var c={type:n,affected_id:i.options.id,subject:i.options.subject,message:i.options.message,mode:i.options.mode,time:parseInt((new Date).getTime()/1e3)};localStorage[l]=JSON.stringify(c),i.options.charCount=0,i.options.saved=!1}}}},getTypeId:function(){var e=this.options.type;return e==AUTOSAVE_NEW_THREAD?proboards.data("page").board.id:e==AUTOSAVE_THREAD_REPLY||e==AUTOSAVE_QUICK_REPLY?proboards.data("page").thread.id:e==AUTOSAVE_CONV_REPLY||e==AUTOSAVE_CONV_QUICK_REPLY?proboards.data("page").conversation.id:null},load:function(e){var t=this.options.lsKey;if(null!=localStorage[t]){var i=$.parseJSON(localStorage[t]);if(i&&!(parseInt((new Date).getTime()/1e3)-i.time>AUTOSAVE_THRESHOLD)){var n=proboards.data("type");if(n!=AUTOSAVE_QUICK_REPLY&&n!=AUTOSAVE_CONV_QUICK_REPLY||n--,i.type==n&&this.getTypeId()==i.affected_id){var a=e||this.options.defaultMode;this.dialogSetup(i.subject,i.message,i.mode,a)}}}},clear:function(){"undefined"!=typeof localStorage&&localStorage.removeItem(this.options.lsKey)},dialogSetup:function(n,e,t,i){var a=this,o=function(e,t){var i=$('<div id="autosave"><p>We found a recent draft that you were working on.  Would you like to restore it?</p></div>');n&&i.append('<div class="as-wrapper"><div class="subject-header">Subject:</div><div class="subject"></div></div><br />'),i.append('<div class="as-wrapper"><div class="message-header">Message:</div><div class="message"></div></div>'),i.find(".subject").text(n),i.find(".message").html(e),$("body").append(i),proboards.dialog("autosave",{title:"Load Draft",autoOpen:!0,width:585,height:250,buttons:[{text:"Yes",click:function(){if($(".quick-reply .message textarea").length)return $(".quick-reply .message textarea").val(t),void $(this).dialog("close");null!=n&&$('input[name="subject"]').val(n),"block"==$(".editor.visual-editor").css("display")?$(".editor.visual-editor iframe").contents().find("body").html(t):$(".editor.bbcode-editor textarea").val(t),$(this).dialog("close")}},{text:"No",click:function(){a.clear(),$(this).dialog("close")}}]})},r="",s="",l=proboards.data("nosmiles");t!=i?"bbcode"==i?proboards.ajax({url:proboards.route("filter_html2bbcode"),data:{html:e,nosmiles:l},success:function(e){r=(r=(r=(r=e.bbcode).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/\n/g,"<br>"),s=e.bbcode,o(r,s)}}):proboards.ajax({url:proboards.route("filter_bbcode2html"),data:{bbcode:e,nosmiles:l},success:function(e){r=e.html,s=e.html,o(r,s)}}):"visual"==i?proboards.ajax({url:proboards.route("filter_html2bbcode2html"),data:{html:e,nosmiles:l},success:function(e){r=e.html,s=e.html,o(r,s)}}):(r=(r=(r=(r=e).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/\n/g,"<br>"),o(r,s=e))}}}),$.extend(proboards,{avatar:{editor:{container_id:"",thumb_container_id:"",obj:void 0,obj_id:"avatar-obj",thumb_obj_id:"avatar-thumb-obj",user_id:0,aData:""},attributes:null,attr_links:{},avatar_changed:0,setAttributes:function(e){proboards.avatar.attributes=e},setEditorData:function(e,t){proboards.avatar.editor.user_id=e,proboards.avatar.editor.aData=t},getEditorObject:function(){return void 0!==proboards.avatar.editor.obj||(0<$("#"+proboards.avatar.editor.obj_id).length&&"function"==typeof $("#"+proboards.avatar.editor.obj_id)[0].saveAvatarCallback?proboards.avatar.editor.obj=$("#"+proboards.avatar.editor.obj_id)[0]:proboards.avatar.editor.obj=$("#"+proboards.avatar.editor.obj_id+"-embed")[0]),proboards.avatar.editor.obj},loadThumb:function(e,t,i,n){n=$.extend({width:150,height:150},n);var a=proboards.data("avatar_thumbnail_flash_path");$("."+e).each(function(){$(this).html('<object id="'+t+'" data="'+a+'" width="'+n.width+'" height="'+n.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowScriptAccess" value="sameDomain" /><param name="flashVars" value="aData='+i+'" /><param name="wmode" value="transparent" /><param name="movie" value="'+a+'" /><param name="quality" value="high" /><embed src="'+a+'" allowScriptAccess="sameDomain" flashVars="aData='+i+'" wmode="transparent" quality="high" width="'+n.width+'" height="'+n.height+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>')})},loadEditor:function(e){proboards.avatar.editor.container_id=e;var t=proboards.avatar.editor.obj_id,i=780,n=500,a=proboards.avatar.editor.aData,o=proboards.data("avatar_maker_flash_path");$("#"+e).html('<object id="'+t+'" data="'+o+'" width="'+i+'" height="'+n+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowScriptAccess" value="sameDomain" /><param name="flashVars" value="aData='+a+'" /><param name="wmode" value="transparent" /><param name="movie" value="'+o+'" /><param name="quality" value="high" /><embed id="'+t+'-embed" src="'+o+'" allowScriptAccess="sameDomain" flashVars="aData='+a+'" wmode="transparent" quality="high" width="'+i+'" height="'+n+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>'),$.colorPicker(),$(document).bind("mousewheel",function(e,t){var i=proboards.avatar.getEditorObject(),n=$(i).offset(),a=e.pageX-n.left,o=e.pageY-n.top;if(0<a&&a<$(i).width()&&0<o&&o<$(i).height())return i.mouseScrollCallback({delta:t,x:a,y:o}),!1})},updateEditor:function(){$("#"+proboards.avatar.editor.container_id+' param[name="flashVars"]').val("aData="+proboards.avatar.editor.aData),$("#"+proboards.avatar.editor.container_id+" embed").attr("flashvars","aData="+proboards.avatar.editor.aData)},loadEditorThumb:function(e){proboards.avatar.editor.thumb_container_id=e,proboards.avatar.loadThumb(e,proboards.avatar.editor.thumb_obj_id,proboards.avatar.editor.aData)},getAttributes:function(){return null!=proboards.avatar.attributes&&proboards.avatar.attributes},save:function(e){proboards.avatar.editor.aData=e+"&pathPrefix="},savePNG:function(e){var t=proboards.avatar.editor.aData,i=t.indexOf("&pathPrefix=");0<i&&(t=t.substr(0,i)),proboards.ajax({url:proboards.route("save_avatar",{user_id:proboards.data("page").member.id}),data:{img_data:e,aData:t},type:"post",success:function(e){proboards.avatar.getEditorObject().saveAvatarCallback(e),""!=proboards.avatar.editor.thumb_container_id&&proboards.avatar.loadEditorThumb(proboards.avatar.editor.thumb_container_id),proboards.avatar.updateEditor()}})},savePopup:function(e){this.avatar_changed=e},base64Decode:function(e){var t,i,n,a,o,r,s="",l=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=c.indexOf(e.charAt(l++))<<2|(a=c.indexOf(e.charAt(l++)))>>4,i=(15&a)<<4|(o=c.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(r=c.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=o&&(s+=String.fromCharCode(i)),64!=r&&(s+=String.fromCharCode(n));return s},utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):191<n&&n<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t},trace:function(e){},colorPicker:function(o){void 0!==o.index&&0!=o.index||(o.index=0);var e="";if("object"==typeof o.suggestedHexes&&0<o.suggestedHexes.length){e+='<div class="suggested-header">Suggested '+o.displayName+' colors:</div><div class="suggested-palette">';for(var t=0;t<o.suggestedHexes.length;t++)e+='<div class="palette-option" style="background: #'+o.suggestedHexes[t]+";\" onclick=\"$.colorPicker('setHex', '"+o.suggestedHexes[t]+"');\"></div>";e+='</div><div class="clear"></div>'}if("object"==typeof o.linkedTo){var i="Link";1==o.index&&(i+=" secondary"),i+=" "+o.displayName+" color to:<br /><div>",i="";var n=0,a=0;for(var r in o.linkedTo){"object"!=typeof proboards.avatar.attr_links[o.name+o.index]&&(proboards.avatar.attr_links[o.name+o.index]={}),proboards.avatar.attr_links[o.name+o.index][r]=o.linkedTo[r];var s=r.match(/([a-zA-Z]+)(\d*)/),l=(s[1],s[2]),c=o.linkedToDisplay[r][o.name][a];a++,"number"!=typeof l&&(l=0),i+='<div class="link-colors"><input id="link_'+r+'_checkbox" type="checkbox"'+(proboards.avatar.attr_links[o.name+o.index][r]?' checked="checked"':"")+" onclick=\"proboards.avatar.attr_links['"+o.name+o.index+"']['"+r+"']=(proboards.avatar.attr_links['"+o.name+o.index+"']['"+r+"']?false:true); $.colorPicker('setHex');\" /><label for=\"link_"+r+'_checkbox"> Link to '+(1==l?"secondary ":"")+c+" color</label></div>",n++}0<n&&(e+=i)}var d=proboards.avatar.getEditorObject(),u=$(d).offset();$.colorPicker("show",{title:o.displayName,hex:o.hex,extraHTML:e,offset:{left:u.left+o.mouseX-7,top:u.top+o.mouseY+10},hide:function(){proboards.avatar.getEditorObject().closeHex()},update:function(e){try{if(d.setHex(o.name,o.index,e),"object"==typeof proboards.avatar.attr_links[o.name+o.index])for(var t in proboards.avatar.attr_links[o.name+o.index])if(1==proboards.avatar.attr_links[o.name+o.index][t]){var i=t.match(/([a-zA-Z]+)(\d*)/),n=i[1],a=i[2];"number"!=typeof a&&(a=0),d.setHex(n,a,e)}}catch(e){}}})}}}),$.extend(proboards,{badge:{_summary_cache:{},summary:function(i,n){$(".badge-summary").dialog("close");var a=n+"-"+i;if($("#badge-summary-"+a).length)return $("#badge-summary-"+a).dialog("open");proboards.loading(!0),proboards.ajax({url:proboards.route("badge_summary",{user_id:i,badge_id:n}),data:{hide_checkboxes:0<$('input[name="profile_badges[]"]').length?1:0},complete:function(){proboards.loading(!1)},success:function(e){var t=proboards.dialog("badge-summary-"+a,{width:500,height:350,title:"Badge Summary",html:e}).addClass("badge-summary");$('.display-settings input[type="checkbox"]',t).autoSubmit({url:proboards.data("badge_stack_edit_url"),success:function(e){var t=$(this).is(":checked"),i="display_profile"===$(this).attr("name"),n="badge-"+(i?"thumb":"icon"),a=i?$(".show-user"):$(".mini-profile");$(".badge-"+$(this).data("badge_id")+".user-"+$(this).data("user_id")+"."+n,a).each(function(){$(this).toggle(t);var e=$(this).closest(i?".badge-thumbs":".badge-icons");e.toggle(0<$("."+n+":visible",e).length)})}}).data("badge_id",n).data("user_id",i),$('.gifter input[type="checkbox"]',t).autoSubmit({url:proboards.data("badge_edit_url")}),$('.gifter input[type="checkbox"], .display-settings input[type="checkbox"]',t).each(function(){$(this).next().next().after($(this).next())}),$(".badge-use-action",t).click(function(e){e.preventDefault(),t.dialog("close"),proboards.badge.action.dialog(n)}),$(".badge-gift",t).click(function(e){e.preventDefault(),t.dialog("close"),proboards.badge.gift.dialog(n,i)})}})},action:{dialog:function(o,e){$(".badge-action").dialog("close");var r="badge-action-"+o+(e?"-"+e:""),s=$("#"+r);if(s.length)return s.dialog("open");var l=e;proboards.loading(!0),proboards.ajax({url:proboards.route("badge_action_prepare",{badge_id:o}),data:e?{user_id:e}:{},complete:function(){proboards.loading(!1)},success:function(e){s=proboards.dialog(r,{width:600,title:"Use Action",html:e,buttons:{"Use Action":function(){var e=$('input[name="user_search_box_input"]',this).val();void 0===l&&/^\s*$/.test(e)||(proboards.loading(!0),c.call(this,o,$("select",this).val(),l,e,$("textarea",this).val()))}}}).addClass("badge-action");var t=$.unique_id("user-search"),i=$("<div></div>").attr("id",t),n=$('<input name="user_id" type="hidden" />'),a=$(".user-search",s);a.append(i).append(n),proboards.search.create_user_search({container:i,input:n,results:proboards.data("user_search_results"),change:function(e,t){l=t.ids[0]},formId:"",limit:1,checkedHash:{},isPendingList:0,currentUser:a.hasClass("self_action")?0:proboards.data("user").id,showExisting:1,showAdded:1,searchBox:1,allowManualInput:!0})}});var c=function(t,e,i,n,a){var o=$(this);proboards.ajax({url:proboards.route("badge_action",{badge_id:e}),data:{badge_id:e,user_id:i,user_search_box_input:n,message:a},complete:function(){proboards.loading(!1)},success:function(e){o.dialog("close"),o.remove(),proboards.alert("Success",e.message,{close:function(){window.location.reload(!0)},modal:!0}),s.remove(),$("#badge-summary-"+t+"-"+i).remove()}})}}},gift:{options:{dialogId:"badge-gift-dialog",dialogTitle:"Give Gift",height:"auto",width:"430px"},dialog:function(o,r){var n=this.options.dialogId;proboards.loading(!0),proboards.dialog(n,{title:this.options.dialogTitle,autoOpen:!1,buttons:{"Give Gift":function(){var i=$(this),e=(i.parent(),$("#badge-select",i).val()),t=$('input[name="recipient_id"]',i).val(),n=$('input[name="user_search_box_input"]',i).val(),a=$("#badge-dialog-textarea",i).val();if(""==t&&/^\s*$/.test(n))return $.inputError($(".user-search-input",i),"Select a recipient."),!1;proboards.loading(!0),proboards.ajax({url:proboards.route("gift_send"),data:{user_badge_id:e,recipient_id:t,user_search_box_input:n,message:a},complete:function(){proboards.loading(!1)},success:function(e){$(".user-link",i).on("click",function(){1==proboards.unsaved_changes&&(proboards.unsaved_changes=0)}),i.dialog("close");var t='<p class="center">Gift was successfully sent to '+e.profile+".</p>";proboards.alert("Success",t,{close:function(){window.location.reload(!0)},modal:!0}),$("#badge-action-"+o).remove(),$("#badge-summary-"+o+"-"+r).remove()}})}},height:this.options.height,width:this.options.width,open:function(){proboards.unsaved_changes++},close:function(){proboards.unsaved_changes--,$.clearInputError()}}),proboards.ajax({url:proboards.route("gift_dialog"),data:{user_id:r,badge_id:o},complete:function(){proboards.loading(!1)},success:function(e){var o=$("#"+n);o.html(e);var t=$("#gift-recipient-searchbox",o),i=$('input[name="recipient_id"]',o);proboards.search.create_user_search({container:t,input:i,change:function(e,t){i.val(t.itemData.id).change()},currentUser:r,searchBox:1,limit:1,allowManualInput:!0}),$("#badge-select",o).on("change",function(){var e=proboards.data("regift_action_data"),t="",i=$(this).val(),n=e[i].regifts_left;255==n?t+=" The badge will always be regiftable.":n-1==0?t+=" The badge will no longer be regiftable.":(n--,t+=" The badge will be regiftable "+(n+=1!=n?" more times":" more time")+".");var a=e[i].actions_left;255==a?t+=" This badge has unlimited actions.":0!=a&&(t+=" This badge has "+(a+=1!=a?" actions left":" action left")+"."),o.data("badgeActions",e[i].actions_left),$("#badge-extra-notes",o).text(t)}).trigger("change"),o.dialog("open")}})}}}}),proboards.board={select:function(e,t){var n=e||function(){},o=$.extend({id:"board_listing",multiSelect:!1,accessible:!0,title:"Select Board",prepend:"",useExisting:!1,disabledIds:null,mimicGuest:!1},t),i={accessible:o.accessible?1:0,mimic_guest:o.mimicGuest?1:0},a=null,r=o.id,s=function(){var e=$(this);if($("input",e).prop("disabled",!1).prop("checked",!1),$.isArray(o.disabledIds))for(var t=o.disabledIds,i=0,n=t.length;i<n;i++){var a=e.find('input[value="'+t[i]+'"]');a.prop("disabled",!0),a.attr("title","This board has already been selected.")}};o.multiSelect?(i.multi_select=1,a={"Select All":function(){$(this).find(":checkbox").not(":disabled").prop("checked",!0)},"Select None":function(){$(this).find(":checkbox").not(":disabled").prop("checked",!1)},Done:function(){var e=[],t=[];$('input[name="board_id"]:checked',this).each(function(){e.push($(this).val()),t.push($(this).next().text())}),0<e.length&&($(this).dialog("close"),n(e,t,$("#remember-board").prop("checked")))}}):a={Select:function(){var e=$('input[name="board_id"]:checked',this),t=e.val(),i=e.next().text();null!=t&&($(this).dialog("close"),n(t,i,$("#remember-board").prop("checked")))}},$("#"+r).length&&o.useExisting?s.call($("#"+r).dialog("open")):(proboards.loading(!0),proboards.ajax({url:proboards.route("admin_board_list"),data:i,success:function(e){o.prepend&&(e=o.prepend+e);var t=proboards.dialog(r,{dialogClass:"board-listing",title:o.title,html:e,height:350,width:500,buttons:a});void 0!==o.remember&&t.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-board" type="checkbox" '+(o.remember?"checked ":"")+'/><label for="remember-board">&nbsp;Remember my choice</label></span>'),s.call(t)},complete:function(){proboards.loading(!1)}}))}},$.extend(proboards,{calendar:{init:function(i){var n=this,a=["January","February","March","April","May","June","July","August","September","October","November","December"];i.type=proboards.data("calendar_list_view")?"list":"calendar",this.calendar_selectMenu=$(".select_calendar_type").selectMenu({status:"View "+i.type.charAt(0).toUpperCase()+i.type.substr(1),staticStatus:!1,beforeShow:function(){"list"==i.type?($(this).menu("hideOption","type_list"),$(this).menu("showOption","type_calendar")):($(this).menu("showOption","type_list"),$(this).menu("hideOption","type_calendar"))},menuOptions:{click:function(e,t){i.type=$(t.item).attr("class").substr(5),n.jumpToMonth(i.type,i.month,i.year)}}}),this.month_selectMenu=$(".select_calendar_month").selectMenu({status:a[i.month-1],staticStatus:!1,menuOptions:{click:function(e,t){i.month=$(t.item).attr("class").substr(6),$(this).next().find(".status").text(a[i.month-1])}}}),this.year_selectMenu=$(".select_calendar_year").selectMenu({status:i.year,staticStatus:!1,menuOptions:{click:function(e,t){i.year=$(t.item).attr("class").substr(5),$(this).next().find(".status").text(i.year)}}}),$(".calendar_go_button").show().click(function(){n.jumpToMonth(i.type,i.month,i.year)})},set_date:function(e){e.day||(e.day=1),this.date=e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)},set_board_tree:function(e){this.board_tree=e},new_event:function(e){var t=this;e||(e=this.date),proboards.data("new_event_date",e);proboards.data("locale_settings").input_time_format;var i=t.$newEventDialog;i?i.dialog("open"):proboards.ajax({url:proboards.data("calendar_event_dialog_url"),dataType:"html",success:function(e){t.$newEventDialog=proboards.dialog("calendar-new-event-dialog",{html:e,autoOpen:!0,width:620,height:420,title:"Add Calendar Event",buttons:{"Create Event":function(){$("form",this).submit()},Cancel:function(){$(this).dialog("close")}},create:function(){var e=$(this),n=$('input[name="start_date"]',this),a=$('input[name="end_date"]',this),o=$('input[name="start_time"]',this),r=$('input[name="end_time"]',this),s=$('input[name="all_day_event"]',this);n.on("change",function(){a.data("edited")||a.val($(this).val())}),a.add(r).on("change",function(){a.data("edited",!0)}),s.bind("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))});var t=proboards.data("locale_settings");$("form",this).form({submit:function(){var e=s.prop("checked")?n.add(a):n.add(a).add(o).add(r),t=$('input[name="board_id"]:checked').val(),i=proboards.data("new_thread_url").replace(":board_id",t)+"?"+e.serialize();return location.href=i,!1},validations:[{field:"board_id",name:"exists",opts:{},message:"You must select a board."},{field:"start_date",name:"exists",opts:{},message:"You must provide an event date."},{field:"end_date",name:"exists",opts:{},message:"You must provide an end date."},{field:"start_date",name:"date_format",opts:$.extend({},t,{if_exists:"start_date"}),message:"Invalid date format for the event date."},{field:"end_date",name:"date_format",opts:$.extend({},t,{if_exists:"end_date"}),message:"Invalid date format for the end date."},{field:"start_time",name:"exists",opts:{if_not_exists:"all_day_event"},message:"You must provide an event time."},{field:"end_time",name:"exists",opts:{if_not_exists:"all_day_event"},message:"You must provide an end time."},{field:"start_time",name:"time_format",opts:{if_exists:"start_time",if_not_exists:"all_day_event"},message:"Invalid time format for the event date."},{field:"end_time",name:"time_format",opts:{if_exists:"end_time",if_not_exists:"all_day_event"},message:"Invalid time format for the end date."},{field:"end_date",name:"date_range",opts:$.extend({},t,{if_exists:["has_event","all_day_event"],fields:["start_date"]}),message:"The end date cannot be before the start date."},{field:"end_date",name:"date_and_time_range",opts:$.extend({},t,{if_exists:"has_event",if_not_exists:["all_day_event"],fields:["start_date","start_time","end_time"]}),message:"The end date and time must be after the start date and time."}]}),e.data("inputs",{startDate:n,endDate:a,startTime:o,endTime:r,allDayEvent:s})},open:function(){var e=$("#calendar-new-event-dialog").data("inputs"),t=proboards.data("new_event_date");t=t.replace("-","/");var i=new Date(t);e.allDayEvent.prop("checked",!0).trigger("change"),e.endDate.data("edited",!1);var n=function(){if(!e.startDate.is(".hasDatepicker")||!e.endDate.is(".hasDatepicker"))return setTimeout(n,250);e.startDate.datepicker("setDate",i),e.endDate.datepicker("setDate",i),e.startDate.blur().datepicker("hide")};n()}})}})},jumpToMonth:function(e,t,i){location.href=proboards.data("list"==e?"calendar_list_url":"calendar_month_url").replace(":month",t).replace(":year",i)}}}),$.extend(proboards,{captcha:{options:{},init:function(n){var _=0==jQuery.ui.version.indexOf("1.8")?"form":"ui-form";({options:{},init:function(){var h=this;$.extend(h.options,n);var f=h.options,m=$("#"+f.form_id),g="captcha_challenge",v="captcha_response";h.captchaLoaded=!1;var b=f.captcha_errors&&f.captcha_error_origin===f.captcha_id;if(h.errors=b,f.mobile||f.integrated||(h.captchaDialog=m.data("dialog"),void 0===h.captchaDialog&&(h.captchaDialog=proboards.dialog(f.captcha_container_id,{height:"auto",width:"340px",modal:!0,autoOpen:!1,title:"Please prove you are human:",buttons:{Submit:function(){m.trigger("submit",["formSubmit"])}},open:function(){$(document).bind("keydown.captcha",function(e){13==e.which&&m.trigger("submit",["formSubmit"])}),$("input","#"+f.captcha_container_id).prop("disabled",!1)},close:function(){$(document).unbind("keydown.captcha"),$('input[type="submit"]',m).add(".ui-dialog-buttonset button","#"+f.captcha_container_id).removeData("form.disabled").prop("disabled",!1),$("input","#"+f.captcha_container_id).prop("disabled",!0)}}),h.captchaDialog.css("padding","10px"),m.data("dialog",h.captchaDialog))),f.mobile&&h.run_on_captcha_load(function(){h.renderMobileRecaptcha(f.captcha_container_id)}),m.bind("captcha-submit",function(e,t,i){void 0===i&&(i={});var n=!1,a=!1,o=!1;switch(t){case"pageLoad":n=!0;break;case"captchaLoad":a=!0;break;case"formSubmit":o=!0;break;default:a=!0}if(10<=f.attempts)return $("input",m).attr("disabled","disabled"),$('input[type="submit"], .button',m).hide(),void(i.value=!1);if(h.options.mobile){if("function"==typeof f.custom_submit)return void(i.value=f.custom_submit())}else{var r="",s="",l=m.data(_),c=!1;if(!f.integrated&&l&&(c=proboards.form.isValidForm(l)),h.isSolveMedia())r="adcopy_challenge_field",s="adcopy_response_field",!n&&!c||o||null!=ACPuzzleInfo.widget&&ACPuzzleInfo.divid==f.captcha_container_id||(ACPuzzle.create(f.key,f.captcha_container_id),h.error_message(),h.tos_checkbox(),m.data("captchaLib",ACPuzzle),h.captchaLoaded=!0);else if(h.isRecaptcha()){var d="gre-"+f.captcha_container_id;!n&&!c||o||0!=$("#"+d).children().length||(m.data("gre-complete",!1),grecaptcha.render(d,{sitekey:f.key,callback:function(){m.data("gre-complete",!0)},"expired-callback":function(){m.data("gre-complete",!1)}}),h.error_message(),h.tos_checkbox(),h.captchaLoaded=!0,0==$('textarea[name="g-recaptcha-response"]',m).length&&m.append('<textarea name="g-recaptcha-response" style="display:none"></textarea>'))}if(o||m.data("captchaLib")&&0==m.has("#"+g).length&&m.append('<input class="left-align" id="'+g+'" type="hidden" name="'+r+'" value="" /><input class="left-align" id="'+v+'" type="hidden" name="'+s+'" value="" />'),n)return f.integrated||!b||f.no_popup||h.display_captcha_dialog(),void(i.value=!1);if(a)return f.integrated||!c&&!f.no_validations||h.display_captcha_dialog(),void(i.value=!1);if(o){if(m.data("submitted"))return void(i.value=!1);if(!1===m.data("gre-complete"))return h.captchaDialog.removeClass("grepulse").width(),h.captchaDialog.addClass("grepulse"),void(i.value=!1);if(f.integrated||h.captchaDialog.dialog("close"),m.data("captchaLib")){var u=m.data("captchaLib").get_challenge(),p=m.data("captchaLib").get_response();$("#"+g,m).val(u),$("#"+v,m).val(p)}else"undefined"!=typeof grecaptcha&&$('textarea[name="g-recaptcha-response"]',m).val(grecaptcha.getResponse());if(f.tos&&$('input[name="tos"]',m).val($('input[name="tos_checkbox"]',h.captchaDialog).attr("checked")?1:0),"function"==typeof f.custom_submit)return void(i.value=f.custom_submit());i.value=!0}}}),m.submit(function(e,t){var i=m.data("form");if((!i||!i.options.beforeSubmit||!1!==i.options.beforeSubmit())&&m.data(_).validateAll()){var n={};return m.trigger("captcha-submit",[t,n]),n.value&&m.data("submitted",!0),n.value}}),b){var e=f.error_message;if(e||(e="Captcha failed",5<=f.attempts&&(e+=": "+(10-f.attempts)+" attempts left")),1!=f.no_popup||f.integrated)if(h.options.mobile){if(h.options.mobile&&$(".captcha-error-html").length){var t=$(".captcha-error-html").position().top;window.scroll({top:t,behavior:"smooth"})}}else proboards.data("captchaDialogError",e),f.integrated||h.display_on_page_load();else{var i=$(".captcha-error");i.length?i.text(e).show():1==$("#pbn_container").length?$("#pbn_container").prepend('<span style="color: #f00; font-size: 1.16em;">'+e+"</span><br /><br />"):h.options.mobile||proboards.error(e)}}},display_captcha_dialog:function(){var e=this;e.captchaLoaded?e.captchaDialog.dialog("open"):e.run_on_captcha_load(function(){e.captchaDialog.dialog("open")})},display_on_page_load:function(){var e=$("#"+this.options.form_id);this.run_on_captcha_load(function(){e.trigger("captcha-submit",["pageLoad"])})},run_on_captcha_load:function(e){$("#"+this.options.form_id);var t=20,i=setInterval(function(){--t||clearInterval(i),"undefined"==typeof ACPuzzle&&"undefined"==typeof Recaptcha&&"undefined"==typeof grecaptcha||(clearInterval(i),"function"==typeof e&&e())},500)},error_message:function(){if(this.errors&&0==this.options.no_popup){var e=proboards.data("captchaDialogError");if(e){var t=$('<div style="color: #f00; font-size: 1.16em; margin-bottom: 15px; text-align: center;"></div>').append(e);this.captchaDialog.prepend(t)}}},tos_checkbox:function(){var e=this.options,t=$("#"+e.form_id);this.options.tos&&$.check_url(e.tos.url)&&e.tos.name.match(/\S/)&&0==$('input[name="tos_checkbox"]',this.captchaDialog).length&&(this.captchaDialog.append('<div style="margin-top: 15px; text-align: center;"><label><input type="checkbox" name="tos_checkbox" style="margin: 0 5px 0 0; vertical-align: middle;">I agree to the <a href="'+proboards.escape_html(e.tos.url)+'" target="_blank">'+proboards.escape_html(e.tos.name)+"</a>.</label></div>"),t.append('<input type="hidden" name="tos" />'))},renderMobileRecaptcha:function(e){if(this.isRecaptcha()){var t=$("#"+this.options.form_id);grecaptcha.render("gre-"+e,{sitekey:this.options.key}),t.data("dialog",$("#"+e)),this.captchaDialog=t.data("dialog"),this.error_message(),this.captchaLoaded=!0}},isSolveMedia:function(){return"undefined"!=typeof ACPuzzle},isRecaptcha:function(){return"undefined"!=typeof grecaptcha}}).init()}}}),proboards.color_scheme={properties:["body_background_color","title_bar_background_color","title_text_color","title_buttons_background_color","buttons_background_color","container_background_color_1","container_background_color_2","container_highlight_color","container_outer_border_color","container_inner_border_color"],favstar_dim_url:proboards.data("image_path")+"/admin/themes/etc/favstar-dim.png",build:function(e,t){for(var i=[],n=0;n<proboards.color_scheme.properties.length;n++)i.push({key:proboards.color_scheme.properties[n],value:e[proboards.color_scheme.properties[n]]});i.sort(function(e,t){if(void 0===e.value||void 0===t.value)return 0;for(var i=0;i<6;i++)if(e.value.charAt(i)!=t.value.charAt(i))return $.isNumeric(e.value)==$.isNumeric(t.value)?e.value.charAt(i).localeCompare(t.value.charAt(i)):$.isNumeric(e.value)?1:-1;return 0});for(var a=$("<div></div>").attr("id","scheme_"+e.scheme_id).addClass("scheme"),o=(i.length,0);o<i.length;o++){var r=0;switch(i[o].key){case"body_background_color":r=15;break;case"title_bar_background_color":r=23;break;case"title_text_color":r=2;break;case"title_buttons_background_color":r=17;break;case"buttons_background_color":r=7;break;case"container_background_color_1":r=12;break;case"container_background_color_2":r=6;break;case"container_highlight_color":r=3;break;case"container_outer_border_color":r=10;break;case"container_inner_border_color":r=5}a.append($("<div></div>").attr("style","background-color: #"+i[o].value+"; width: "+r+"%;").addClass(i[o].key))}var s=a;return 1==t&&((s=$('<div class="scheme_wrapper"></div>')).append('<img src="'+favstar_dim_url+'" class="fav-star" alt="click to toggle favorite" title="click to toggle favorite" />'),s.append(a)),a.data("scheme",$.extend(!0,{},e)),s}},proboards.conversation={select:function(t,e){var i=$.extend({},e),n=Math.floor(1e6*Math.random()),a=proboards.dialog("conversation_listing",{title:"Select Conversation",html:'<div id="list_manager"><div class="container conversations">\t<div class="control-bar ui-helper-clearfix"></div>\t<div class="content cap-bottom">\t\t<table class="list">\t\t\t<thead>\t\t\t\t<tr class="head">\t\t\t\t\t<th class="radio_button"></th>\t\t\t\t\t<th class="icon"></th>\t\t\t\t\t<th class="main">Subject</th>\t\t\t\t\t<th class="created-by">Created By</th>\t\t\t\t\t<th class="replies">Replies</th>\t\t\t\t\t<th class="latest last">Last Reply</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t<tbody class="lm-content-'+n+'"></tbody>\t\t</table>\t</div></div></div>',width:800,height:400,buttons:{Select:function(){var e=$('input[name="conversation_id"]:checked',this).val();null!=e&&($(this).dialog("close"),t(e,$("#remember-conversation").prop("checked")))}}});proboards.ajax({url:proboards.route("admin_conversation_list"),dataType:"json",data:{list_manager_id:n},success:function(e){$(".lm-content-"+n,a).html(e.results),$(".control-bar",a).html('<div class="ui-search hide lm-search-'+n+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+n),new listManager("conversations",{total:e.total,limit:e.limit,page:e.page,pageCache:".lm-content-"+n,id:n,hash:!1},{route_name:"admin_conversation_list",float_control_bar:!1}),void 0!==i.remember&&a.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-conversation" type="checkbox" '+(i.remember?"checked ":"")+'/><label for="remember-conversation">&nbsp;Remember my choice</label></span>')}})}},$.extend(proboards,{embedded:{processEmbedded:function(){for(var e=["facebook","instagram","linkedin","pinterest","twitter","vine"],t=e.length,i=0;i<t;i++){var n=e[i];this.embed[n]()}},embed:{loaded:{},facebook:function(){if($(".fb-post").length){var e=10,t=function(){if("undefined"==typeof FB&&e--)return setTimeout(t,500);FB.XFBML.parse()};this.loaded.facebook?this.loaded.facebook&&"undefined"!=typeof FB&&t():(this.loaded.facebook=!0,$(document.body).prepend('<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "facebook-jssdk"));<\/script>'),t())}},instagram:function(){!!$(".pb-instagram").length&&(this.loaded.instagram?this.loaded.instagram&&"undefined"!=typeof instgrm&&instgrm.Embeds.process():(this.loaded.instagram=!0,$(document.body).prepend('<script async defer src="//www.instagram.com/embed.js"><\/script>')))},linkedin:function(){$(".linkedin-profile").length&&(this.loaded.linkedin?this.loaded.linkedin&&"undefined"!=typeof IN&&IN.parse():(this.loaded.linkedin=!0,$(document.body).prepend('<script src="//platform.linkedin.com/in.js" type="text/javascript"><\/script>')))},pinterest:function(){if($(".pinterest-post").length){var e=10,t=function(){if("undefined"==typeof parsePins&&e--)return setTimeout(t,500);parsePins()};if(this.loaded.pinterest)this.loaded.pinterest&&"undefined"!=typeof parsePins&&t();else{this.loaded.pinterest=!0;var i=document.createElement("SCRIPT");i.type="text/javascript",i.async=!0,i.src="//assets.pinterest.com/js/pinit.js",i.setAttribute("data-pin-build","parsePins"),document.body.appendChild(i),t()}}},twitter:function(){if($(".pb-twitter-wrapper").length){var e=10,t=function(){if(("undefined"==typeof twttr||void 0===twttr.widgets)&&e--)return setTimeout(t,500);$(".pb-twitter-wrapper:not(.is-rendered)").each(function(){var e=$(this),t=e.data("tweet-id").substr(1);twttr.widgets.createTweet(t,this),e.addClass("is-rendered")})};this.loaded.twitter?this.loaded.twitter&&"undefined"!=typeof twttr&&t():(this.loaded.twitter=!0,$(document.body).prepend('<script async src="//platform.twitter.com/widgets.js" charset="utf-8"><\/script>'),t())}},vine:function(){$(".vine-embed").length&&(this.loaded.vine||(this.loaded.vine=!0,$(document.body).prepend('<script src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"><\/script>')))}}}}),$.extend(proboards,{events:{afterSearch:[],afterSearchOne:[],columnSort:[],columnSortOne:[],moreActivity:[],moreActivityOne:[],moreNotification:[],moreNotificationOne:[],pageChange:[],pageChangeOne:[],run:function(e,t){if(this[e]){for(var i=this[e],n=0,a=i.length;n<a;n++)i[n].call(t);for(n=0,a=(i=this[e+"One"]).length;n<a;n++)i[n].call(t);this[e+"One"]=[]}}},on:function(e,t){this.events[e]?"function"==typeof t?this.events[e].push(t):console.log("You must bind a valid function."):console.log("The event, "+e+" is not a supported ProBoards event.")},one:function(e,t){this.events[e]?"function"==typeof t?this.events[e+"One"].push(t):console.log("You must bind a valid function."):console.log("The event, "+e+" is not a supported ProBoards event.")}}),$.extend(proboards,{form:{init:function(){proboards.form.confirm_ignore_changes(".confirm-ignore-changes form:first")},confirm_ignore_changes:function(e){var t=$(e);t.each(function(){var e=$(this);$("input,textarea,select",e).live("change",function(){$(this).closest(e).trigger("change")})}),t.bind("change",function(){proboards.unsaved_changes=1}),t.bind("submit",function(){proboards.unsaved_changes=0})},generateInput:function(n,e,t){var i=function(e,i,t){proboards.search.create_user_search({container:e,input:i,results:t,change:function(e,t){i.val(t.ids.join(",")).change()},formId:"",limit:1,checkedHash:{},isPendingList:0,currentUser:0,showExisting:1,showAdded:1,searchBox:1,massEmail:0,allowManualInput:n.allowManualInput,eventError:n.eventError})},a=null;if(0==n.std_input_wrapper&&t)a=t;else if(t){var o=void 0!==n.name&&n.name.length?" input-"+n.name:"";a=$('<span class="input'+o+'"></span>'),t.append(a)}else{o=void 0!==n.name&&n.name.length?" input-"+n.name:"";a=$('<span class="input'+o+'"></span>')}var r={};switch(n.type){case"board_select":r.input=$('<input type="text" readonly="readonly" name="'+n.name+'_display" />'),r.hiddenInput=$('<input type="hidden" name="'+n.name+'" />'),r.label=n.label?$("<label>"+n.label+"</label>"):"",a.append(r.label,r.input,r.hiddenInput),null==e?r.input.val("Click to Select Board"):r.hiddenInput.val(e),n.board_id_display&&r.input.val(n.board_id_display),r.input.data({hiddenInput:r.hiddenInput,label:r.label});break;case"checkbox":var s=$('<input type="checkbox" />').attr("name",n.name);a.append(s);var l=$("<label>"+n.label+"</label>").css("display","inline");s.after(l);var c=$.unique_id(n.name);s.attr("value",1).attr("id",c),l.attr("for",c),n.tip&&l.after(proboards.help_icon(n.tip)),e&&s.attr("checked","checked");break;case"freestyle":var d=$(n.html);n.css&&d.css(n.css),a.append(d);break;case"color":n.label&&(a.append('<label class="field-label">'+n.label+"</label>"),n.breaks&&a.append("<br />"));var u=$('<input class="width-7" type="text" />').attr("name",n.name).val(e);n.css&&u.css(n.css),a.append(u),u.colorPickMe({preview:!0});break;case"radio":var p=n.name;n.label&&(a.append('<label class="field-label">'+n.label+"</label>"),n.breaks&&a.append("<br />"));for(var h=0;h<n.options.length;h++){c=$.unique_id(n.name),s=$('<input type="radio" />').attr("name",p).attr("id",c).val(n.options[h].value);n.options[h].selected&&s.attr("checked","checked"),a.append(s).append($('<label class="field-sub-label">'+n.options[h].text+"</label>").attr("for",c)),n.breaks&&a.append("<br />")}null!=e&&($('input[type="radio"]',a).removeAttr("checked"),$('input[value="'+e+'"]',a).attr("checked","checked"));break;case"select":var f=$("<select />").attr("name",n.name);for(h=0;h<n.options.length;h++){var m=$("<option></option>").val(n.options[h].value).text(n.options[h].text);n.options[h].selected&&!e&&m.attr("selected","selected"),f.append(m)}a.append(f),n.className&&f.attr("class",n.className),n.label&&f.before("<label>"+n.label+"</label>"),e&&f.val(e);break;case"text":s=$('<input type="text" />').attr("name",n.name);if(a.append(s),n.label){l=$("<label>"+n.label+"</label>");n.display&&l.css("display",n.display),s.before(l)}n.placeholder&&s.attr("placeholder",n.placeholder),n.css&&s.css(n.css),s.val(e);break;case"textarea":s=$("<textarea></textarea>").attr("name",n.name);a.append(s),n.label&&s.before("<label>"+n.label+"</label>"),n.placeholder&&s.attr("placeholder",n.placeholder),s.val(e);break;case"code_editor":s=$("<textarea></textarea>").attr("name",n.name);a.append(s),n.label&&s.before("<label>"+n.label+"</label>"),n.placeholder&&s.attr("placeholder",n.placeholder),s.val(e),proboards.code_editor({textarea:s});break;case"user":s=$('<input type="hidden" />').attr("name",n.name);a.append(s);var g=$('<div class="searchbox-container"></div>');a.append(g),e?(s.val(e),g.html("Loading").progress_text(),proboards.ajax({url:proboards.route("admin_user_searchbox_results"),data:{ids:[e]},success:function(e){g.html(""),i(g,s,e.results)}})):i(g,s,[])}if(!t)return a;n.type},gen_verify_box:function(t,e,i,n,a,o,r,s){a+='<form onSubmit="return false;" class="verify_box"><div class="section center">Type the word <strong>"'+o+'"</strong> in the space below to verify.<br />Verify <input type="text" name="verification" style="margin: 5px; width: 300px;" /></div></form>',proboards.dialog(t,{title:e,html:a,height:i,width:n,buttons:[{text:r,id:"action-button",click:function(){if($('.verify_box input[name="verification"]').val().toLowerCase()==o.toLowerCase())$(this).dialog("close"),s.call();else{clearTimeout(e),0==$(".status_msg").length?$("#"+t).siblings(".ui-dialog-buttonpane").prepend('<span class="status_msg" style="float: left; padding-top: 15px;">Failed</span>'):$(".status_msg").show();var e=setTimeout(function(){$(".status_msg").hide()},3e3)}}}]})},genOptionRange:function(e,t,i,n){for(var a=[],o=e;o<=t;o+=i){var r={value:o,text:o};o==n&&(r.selected=!0),a.push(r)}return a},handleFormError:function(e,t){if("object"==typeof t&&t.form_error){for(var i in t.form_error)if(t.form_error.hasOwnProperty(i)){var n="#"+e.attr("id")+"_"+i+"_input",a=t.form_error[i][0];$.inputError(n,a);break}}else t.error&&proboards.error(t.error)},isValidForm:function(e){if(void 0===e){if($(".ui-form-error").length||"none"==$(".ui-form-error").css("display"))return!0}else if(e.validateAll())return!0;return!1}}}),$.extend(proboards,{genericSelection:function(e){this.init(e)}}),$.extend(proboards.genericSelection.prototype,{modes:{w3c:1,microsoft:2},init:function(e){this.window=e||window,this.mode=this.window.getSelection?"w3c":"microsoft";var t=this;$.each(["container","startContainer","endContainer","selectNode","collapse","collapsed","getSelection","move","offset","remove"],function(){t[this]=t[this+"_"+t.mode]})},getSelection_w3c:function(e){if(void 0!==e)return e;var t=this.window.getSelection();if(0==t.rangeCount){var i=this.window.document.createRange();i.setStart(this.window.document.body,0),i.setEnd(this.window.document.body,0),t.addRange(i)}var n=t.getRangeAt(0).cloneRange();return{range:n,selection:t,apply:function(){t.removeAllRanges(),t.addRange(n)}}},getSelection_microsoft:function(e){if(void 0!==e)return e;var t=this.window.document.selection,i=t.createRange();return{range:i,selection:t,apply:function(){i.select()}}},startContainer_w3c:function(e){var t=this.getSelection(e);return $(t.range.startContainer).closest("*").get(0)},startContainer_microsoft:function(e){var t=this.getSelection(e);return"Control"!=t.selection.type&&(t.range.collapse(!0),t.range.parentElement())},endContainer_w3c:function(e){var t=this.getSelection(e);return $(t.range.endContainer).closest("*").get(0)},endContainer_microsoft:function(e){var t=this.getSelection(e);return"Control"!=t.selection.type&&(t.range.collapse(!1),t.range.parentElement())},container_w3c:function(e){return this.endContainer(e)},container_microsoft:function(e){return this.endContainer(e)},selectNode_w3c:function(e,t,i){var n=this.getSelection(i);switch(void 0===t&&(t="all"),t){case"start":n.range.setStartBefore(e);break;case"end":n.range.setEndAfter(e);break;case"all":n.range.selectNodeContents(e)}return n.apply(),n},selectNode_microsoft:function(e,t,i){var n=this.getSelection(i),a=this.getSelection();if(void 0===t&&(t="all"),3==e.nodeType){var o=$("<span>X</span>");(e=$(e)).before(o),a.range.moveToPoint(o.offset().left,o.offset().top),o.remove(),a.range.moveEnd("character",e.text().length)}else a.range.moveToElementText(e);return"start"!=t&&"all"!=t||n.range.setEndPoint("StartToStart",a.range),"end"!=t&&"all"!=t||n.range.setEndPoint("EndToEnd",a.range),"all"==t&&n.range.setEndPoint("StartToStart",a.range),n.apply(),n},collapse_w3c:function(e,t){var i=this.getSelection(t);return void 0===e||e?i.range.setEnd(i.range.startContainer,i.range.startOffset):i.range.setStart(i.range.endContainer,i.range.endOffset),i.apply(),i},collapse_microsoft:function(e,t){var i=this.getSelection(t);return i.range.collapse(void 0===e||e),i.apply(),i},move_microsoft:function(e,t,i,n){var a=this.getSelection(n);void 0===t&&(t="start");var o="move"+t.charAt(0).toUpperCase()+t.substring(1);return a.range[o]("character",e),i&&a.apply(),a},move_w3c:function(e,t,i,n){var a=this.getSelection(n);void 0===t&&(t="start");var o=t+"Container",r=t+"Offset",s="set"+t.charAt(0).toUpperCase()+t.substring(1);if(0<e)for(var l=0;l<e;++l)if(a.range[r]<$(a.range[o]).text().length)a.range[s](a.range[o],a.range[r]+1);else{var c=$(a.range[o]).nextSelectable();if(!c.length)break;c.isTextNode()||(c=c.textNodes().first()),a.range[s](c.get(0),1)}else for(l=0;e<l;--l)if(0<a.range[r])a.range[s](a.range[o],a.range[r]-1);else{var d=$(a.range[o]).prevSelectable();if(!d.length)break;d.isTextNode()||(d=d.textNodes().last()),a.range[s](d.get(0),d.text().length-1)}return i&&a.apply(),a},offset_microsoft:function(e){var t=this.getSelection(e),i=this.window.document.body.createTextRange();return i.moveToElementText(t.range.parentElement()),i.setEndPoint("EndToStart",t.range),caretOffset=i.text.length,i.text.length},offset_w3c:function(e){var t=this.getSelection(e),i=(t.range.startOffset,t.range.startContainer);if(3==i.nodeType){for(var n=$(i).parent().contents(),a=t.range.startOffset,o=0;o<n.length&&!$(n[o]).is(i);++o)a+=$(n[o]).text().length;return a}return t.range.startOffset},collapsed_w3c:function(e){return this.getSelection(e).range.collapsed},collapsed_microsoft:function(e){var t=this.getSelection(e);return 0==t.range.compareEndPoints("StartToEnd",t.range)},remove_w3c:function(e){var t=this.getSelection(e);return t.range.deleteContents(),t.range.collapsed},remove_microsoft:function(e){var t=this.getSelection(e);return t.range.pasteHTML(""),t}}),proboards.groups={getSelected:function(e){return $("#"+e).val().split(",")},showControls:function(e){var t=parseInt($("#"+e+"-selection select").val()),i=2<t?"show":"hide",n=1<t?"show":"hide";$("#"+e+"-guest-inc")[i](),$("#"+e+"-rank")[i](),t<3&&$("#"+e+"-rank select").val("0"),$("#"+e+"-group-inc")[n]()},showSelected:function(id,callback){var selected=proboards.groups.getSelected(id);if(""!=selected[0])for(var list=$("#"+id+"-list").html('<ul class="trim-list"></ul>').children(),g=0;g<proboards.groups.available.length;++g){var index=$.inArray(proboards.groups.available[g].id,selected);if(-1!=index){var item=$("<li>"+proboards.groups.available[g].name+"</li>"),close=$('<span class="button-x">X</span>').data("index",index).click(function(){selected.splice($(this).data("index"),1),$("#"+id).val(selected.join(",")).trigger("change"),proboards.groups.showSelected(id,callback)});item.prepend(close),item.appendTo(list)}}else $("#"+id+"-list").html("");eval(callback)},showList:function(id,callback,validation){proboards.dialog("groupsDialog",{autoOpen:!1,title:"Select Who",width:400,height:300,buttons:[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){var checked=[],passed=!0;""!=validation&&(passed=eval(validation)),passed&&($(this).find(":checkbox").each(function(){null!=$(this).attr("checked")&&checked.push($(this).val())}),$("#"+id).val(checked.join(",")).trigger("change"),proboards.groups.showSelected(id,callback)),eval(callback),$(this).dialog("close")}}]});var parent=$("#"+id).parents(".group-unique"),exclude={};parent.length&&parent.find('input[type="hidden"]:not([id="'+id+'"])').each(function(){var e=proboards.groups.getSelected($(this).attr("id"));$.each(e,function(){exclude[this]=!0})});for(var selected=proboards.groups.getSelected(id),checkboxes="",g=0;g<proboards.groups.available.length;++g)null==exclude[proboards.groups.available[g].id]&&(checkboxes+='<input type="checkbox" id="group_'+proboards.groups.available[g].id+'" value="'+proboards.groups.available[g].id+'" '+(-1!=$.inArray(proboards.groups.available[g].id,selected)?'checked="checked"':"")+"> ",checkboxes+='<label for="group_'+proboards.groups.available[g].id+'">'+proboards.groups.available[g].name+"</label><br />");$("#groupsDialog").html('<div id="group-list" class="checkbox-list"><div class="options">'+checkboxes+"</div></div>"),$("#groupsDialog").dialog("open")}},$.extend(proboards,{home:{markBoardsRead:function(){proboards.confirm("Are you sure you want to mark all boards as read?",function(){proboards.ajax({url:proboards.data("mark_boards_read_url"),success:function(){$('.item.board .icon img[alt="New Posts"]').each(function(){$(this).parent().html('<img title="No New Posts" alt="No New Posts" src="'+proboards.data("home_new_post_src")+'">')})}})},{title:"Mark All Boards Read"})}}}),$.extend(proboards,{hotkeys:{clickSelect:function(t){"s"==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var i=t.charAt(0).toUpperCase()+t.slice(1);$(".list .item."+t).live("click",function(e){e.altKey&&($(this).find(".controls ."+t+"-options").hasClass("state-selected")?$(this).find('.options_menu > li[class$="-deselect'+i+'"]').click():$(this).find('.options_menu > li[class$="-select'+i+'"]').click())})},wysiwyg:function(){var t=$(".editor.visual-editor iframe").contents();$(t).add(document).bind("keydown",function(e){if(e.altKey&&e.which==Keys.c)return $('form .submit input[TYPE="SUBMIT"]').click(),!1});var i=$(".editor.bbcode-editor textarea");$(t).add(document).bind("keydown",function(e){if(e.altKey&&e.which==Keys.t)return $("#menu-item-visual").hasClass("ui-active")?($("#menu-item-bbcode a").click(),i.focus()):$("#menu-item-bbcode").hasClass("ui-active")&&($("#menu-item-visual a").click(),$(".editor.visual-editor iframe").focus(),t.focus()),!1})},quick_reply:function(){$(".quick-reply form textarea").bind("keydown",function(e){if(e.altKey&&e.which==Keys.c)return $('form input[TYPE="SUBMIT"]').click(),!1})},reply:function(){$(document).bind("keydown",function(e){e.altKey&&!e.ctrlKey&&e.which==Keys.r&&$(".reply-button").click()})},activate:function(e){switch(e){case Keys.d:var t=$("#navigation-tree").offset().top;if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(t)){window.scroll({top:0,behavior:"smooth"});var i=setInterval(function(){0==window.pageYOffset&&(clearInterval(i),$("#nav-tree-menu-0").data("hotkey-open",!0),$("#nav-tree-menu-0").menu("show"))},250)}return!1;case Keys.w:return $(".search-input.ui-autosearch").focus(),!1;case Keys.q:return $(".quick-reply .message textarea").focus(),!1}return!0}}}),$(document).bind("keydown",function(e){if(e.altKey&&e.ctrlKey&&e.which==Keys.r)proboards.reportAd();else if(e.altKey&&!e.ctrlKey)return proboards.hotkeys.activate(e.which)}),$(document).ready(function(){$.browser.msie&&$('a[accesskey="d"]').bind("focus",function(e){$(this).click()})});var listManagerSettings={settings:{threads:{route_name:"list_threads",controls:["selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0},posts:{route_name:"list_posts",controls:["actions","selections"],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!0},conversations:{route_name:"list_conversations",controls:["folders","selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0},messages:{route_name:"list_messages",controls:["actions"],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!0},members:{route_name:"list_members",controls:["views","selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!0,float_control_bar:!0,minChars:1,viewHashKey:"view"},users:{route_name:"list_users",controls:[],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!1,minChars:1,modal:!0},security_logs:{route_name:"security_log_list",controls:["logView"],search:!0,highlight:!0,link:!1,checkbox:!1,column:!0,float_control_bar:!0,minChars:1,viewHashKey:"logView"},reports:{route_name:"list_reports",controls:["selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0}}},listManagerPrototype={labels:{},options:{ajax:!1,total:0,limit:10,page:0,data:{}},init:function(e,t,i){this.mobileScrollifyRegEx=/(?:message|post)-(\d+)/,this.scrollify(e),"object"!=typeof t&&(t={}),"object"!=typeof i&&(i={}),$.extend(this.options,t),this.type=e,this.item_type=this.type.substr(0,this.type.length-1),this.settings=$.extend({},proboards.listManager.settings[this.type],i),this.menu_position=this.options.data.participated?{my:"left top",at:"left bottom"}:{},this.selected_ids=[],this.selected_items={},this.total_tracker=proboards.data("all_messages_count"),$(".lm-message-count-"+this.options.id).show(),this.content=$(".lm-content-"+this.options.id),this.pagination=$(".lm-pagination-"+this.options.id),this.search=$(".lm-search-"+this.options.id),this.icons=$(".lm-icons-"+this.options.id),this.search.length||(this.search=$("<div />"),this.search.attr("id","lm-search-"+this.options.id),this.search.hide(),this.search.appendTo(document.body)),this.bind_highlight(),this.bind_links(),this.bind_checkboxes(),this.bind_control_bar_follow(),this.bind_columns(),this.item={},"messages"==this.type?this.item=proboards.data("page").conversation:"posts"===this.type&&(this.item=proboards.data("page").thread),this.last_filters=[],null!=proboards.data("user")&&proboards.data("user").is_logged_in||(proboards.listManager.settings.threads.controls=[],proboards.listManager.settings.posts.controls=[]),this.setup_controls(),this.setup_search(),"conversations"!=this.type&&"messages"!=this.type||(this.load_labels(),this.apply_label_map()),"posts"!=this.type&&"messages"!=this.type||proboards.hotkeys.clickSelect(this.type),proboards.embedded.processEmbedded(),proboards.listManagers[this.options.id]=this},get_selection:function(){var e,t=this.selected_ids,i=[],n=this.selected_ids.length;for(e=0;e<n;e++)i[e]=this.selected_items[this.selected_ids[e]];return{ids:t,length:n,items:i}},bind_links:function(){var n=this,e=function(){$(".conversation-participants",n.content).on("click",function(e){e.preventDefault(),e.stopPropagation(),proboards.loading(!0),proboards.ajax({url:proboards.route("list_participants"),data:{id:n.getItemId(this)},dataType:"html",success:function(e){proboards.dialog("conversation-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}})}),$(".thread-participants",n.content).on("click",function(e){e.preventDefault(),e.stopPropagation();var t=n.getItemId($(this).parents(".item"));return proboards.loading(!0),proboards.ajax({url:proboards.route("thread_participants",{thread_id:t}),dataType:"html",success:function(e){proboards.dialog("thread-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}}),!1})},t=function(i){$(".latest",n.content).on("click",function(e){if(!$(e.target).is("a")){var t=n.getItemId($(this).parents(".item"));"thread"==i?window.location=proboards.route("thread_last_post",{thread_id:t}):"conversation"==i&&(window.location=proboards.route("conversation_last_post",{conversation_id:t}))}})};this.content.bind("change",e),e(),"threads"==this.type?(this.content.bind("change",t("thread")),t("thread")):"conversations"==this.type&&(this.content.bind("change",t("conversation")),t("conversation"))},bind_highlight:function(){this.settings.highlight&&(navigator.userAgent.match(/iPod|iPad|iPhone/i)||$(".item",this.content).live("mouseenter",function(){$(this).addClass("state-hover")}).live("mouseleave",function(){$(this).removeClass("state-hover")}))},bind_checkboxes:function(){if(this.settings.checkbox){var c=this;$(".list-item-checkbox",this.content).removeAttr("checked");var e=function(){var e=$(".list-item-checkbox",c.content);$(".clickable",c.content).clickable({event:"click"}),e.off("click.bind_checkboxes"),e.on("click.bind_checkboxes",function(e){var t=$(this),i=$(this).is(":checked"),n=[];if(e.shiftKey){var a=$(".list-item-checkbox",c.last_affected_item)[0];if(c.last_affected_item&&t[0]!==a)for(var o=!1,r=!1,s=$(".list-item-checkbox",c.content),l=0;l<s.length&&!o;)s[l]!==t[0]&&s[l]!==a||(r?o=!0:r=!0),r&&n.push($(s[l]).closest(".item")),++l;else n.push(t.parents(".item"))}else n.push(t.closest(".item"));c[i?"select_items":"unselect_items"](n),c.last_affected_item=t.closest(".item")})};this.content.bind("change",e),e()}},bind_control_bar_follow:function(){if(this.settings.float_control_bar){var l=this;$(window).data("already_scrolled",!0);var t=$(".scrollable-"+l.options.id),i=null,o=$(window).width();navigator.userAgent.match(/iPod|iPad|iPhone/i)||$(window).on("resize",function(e){clearTimeout(i);var a=$(this).width();o!=a&&(i=setTimeout(function(){t.each(function(){var e=$(this);if(e.data("placeholder")){var t=e.attr("style");e.removeAttr("style");var i=e.width(),n=e.offset();e.data("position",n),e.attr("style",t).css({width:i+"px",left:n.left+"px"}),o=a}})},10))}),$(window).on(navigator.userAgent.match(/iPod|iPad|iPhone/i)?"touchend":"scroll.controlBar",function(e){var s=this;t.each(function(){var e=$(this);if(e.is(":visible")){var t=!!e.data("placeholder"),i=t?e.data("position"):e.offset();if($(s).scrollTop()>=i.top){if(!t){var n=e.width(),a=e.clone().removeClass("scrollable").css("visibility","hidden");e.data("placeholder",a),e.after(a),e.data("position",i),e.css({width:n+"px",position:"fixed",left:i.left+"px",top:"0px","z-index":500})}var o=l.content.offset().top+l.content.height()-e.height();if($(s).scrollTop()>=o){if(e.css({position:"absolute"}),$("html").is(".ie7"))var r={top:e.offset().top-e.position().top,left:e.offset().left-e.position().left};else{e.css({top:0,left:0});r={top:e.offset().top,left:e.offset().left}}e.css({top:o-r.top+"px",left:i.left-r.left+"px"})}else e.css({position:"fixed",top:"0px",left:i.left+"px"})}else if(t){a=e.data("placeholder");e.removeAttr("style"),a.remove(),e.removeData("placeholder")}}})})}},bind_columns:function(){if(this.settings.column){var a=this,o=null;$.each($(".sortable-"+a.options.id),function(e,i){var n=$(this).attr("class").match(/sortable\-type\-(\w+)/);n&&(n=n[1],$(i).off("click"),$(i).on("click",function(e){null==o&&(o=$("input",a.search).data("autosearch"));var t=$(o.element);t.off("autosearchaftersearch.sort"),t.one("autosearchaftersearch.sort",function(){proboards.events.run("columnSort",i)}),"asc"==o.getData("dir")&&o.getData("sort")==n?o.setDataLite("dir","desc"):"rank"!=n&&"order"!=n&&"posts"!=n&&"last_online"!=n||o.getData("sort")==n?o.setDataLite("dir","asc"):o.setDataLite("dir","desc"),o.setData("sort",n)}))})}},select_items:function(e){var t,i=e.length;for(t=0;t<i;++t)this.select_item(e[t])},unselect_items:function(e){var t,i=e.length;for(t=0;t<i;++t)this.unselect_item(e[t])},select_item:function(e){$(e).addClass("state-selected"),$(".list-item-checkbox",e).attr("checked","checked");var t=this.getItemId(e);void 0===this.selected_items[t]&&(this.selected_ids.push(t),this.selected_items[t]=e),this.last_affected_item=e},unselect_item:function(e){$(e).removeClass("state-selected"),$(".list-item-checkbox",e).removeAttr("checked");var t=this.selected_ids,i=this.selected_items;this.selected_ids=[],this.selected_items={};for(var n=0;n<t.length;n++)if(this.getItemId(e)!=t[n]){var a=t[n];this.selected_ids.push(a),this.selected_items[a]=i[a]}this.last_affected_item=e},setup_controls:function(){var controls=this.settings.controls,length=controls.length,i;for(i=0;i<length;++i)eval("this.create_"+controls[i]+"_controls()")},create_selections_controls:function(){var r=this;$(".lm-selection-"+this.options.id).selectMenu({status:"Select",staticStatus:!0,menuOptions:{click:function(e,t){var n=$(t.item).attr("class"),a="posts"==r.type?proboards.postManager:r;if("All"==n)a.select_items($(".item",r.content));else if("None"==n){if("posts"===r.type)return void a.unselect_items($(".item",r.content));var o=[];for(i in r.selected_items)o.push(r.selected_items[i]);a.unselect_items(o)}else"Read"==n?(a.unselect_items($(".item",r.content)),a.select_items($(".item:not(.new)",r.content))):"New"==n&&(a.unselect_items($(".item",r.content)),a.select_items($(".item.new",r.content)))},position:r.menu_position}})},create_actions_controls:function(){var G=this;if(proboards.data("labels_menu")&&("threads"==G.type||"posts"==G.type)){var e=$(".lm-labels-"+this.options.id);e.html(),$(proboards.data("labels_menu")).children("li").appendTo(e),e.children("li.label").each(function(){var e=$(this),t=$(this).clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)}),"posts"==G.type&&(""!=$.trim($("#labels").html())?$("#labels").show():$("#labels").hide())}$(".lm-actions-"+this.options.id).selectMenu({status:"Actions",staticStatus:!0,beforeShow:function(){var e=0,t=0,i=0,n=0,a=0,o=0,r=0,s=0,l=0,c=0,d=0,u=0,p=0,h=0,f=0,m=0,g=0,v=!1,b=!1,_=G.get_selection().items,y=G.get_selection().length,A=!0,w=!1,x="conversations"==G.type,k="messages"==G.type,C="posts"==G.type,S="threads"==G.type,T="members"==G.type,D="reports"==G.type,E=0<proboards.data("board_id"),I=proboards.data("page")&&proboards.data("page").thread&&0<proboards.data("page").thread.id;for(F=0;F<y;++F){var P=G.getItemId(_[F]),M=proboards.item(G.item_type,P);null==M&&(M={}),M.is_new?++t:++e,$(_[F]).hasClass("archived")?++i:++n,void 0!==proboards.data("following")&&null!=proboards.data("following")&&1==proboards.data("following")[P]&&++a,P==proboards.data("user").id&&(b=!0),$(_[F]).hasClass("can_remove")&&(v=!0),$(_[F]).hasClass("bookmarked")?++o:++r,$(_[F]).hasClass("falling")?++h:++f,$(_[F]).hasClass("announcement")?++s:++l,$(_[F]).hasClass("locked")&&("reports"!=G.type||$(_[F]).hasClass("has-thread"))?++c:$(_[F]).hasClass("locked")||"reports"==G.type&&!$(_[F]).hasClass("has-thread")||++d,$(_[F]).hasClass("sticky")?++u:++p,$(_[F]).hasClass("has-post")&&++m,$(_[F]).hasClass("has-thread")&&++g}x&&(A=!1),k&&(w=!(A=!1),G.item.is_archived?i=1:n=1,G.item.is_new?t=1:e=1),C&&I&&(w=!(A=!1),"undefined"!=typeof postMan?y=postMan.selected_posts.length:void 0!==proboards.postManager&&(y=proboards.postManager.selected_posts.length),G.item.is_new?t=1:e=1,G.item.is_locked?c=1:d=1,G.item.is_announcement?s=1:l=1,G.item.is_sticky?u=1:p=1,G.item.is_falling?h=1:f=1,G.item.is_bookmarked?++o:++r),S&&E&&(A=!1),"posts"!=G.type||I||("undefined"!=typeof postMan?y=postMan.selected_posts.length:void 0!==proboards.postManager&&(y=proboards.postManager.selected_posts.length)),$(this).menu("hideAllOptions");var O=$(".lm-labels-"+G.options.id),N=y&&S||C&&I;if((y||w)&&0<t&&($(this).menu("showOption","mark_future"),$(this).menu("showOption","mark_as_read"),$(this).menu("showOption","mark_as_read_day"),$(this).menu("showOption","mark_as_read_week"),$(this).menu("showOption","mark_as_read_month"),$(this).menu("showOption","mark_as_read_forever")),(y||w)&&0<e&&$(this).menu("showOption","mark_as_new"),G.options.data.search&&"posts"==G.type){var j=proboards.postManager.selected_posts,L=0,R=0;$.each(j,function(e,t){var i=proboards.item("post",t).thread_id;proboards.item("thread",i).is_locked?++L:++R}),L&&$(this).menu("showOption","unlock"),R&&$(this).menu("showOption","lock")}else(y&&"threads"==G.type||D||"posts"==G.type)&&(0<d&&("reports"==G.type&&1<y?$(this).menu("showOption","locks"):$(this).menu("showOption","lock"),$(this).menu("showOption","modFunctions")),0<c&&("reports"==G.type&&1<y?$(this).menu("showOption","unlocks"):$(this).menu("showOption","unlock"),$(this).menu("showOption","modFunctions")));if(("reports"!=G.type&&(y||w)||"reports"==G.type&&y&&0<g)&&("reports"==G.type&&1<y?$(this).menu("showOption","move_threads"):$(this).menu("showOption","move_thread"),$(this).menu("showOption","modFunctions")),("reports"!=G.type&&(y||w)||"reports"==G.type&&y&&0<g)&&("reports"==G.type&&1<y?$(this).menu("showOption","delete_threads"):$(this).menu("showOption","delete_thread"),$(this).menu("showOption","modFunctions")),y&&0<m&&("reports"==G.type&&1<y?($(this).menu("showOption","move_posts"),$(this).menu("showOption","delete_posts")):($(this).menu("showOption","move_post"),$(this).menu("showOption","delete_post")),$(this).menu("showOption","modFunctions")),(y||w)&&0<n&&$(this).menu("showOption","archive"),(y||w)&&0<i&&$(this).menu("showOption","unarchive"),1!=y||!T&&"reports"!=G.type||($(this).menu("showOption","warn_user"),$(this).menu("showOption","ban_user"),$(this).menu("showOption","modFunctions")),x||k){if($(this).menu("showOption","manageLabels"),y||k){var F,z={};if(x)for(F=0;F<y;++F)$(".labels:first .ui-label",_[F]).each(function(){var e=$(this).attr("class").replace("ui-label label-","");"number"!=typeof z[e]&&(z[e]=0),z[e]++});else $(".conversation-labels .ui-label").each(function(){var e=$(this).attr("class").replace("ui-label label-","");"number"!=typeof z[e]&&(z[e]=0),z[e]++});$(".ui-selectMenu-option",O).show();var q=[];$("li",O).each(function(){var e=$(this).attr("class").match(/label-(\d+)/);e&&-1==$.inArray(e[1],q)&&q.push(e[1])}),$(".label",O).hide(),$.each(q,function(){z[this]&&$(".label-"+this+".remove-label",O).show(),(z[this]!=y&&x||!z[this]&&k)&&$(".label-"+this+".add-label",O).show()})}else x&&$(".label",O).hide();$(this).menu("showOption","labels")}if(x&&($(".lm-message-count-"+G.options.id).text(proboards.commify(G.total_tracker)),y&&v&&$(this).menu("showOption","leave_conversation"),0==y&&0!=G.total_tracker)){$(this).menu("showOption","all_messages"),$(this).menu("showOption","delete_all");var H=proboards.data("folder");"archive"!=H&&"outbox"!=H&&$(this).menu("showOption","archive_all")}if(k&&($(this).menu("showOption","forward"),$(this).menu("showOption","change_participants"),proboards.data("conversation_participants")&&1<proboards.data("conversation_participants").length&&$(this).menu("showOption","leave_conversation")),N){0<r&&null!==proboards.data("user")&&proboards.data("user").is_logged_in&&$(this).menu("showOption","bookmark"),0<o&&null!==proboards.data("user")&&proboards.data("user").is_logged_in&&$(this).menu("showOption","unbookmark"),0<l&&$(this).menu("showOption","announce"),0<s&&$(this).menu("showOption","unannounce"),0<p&&$(this).menu("showOption","sticky"),0<u&&$(this).menu("showOption","unsticky"),$(this).menu("showOption","bump"),0<f&&$(this).menu("showOption","enable_falling"),0<h&&$(this).menu("showOption","disable_falling"),$(this).menu("showOption","modFunctions");var W=$("li.label-add",O),V=(q=[],{}),U=[],B={},Y={};if(W.each(function(){var e=G.getLabelId(this),t=G.getLabelBoardId(this);q.push(e),V[e]=0,null==B[t]&&(B[t]=[]),B[t].push(e)}),q.length){if(S)$.each(_,function(e,t){var i=G.getLabelBoardId(t);null==Y[i]&&(Y[i]=0),++Y[i],-1==$.inArray(i,U)&&U.push(i),$(t).find("span.labels:first .ui-label",O).each(function(){++V[G.getLabelId(this)]})});else if(C){var K=proboards.data("board_id");Y[K]=1,U.push(K),$("span.labels:first .ui-label").each(function(){++V[G.getLabelId(this)]})}O.children("li").hide();var J=0;$.each(U,function(){var e=parseInt(this);void 0!==B[e]&&$.each(B[e],function(){++J,V[this]!=Y[e]&&O.children("li.label-add.label-"+this).show(),0!=V[this]&&O.children("li.label-remove.label-"+this).show()})}),J&&$(this).menu("showOption","labels")}}S&&E&&($(this).menu("showOption","mark_board_read"),$(this).menu("showOption","board_notifications")),C&&I&&($(this).menu("showOption","view"),$(this).menu("showOption","view_prev"),$(this).menu("showOption","view_next"),$(this).menu("showOption","sharing"),$(this).menu("showOption","facebook-share"),$(this).menu("showOption","twitter-share"),$(this).menu("showOption","tumblr-share"),$(this).menu("showOption","linkedin-share"),$(this).menu("showOption","pinterest-share"),$(this).menu("showOption","reddit-share"),$(this).menu("showOption","myspace-share"),$(this).menu("showOption","email-share"),$(this).menu("showOption","move_post_all")),y&&"posts"==G.type&&$(this).menu("showOption","move_post_selected"),T&&y&&(a!=y&&(a!=y-1||!b)&&y<=proboards.data("maximum_follow_in_one_action")&&$(this).menu("showOption","follow"),0<a&&$(this).menu("showOption","unfollow"),(y<10||proboards.data("is_staff"))&&$(this).menu("showOption","send_message"),1==G.options.data.groupLeader&&$(this).menu("showOption","remove_from_group"),1==y&&($(this).menu("showOption","ipSearchThreads"),$(this).menu("showOption","ipSearchPosts"),$(this).menu("showOption","ipSearchMembers"),$(this).menu("showOption","searchIP"),$(this).menu().find(".searchIP > a").text("IP "+_[0].data("ip")))),D&&y&&$(this).menu("showOption","delete_report"),0==y&&A&&!w&&($(this).children("li.default-menu-option").show(),$(this).children("li").not(".default-menu-option").hide())},menuOptions:{click:function(e,t){if("view_prev"==(N=$(t.item).attr("class").replace(/ hide/,"")))window.location=proboards.data("lm_thread_prev");else if("view_next"==N)window.location=proboards.data("lm_thread_next");else if("mark_future"==N.substr(0,11)||"mark_as_read"==N.substr(0,12)){var i,a=[],n=[];if("posts"==G.type?(s=[G.item.id],M="threads"):"messages"==G.type?(s=[G.item.id],M="conversations"):(s=G.get_selection().ids,a=G.get_selection().items,M=G.type),0==s.length)return;"mark_as_read"==N.substr(0,12)&&(i=N.substr(13)),i||(i="now"),proboards.ajax({url:proboards.route("mark_"+M,{type:"read"}),data:{"ids[]":s,until:i},dataType:"json",success:function(e){if("posts"==G.type||"messages"==G.type?G.item.is_new=0:G.options.data.participated||G.clear_cache(),a.length)for(v=0;v<a.length;++v)proboards.item(M.substr(0,M.length-1),s[v],"is_new",0),$(a[v]).removeClass("new"),e.update_icon&&$(".icon img",a[v]).attr("src",e.update_icon)}})}else if("mark_as_new"==N){a=[],n=[];if("posts"==G.type?(s=[G.item.id],M="threads"):"messages"==G.type?(s=[G.item.id],M="conversations"):(s=G.get_selection().ids,a=G.get_selection().items,M=G.type),0==s.length)return;proboards.ajax({url:proboards.route("mark_"+M,{type:"new"}),data:{"ids[]":s},dataType:"json",success:function(e){for("posts"==G.type||"messages"==G.type?G.item.is_new=1:G.options.data.participated||G.clear_cache(),v=0;v<a.length;++v)proboards.item(M.substr(0,M.length-1),s[v],"is_new",1),$(a[v]).hasClass("new")||$(a[v]).addClass("new"),e.update_icon&&$(".icon img",a[v]).attr("src",e.update_icon)},error:function(e){for(v=0;v<a.length;++v)-1==$.inArray(s[v],e.ids)&&(proboards.item(M.substr(0,M.length-1),s[v],"is_new",1),$(a[v]).hasClass("new")||$(a[v]).addClass("new"));proboards.error(e.error)}})}else if("mark_board_read"==N){(r=parseInt(proboards.data("board_id")))<=0?proboards.error("Invalid board."):proboards.ajax({url:proboards.route("mark_boards",{type:"read"}),data:{board_id:r},success:function(){$(".item.thread.new").each(function(){var e=G.getItemId(this);proboards.item("thread",e).board_id==r&&$(this).removeClass("new")}),G.clear_cache()}})}else if("board_notifications"==N){var r;if((r=parseInt(proboards.data("board_id")))<=0)proboards.error("Invalid board.");else{var o=function(){var o={};proboards.dialog_toggle_buttons("board-notifications",!0),$(".notification-option-wrapper","#board-notifications").each(function(){var e=$(this),t=e.data("type"),i=$('input[name="forum"]',e).prop("checked")?1:0,n=$('input[name="tapatalk"]',e).prop("checked")?1:0,a=$('select[name="freq"]',e).val();o[t]=[i,n,a]}),proboards.ajax({url:proboards.route("board_notifications_save"),data:{board_id:r,settings:o},success:function(){$("#board-notifications").dialog("close"),proboards.alert("Your notification settings for this board have been saved!",{title:"Board Notification Settings"})},complete:function(){proboards.dialog_toggle_buttons("board-notifications",!1)}})};proboards.loading(!0),proboards.ajax({url:proboards.route("board_notifications_dialog"),data:{board_id:r},success:function(e){proboards.dialog("board-notifications",{title:e.dialog_title,html:e.dialog_html,width:"auto",buttons:{Save:o,Cancel:function(){$(this).dialog("close")}}})},complete:function(){proboards.loading(!1)}})}}else if("bookmark"==N){n=[];if("posts"==G.type)s=[proboards.data("thread_id")],$(".bookmark_icon",G.icons).show(),G.item.is_bookmarked=1;else for(s=G.get_selection().ids,a=G.get_selection().items,v=0;v<s.length;++v)$(a[v]).hasClass("bookmarked")||($(a[v]).addClass("bookmarked").find(".bookmark_icon").show(),n.push(a[v]));if(0==s.length)return;proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"mark","ids[]":s},success:function(e){"posts"==G.type?proboards.data("bookmarked",e.success):G.clear_cache()},error:function(e){if("threads"==G.type)for(v=0;v<n.length;++v)$(n[v]).removeClass("bookmarked");proboards.error(e.error)}})}else if("unbookmark"==N){n=[];if("posts"==G.type)s=[proboards.data("thread_id")],$(".bookmark_icon",G.icons).hide(),G.item.is_bookmarked=0;else for(s=G.get_selection().ids,a=G.get_selection().items,v=0;v<s.length;++v)$(a[v]).hasClass("bookmarked")&&($(a[v]).removeClass("bookmarked").find(".bookmark_icon").hide(),n.push(a[v]));if(0==s.length)return;proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"unmark","ids[]":s},success:function(e){"posts"==G.type?proboards.data("bookmarked",!e.success):proboards.data("bookmarks")?(G.research(),G.selected_ids=[],G.selected_items={}):G.clear_cache()},error:function(e){if("threads"==G.type)for(v=0;v<n.length;++v)$(n[v]).addClass("bookmarked");proboards.error(e.error)}})}else if("enable_falling"==N){if("posts"==G.type)s=[proboards.data("thread_id")];else{var s=G.get_selection().ids;a=G.get_selection().items}if(0==s.length)return;proboards.ajax({url:proboards.route("thread_falling"),data:{type:"enable_falling","ids[]":s},success:function(e){if("posts"==G.type)$(".falling_icon",G.icons).show(),G.item.is_falling=1;else{for(v=0;v<s.length;++v)$(a[v]).addClass("falling").find(".falling_icon").show();G.clear_cache()}}})}else if("disable_falling"==N){if("posts"==G.type)s=[proboards.data("thread_id")];else s=G.get_selection().ids,a=G.get_selection().items;if(0==s.length)return;proboards.ajax({url:proboards.route("thread_falling"),data:{type:"disable_falling","ids[]":s},success:function(e){if("posts"==G.type)$(".falling_icon",G.icons).hide(),G.item.is_falling=0;else{for(v=0;v<s.length;++v)$(a[v]).removeClass("falling").find(".falling_icon").hide();G.clear_cache()}}})}else if("facebook-share"==N){var l=document.location.href;window.open("http://www.facebook.com/sharer/sharer.php?u="+escape(l))}else if("twitter-share"==N){var c=proboards.data("thread_subject")+" "+document.location.href;proboards.data("enterprise")||(c+="&hashtags=proboards"),window.open("https://twitter.com/intent/tweet?text="+encodeURI(c))}else if("tumblr-share"==N){l=document.location.href;var d=proboards.data("thread_subject"),u=$("meta[property='og:description']").attr("content").trim(),p=proboards.data("enterprise")?"":"&tags=proboards";window.open("http://www.tumblr.com/share/link?url="+encodeURI(l)+"&name="+encodeURI(d)+"&description="+encodeURI(u)+encodeURI(p))}else if("linkedin-share"==N){l=document.location.href,d=proboards.data("thread_subject");window.open("http://www.linkedin.com/shareArticle?url="+escape(l)+"&title="+escape(d))}else if("pinterest-share"==N){l=document.location.href,d=proboards.data("thread_subject");var h=$('meta[property="og:image"]').attr("content")||"";window.open("https://pinterest.com/pin/create/bookmarklet/?media="+escape(h)+"&url="+escape(l)+"&description="+escape(d))}else if("reddit-share"==N){l=document.location.href,d=proboards.data("thread_subject");window.open("http://reddit.com/submit?url="+escape(l)+"&title="+escape(d))}else if("myspace-share"==N){l=document.location.href,d=proboards.data("thread_subject");window.open("http://www.myspace.com/Modules/PostTo/Pages/?t="+escape(d)+"&u="+escape(l))}else if("email-share"==N){l=document.location.href,d=proboards.data("thread_subject");var f=$("meta[property='og:description']").attr("content").trim();f+="\n \n"+l,window.open("mailto:?subject="+escape(d)+"&body="+escape(f))}else if("announce"==N){if("posts"==G.type?s=[proboards.data("thread_id")]:(s=G.get_selection().ids,a=G.get_selection().items),0==s.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"announce"}),data:{"ids[]":s},success:function(e){if("posts"==G.type)G.item.is_announcement=1;else{for(v=0;v<s.length;++v)$(a[v]).addClass("announcement");G.research()}}})}else if("unannounce"==N){if("posts"==G.type?s=[proboards.data("thread_id")]:(s=G.get_selection().ids,a=G.get_selection().items),0==s.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unannounce"}),data:{"ids[]":s},success:function(e){if("posts"==G.type)G.item.is_announcement=0;else{for(i=0;i<s.length;++i)$(a[i]).removeClass("announcement");var t=proboards.data("board_id");if(t)for(var i=0;i<s.length;i++){var n=proboards.item("thread",s[i]);n&&n.board_id!=t&&G.unselect_item($("#thread-"+n.id))}G.research()}}})}else if("sticky"==N){if("posts"==G.type?s=[proboards.data("thread_id")]:(s=G.get_selection().ids,a=G.get_selection().items),0==s.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"sticky"}),data:{"ids[]":s},success:function(e){if("posts"==G.type)$(".sticky_icon",G.icons).show(),G.item.is_sticky=1;else{for(v=0;v<s.length;++v)$(a[v]).addClass("sticky");G.research()}}})}else if("unsticky"==N){if("posts"==G.type?s=[proboards.data("thread_id")]:(s=G.get_selection().ids,a=G.get_selection().items),0==s.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unsticky"}),data:{"ids[]":s},success:function(e){if("posts"==G.type)$(".sticky_icon",G.icons).hide(),G.item.is_sticky=0;else{for(v=0;v<s.length;++v)$(a[v]).removeClass("sticky");G.research()}}})}else if("lock"==N||"locks"==N){if("posts"==G.type)G.options.data.search?(s=[],$.each(proboards.postManager.selected_posts,function(e,t){var i=proboards.item("post",t).thread_id;proboards.item("thread",i).is_locked||s.push(i)})):s=[proboards.data("thread_id")];else{var m=G.get_selection().ids,g=G.get_selection().items;s=[],a=[];for(var v=0,b=m.length;v<b;++v)$(g[v]).hasClass("locked")||(s.push(m[v]),a.push(g[v]))}if(0==s.length)return;s=$.unique_array(s),proboards.ajax({url:proboards.route("mark_threads",{type:"lock"}),data:"reports"==G.type?{"post_ids[]":s}:{"ids[]":s},dataType:"json",success:function(e){if("posts"==G.type)G.options.data.search?$.each(s,function(e,t){proboards.item("thread",t,"is_locked",1)}):($(".lock_icon",G.icons).show(),G.item.is_locked=1);else{for(v=0;v<s.length;++v){$(a[v]).addClass("locked").find(".lock_icon").show();var t=$(".icon img",a[v]);if(t.length){var i=t.attr("src"),n=t.attr("alt");-1==i.indexOf("locked")&&(i=i.replace("thread","thread-locked"),n=n.replace("Thread","Thread Locked"),t.attr("src",i).attr("alt",n).attr("title",n))}}G.clear_cache()}}})}else if("unlock"==N||"unlocks"==N){if("posts"==G.type)G.options.data.search?(s=[],$.each(proboards.postManager.selected_posts,function(e,t){var i=proboards.item("post",t).thread_id;proboards.item("thread",i).is_locked&&s.push(i)})):s=[proboards.data("thread_id")];else{m=G.get_selection().ids,g=G.get_selection().items;s=[],a=[];for(v=0,b=m.length;v<b;++v)$(g[v]).hasClass("locked")&&(s.push(m[v]),a.push(g[v]))}if(0==s.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unlock"}),data:"reports"==G.type?{"post_ids[]":s}:{"ids[]":s},success:function(e){if("posts"==G.type)G.options.data.search?$.each(s,function(e,t){proboards.item("thread",t,"is_locked",0)}):($(".lock_icon",G.icons).hide(),G.item.is_locked=0);else{for(v=0;v<s.length;++v){$(a[v]).removeClass("locked").find(".lock_icon").hide();var t=$(".icon img",a[v]);if(t.length){var i=t.attr("src"),n=t.attr("alt");-1!=i.indexOf("locked")&&(i=i.replace("thread-locked","thread"),n=n.replace("Thread Locked","Thread"),t.attr("src",i).attr("alt",n).attr("title",n))}}G.clear_cache()}}})}else if("archive_all"==N||"delete_all"==N){var _=N.substring(0,N.length-4),y="inbox",A="0",w=proboards.data("folder")||"inbox";proboards.data("lm_label_id")?A=proboards.data("lm_label_id"):y=w,proboards.confirm_dialog("conversations",_,[],function(e){G.research(),"inbox"==w&&(G.selected_ids=[],G.selected_items={})},{label_id:A,folder:y})}else if("archive"==N)if("conversations"==G.type||"reports"==G.type){if(0==(s=G.get_selection()).length)return;proboards.ajax({url:proboards.route("mark_"+G.type,{type:"archive"}),data:{"ids[]":s.ids},success:function(e){G.research(),"inbox"!=proboards.data("folder")&&"reports"!=G.type||(G.selected_ids=[],G.selected_items={})}})}else proboards.ajax({url:proboards.route("mark_conversations",{type:"archive"}),data:{"ids[]":[proboards.data("conversation_id")]},success:function(e){G.item.is_archived=1}});else if("unarchive"==N)if("conversations"==G.type||"reports"==G.type){if(0==(s=G.get_selection()).length)return;proboards.ajax({url:proboards.route("mark_"+G.type,{type:"unarchive"}),data:{"ids[]":s.ids},success:function(e){G.research(),"archive"!=proboards.data("folder")&&"reports"!=G.type||(G.selected_ids=[],G.selected_items={})}})}else proboards.ajax({url:proboards.route("mark_conversations",{type:"unarchive"}),data:{"ids[]":[proboards.data("conversation_id")]},success:function(e){G.item.is_archived=0}});else if("forward"==N)0==$("#forward-container").length&&($(document.body).append('<div id="forward-container"></div>'),proboards.dialog("forward-container",{autoOpen:!1,width:320,title:"Forward Conversation"})),proboards.ajax({url:proboards.route("forward_conversations"),data:{id:proboards.data("conversation_id"),type:"forward"},dataType:"html",success:function(e){$("#forward-container").html(e),$("#forward-container").dialog("open"),$(".user-search .user-search-input").blur()}});else if("change_participants"==N){0==$("#change-users-container").length&&($(document.body).append('<div id="change-users-container"></div>'),proboards.dialog("change-users-container",{autoOpen:!1,width:310,height:400,title:"Change Participants",buttons:{Save:function(){$("#change-users-container form").submit()}}}));var x=[],k=proboards.data("conversation_participants");for(v=0;v<k.length;v++)k[v]!=proboards.data("conversation_leader")&&x.push(k[v]);proboards.ajax({url:proboards.route("change_users",{type:"change"}),data:{recipients:x.join(","),conversation_id:proboards.data("conversation_id"),page:"conv"},dataType:"html",success:function(e){$("#change-users-container").html(e),$("#change-users-container").dialog("open"),$(".user-search .user-search-input").blur()}})}else if("leave_conversation"==N){if(0==(s="messages"==G.type?[proboards.data("conversation_id")]:G.get_selection().ids).length)return;$(".search-input",G.search).addClass("ui-loading"),proboards.ajax({url:proboards.route("remove_conversations"),data:{"ids[]":s},success:function(e){"messages"==G.type?window.location=proboards.route("conversations",{folder:"inbox"}):G.research()}})}else if("move_thread"==N||"move_threads"==N){if("posts"==G.type)s=[proboards.data("thread_id")];else if("reports"==G.type){s=[];var C=G.get_selection().ids;for(v=0;v<C.length;v++){""!=(O=/(^| )thread-([0-9]+)($| )/.test($("#report-"+C[v]).attr("class"))?RegExp.$2:"")&&s.push(O)}}else s=G.get_selection().ids;d="Move Thread"+(1!=s.length?"s":"");var S={},T=function(e){if("posts"==G.type)if(e.accessible){var t=proboards.route("thread",{thread_id:proboards.data("thread_id")});t+=e.pretty_url?"/"+e.pretty_url:"",window.location=t}else window.location=e.board_from_url;else G.options.data.search?window.location=e.board_to_url:(G.research(),G.selected_ids=[],G.selected_items={},$("#move-threads-container").dialog("close"))};S[d]=function(){proboards.loading(!0),proboards.ajax({url:proboards.route("thread_move"),data:$("#move-threads-container form").serialize()+($('input[name="move_message"]').serialize()?"&"+$('input[name="move_message"]').serialize():"")+($('input[name="send_user_pm"]').serialize()?"&"+$('input[name="send_user_pm"]').serialize():""),dataType:"json",success:function(t){void 0!==t.pm_dialog?($("#move-threads-container").dialog("option","title","Send PM"),$("#move-threads-container").dialog("option","height",340),$("#move-threads-container").dialog("option","buttons",{"Send PM":function(e){$(e.target).button({disabled:!0,label:"Sending"}),$("span",e.target).progress_text(),proboards.ajax({url:proboards.route("thread_move_pm"),data:$("#move-threads-container form").serialize(),dataType:"json",success:function(){T(t),$("#move-threads-container").dialog("option","title",d),$("#move-threads-container").dialog("option","height",420),$("#move-threads-container").dialog("option","buttons",S)}})}}),$("#move-threads-container").html(t.pm_dialog)):T(t)},complete:function(e){proboards.loading(!1)},error:function(e){if(e.enter_password){var t='<div class="error bold pad-bottom-double">'+e.error+'</div><p class="pad-bottom-double">This board is password protected. <br />Please enter the password:</p><div><input type="password" name="password" /></div>',i=$("#move-threads-container");i.find("form").append('<input type="hidden" name="board_password" />'),proboards.dialog("move_board_password",{title:"Enter Board Password",autoOpen:!0,width:"auto",modal:!0,html:t,buttons:{Move:function(e){$(this).dialog("close");var t=$(this).find('input[name="password"]').val();i.find('input[name="board_password"]').val(t),i.closest(".ui-dialog").find(".ui-dialog-buttonset button").trigger("click")}}})}else proboards.error(e.error)}})},$("#move-threads-container").length?($("#move-threads-container").dialog("option","title",d),$("#move-threads-container").dialog("option","buttons",S)):($(document.body).append('<div id="move-threads-container"></div>'),proboards.dialog("move-threads-container",{autoOpen:!1,width:620,height:420,title:d,buttons:S})),proboards.ajax({url:proboards.route("thread_move_dialog"),dataType:"html",data:{"thread_ids[]":s,type:G.type},success:function(e){$("#move-threads-container").html(e);var t=$("#move-threads-container").nextAll(".ui-dialog-buttonpane");t.children(".button-text").remove(),t.prepend($("#move-threads-container .button-text")),$("#move-threads-container").dialog("open")}})}else if("move_post_all"==N||"move_post_selected"==N||"move_post"==N||"move_posts"==N){"move_post_all"==N?null==proboards.data("thread_id")?(N="move_all_search",1==proboards.data("recent_posts")&&void 0!==proboards.data("recent_posts_user")&&(s=[parseInt(proboards.data("recent_posts_user"))])):s=[parseInt(proboards.data("thread_id"))]:s="reports"==G.type?G.get_selection().ids:proboards.postManager.selected_posts;var D=document.createElement("form");D.setAttribute("method","POST"),D.setAttribute("action",proboards.route("move_post"));var E=document.createElement("input");E.setAttribute("type","hidden"),E.setAttribute("name","selection"),E.setAttribute("value",s.join(",")),D.appendChild(E);var I=document.createElement("input");I.setAttribute("type","hidden"),I.setAttribute("name","type"),I.setAttribute("value",N),D.appendChild(I),document.body.appendChild(D),D.submit()}else if("delete_thread"==N||"delete_threads"==N){if("messages"==G.type)s=[proboards.data("conversation_id")],M="conversations";else if("posts"==G.type)G.options.data.search?(M="posts",s=proboards.postManager.selected_posts):(M="threads",s=[proboards.data("thread_id")]);else if("reports"==G.type){s=[],M="threads";for(C=G.get_selection().ids,v=0;v<C.length;v++){""!=(O=/(^| )thread-([0-9]+)($| )/.test($("#report-"+C[v]).attr("class"))?RegExp.$2:"")&&s.push(O)}}else"members"==G.type?(s=G.get_selection().ids,M="users"):(s=G.get_selection().ids,M=G.type);if(0==s.length)return;"threads"==G.type||"posts"==G.type||"members"==G.type||"reports"==G.type?proboards.confirm_dialog(M,"delete",s,function(e){void 0===e.redirect_url||G.options.data.search?"posts"==G.type&&"threads"==M?window.location=proboards.route("board",{board_id:proboards.data("board_id")}):("posts"==G.type&&proboards.postManager.unselect_all(),G.research(),G.selected_ids=[],G.selected_items={}):window.location=e.redirect_url}):proboards.confirm("messages"==G.type?"Are you sure you wish to delete this conversation?":"Are you sure you wish to delete "+s.length+" conversation"+(1!=s.length?"s":"")+"?",function(){proboards.ajax({url:proboards.route("delete_conversations"),data:{"ids[]":s},datatype:"json",success:function(e){1==e.results?"messages"==G.type?window.location=proboards.route("conversations",{folder:"inbox"}):"posts"==G.type?window.location=proboards.route("board",{board_id:proboards.data("board_id")}):(G.research(),G.selected_ids=[],G.selected_items={}):proboards.error("You do not have permission to delete this.")}})})}else if("bump"==N){if(0==(s="posts"==G.type?[proboards.data("thread_id")]:G.get_selection().ids).length)return;proboards.ajax({url:proboards.route("thread_bump"),data:{"ids[]":s},dataType:"json",success:function(e){"posts"!=G.type&&G.research()}})}else if("follow"==N){if(0==(s=G.get_selection()).length)return;proboards.ajax({url:proboards.route("follow_member"),data:{"ids[]":s.ids},success:function(e){for(var t=0;t<e.ids.length;++t)proboards.dataHash.following[e.ids[t]]=1}})}else if("unfollow"==N){if(0==(s=G.get_selection()).length)return;proboards.ajax({url:proboards.route("unfollow_member"),data:{"ids[]":s.ids},success:function(e){for(var t=0;t<s.ids.length;++t)proboards.dataHash.following[s.ids[t]]=0;"following"==G.options.data.hash.view?(G.selected_ids=[],G.selected_items={},G.research()):G.clear_cache()}})}else if("send_message"==N){if(0==(s=G.get_selection()).length)return;for(x="",v=0;v<s.length;v++)0!=v&&(x+=","),x+=s.ids[v];window.location=proboards.route("new_user_conversation",{recipients:x})}else if("delete_report"==N){var P=(C=G.get_selection().ids).length;if(0==P)return;proboards.confirm("Are you sure you wish to delete "+P+" report"+(1!=P?"s":"")+"?",function(){proboards.loading(!0),proboards.ajax({url:proboards.route("delete_report"),data:{"ids[]":C},dataType:"json",success:function(){G.research(),G.selected_ids=[],G.selected_items={}},complete:function(){proboards.loading(!1)}})})}else if("delete_post"==N||"delete_posts"==N){s=G.get_selection().ids;var M="posts";if(0==s.length)return;proboards.confirm_dialog(M,"delete",s,function(e){G.research(),G.selected_ids=[],G.selected_items={}})}else if("warn_user"==N){if(1!=(s=G.get_selection()).length)return;""!=(O=/(^| )user-([0-9]+)($| )/.test($(s.items[0]).attr("class"))?RegExp.$2:"")&&(window.location=proboards.route("edit_user_admin",{user_id:O}))}else if("ban_user"==N){if(1!=(s=G.get_selection()).length)return;var O="";if("reports"==G.type)O=/(^| )user-([0-9]+)($| )/.test($(s.items[0]).attr("class"))?RegExp.$2:"",proboards.member.ban({id:O,checked:["ip","user_name","global_id"],from:{type:"reported_post",id:s.ids[0]},success:function(e){G.research(),G.selected_ids=[],G.selected_items={}}}),O="";else if("members"!=G.type){O=/(^| )user-([0-9]+)($| )/.test($(s.items[0]).attr("class"))?RegExp.$2:""}else O=s.ids[0];""!=O&&proboards.member.ban({id:O,checked:["ip","global_id","user_name"]})}else if("searchIP actionable ui-menu-has-sub-menu"==N)proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this member: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+G.get_selection().items[0].data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();else if("ipSearchMembers"==N)window.location=proboards.route("members")+"?view=ip&type=user&id="+G.get_selection().ids[0]+"/";else if("ipSearchThreads"==N)window.location=proboards.route("threads_by_ip",{type:"user",id:G.get_selection().ids[0]});else if("ipSearchPosts"==N)window.location=proboards.route("posts_by_ip",{type:"user",id:G.get_selection().ids[0]});else if(-1==N.indexOf("label")||-1!=N.indexOf("ui-menu-has-sub-menu")||"threads"!=G.type&&"posts"!=G.type)if(-1==N.toLowerCase().indexOf("label")||-1!=N.indexOf("ui-menu-has-sub-menu")||"conversations"!=G.type&&"messages"!=G.type){if("remove_from_group"==N){if(0==(s=G.get_selection()).length)return;proboards.ajax({url:proboards.route("change_group_members",{type:"remove"}),data:{type:"remove","user_ids[]":G.selected_ids,group_id:G.options.data.hash.group},success:function(e){G.research(),G.selected_ids=[],G.selected_items={},e.status&&($(document.body).append('<div id="remove-member-status">'+e.status+"</div>"),proboards.dialog("remove-member-status",{autoOpen:!0,width:310,title:"Remove Group Members",close:function(){$("#remove-member-status").remove()}}))}})}}else{var N;if("manageLabels"==(N=$(t.item).attr("class"))){var j=0;0==$("#manage-labels-container").length&&($(document.body).append('<div id="manage-labels-container"></div>'),proboards.dialog("manage-labels-container",{autoOpen:!1,width:640,title:"Manage Labels",open:function(){0===$("#labels-wrapper .label-row").length&&$("#labels-wrapper").html('<div id="no-labels-msg">You have no labels.  Click Create New Label to create a new label.</div>'),G.selected_ids.length||$(".apply-col",this).hide(),$("#labels-wrapper .label-row").each(function(){var e=$(".name_input",this),t=$(".color_input",this),i=e.attr("name").substr(5);update_labels_preview_text(i,e.val()),update_labels_preview_hex(i,t.val())})},buttons:[{text:"Create New Label",click:function(){var e=proboards.data("manage_form_id");0<$("#no-labels-msg").remove().length&&($("#labels-wrapper").append('<div><span class="apply-col">Apply</span><span class="label-col">Label Name</span></div>'),G.selected_ids.length||$(".apply-col",this).hide());var t='<div class="label-row new">'+(G.selected_ids.length?'<span class="apply-col"><input id="'+e+"_apply_new"+j+'_input" class="apply_input" type="checkbox" checked="checked" name="apply_new'+j+'" /></span>':"")+'<input id="'+e+"_name_new"+j+'_input" class="name_input" type="text" name="name_new'+j+'" size="16" maxlength="32" /><span class="color-wrapper"><input id="'+e+"_color_new"+j+'_input" class="color_input" type="text" name="color_new'+j+'" value="1979e6" /></span><span id="manage-label-new'+j+'-preview" class="ui-label"></span><a id="label_new'+j+'_delete" class="label-delete-button" href="javascript:void(0);"><span>x</span></a></div>';$("#labels-wrapper").append(t),$("#labels-wrapper .name_input").last().focus(),j++}},{text:"Save Changes",click:function(){for(var t=proboards.data("manage_form_id"),e={},i=$("#labels-wrapper .label-row:not(.new)"),n=0;n<i.length;++n){var a=i[n],o=$(".name_input",a),r=$(".color_input",a),s=$(".apply_input:checked",a);e[d=o.attr("name").substr(5)]={},e[d].name=o.val(),e[d].color=r.val(),s.length&&(e[d].apply=1)}var l={},c=$("#labels-wrapper .label-row.new");for(n=0;n<c.length;++n){var d;a=c[n],o=$(".name_input",a),r=$(".color_input",a),s=$(".apply_input:checked",a);l[d=o.attr("name").substr(5)]={},l[d].name=o.val(),l[d].color=r.val(),s.length&&(l[d].apply=1)}proboards.ajax({url:proboards.route("modify_conversation_labels"),data:{labels:JSON.stringify(e),new_labels:JSON.stringify(l),conv_ids:G.selected_ids},success:function(e){if(G.edit_labels(e),void 0!==e.add_labels)for(var t=0;t<e.add_labels.length;t++){var i=e.add_labels[t],n=G.get_label_html(i);G.add_labels(i),G.add_labels_nav_item({liClass:"nav-tree-label-"+i.id,href:proboards.route("conversations_by_label",{label_id:i.id}),content:n})}void 0!==e.no_labels&&$(".nav-tree-labels").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),G.selected_ids.length&&G.apply_label_map(e.apply_labels),$(this).dialog("close"),"messages"!=G.type&&G.clear_cache()},error:function(e){0===$(".ui-form-error").length&&$(document.body).append('<div class="ui-form-error"></div>').bind("mousedown",function(){$(".ui-form-error").hide()}),$.inputError($("#"+t+"_name_"+e.failure_id+"_input"),e.error)}})}}]}),$(".color_input").livequery(function(){var e=$(this).val()||"1979e6",t=$(this).attr("name").substr("color_".length);update_labels_preview_hex(t,e),$(this).colorPickMe({update:function(e){update_labels_preview_hex(t,e,1)}})}),$(".color_input").live("keyup",function(){var e=$(this).val(),t=$(this).attr("name").substr(6);update_labels_preview_hex(t,e)}),$(".name_input").live("keyup",function(){var e=$(this).attr("name").substr(5);update_labels_preview_text(e,this.value)}),$(".label-delete-button").live("click",function(e){return e.preventDefault(),$(this).parents(".label-row").remove(),0==$("#manage-labels-container .label-row").length&&$("#manage-labels-container #labels-wrapper").html('<div id="no-labels-msg">You have removed all labels, are you sure you want to do this?  Click Save Changes to confirm.</div>'),!1})),proboards.ajax({url:proboards.route("manage_conversation_labels"),dataType:"html",success:function(e){$("#manage-labels-container").html(e),$("#manage-labels-container").dialog("open")}})}else{if("messages"!=G.type)F=G.get_selection().ids;else F=[proboards.data("conversation_id")];A=N.split(" ")[0].substring(6);type=-1!=N.indexOf("add-label")?"add":"remove",proboards.ajax({url:proboards.route("apply_conversation_label"),data:{label_id:A,"ids[]":F,type:type},success:function(e){for(var t=e.ids.length,i=0;i<t;++i)G.apply_label(e.type,e.ids[i],e.label);"messages"!=G.type&&G.clear_cache()}})}}else{var s=G.get_selection(),A=G.getLabelId(t.item),L=G.getLabelBoardId(t.item),R=G.getLabelAction(t.item);"posts"==G.type&&($(document.body).addClass("thread-board-"+proboards.data("board_id")),s={items:[document.body],ids:[proboards.data("thread_id")],length:1});var F=[],z=[];if("add"==R)for(var v in s.items){$(s.items[v]).find(".ui-label.label-"+A).length||G.getLabelBoardId(s.items[v])!=L||(F.push(s.ids[v]),z.push(s.items[v]))}else if("remove"==R)for(var v in s.items){$(s.items[v]).find(".ui-label.label-"+A).length&&G.getLabelBoardId(s.items[v])==L&&(F.push(s.ids[v]),z.push(s.items[v]))}proboards.ajax({url:proboards.route("apply_thread_label"),data:{action:R,label_id:A,"ids[]":F,type:G.type},success:function(e){if("add"==R)for(v in z){var t=$(z[v]);if(!t.find(".ui-label.label-"+A).length){var i=t.find("span.labels");i.length?i.prepend(e.label_html):t.find("span.no-labels").removeClass("no-labels").addClass("labels").prepend(e.label_html)}}else if("remove"==R)for(v in z)$(z[v]).find(".ui-label.label-"+A).remove();"posts"==G.type&&(""!=$.trim($("span.labels").html())?$("span.labels").show():$("span.labels").hide()),G.clear_cache()}})}return e.preventDefault(),!1},position:G.menu_position}});this.labelsSelectMenu=$(".lm-labels-"+G.options.id)},create_folders_controls:function(){var e,t=proboards.data("folder");if(null!=t){if(e=t.match(/label\-(\d+)/)){var i,n=proboards.data("labels"),a=n.length,o=!1;for(i=0;i<a&&!o;++i)n[i].id==e[1]&&(t=this.get_label_html(n[i]),o=!0)}else t=t.charAt(0).toUpperCase()+t.substr(1);var r=$(".lm-folders-"+this.options.id).selectMenu({status:t,staticStatus:!0,beforeShow:function(){$(this).menu("hideOption",proboards.data("folder"))},menuOptions:{click:function(e,t){e.preventDefault();var i=$(t.item).attr("class");return i.match(/label\-(\d+)/)?document.location=proboards.route("conversations_by_label",{label_id:RegExp.$1}):document.location=proboards.route("conversations",{folder:i}),!1}}});this.folderSelectMenu=r}},getItemId:function(e){var t=$(e).closest(".item").attr("id");return void 0!==t?t.match(/[a-z]+-(\d+)/)[1]:0},getLabelId:function(e){return $(e).attr("class").match(/label-(\d+)/)[1]},getLabelBoardId:function(e){return $(e).is(".item.thread")?proboards.item("thread",this.getItemId(e)).board_id:$(e).attr("class").match(/board-(\d+)/)[1]},getLabelAction:function(e){return $(e).attr("class").match(/label-(add|remove)+/)[1]},create_views_controls:function(){var o=this,e="View By Board";proboards.data("board_id")&&(e="Board: "+proboards.escape_html(proboards.item("board",proboards.data("board_id")).name.substr(0,15))),o.options.viewsSelector=".lm-views-"+o.options.id,o.options.viewsNameMap={all:"View All",birthdays:"View Today's Birthdays",followers:"View Followers",following:"View Following",friends:"View Friends",group:"View Group",online:"View Online Now",staff:"View Staff",today:"View Online Today",board:e},o.options.viewsDefault="View All";var t=o.options.viewsDefault,i=proboards.data("view"),n=proboards.consolidateParams(["search","hash"]);if(n.view){"birthdays_other_day"!==n.view||o.options.viewsNameMap.hasOwnProperty("birthdays_other_day")||(o.options.viewsNameMap[n.view]=i);var a=o.options.viewsNameMap[n.view];a&&(i=a)}null!=i&&""!=i&&(t=i);$(o.options.viewsSelector).selectMenu({status:t,staticStatus:!1,menuOptions:{click:function(e,t){var i=$(t.item).attr("class"),n=$("input",o.search).data("autosearch");if("viewAll"==i){var a=/view\/([a-zA-Z_]+)(\/|$)/.test(window.location.pathname)&&"all"!=RegExp.$1?"all":"";n.setDataLite("page",1),n.setData("view",a)}else"viewStaff"==i?(n.setDataLite("page",1),n.setDataLite("sort","name"),n.setDataLite("dir","asc"),n.setData("view","staff")):"viewFollowing"==i?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","following")):"viewFollowers"==i?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","followers")):"viewFriends"==i?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","friends")):"viewOnlineToday"==i?(n.clearCache(),n.setDataLite("page",1),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","today")):"viewOnlineNow"==i?(n.clearCache(),n.setDataLite("page",1),n.setDataLite("board",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","online")):"viewBirthdays"==i?(n.setDataLite("page",1),n.setDataLite("sort","name"),n.setDataLite("dir","asc"),n.setData("view","birthdays")):"viewBoard"==i&&proboards.board.select(function(e,t){o.options.viewsNameMap.board="Board: "+proboards.escape_html(t.substr(0,15)),n.setDataLite("page",1),n.setData("view","board"),n.setData("board",e)},{accessible:!0,prepend:'<div class="info">Select a board below to see which members can access it:</div><br />'})}}})},create_logView_controls:function(){var n=this;n.options.logViewSelector="#log-view-select",n.options.logViewNameMap={all:"All Logs",admin:"Admin Logs",admin_ad_free:"Ad-Free",admin_ban_user:"Bans",admin_censored_words:"Censored Words",admin_change_forum_url:"Change Forum URL",admin_custom_domains:"Custom Domains",admin_custom_fields:"Custom Fields",admin_file_storage:"File Storage",admin_forum_avatars:"Forum Avatars",admin_headers_footers:"Headers &amp; Footers",admin_news_feed:"News Feed",admin_ranks:"Ranks",admin_reserved_names:"Reserved Names",admin_shoutbox:"Shoutbox",admin_forum_cleanup:"Forum Cleanup",admin_navigation_menu:"Navigation Menu",admin_forum_settings:"Forum Settings",admin_restrict_registration:"Restrict Registration",admin_restrict_registration_message:"Restrict Registration Message",admin_disable_registration:"Disable Registration",group:"Group Logs",group_create:"Creates",group_delete:"Deletes",group_edit:"Edits",group_leaders:"Leader Changes",group_members:"Member Changes",group_pending_approve:"Member Approvals",group_pending_deny:"Member Denials",post:"Post Logs",post_delete:"Deletes",post_edit:"Edits",post_edit:"Moves",thread:"Thread Logs",thread_annoucement:"Announcements",thread_bump:"Bumps",thread_delete:"Deletes",thread_event:"Events",thread_lock:"Locks",thread_move:"Moves",thread_poll:"Polls",thread_sticky:"Stickies",thread_falling:"Falling",user:"Member Logs",user_new:"New",user_delete:"Delete",user_profile_edit:"Edits",user_approve:"Approvals",user_reject:"Rejections",pm:"Conversation Logs",pm_delete:"Deletes",board_create:"Creates",board_delete:"Deletes",board_edit:"Edits",board_move:"Moves",board_duplicate:"Moves",category:"Category Logs",category_create:"Creates",category_delete:"Deletes",category_edit:"Edits",category_move:"Moves",category_duplicate:"Moves",plugin:"Plugin Logs",plugin_create:"Creates",plugin_edit:"Edits",plugin_settings:"Modifies Settings",plugin_delete:"Deletes",plugin_disable:"Enables/Disables",plugin_import:"Imports",plugin_install:"Installs",plugin_export:"Exports",plugin_permissions:"Edits Permissions",plugin_key_create:"Creates Key",plugin_key_delete:"Deletes Key",plugin_key_clear:"Clears Key Data",reported_post_create:"Creates",reported_post_delete:"Deletes",reported_post_archive:"Archives",reported_post_unarchive:"Unarchives",theme_style_reset:"Style Resets",theme_create:"Creates",theme_default:"Defaults",theme_style_edits:"Style Edits",theme_easy_layout_editor:"Colors &amp; Theme Creator Layout Edits",theme_settings:"Edits",theme_enable:"Enables",theme_export:"Exports",theme_import:"Imports",theme_install:"Installs",theme_disable:"Disables",theme_delete:"Deletes",theme_edit_groups_ranks:"Group and Rank Edits",theme_edit_groups_ranks_reset:"Group and Rank Resets",theme_edit_images:"Image Edits",theme_edit_images_reset:"Image Resets",theme_template_edit:"Template Edits",theme_template_reset:"Template Resets",theme_visual_editor_reset:"Visual Editor Resets",custom_page:"Custom Page Logs",custom_page_add:"Adds",custom_page_delete:"Deletes",custom_page_edit_html:"HTML Changes",custom_page_edit_permissions:"Permission Changes",custom_page_edit_settings:"Setting Changes",custom_page_edit_widgets:"Widget Changes"},n.options.logViewDefault="All Logs";var e=n.options.logViewDefault,t=proboards.consolidateParams(["search","hash"]);if(t.logView){var i=n.options.logViewNameMap[t.logView];i&&(e=i)}$(n.options.logViewSelector).selectMenu({status:e,staticStatus:!1,menuOptions:{click:function(e,t){var i=$(t.item).attr("class");-1!=i.indexOf("ui-menu-has-sub-menu")&&(i=i.replace(/\s?ui-menu-has-sub-menu\s?/,"")),"all"==i&&(i=""),$("input",n.search).autosearch("setDataLite","page",1),$("input",n.search).autosearch("setData","logView",i)}}})},update_controls:function(){for(var e=this.settings.controls,t=e.length,i=0;i<t;i++){var n=this.settings.viewHashKey,a=this.options[e[i]+"NameMap"],o=this.options[e[i]+"Selector"];if(void 0!==a&&void 0!==o&&void 0!==n){var r=this.options[e[i]+"Default"],s=$.pushStateSupport()?null:["hash"],l=proboards.consolidateParams(s);l[n]&&(r=a[l[n]]),$(o).selectMenu("updateStatus",r)}}},load_labels:function(){var e=proboards.data("labels");if(null!=e&&void 0!==e)for(var t=0;t<e.length;t++)this.add_labels(e[t])},apply_label_map:function(e){var t=e||proboards.data("label_map");if(null!=t)for(var i in t)for(var n=t[i].length-1;0<=n;n--){var a=t[i][n];this.apply_label("add",i,this.labels["label-"+a])}},add_labels:function(e){var n=this;if(this.labels["label-"+e.id]={id:e.id,name:e.name,color:e.color},this.add_labels_submenu_item(e),"messages"!=this.type&&this.folderSelectMenu&&$(this.folderSelectMenu.selectMenu("getMenu")).append('<li class="folder-label-'+e.id+' folder-label"><a href="#"><span class="icon"></span><span class="action-text"></span>'+this.get_label_html(e)+"</a></li>"),$("#add-label-container").dialog("close"),e.apply_this_label){var t=proboards.data("labels");if($.isArray(t)||(t=[]),t.push({id:e.id,name:e.name,color:e.color}),proboards.data("labels",t),"messages"!=n.type)var i=this.get_selection().ids;else i=[proboards.data("conversation_id")];proboards.ajax({url:proboards.route("apply_conversation_label"),data:{label_id:e.id,"ids[]":i,type:"add"},success:function(e){for(var t=e.ids.length,i=0;i<t;++i)n.apply_label(e.type,e.ids[i],e.label)}})}},apply_label:function(e,t,i){if(void 0!==i)if("messages"!=this.type){var n="#conversation-"+t;if("add"==e&&0<$(".labels .label-"+i.id,n).length)return;if("add"==e){var a=$('<a href="'+proboards.route("conversations_by_label",{label_id:i.id})+'">'+this.get_label_html(i)+"</a>");$(".main .labels",n).prepend(a)}else proboards.data("folder").substr(6)==i.id?this.research():$(".labels .label-"+i.id,n).remove()}else if("add"==e){a=$('<a href="'+proboards.route("conversations_by_label",{label_id:i.id})+'">'+this.get_label_html(i)+"</a>");$(".conversation-labels").prepend(a)}else $(".conversation-labels .label-"+i.id).remove()},get_label_html:function(e){return'<div class="ui-label label-'+e.id+'" style="color: #'+proboards.escape_html(e.color)+';">'+e.name+"</div>"},edit_labels:function(e){$("#manage-labels-container").dialog("close");var t=[];for(var i in this.labels={},e.labels)t.push({color:e.labels[i].color,name:e.labels[i].name,id:i}),this.labels["label-"+i]={color:e.labels[i].color,name:e.labels[i].name,id:i};for(var i in proboards.data("labels",t),e.labels)$(".ui-label.label-"+i).empty().append(e.labels[i].name).css("border-color","#"+e.labels[i].color).css("color","#"+e.labels[i].color);for(var n=0;n<e.delete_labels.length;n++)$("#label-"+e.delete_labels[n]).remove(),$(".nav-tree-label-"+e.delete_labels[n]).remove(),$(".folder-label-"+e.delete_labels[n]).remove(),$(".ui-label.label-"+e.delete_labels[n]).remove(),$(".labels li.label-"+e.delete_labels[n]).remove()},add_labels_submenu_item:function(e){$(this.labelsSelectMenu.selectMenu("getMenu")).append('<li class="label-'+e.id+' label"><a href="#"><span class="icon"></span><span class="action-text"></span>'+this.get_label_html(e)+"</a></li>"),"conversations"!=this.type&&"messages"!=this.type||$(".label.label-"+e.id,this.labelsSelectMenu.selectMenu("getMenu")).each(function(){$(".action-text",this).show();var e=$(this).clone();e.insertAfter($(this)),$(this).addClass("add-label"),$(".action-text",this).html("Add "),e.addClass("remove-label"),$(".action-text",e).html("Remove ")})},add_labels_nav_item:function(e){0===$(".nav-tree-labels ul li").length&&$(".nav-tree-labels").parentsUntil(".nav-tree").menu("showOption",["nav-tree-labels"]);var t=this.gen_nav_item(e);$(".nav-tree-labels ul").append(t)},gen_nav_item:function(e){return'<li class="'+e.liClass+'"><a class="span" href="'+e.href+'"><span class="new_span">New</span></a><a href="'+e.href+'">'+e.content+'</a><span class="arrow right"><span></span></span></li>'},setup_search:function(){if(this.settings.search){var w=this;this.pagination.html("").pagination({maxSlots:7,change:function(e,t){var i=$("input",w.search).data("autosearch");if(i.options.hash){var n=$(i.element);n.off("autosearchaftersearch.paging"),n.one("autosearchaftersearch.paging",function(){proboards.events.run("pageChange",e.target)})}i.setData("page",t.page,{refreshAds:!w.settings.modal,scrollToTop:!w.settings.modal,ignorePending:!0})},total:this.options.total,limit:this.options.limit,page:this.options.page}),$("#"+this.type+"-list-search-dialog").remove();var e='<strong>Your Search</strong><div class="ui-search"><input class="search-input filters-input" maxlength="'+proboards.data("search-query-max")+'" type="text" placeholder="Search..." role="search" alt="Search" /></div>',t="Search Options";this.settings.filters_only&&(e='<div id="'+this.type+'-list-search-dialog">'+this.settings.f_description+'<div class="ui-search"><input class="search-input filters-input" type="hidden" /></div></div>',t=this.settings.f_title),this.searchDialog=proboards.dialog(this.type+"-list-search-dialog",{html:e,autoOpen:!1,title:t,width:"50%",buttons:{Done:function(){$(this).dialog("close")}}});var h=$(".search-input",this.searchDialog);h.prop("autofocus",!0),this.searchDialog.parents(".ui-dialog").css({position:"fixed"});var i="";proboards.data("search_filter_img_src")&&(i='<img src="'+proboards.data("search_filter_img_src")+'" />');var n=$('<span class="search-filters-button"><span class="icon">'+i+"</span></span>").appendTo(w.search).click(function(){w.searchDialog.dialog("open")});this.settings.filters_only&&$(n).addClass("standalone");var a=[];if((proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type&&"conversations"!=this.type&&"messages"!=this.type)&&"security_logs"!=this.type||a.push({display:"Created by",name:"created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,t){$(i).val("created_by:eq:"+t.ids.join(",")),$(w.filters).filterlist("refresh")}})}}),!proboards.data("search_system")||"conversations"!=this.type&&"messages"!=this.type||(a.push({display:"Message Created By",name:"message_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,t){$(i).val("message_created_by:eq:"+t.ids.join(",")),$(w.filters).filterlist("refresh")}})}}),a.push({display:"Conversation Started By",name:"conversation_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,t){$(i).val("conversation_created_by:eq:"+t.ids.join(",")),$(w.filters).filterlist("refresh")}})}})),!proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type||(a.push({display:"Thread Created By",name:"thread_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,t){$(i).val("thread_created_by:eq:"+t.ids.join(",")),$(w.filters).filterlist("refresh")}})}}),a.push({display:"Post Created By",name:"post_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,t){$(i).val("post_created_by:eq:"+t.ids.join(",")),$(w.filters).filterlist("refresh")}})}})),"security_logs"==this.type&&proboards.data("search_ip")&&a.push({display:"IP address",name:"ip",value_input_type:"ip",value_input_size:15,add_class:"ip"}),"threads"==this.type){var o=[["","Select","color: gray;"]];$.isArray(proboards.data("labels_viewable"))&&$.each(proboards.data("labels_viewable")||[],function(){o.push([this.id,this.name,"color: #"+this.color])}),1!=o.length&&a.push({display:"Label",name:"label_id",value_input_type:"select",value_input_options:o}),a.push({display:"Locked",name:proboards.data("search_system")?"thread_locked":"locked",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]}),a.push({display:"Is Event",name:proboards.data("search_system")?"thread_event":"event",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]}),a.push({display:"Has Poll",name:proboards.data("search_system")?"thread_poll":"poll",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]})}proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type&&"conversations"!=this.type&&"messages"!=this.type||a.push({display:"posts"==this.type||"messages"==this.type?"Creation Date":"Start Date",name:"created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),!proboards.data("search_system")||"conversations"!=this.type&&"messages"!=this.type||(a.push({display:"Conversation Start Date",name:"conversation_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),a.push({display:"Message Creation Date",name:"message_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10})),!proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type||(a.push({display:"Post Creation Date",name:"post_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),a.push({display:"Thread Creation Date",name:"thread_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10})),"threads"!=this.type&&"conversations"!=this.type||a.push({display:"Reply Count",name:proboards.data("search_system")&&"threads"==this.type?"thread_replies":"conversation_replies",condition_input_options:[["lt","<"],["lte","<="],["eq","="],["gte",">="],["gt",">"]],value_input_type:"text",value_input_size:4}),"members"==this.type&&(a.push({display:"Post Count",name:"posts",condition_input_options:[["lt","<"],["lte","<="],["eq","="],["gte",">="],["gt",">"]],value_input_type:"text",value_input_size:4}),a.push({display:"Registration Date",name:"registered_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}));var r=proboards.data("locale_settings")||{},s=r.input_date_placeholder,l=r.input_date_regex?function(e){return $.check_date_format(e,r)}:void 0;this.filters=$("<div></div>").appendTo(this.searchDialog).filterlist({filters:a,change:function(e,t){$(".search-filters-button",w.search).toggleClass("state-active",0!=t.values.length),$("input",w.search).autosearch("setDataLite","page",1),$("input",w.search).autosearch("setData","filters",t.values)},filters_only:this.settings.filters_only,datePlaceholder:s,dateValidation:l});var c='<input class="search-input" type="text" width="90px" maxlength="'+proboards.data("search-query-max")+'" placeholder="Search..." role="search" accesskey="w" />';this.settings.filters_only&&(c='<input class="search-input" type="hidden" />'),w.search.prepend(c);var f="users"!=this.type&&!this.settings.participants&&!1!==this.options.hash;$(".search-input",w.search).autosearch({url:proboards.route(this.settings.route_name),data:this.options.data,cache:!0,pageCache:proboards.data("page_cache"),hash:f,delay:500,minChars:this.settings.minChars||proboards.data("search-query-min"),defaultResponse:{total:this.options.total,limit:this.options.limit,page:this.options.page},beforeSearch:function(e,t){$("li",w.pagination).addClass("state-disabled"),$("li a",w.pagination).bind("click.search",function(){return!1})},afterSearch:function(e,t){var i=$(this).data("autosearch");$("li a",w.pagination).off("click.search"),w.update_controls();var n="",a=null;"members"==w.type&&void 0!==w.options.data.hash&&"group"==(n=w.options.data.hash.view||"")&&(a=w.options.data.hash.group);var o=w.options.data.hash=proboards.consolidateParams();("group"==o.view&&("group"!=n||a!=o.group)||"group"!=o.view&&"group"==n)&&0<w.selected_ids.length&&(w.selected_ids=[],w.selected_items={},w.research()),void 0!==t.response&&(w.options.data.groupLeader="group"==o.view?t.request.groupLeader||0:null);var r=i.poppingState;if(!$.pushStateSupport()){var s=location.hash.match(/filters\[\]=[^&]+/g)||[];if(s.length!=w.last_filters.length)r=!0;else if(0<s.length){s.sort();for(var l=0;l<s.length;l++)if(s[l]!=w.last_filters[l]){r=!0;break}}w.last_filters=s}P(r),proboards.embedded.processEmbedded(),i.options.hash&&proboards.events.run("afterSearch")},search:function(e,t){var i=$(this).data("autosearch");i.options.hash&&t.refreshAds&&proboards.refresh_ads(!1,t.response.content_score),w.total_tracker=t.response.total,$(".lm-message-count-"+w.options.id).text(proboards.commify(w.total_tracker)),w.pagination.pagination("refresh",t.response),h.val($(".search-input",w.search).val());var n=!1,a=null,o=getTopAdBanner();if(o.length)a=o.offset().top;else{var r=$(w.content).parents(".container,.lm-container").find(".control-bar");r.length&&(a=r.last().offset().top)}if(t.scrollToTop&&$(window).scrollTop()>a&&(n=!0),w.content.html(t.response.results),t.response.page&&f){var s=i.data.page||i.baseData.page;if(t.response.page!=s){var l=$.extend({},i.data,{page:t.response.page}),c=i._getDataStr(l);$.pushStateSupport()?window.history.replaceState({},null,location.pathname+"?"+c):window.location.hash=c}}if(w.settings.checkbox)for(var d in w.selected_ids){var u=$("#"+w.item_type+"-"+w.selected_ids[d]);$(".list-item-checkbox",u).attr("checked","checked"),u.addClass("state-selected"),0<u.length&&(w.selected_items[w.selected_ids[d]]=u)}if("posts"==w.type&&proboards.postManager.runAll(t.cached),"messages"==w.type&&proboards.messageManager.runAll(t.cached),"conversations"==w.type){var p=t.response.label_map||proboards.data("label_map");proboards.data("label_map",$.extend(!0,{},p)),w.apply_label_map()}n&&/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)&&window.scroll({top:a,behavior:"smooth"}),"undefined"!=typeof vglnk&&"function"==typeof vglnk.link&&$("a",w.content).each(function(){vglnk.link(this)}),w.content.trigger("pagination_returned"),w.content.trigger("change")}}),w.options.data.hash=proboards.consolidateParams();var d=$(".search-input",w.search).data("autosearch"),u=proboards.data("lm_page")||1;if(d.lastResponse.results=$(proboards.data("page_cache")).html(),d.lastResponse.page=u,d.lastResponse.limit=this.options.limit,d.lastResponse.total=this.options.total,d.lastResponse.content_score=proboards.data("content_score"),$.pushStateSupport()&&d.options.hash){$.extend(d.baseData,proboards.data("route").params),d.baseData.page||(d.baseData.page=1);var p=proboards.consolidateParams(["search"]);if((p.page||d.baseData.page)!=u){p.page=u;var m="?"+d._getDataStr(p);history.replaceState({},null,m)}d.data=p,d.lastRequestDataStr=d._getDataStr(d._getRequestData());var g=proboards.consolidateParams(["hash"]),v=[],b=[];for(var _ in w.mobileScrollifyRegEx.test(window.location.hash)&&(g.scrollTo=RegExp.$1),g)g.hasOwnProperty(_)&&(v.push(_),b.push(g[_]));if(v.length)for(var y=0,A=v.length;y<A;y++)y==v.length-1?d.setData(_,g[_],{replaceState:!0}):d.setDataLite(_,g[_]);else"object"==typeof p["filters[]"]&&P();if(g.scrollTo){var x="scrollTo="+encodeURIComponent(g.scrollTo);1<(m=window.location.search).length?m+="&":m="?",m+=x,history.replaceState({},null,m)}d.initialUrl=location.href}else if(d.options.hash){var k=["q","filters[]","view","logView"],C=$.extend({},proboards.consolidateParams(["search","route"]));d.baseData.page||(d.baseData.page=1);var S={};for(y=0,A=k.length;y<A;y++){var T=k[y];null!=typeof C[T]&&(S[T]=C[T],delete C[T])}g=proboards.consolidateParams(["hash"]);w.mobileScrollifyRegEx.test(window.location.hash)&&(g.scrollTo=RegExp.$1),$.extend(g,S);var D=d._getDataStr(g);g.scrollTo&&(D&&(D+="&"),D+="scrollTo="+encodeURIComponent(g.scrollTo));var E=window.location.hash;"#"==E.charAt(0)&&(E=E.substr(1)),D!=E&&(window.location.hash=D),g.q&&d.element.val(g.q),"object"==typeof g["filters[]"]&&P(),$.extend(d.baseData,C),d.data=S,d.lastRequestDataStr=d._getDataStr(d._getRequestData())}var I=!1;h.val($(".search-input",w.search).val()).bind("keydown keyup change",function(){$(".search-input",w.search).val()!=this.value&&$(".search-input",w.search).val(this.value).trigger("keydown").trigger("keyup")}).bind("blur",function(){I?I=!1:(I=!0,$(".search-input",w.search).trigger("blur"))}),$(".search-input",w.search).bind("keydown keyup change",function(){h.val()!=this.value&&h.val(this.value).trigger("keydown")}).bind("blur",function(){I?I=!1:(I=!0,h.trigger("blur"))})}function P(e){if(void 0===w.filters||!w.filters.filterlist("searching")||!w.refreshedOnce||e){w.refreshedOnce=!0;for(var t=[],i=0,n=w.filters.filterlist().data("filterlist"),a=$(".list .filter",w.filters).addClass("RFD-unmatched"),o=$.pushStateSupport()&&location.search?["search"]:["hash"],r=proboards.consolidateParams(o),s=a.length,l=r["filters[]"]||[],c=0,d=l.length;c<d;c++){for(var u=l[c],p=!1,h=0;h<s;h++){var f=a.eq(h);f.hasClass("RFD-unmatched")&&$(".filter-input",f).val()==u&&(f.removeClass("RFD-unmatched"),++i,p=!0)}p||t.push(u)}s=(a=$(".list .filter.RFD-unmatched",w.filters)).length;for(c=0;c<s;++c){var m=a[c],g=$(".filter-input",m);""==g.val()?g.removeClass("RFD-unmatched"):n.removeFilter(m,!0)}d=t.length;for(c=0;c<d;++c){var v=t[c].split(":"),b="addFilter";if(w.settings.filters_only&&(b="addSimpleFilter"),filter=n[b](v[0],v[1],v[2]),!1!==filter&&(++i,"created_by"==v[0])){var _=$("."+$(".user-search",filter).attr("id")+"-selectlist"),y=v[2].split(","),A=y.length;proboards.ajax({url:proboards.route("user_search"),data:{"ids[]":y},success:function(e,t,i){for(_.selectlist("refresh",e.results),c=0;c<A;++c)_.selectlist("select",y[c],!0);_.selectlist("refresh")}})}}$(".search-filters-button",w.search).toggleClass("state-active",0<i)}}},clear_cache:function(){$(".search-input",this.search).autosearch("clearCache")},research:function(){var e=$(".search-input",this.search).data("autosearch");e.clearCache(),e.search(void 0,!0)},scrollify:function(e){var t=null,i=null,n=e.substr(0,e.length-1),a=location.hash+location.search,o=proboards.data("lm_id"),l=0,c=null,d=25,u=0;listManagerSettings.settings[e].float_control_bar&&(l=$(".scrollable-"+o).height());var r=function(e){var t=$(document).height()-$(window).height(),i=parseInt(window.pageYOffset,10);document.body.clientHeight<u&&(u=i);var n=$("#"+e).offset(),a=n?Math.min(parseInt(n.top-l,10),t):0,o=i===u;if(a&&o&&a!=i){var r=0===u?"smooth":"instant",s=(u=a)-i;window.scrollBy({top:s,left:0,behavior:r}),d=25}o&&d--<=0&&clearInterval(c)};if(/scrollTo\=(\d+)/.test(a)&&(t=RegExp.$1),!t&&this.mobileScrollifyRegEx.test(a)&&(t=RegExp.$1),t&&n&&(i=$("#"+n+"-"+t)).length){var s=getTopAdBanner();!i.prev().length&&s.length&&(i=s,l=0);var p=i.offset();t=i.attr("id");null!=p&&r(t),c=window.setInterval(function(){r(t)},100),$.scrollTo.stopOnUserInput(function(){clearInterval(c)})}}};function getTopAdBanner(){return $("#ad1, #top-ad-banner")}var listManager=function(e,t,i){this.init(e,t,i)};$.extend(listManager.prototype,listManagerPrototype),$(document).ready(function(){proboards.listManager=listManagerSettings}),$.extend(proboards,{member:{ban:function(e){proboards.loading(!0);var a=$.extend({id:0,from:{type:"",id:0},checked:[],success:function(){}},e);$("#ban-member-container").length?$("#ban-member-container").dialog("option","title","Ban "+("post"==a.from.type&&$("#item-"+a.from.id+" .mini-profile").hasClass("guest-mini-profile")?"Guest User":"Member")):($(document.body).append('<div id="ban-member-container"></div>'),proboards.dialog("ban-member-container",{autoOpen:!1,width:620,title:"Ban "+("post"==a.from.type&&$("#item-"+a.from.id+" .mini-profile").hasClass("guest-mini-profile")?"Guest User":"Member"),buttons:[{text:"Ban",class:"ban-member-button",click:function(e){$(this).children("form").trigger("submit")}},{text:"Close Window",class:"close-window-button",click:function(e){$(this).dialog("close")}}]}));var t={from_id:a.from.id,from_type:a.from.type};a.post_id&&(t.post_id=a.post_id),proboards.ajax({url:proboards.route("ban_user",{user_id:a.id}),data:t,dataType:"html",success:function(e){$.datepicker.setDefaults({dateFormat:"yy-mm-dd"}),$("#ban-member-container").html(e),$(".ban-member-button").show(),$(".close-window-button").hide(),$("#ban-member-container").dialog("open"),$.each(a.checked,function(){$('#ban-member-container input[name="'+this+'"]').attr("checked","checked")});var t=function(){var e=$('input[name="expire_time"]',$("#ban-member-container form"));""!=$.trim($(this).val())?e.show():(e.val(""),e.hide())},i=$('input[name="expire_date"]',$("#ban-member-container form"));i.bind("change",t),t.call(i);var n=function(){var e=$("form",$("#ban-member-container")).data("form");if(!e)return setTimeout(n,500);e.options.submit=function(){return proboards.ajax({url:$(this).attr("action"),data:$(this).serialize(),dataType:"json",success:function(e){e.guest_banned?$("#ban-member-container").text("Guest banned."):$("#ban-member-container").text("Member banned."),$(".ban-member-button").hide(),$(".close-window-button").show(),a.success(e)}}),!1}};n(),proboards.dialogEnter($("#ban-member-container"))},complete:function(){proboards.loading(!1)}})},select_dialog:function(e){var t=$.extend({title:"User Selection",selected:[],max:0,onComplete:function(){}},e),i=t.max,n=$.unique_id("user-search"),a=$("<div></div>").attr("id",n),o=$('<input type="hidden" />');proboards.dialog("user-search-dialog",{html:a,title:t.title,buttons:{Done:function(){var e=[];$(".user-search-selection > li",this).each(function(){e.push({id:$(this).idFromClass("item"),name:$(".name",this).text(),username:$(".small",this).text().replace(/^\((.+)\)$/,"$1"),group:$(".group-overflow",this).text()})}),$(this).dialog("close"),t.onComplete(e)}},width:505,height:320});var r=function(e){proboards.search.create_user_search({container:a,input:o,results:e,change:function(e,t){},formId:"",limit:i||void 0,checkedHash:{},isPendingList:0,currentUser:0,showExisting:1,showAdded:1,searchBox:1,autofocus:t.autofocus,focusDone:i?function(e){$(".ui-dialog").find("button.ui-button").focus()}:void 0})};t.selected.length?(a.html("Loading").progress_text(),proboards.ajax({url:proboards.route("admin_user_searchbox_results"),data:{ids:t.selected},success:function(e){a.html(""),r(e.results)}})):r([])}}}),$.extend(proboards,{messageManager:{init:function(e){"object"!=typeof e&&(e={}),this.options=e,this.selected_messages=[],this.runAll(0)},runAll:function(e){$(".message-options-checkbox input.ui-manager-checkbox").removeAttr("checked"),this.add_options_menus(e),this.bind_quote_buttons(),this.bind_reply_buttons()},add_options_menus:function(e){var l=this;if($(".message-options").show().css("display","inline-block"),$(".options_menu").each(function(){var r=/(^| )message-([0-9]+)($| )/.test($(this).attr("class"))?RegExp.$2:"",s=/(^| )user-([0-9]+)($| )/.test($(this).attr("class"))?RegExp.$2:"";e&&$("#message-"+r+"-options").empty();$(this).selectMenu({container:"#message-"+r+"-options",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$(this).next().addClass("open-menu"),$(".message-"+r+"-checkbox input.ui-manager-checkbox").attr("checked")?($(this).menu("hideOption",r+"-selectMessage"),$(this).menu("showOption",r+"-deselectMessage")):($(this).menu("showOption",r+"-selectMessage"),$(this).menu("hideOption",r+"-deselectMessage"))},onClose:function(){$("#message-"+r+"-options").removeClass("open-menu")},menuOptions:{click:function(e,t){var i=$(t.item).attr("class");if(i==r+"-selectMessage")l.selected_messages.push(r),$(".message-"+r+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#message-"+r+"-options").addClass("state-selected");else if(i==r+"-deselectMessage"){var n=[];for(var o in l.selected_messages)l.selected_messages[o]!=r&&n.push(l.selected_messages[o]);l.selected_messages=n,$(".message-"+r+"-checkbox input.ui-manager-checkbox").attr("checked",!1),$("#message-"+r+"-options").removeClass("state-selected")}else i==r+"-giveGift"||i==r+"-sendMessage"?window.location=$(a,this).attr("href"):"badge_action"==i?proboards.badge.action.dialog($(t.item).data("badge-id"),$(t.item).data("user-id")):i==r+"-warn"||i==r+"-disable"?window.location=proboards.route("edit_user_admin",{user_id:s}):"searchIP actionable ui-menu-has-sub-menu"==i?(proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this message: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(t.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select()):i==r+"-ipBan"?proboards.member.ban({id:s,checked:["ip"],from:{type:"message",id:r},success:function(){$("."+i).hide()}}):i==r+"-ipSearchMembers"?window.location=proboards.route("members")+"?view=ip&type=message&id="+r:i==r+"-ipSearchThreads"?window.location=proboards.route("threads_by_ip",{type:"message",id:r}):i==r+"-ipSearchPosts"?window.location=proboards.route("posts_by_ip",{type:"message",id:r}):i==r+"-ipSearchLogs"?window.location=proboards.route("security_logs_by_ip",{type:"message",id:r}):i==r+"-toTop"&&window.scroll({top:0,behavior:"smooth"})}}})}),e)for(var t in l.selected_messages)$(".message-"+l.selected_messages[t]+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#message-"+l.selected_messages[t]+"-options").addClass("state-selected")},bind_quote_buttons:function(){var o=this;$(".quote-button").each(function(){var e=$(this).closest(".message").attr("id"),a=e?e.match(/\d+/)[0]:null;$(this).unbind("click"),$(this).bind("click",function(){var e=$(this).attr("href"),t=o.summary_setup(e);if(0!=proboards.messageManager.selected_messages.length){var i="";for(var n in proboards.messageManager.selected_messages)proboards.messageManager.selected_messages[n]!=a&&(i+=proboards.messageManager.selected_messages[n],i+=",");i+=a,t.setAttribute("action",proboards.route("quote_messages",{message_ids:i,conversation_id:proboards.data("conversation_id")}))}return t.submit(),!1})})},bind_reply_buttons:function(){var i=this,n=proboards.route("new_message",{conversation_id:proboards.data("conversation_id")});$(".reply-button").each(function(){$(this).click(function(){var e=i.summary_setup(n);if(0<proboards.messageManager.selected_messages.length){var t=proboards.messageManager.selected_messages.join(",");e.setAttribute("action",proboards.route("quote_messages",{message_ids:t,conversation_id:proboards.data("conversation_id")}))}return e.submit(),!1})})}}}),$.extend(proboards.messageManager,proboards.shared.manager),$.extend(proboards,{messagePageManager:{init:function(e){this.inited=!0,"object"!=typeof e&&(e={}),this.options=e,this.fields={},this.applied_effects={},this.applied_effects.group=$("#"+this.options.form_id+"_send_to_input").val(),this.applied_effects.separate=0,this.lower_limit=proboards.data("lower_limit"),this.higher_limit=proboards.data("higher_limit");var t="#"+this.options.form_id;this.fields.$labels=$(t+"_labels_input"),this.labels={},this.applied_effects.labels=0,this.create_options_menu(),1==$("#"+this.options.form_id+"_separate_input").val()&&(this.applied_effects.separate=1),this.hide_appropriate(this.applied_effects.group)},create_options_menu:function(){var c=this,d=$(".messaging-options-list");$(".message-options").show(),$(".ind_recipients_div").after('<div class="all_recipients_div hide"><br /><b>All members of this forum.</b><br /><br /></div>'),$("li.label",d).each(function(){var e=$(this),t=e.clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)});d.addClass("options_menu").selectMenu({container:"#messaging-options-container",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$("#messaging-options-container").addClass("open-menu"),$("li.label",d).each(function(){var e=$(this),t=e.hasClass("label-add"),i=e.data("id");c.labels[i]?t?e.hide():e.show():t?e.show():e.hide()})},onClose:function(){$("#messaging-options-container").removeClass("open-menu")},menuOptions:{click:function(e,t){var i=$(t.item),n=i.attr("class");if(-1!=n.indexOf("label")&&-1==n.indexOf("ui-menu-has-sub-menu")){var a=i.data("id"),o=i.hasClass("label-add")?"add":"remove";c.labels[a]="add"==o,"add"==o?c.applied_effects.labels++:c.applied_effects.labels--;var r=[];for(var s in c.labels)c.labels.hasOwnProperty(s)&&c.labels[s]&&r.push(s);c.fields.$labels.val(r.join(",")),c.update_magic_sentence()}else if("grp_separate"==n)c.applied_effects.separate=1,c.hide_appropriate(2);else if("grp_together"==n){0!=(l=c.check_num_recipients(1,0))?c.out_of_range_error("You do not have permission to start a conversation with more than "+l+" members."):(c.applied_effects.separate=0,c.hide_appropriate(2))}else if("ind_separate"==n){0!=(l=c.check_num_recipients(0,1))?c.out_of_range_error("You do not have permission to send more than "+l+" messages at once."):(c.applied_effects.separate=1,c.hide_appropriate(1))}else if("ind_together"==n){var l;0!=(l=c.check_num_recipients(0,0))?c.out_of_range_error("You do not have permission to start a conversation with more than "+l+" members."):(c.applied_effects.separate=0,c.hide_appropriate(1))}else if("to_all"==n)c.applied_effects.separate=1,c.hide_appropriate(3);else if("postAs"==n.substr(0,6)){s=n.substr(7);c.applied_effects.postingAs=0!=s?i.text():"",$("#"+c.options.form_id+"_post_as_input").val(s),0!=s?(c.labels={},c.applied_effects.labels=0,c.fields.$labels.val(""),d.menu("hideOption","labels")):d.menu("showOption","labels"),c.update_magic_sentence()}}}})},hide_appropriate:function(e){1==e?($(".ind_recipients_div").show(),$(".grp_recipients_div").hide(),$(".all_recipients_div").hide()):2==e?($(".ind_recipients_div").hide(),$(".grp_recipients_div").show(),$(".all_recipients_div").hide()):3==e&&($(".ind_recipients_div").hide(),$(".grp_recipients_div").hide(),$(".all_recipients_div").show()),0==this.applied_effects.separate?$("#"+this.options.form_id+"_separate_input").val(""):$("#"+this.options.form_id+"_separate_input").val(1),this.applied_effects.group=e-1,$("#"+this.options.form_id+"_send_to_input").val(e),this.update_magic_sentence()},update_magic_sentence:function(){if(this.inited){var e="This message will ",t=this.get_num_recipients(),i=this.check_num_recipients(this.applied_effects.group,this.applied_effects.separate,t);if(0!=i&&0==this.applied_effects.group)return this.applied_effects.separate?this.out_of_range_error("You do not have permission to send more than "+i+" messages at once."):this.out_of_range_error("You do not have permission to start a conversation with more than "+i+" members."),!1;if(this.applied_effects.separate?($(".recipients h4").html("Recipients (Separate):"),e+="be sent to "+t+" recipient"+(1==t?"":"s")+(t<2?"":" separately")):($(".recipients h4").html("Recipients (Together):"),e+="start a single conversation with "+t+" recipient"+(1==t?"":"s")),2==this.applied_effects.group?e="This message will be sent to every member of your forum":void 0!==this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&(e+=" and will be sent by the user "+this.applied_effects.postingAs),e+=".",this.applied_effects.labels){var n=1<this.applied_effects.labels?" labels ":" label ";e+=" This conversation will appear in your folders with "+this.applied_effects.labels+n+"applied."}$("#magic-sentence").html(e)}},out_of_range_error:function(e){0==$("#max-selectable-container").length?($(document.body).append('<div id="max-selectable-container">'+e+"</div>"),proboards.dialog("max-selectable-container",{autoOpen:!0,width:310,title:"Too Many Members"})):$("#max-selectable-container").text(e).dialog("open")},check_group_input:function(){var e=[],t=0;$("#groupsDialog").find(":checkbox").each(function(){null!=$(this).attr("checked")&&e.push($(this).val())});for(var i=0;i<e.length;i++)for(var n=0;n<proboards.groups.available.length;n++)e[i]==proboards.groups.available[n].id&&(t=parseInt(t)+parseInt(proboards.groups.available[n].members));var a=t,o=this.check_num_recipients(1,this.applied_effects.separate,a);return 0!=o&&(this.out_of_range_error("You do not have permission to start a conversation with more than "+o+" members at once. We have switched your setting to send separate conversations to each member instead."),this.applied_effects.separate=1,$("#"+this.options.form_id+"_separate_input").val(1),this.update_magic_sentence()),!0},check_num_recipients:function(e,t,i){return void 0===i&&(i=this.get_num_recipients(e)),i>this.lower_limit&&0==e&&!proboards.data("can_mass_pm")?this.lower_limit:i>this.higher_limit&&!t||i>this.higher_limit&&!proboards.data("can_mass_pm")?this.higher_limit:0},get_num_recipients:function(e){var t=0;if(void 0===e&&(e=this.applied_effects.group),1==e)for(var i=proboards.groups.getSelected(proboards.data("form_id")),n=0;n<i.length;n++)for(var a=0;a<proboards.groups.available.length;a++)i[n]==proboards.groups.available[a].id&&(t=parseInt(t)+parseInt(proboards.groups.available[a].members));else t=void 0===proboards.search.user_search?""==$("#"+this.options.form_id+"_recipients_input").val()?0:$("#"+this.options.form_id+"_recipients_input").val().split(",").length:proboards.search.user_search[proboards.search.user_search_index].selectlist("getNumSelected");return t}}}),$.extend(proboards,{permissions:{selection:function(e){var t=$.extend({name:"permissions",values:{},action:"perform this action",include_owner:!1},e);void 0!==t.everyone_text&&""!==t.everyone_text||(t.everyone_text="Who can "+t.action+"..."),void 0!==t.self_text&&""!==t.self_text||(t.self_text=t.include_owner),t.everyone_text=proboards.escape_html(t.everyone_text),t.self_text=proboards.escape_html(t.self_text),t.everyone_text=t.everyone_text.replace(/\[b\]/g,"<b>").replace(/\[\/b\]/g,"</b>");$.unique_id();for(var n=$('<table class="permissions fieldset group-unique"><tr class="level-select"><td class="label">'+t.everyone_text+'</td><td class="field"><select name="'+t.name+'_level"><option value="0" selected="selected">Everyone</option><option value="1">Members &amp; Staff</option><option value="2">Staff</option><option value="3">Custom</option></select></td></tr>'+(t.include_owner?'<tr class="include-owner-select"><td class="label">'+t.self_text+'</td><td class="field"><input name="'+t.name+'_include_owner" type="checkbox" value="1" /></td></tr>':"")+'<tr class="rank-select"><td class="label">Only members with the minimum rank:</td><td class="field"><select name="'+t.name+'_include_rank"><option value="0" selected="selected">- Optional -</option></select></td></tr><tr class="include-groups"><td class="label">And members in the groups:</td><td class="field"><input type="hidden" name="'+t.name+'_include_groups"></span><span class="trimmable-list"></span><a href="#">Add Group</a></td></tr><tr class="exclude-groups"><td class="label">Except members in the groups:</td><td class="field"><input type="hidden" name="'+t.name+'_exclude_groups"></span><span class="trimmable-list"></span><a href="#">Add Group</a></td></tr></table>'),i=proboards.data("rank_list"),a=$('select[name="'+t.name+'_include_rank"]',n),o=0;o<i.length;++o)a.append($("<option></option>").val(i[o].value).html(i[o].label));$('select[name="'+t.name+'_level"]',n).val(t.values.level),$('select[name="'+t.name+'_include_rank"]',n).val(t.values.include_rank),$('input[name="'+t.name+'_include_groups"]',n).val(t.values.include_groups),$('input[name="'+t.name+'_exclude_groups"]',n).val(t.values.exclude_groups),t.include_owner&&t.values.include_owner&&$('input[name="'+t.name+'_include_owner"]',n).attr("checked","checked"),$(".level-select select",n).change(function(){var e=parseInt($(".level-select select",n).val()),t=1<e?"show":"hide",i=2<e?"show":"hide";$(".rank-select",n)[i](),e<3&&$(".rank-select select").val("0"),$(".include-groups",n)[t](),$(".include-owner-select",n)[t]()}).change();var r=function(){var e=$(this).parent().find(".trimmable-list"),t=$(this).parent().find("input");proboards.trimmable_list({options:proboards.data("group_list"),selected:t.arrayValue(),container:e,labelTextType:"html",onChange:function(e){t.arrayValue(e)}})};return $(".include-groups .field > a, .exclude-groups .field > a",n).click(function(e){e.preventDefault();var t=$(this).parent().find("input"),i=this;proboards.select_dialog({title:"Select Groups",options:proboards.data("group_list"),selected:t.arrayValue(),labelTextType:"html",onComplete:function(e){t.arrayValue(e),r.apply(i)}})}).each(r),n}}}),proboards.plugin={_plugins:{},_keys:{},key_type:{USER:1,SUPER_USER:2,THREAD:3,POST:4,CONVERSATION:5,MESSAGE:6,SUPER_FORUM:7},status:{ERROR_REQUEST_TIMEOUT:1,ERROR_INVALID_RESPONSE:2,ERROR_KEY_LENGTH:16,ERROR_KEY_PERMISSION:32,ERROR_KEY_INVALID_DATA:64},get:function(e){return void 0===proboards.plugin._plugins[e]?null:proboards.plugin._plugins[e]},key:function(e){return void 0===proboards.plugin._keys[e]?null:proboards.plugin._keys[e]},_add_data:function(e){if("object"==typeof e)for(_key in e)if(e.hasOwnProperty(_key)){var t=e[_key];proboards.plugin.keys.init([_key,t.type]);var i=[];if(t.values)for(var n=0;n<t.values.length;++n)i.push([_key,t.values[n][0],JSON.parse(t.values[n][1])]);var a=[];t.permissions&&a.push([_key,t.permissions]),proboards.plugin.keys.init_values.apply(this,i),proboards.plugin.keys.init_permissions.apply(this,a)}},keys:{data:{},permissions:{},queue:{},queue_callbacks:{},ajax_wait:100,ajax_timeout:null,ajax:function(){clearTimeout(proboards.plugin.keys.ajax_timeout);var a=$.extend({},proboards.plugin.keys.queue_callbacks);proboards.ajax({url:proboards.route("plugin_key_set"),data:{data:proboards.plugin.keys.queue},success:function(e){for(var t in e.status)for(var i in e.status[t]){var n=e.status[t][i];proboards.plugin._keys[t].type==proboards.plugin.key_type.SUPER_FORUM?"object"==typeof a&&"object"==typeof a[t]?(n.success&&"function"==typeof a[t].success&&a[t].success(n),n.error&&"function"==typeof a[t].error&&a[t].error(n),"function"==typeof a[t].complete&&a[t].complete(n)):n.error&&proboards.error(n.message+"<br /><br /><i>Error Code: "+n.code+"</i><br /><i>Key: "+t+"</i><br /><i>Object Id: "+i+"</i>"):"object"==typeof a&&"object"==typeof a[t]&&"object"==typeof a[t][i]?(n.success&&"function"==typeof a[t][i].success&&a[t][i].success(n),n.error&&"function"==typeof a[t][i].error&&a[t][i].error(n),"function"==typeof a[t][i].complete&&a[t][i].complete(n)):n.error&&proboards.error(n.message+"<br /><br /><i>Error Code: "+n.code+"</i><br /><i>Key: "+t+"</i><br /><i>Object Id: "+i+"</i>")}}}),proboards.plugin.keys.queue={},proboards.plugin.keys.queue_callbacks={}},page_object_id:function(e){var t=0,i=proboards.data("page")||{};return e==proboards.plugin.key_type.USER||e==proboards.plugin.key_type.SUPER_USER?t=proboards.data("user").id:e==proboards.plugin.key_type.THREAD&&void 0!==i.thread?t=i.thread.id:e==proboards.plugin.key_type.POST&&void 0!==i.thread?t=listManager.prototype.getItemId($(".item.post:first")):e==proboards.plugin.key_type.CONVERSATION&&void 0!==i.conversation?t=i.conversation.id:e==proboards.plugin.key_type.MESSAGE&&void 0!==i.conversation&&(t=listManager.prototype.getItemId($(".item.message:first"))),t},init:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1];proboards.plugin._keys[t]=function(g,v){return{type:v,get:function(e){var t=this.type===proboards.plugin.key_type.SUPER_FORUM;if(void 0!==e||t||(e=proboards.plugin.keys.page_object_id(this.type)),!1!==this.can_read(e))return t?proboards.plugin.keys.data[g]:proboards.plugin.keys.data[g][e];var i=proboards.plugin.status.ERROR_KEY_PERMISSION;console.error("ProBoards plugin error: You do not have permission to read from this key. (Error Code: "+i+"; Key: "+g+")")},set:function(e,t,i){console.warn("Warning: Use of the 'proboards.plugin.key().set()' method is deprecated. Please update the plugin to use the 'pb.plugin.key().set()' method in order to avoid any conflicts. More info can be found at http://www.proboards.com/developer/js.");var n={set:1},a=void 0,o=void 0,r=function(e){var t={complete:!0,error:!0,success:!0};if(!$.isPlainObject(e))return!1;for(var i in e)if(e.hasOwnProperty(i)&&(!t[i]||"function"!=typeof e[i]))return!1;return!0};switch(arguments.length){case 1:o=e;break;case 2:$.isNumeric(e)?r(t)?(o=e,$.extend(n,t)):(a=e,o=t):(o=e,r(t)&&$.extend(n,t));break;case 3:a=e,o=t,r(i)&&$.extend(n,i);break;default:return proboards.error("Invalid number of arguments passed to method set().")}return void 0!==a&&(n.object_id=a),n.value=o,proboards.plugin.key(g).set_new(n)},set_new:function(i){v!=proboards.plugin.key_type.SUPER_FORUM&&void 0===i.object_id&&(i.object_id=proboards.plugin.keys.page_object_id(v));var e=function(e,t){return!(t<("object"==typeof e?JSON.stringify(e).length:e.length))},t=function(e){"function"==typeof i.error?i.error(e):proboards.error(e.message+"<br /><br /><i>Error Code: "+e.code+"</i><br /><i>Key: "+g+"</i><br /><i>Object Id: "+i.object_id+"</i>"),"function"==typeof i.complete&&i.complete(e)},n=void 0,a={},o=/^-?(\d+)$/,r=/boolean|number|string/,s=proboards.plugin.keys.data[g][i.object_id],l=proboards.plugin.keys.permissions[g][i.object_id],c=proboards.data("plugin_max_key_length"),d={message:"Plugin key length exceeded.<br>(Limit: "+c+" bytes)",code:proboards.plugin.status.ERROR_KEY_LENGTH},u={message:"You must supply a value to this function.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA},p={message:"You do not have permission to write to this key.",code:proboards.plugin.status.ERROR_KEY_PERMISSION};if(v==proboards.plugin.key_type.SUPER_FORUM&&(s=proboards.plugin.keys.data[g],l=proboards.plugin.keys.permissions[g],d={message:"Plugin key length exceeded.<br>(Limit: "+(c=proboards.data("plugin_max_super_forum_key_length"))+" bytes)<br><br>Super Forum Key: "+g,code:proboards.plugin.status.ERROR_KEY_LENGTH}),void 0!==l&&!l[1])return t(p);if(void 0!==i.append){if(!r.test(typeof s)&&void 0!==s||!r.test(typeof i.value))return t({message:"You can only use append with strings or numbers.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0===i.value)return t(u);void 0!==s&&(s=s.toString().concat(i.value)),a={append:1}}else if(void 0!==i.prepend){if(!r.test(typeof s)&&void 0!==s||!r.test(typeof i.value))return t({message:"You can only use append with strings or numbers.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0===i.value)return t(u);void 0!==s&&(s=i.value.toString().concat(s)),a={prepend:1}}else if(void 0!==i.increment){if(!o.test(s)&&void 0!==s)return t({message:"You can only increment a number.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});void 0!==s&&(s=void 0!==i.value?(parseInt(s)+parseInt(i.value)).toString():(parseInt(s)+1).toString()),a={increment:1}}else if(void 0!==i.decrement){if(!o.test(s)&&void 0!==s)return t({message:"You can only decrement a number.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});void 0!==s&&(s=void 0!==i.value?(parseInt(s)-parseInt(i.value)).toString():(parseInt(s)-1).toString()),a={decrement:1}}else if(void 0!==i.push){if(!$.isArray(s)&&void 0!==s)return t({message:"You can only push onto an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0!==i.value){if(void 0!==s){if((h=s.slice()).push(i.value),!e(h,c))return t(d);s=h}else s=i.value;a={push:1}}else{if(void 0===i.values)return t(u);if(!$.isArray(i.values))return t({message:"You must supply an array to the values option.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0!==s){var h=s.slice();if($.each(i.values,function(e,t){h.push(t)}),!e(h,c))return t(d);s=h}a={push:1,values:JSON.stringify(i.values)}}}else if(void 0!==i.pop){if(!$.isArray(s)&&void 0!==s)return t({message:"You can only pop off of an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0===s||0<s.length)if(o.test(i.num_items)){var f=[];if(void 0!==s)for(var m=0;m<i.num_items&&0!=s.length;m++)f.push(s.pop());n=f,a={pop:1,num_items:i.num_items}}else n=void 0!==s?s.pop():[],a={pop:1};else n=null,a={pop:1}}else if(void 0!==i.shift){if(!$.isArray(s)&&void 0!==s)return t({message:"You can only shift off of an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0===s||0<s.length)if(o.test(i.num_items)){f=[];if(void 0!==s)for(m=0;m<i.num_items&&0!=s.length;m++)f.push(s.shift());n=f,a={shift:1,num_items:i.num_items}}else n=void 0!==s?s.shift():[],a={shift:1};else n=null,a={shift:1}}else if(void 0!==i.unshift){if(!$.isArray(s)&&void 0!==s)return t({message:"You can only unshift onto an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0!==i.value){if(void 0!==s){if((h=s.slice()).unshift(i.value),!e(h,c))return t(d);s=h}a={unshift:1}}else{if(void 0===i.values)return t(u);if(!$.isArray(i.values))return t({message:"You must supply an array to the values option.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if(void 0!==s){h=s.slice();if($.each(i.values,function(e,t){h.unshift(t)}),!e(h,c))return t(d);s=h}a={unshift:1,values:JSON.stringify(i.values)}}}else{if(void 0===i.value)return t(u);s=i.value}return void 0===s||e(s,c)?(a=$.extend({value:JSON.stringify(i.value)},a),v==proboards.plugin.key_type.SUPER_FORUM?proboards.plugin.keys.data[g]=s:(void 0!==s&&(proboards.plugin.keys.data[g][i.object_id]=s),a=$.extend({object_id:i.object_id},a)),void 0===proboards.plugin.keys.queue[g]&&(proboards.plugin.keys.queue[g]=[]),proboards.plugin.keys.queue[g].push(a),clearTimeout(proboards.plugin.keys.ajax_timeout),proboards.plugin.keys.ajax_timeout=setTimeout(proboards.plugin.keys.ajax,proboards.plugin.keys.ajax_wait),$(["complete","success","error"]).each(function(e,t){"function"==typeof i[t]&&("object"!=typeof proboards.plugin.keys.queue_callbacks[g]&&(proboards.plugin.keys.queue_callbacks[g]={}),v==proboards.plugin.key_type.SUPER_FORUM?proboards.plugin.keys.queue_callbacks[g][t]=i[t]:("object"!=typeof proboards.plugin.keys.queue_callbacks[g][i.object_id]&&(proboards.plugin.keys.queue_callbacks[g][i.object_id]={}),proboards.plugin.keys.queue_callbacks[g][i.object_id][t]=i[t]))}),void 0===n||n):t(d)},set_on:function(n,a,o){if(void 0===o&&(v==proboards.plugin.key_type.SUPER_FORUM?(o=a,a=0):(o=a,a=void 0)),o.length>proboards.data("plugin_max_key_length"))return!1;var e=function(){var e=$(".form_"+n);if(!e.length)return!1;var t=$('input[name="_plugin_keys"]',e),i={};return t.length?i=JSON.parse(t.val()):t=$('<input type="hidden" name="_plugin_keys" />').appendTo(e),void 0===i[g]&&(i[g]=[]),i[g].push({object_id:a,value:JSON.stringify(o)}),t.val(JSON.stringify(i)),!0};return $.isReady?e():($(document).ready(e),!0)},can_write:function(e){if(v==proboards.plugin.key_type.SUPER_FORUM){if(void 0===proboards.plugin.keys.permissions[g])return;return!!proboards.plugin.keys.permissions[g][1]}if(void 0===e&&(e=proboards.data("user").id),void 0!==proboards.plugin.keys.permissions[g]&&void 0!==proboards.plugin.keys.permissions[g][e])return!!proboards.plugin.keys.permissions[g][e][1]},can_read:function(e){if(v==proboards.plugin.key_type.SUPER_FORUM){if(void 0===proboards.plugin.keys.permissions[g])return;return!!proboards.plugin.keys.permissions[g][0]}if(void 0===e&&(e=proboards.data("user").id),void 0!==proboards.plugin.keys.permissions[g]&&void 0!==proboards.plugin.keys.permissions[g][e])return!!proboards.plugin.keys.permissions[g][e][0]}}}(t,i),void 0===proboards.plugin.keys.permissions[t]&&(proboards.plugin.keys.permissions[t]={}),void 0===proboards.plugin.keys.data[t]&&(proboards.plugin.keys.data[t]={})}},init_values:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1],n=arguments[e][2];void 0===proboards.plugin.keys.data[t]&&proboards.plugin.keys.init([t,0]),void 0===n?proboards.plugin.keys.data[t]=i:proboards.plugin.keys.data[t][i]=n}},init_permissions:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1];for(id in void 0===proboards.plugin.keys.data[t]&&proboards.plugin.keys.init([t,0]),i)i.hasOwnProperty(id)&&(proboards.plugin.keys.permissions[t][id]=i[id])}}},settings:{fields:{"structure-title":{render:function(e){return $('<div class="headings" />').append($("<h4 />").text(e.text))},value:function(e){return""}},"structure-boldtext":{render:function(e){return $("<span></span>").text(e.text)},value:function(e){return""}},"structure-plaintext":{render:function(e){return $("<pre></pre>").text(e.text)},value:function(e){return""}},field:{render:function(e,t){var i=null,n=null,a=$('<span><div class="warning-message hide"></div></span>'),o=$('<input type="text" />').val(t);return"number"===e.validation?(i=function(e){return!!e.match(/^\-{0,1}[0-9]*\.{0,1}[0-9]*$/)},n="be a valid number"):"alphanumeric"===e.validation?(i=function(e){return!!e.match(/^[a-z0-9]*$/i)},n="consist of letters and numbers only"):"email"===e.validation?(i=function(e){return!(""!==e&&!e.match(/^[A-Za-z0-9\_\-\.\+]+\@[A-Za-z0-9\-\_]+\.[A-Za-z0-9\-\.]+$/))},n="be a valid email address"):"url"===e.validation&&(i=function(e){return!(""!==e&&!e.match(/^https?\:\/\/(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*$/i))},n="be a valid URL"),null!==i&&o.bind("change blur",function(e){var t=$(this).parent().find(".warning-message");i($(this).val())?t.hide():(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.text("Value must "+n+"."),t.show(),$(this).focus())}),a.append(o),a},value:function(e){return $("input",e).val()}},textarea:{render:function(e,t){return $("<textarea></textarea>").val(t)},value:function(e){return $("textarea",e).val()}},codebox:{render:function(e,t){var i=$("<textarea></textarea>").val(t);return setTimeout(function(){proboards.code_editor({textarea:i,mode:e.mode,height:300,onChange:function(){$(i).trigger("change"),i.data("editor").getValue().length<=1&&i.data("editor").save()}})},1),$('<div class="container" />').append(i)},value:function(e){return $(".CodeMirror",e).data("editor").getValue()}},color:{render:function(e,t){var i=$('<span><input type="text" /></span>');return $("input",i).val(t).colorPickMe({update:function(){$(this).trigger("keyup"),proboards.unsaved_changes=1}}),i},value:function(e){return $("input",e).val()}},selection:{render:function(e,t){var i=$("<span></span>"),n=void 0!==t,a={};if($.isArray(t))for(var o=0;o<t.length;++o)a[t[o]]=!0;else n&&(a[t]=!0);switch(e.displaytype){case"select":var r=$("<select></select>");if(1==e.multipleanswers)r.attr("multiple","multiple").addClass("multiple");else if(!n){var s=function(){$("option:first",this).remove(),$(this).unbind("change",s)};r.append($('<option value="">- Make Selection -</option>')).change(s)}for(var l=0;l<e.options.length;++l){var c=$("<option></option>");c.text(e.options[l].option),c.val(e.options[l].value),a[e.options[l].value]&&c.attr("selected","selected"),r.append(c)}i.append(r),1==e.multipleanswers&&i.append('<br /><span class="disclaimer">Click &amp; drag or Ctrl+Click to select.</span>');break;case"check":var d=$("<ul></ul>"),u=function(){};if(1!=e.multipleanswers){var p=null;u=function(){$(this).is(":checked")?($(p).removeAttr("checked"),p=this):p=null}}for(l=0;l<e.options.length;++l){var h=$.unique_id("check"),f=$("<li></li>"),m=$("<label></label>").attr("for",h).text(e.options[l].option),g=$('<input type="checkbox" />').attr("id",h).val(e.options[l].value).change(u);a[e.options[l].value]&&g.attr("checked","checked").change(),f.append(g).append(m),d.append(f)}i.append(d);break;case"radio":d=$("<ul></ul>");var v=$.unique_id("radiogroup");for(l=0;l<e.options.length;++l){h=$.unique_id("radio"),f=$("<li></li>"),m=$("<label></label>").attr("for",h).text(e.options[l].option);var b=$('<input type="radio" />').attr("name",v).attr("id",h).val(e.options[l].value);a[e.options[l].value]&&b.attr("checked","checked"),f.append(b).append(m),d.append(f)}i.append(d)}return i},value:function(e,t){var i="";switch(t.displaytype){case"select":i=$("select",e).val()||[];break;case"check":1==t.multipleanswers?(i=[],$("input:checked",e).each(function(){i.push($(this).val())})):i=$("input:checked",e).val();break;case"radio":i=1==t.multipleanswers?[$("input:checked",e).val()]:$("input:checked",e).val()}return i}},sortable:{render:function(e,t){var i=$("<span></span>"),n=$("<ul />");$.isArray(t)||(t=[]),$.isArray(e.items)||(e.items=[]);for(var a={},o=[],r={},s=0;s<t.length;++s)a[t[s].value]=!0,o.push(t[s]);for(var l=0;l<e.items.length;++l){var c=e.items[l];a[(r[c.value]=c).value]||(o.push({value:c.value,checked:0}),a[c.value]=!0)}if(1==e.checkboxes&&""!=e.checkbox_label){var d=$('<span class="info" />').text(e.checkbox_label);i.append(d)}for(var u=0;u<o.length;++u){var p=r[o[u].value];if(void 0!==p){var h=$("<li />"),f=$.unique_id("check");if(1==e.checkboxes){var m=$('<input type="checkbox" value="1" />').attr("id",f);1==o[u].checked&&m.attr("checked","checked"),h.append(m)}h.append($("<label />").text(p.label).attr("for",f)),h.append($('<div class="plugin-drag drag-handle" title="click and drag to reorder" />')),h.data("value",p.value),n.append(h)}}return n.sortable({items:"> li",handle:".drag-handle",placeholder:"placeholder",axis:"y",start:function(e,t){$("> li.placeholder",n).height(t.item.outerHeight()+"px")},stop:function(e,t){n.setEven(),$(this).trigger("change")}}),n.setEven(),i.append(n),i},value:function(e,t){var i=[];return $("ul.ui-sortable > li",e).each(function(){i.push({value:$(this).data("value"),checked:$("input:checked",this).length?1:0})}),i}},search:{render:function(e,t){var i,n=$.unique_id(e.id),a=$("<div></div>"),o=$("<ul></ul>"),r=$('<input type="hidden" />').attr("id",n).val(t),s=$('<a href="#" class="change"></a>').click(function(e){e.preventDefault()}),l=parseInt(e.multipleanswers),c=function(e,t){proboards.trimmable_list({container:o,options:e,selected:t,onChange:function(e){d(e),o.setEven()}}),o.setEven(),l||$("ul.trim-list",o).children().removeClass("even")},d=function(e){r.arrayValue(e).change()};switch(e.searchtype){case"categories":null==i&&(i="category");case"groups":null==i&&(i="group");case"pages":null==i&&(i="page");case"themes":null==i&&(i="theme");case"boards":null==i&&(i="board"),s.text("Add "+proboards.capitalize(i)).click(function(){proboards.select_dialog({title:""!=e.label?e.label:proboards.capitalize(i)+" Selection",options:proboards.data(i+"_list"),selected:r.val().split(","),max:1==e.multipleanswers?0:1,onComplete:function(e){d(e),c(proboards.data(i+"_list"),e)}})}),c(proboards.data(i+"_list"),t);break;case"members":i="members";var u=[],p=l?"Add Members":"Add Member";if(s.text(p).click(function(){proboards.member.select_dialog({selected:""!=r.val()?r.val().split(","):[],max:l?0:1,autofocus:1,onComplete:function(e){u=[];for(var t=[],i=0;i<e.length;++i)u.push({value:""+e[i].id,label:e[i].name}),t.push(""+e[i].id);d(t),c(u,t)}})}),c(u,t),null!=t&&""!=t){s.hide(),o.append("<li>Loading...</li>");var h=$.isArray(t)?t:[t];d(h),proboards.ajax({url:proboards.data("user_data_url"),data:{ids:h},success:function(e){u=[];for(var t=0;t<e.users.length;++t){var i=e.users[t],n=""+i.id;u.push({value:n,label:$("<span></span>").html(i.name).text()})}s.show(),o.html(""),c(u,h)}})}}return a.append(r).append(o).append(s)},value:function(e,t,i,n){var a=$("input",e).val();return a=""!=a?a.split(","):[],i.defaults?"members"==t.searchtype&&-1!=$.inArrayLoose("1",a)?(1<a.length&&n.unsaveable.push(t.label||t.id),["1"]):(a.length&&n.unsaveable.push(t.label||t.id),[]):a}},images:{render:function(e,t){for(var i=proboards.data("image_modules"),n=$.unique_id(e.id),a=[],o={},r=0;r<e.images.length;++r)o[e.images[r].name]=e.images[r].value;for(r=0;r<i.length;++r)null!=o[i[r].name]&&a.push({label:"<span>"+proboards.escape_html(o[i[r].name])+'</span><img src="'+proboards.escape_html(i[r].src)+'" />',value:i[r].id});if($.isArray(t)&&t.length){i=proboards.data("image_modules");var s={};for(r=0;r<i.length;++r)s[i[r].name]=i[r].id;for(var l=0;l<t.length;++l)t[l]=s[t[l]]}var c=$("<div></div>"),d=$("<ul></ul>"),u=$('<input type="hidden" />').attr("id",n).val(t),p=$('<a href="#" class="change"></a>').click(function(e){e.preventDefault()}),h=function(e,t){proboards.trimmable_list({container:d,options:e,selected:t,labelTextType:"html",onChange:function(e){f(e),d.setEven()}}),d.setEven()},f=function(e){u.val(e.join(",")).change()};return p.text("Add Images").click(function(){proboards.select_dialog({title:"Image Selection",id:"image-select-dialog",options:a,selected:u.val().split(","),max:1==e.multipleanswers?0:1,labelTextType:"html",onComplete:function(e){f(e),h(a,e)}})}),h(a,t),c.append(u).append(d).append(p)},value:function(e){var t=$("input",e).val();if(""==t)return[];for(var i=proboards.data("image_modules"),n={},a=0;a<i.length;++a)n[i[a].id]=i[a].name;for(var o=t.split(","),r=0;r<o.length;++r)o[r]=n[o[r]];return o}},autoform:{render:function(u,e){for(var t={},i="",n=0;n<u.fields.length;++n)t[u.fields[n].type]=!0;for(var a in t)i+=" has-"+a;var o=$("<div></div>"),p=$('<ul class="autoform '+proboards.escape_html(u.format)+proboards.escape_html(i)+'"></ul>'),h="input,select,textarea,.ui-sortable",f="change keyup",m=function(){"vertical"==u.format?($("> li > ul > li",p).removeClass("even"),$("> li > ul",p).each(function(){$("> li:even",this).addClass("even")})):($("> li",p).removeClass("even"),$("> li:even",p).addClass("even"))},r=function(e){var t=!1;return $(h,e).each(function(){var e=$(this).val();void 0!==e&&""!==e&&null!==e&&(t=!0)}),t},g=function(){var e=$(this).closest(".autoform-block");if($(this).is(".ui-sortable")||r(e)){e.removeClass("new");var t=$(h,e);t.unbind(f,g),t.bind(f,v),s("new"),m()}},v=function(){var e=$(this).closest(".autoform-block");$(this).is(".ui-sortable")||r(e)||e.find(".delete-button .delete").trigger("click",[!0])},s=function(e,t){void 0===t&&(t={});var n=$('<li class="autoform-block '+e+'"></li>'),i=$('<ul class="plugin-ui"></ul>');"vertical"==u.format&&i.append('<li class="headings"></li>');for(var a=0;a<u.fields.length;++a){var o=null,r=null,s=u.fields[a],l=$("<li></li>").attr("class","autoform-"+s.type+" plugin-settings-"+s.type);if(void 0!==s.description&&""!=s.description&&(r=$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",proboards.escape_html(s.description)).tipTip()),void 0!==s.label&&""!=s.label&&(o=$("<label></label>").text(s.label)),o&&l.append(o),"headings"!=e){var c=proboards.plugin.settings.fields[s.type].render(s,t[s.id]);l.append(c)}r&&l.append(r),i.append(l)}i.append('<li class="drag-button"><div class="plugin-drag drag-handle" title="click and drag to reorder"></div></li>');var d=$('<div class="delete"><span></span></div>');if(i.append($('<li class="delete-button"></li>').append(d)),d.click(function(e,t){var i=function(){e.preventDefault(),n.fadeOut(500,function(){n.remove(),m()})};u.promptOnDelete&&!t?proboards.confirm("Are you sure you wish to remove this entry?",i):i()}),"new"==e)$(h,i).bind(f,g),n.fadeIn(500);else if("headings"!=e){$(h,i).bind(f,v)}n.append(i),"horizontal"==u.format&&n.append('<div class="clear"></div>'),p.append(n)};if("horizontal"==u.format&&(s("headings"),m()),$.isArray(e))for(var l=0;l<e.length;++l)s("prepopulated",e[l]);return s("new"),m(),o.append(p),o.append('<div class="clear"></div>'),p.sortable({items:"> li:not(.new,.headings)",handle:".drag-handle",axis:"horizontal"==u.format?"y":void 0,stop:function(e,t){m(),o.trigger("change")}}),o},value:function(e,a,o,r){var s=[];return $("ul.autoform > li:not(.new,.headings)",e).each(function(){for(var e={},t=$("> ul > li:not(.headings)",this),i=0;i<a.fields.length;++i){var n=a.fields[i];null!=n.id&&""!=n.id&&(e[n.id]=proboards.plugin.settings.fields[n.type].value(t.eq(i),n,o,r))}s.push(e)}),s}},permissions:{render:function(e,t){var i,n;void 0===t&&(t=proboards.data("default-plugin-key-write-permissions"));var a=e.access;t.read&&(i=t.read),t.write&&(n=t.write),t.level&&(i=n=t);var o=$("<div></div>");if("both"==a&&o.append('<div class="space-bot"><strong>Read permissions:</strong></div>'),"read"==a||"both"==a){var r=proboards.permissions.selection({values:i,include_owner:"Users can read their own content:",action:"read everything",everyone_text:e.everyone,self_text:e.self});$(".level-select select",r).change(),r.addClass("read-permissions"),o.append(r)}if("both"==a&&o.append('<div class="space-top space-bot"><strong>Write permissions:</strong></div>'),"write"==a||"both"==a){var s=proboards.permissions.selection({values:n,include_owner:"Users can write to their own content:",action:"write to everything",everyone_text:e.everyone,self_text:e.self});$(".level-select select",s).change(),s.addClass("write-permissions"),o.append(s)}return o},value:function(e,i,n,a){var t={},o=function(e){return e.match(/_(.+?)$/)[1]},r=!1;function s(e){var t={};return $("select",e).each(function(){var e=o($(this).attr("name"));n.defaults&&"include_rank"==e?parseInt($(this).val())&&(r=!0):t[e]=$(this).val()}),$('input[type="hidden"]',e).each(function(){var e=o($(this).attr("name"));!n.defaults||"include_groups"!=e&&"exclude_groups"!=e?t[e]=$(this).arrayValue():""!=$(this).val()&&(r=!0)}),$('input[type="checkbox"]',e).each(function(){t[o($(this).attr("name"))]=$(this).attr("checked")?1:0}),r&&a.unsaveable.push(i.label||i.name),t}var l=$(".read-permissions",e),c=$(".write-permissions",e);return l.length&&(t.read=s(l)),c.length&&(t.write=s(c)),t}}},render:function(e){var t=$.extend({settings:[],data:{},preview:!1,container:null,tabContainer:null},e);null==t.container&&(t.container=$("<div></div>")),null==t.tabContainer&&(t.tabContainer=$("<div></div>")),"object"==typeof t.data&&null!==t.data||(t.data={}),"object"==typeof t.settings&&null!==t.settings||(t.settings={}),void 0===t.settings.pages&&(t.settings.pages=[]),t.tabContainer.html("");for(var i=$('<ul class="ui-helper-clearfix tabs"></ul>'),n=0;n<t.settings.pages.length;++n){var a=t.settings.pages[n],o=$("<li></li>"),r=$("<a></a>").attr("href","#settings-ui-page-"+n).text(a.name).data("tab-num",n);o.append(r),i.append(o)}t.tabContainer.append(i),t.container.html("");for(n=0;n<t.settings.pages.length;++n){a=t.settings.pages[n];for(var s=$('<ul class="settings-ui-page plugin-ui" id="settings-ui-page-'+n+'"></ul>'),l=0;l<a.fields.length;++l){var c=a.fields[l],d=$("<li></li>").addClass("plugin-settings-"+c.type);void 0!==c.format&&d.addClass(c.format),c.required&&(d.addClass("required"),d.append(proboards.help_icon("The author has indicated that this setting might be required for the plugin to function properly.").addClass("required-help"))),void 0!==c.id&&""!=c.id&&d.attr("id","plugin-settings-"+c.id);var u=null,p=null;void 0!==c.description&&""!=c.description&&(u=$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",proboards.escape_html(c.description)).tipTip()),void 0!==c.label&&""!=c.label&&(p=$("<label></label>").text(c.label));var h=proboards.plugin.settings.fields[c.type].render(c,t.data[c.id]);p&&d.append(p),d.append(h),u&&d.append(u),s.append(d)}var f=1;$("> li",s).each(function(){$(this).hasClass("plugin-settings-structure-title")?f=0:$(this).hasClass("plugin-settings-autoform")&&(f=1),$(this).hasClass("plugin-settings-structure-boldtext")||$(this).hasClass("plugin-settings-structure-plaintext")?f||$(this).addClass("even"):(f=1-f)&&$(this).addClass("even")}),t.container.append(s)}r=$("<a></a>").attr("href","#settings-ui-page-about").text("About");i.prepend($("<li></li>").append(r));s=$('<div class="settings-ui-page" id="settings-ui-page-about"><span class="plugin-name">'+proboards.escape_html(proboards.data("plugin").name)+'</span><span class="plugin-version">Version '+proboards.escape_html(proboards.data("plugin").version)+" "+proboards.escape_html(proboards.data("plugin").stage)+'</span><p class="plugin-description mono">'+proboards.nl2br(proboards.nbsp(proboards.escape_html(proboards.data("plugin").description)))+"</p></div>");for(var m=proboards.data("components"),g=[],v=0;v<m.length;++v)"board"!=m[v].type&&"category"!=m[v].type||g.push(m[v]);if(g.length){s.append('<div class="headings item"><h4>Plugin Components</div><p class="plugin-components-about">The following are components for your plugin.  You may select boards or categories to apply these components to.</p>');var b=proboards.data("component_map");"object"==typeof b&&null!==b||(b={}),componentContainer=$('<ul class="components" />');for(v=0;v<g.length;++v){var _=g[v],y=b[_.id],A=$('<li class="component"><h5>'+proboards.escape_html(_.name)+"</h5><p>"+proboards.nl2br(proboards.escape_html(_.description))+'</p><div class="selection"><label>Select a '+proboards.escape_html(_.type)+"</label></div></li>");$(".selection",A).append(proboards.plugin.settings.fields.search.render({id:"component-"+v,multipleanswers:1,searchtype:"board"==_.type?"boards":"categories"},$.isArray(y)?y:[])),componentContainer.append(A)}componentContainer.setEven(),s.append(componentContainer)}return t.container.append(s),$.tabinate({tabs:i,content:t.container,useHash:t.useTabHash,callback:proboards.plugin.settings.resizeAutoforms}),$(document).ready(proboards.plugin.settings.resizeAutoforms),{settings:t.container,tabs:t.tabContainer}},export:function(e){var t=$.extend({settings:[],data:{},defaults:!1,container:null},e),i={},n={};null==t.container&&(t.container=$("<div></div>"));for(var a={unsaveable:[]},o=0;o<t.settings.pages.length;++o)for(var r=t.settings.pages[o],s=($("#settings-ui-page-"+o,t.container),0);s<r.fields.length;++s){var l=r.fields[s];if(null!=l.id&&""!=l.id){var c=$("#plugin-settings-"+l.id),d=proboards.plugin.settings.fields[l.type].value(c,l,t,a);i[l.id]=d}}var u=0;return $("#settings-ui-page-about .component").each(function(){var e=proboards.data("components")[u++].id,t=$("input",this).val();t=""!=t?t.split(","):[],n[e]=t}),{settings_data:i,component_map:n,message:a}},requirement_warning:function(e){if(null===e&&(e={}),parseInt(e.disabled)){if(e.missing_fields){var t=1!=e.missing_fields;$("#plugin-requirement-warning").html("This plugin may not be enabled until the required field"+(t?"s":"")+" "+e.missing_field_names+" "+(t?"are":"is")+" filled out and saved.")}else $("#plugin-requirement-warning").html('This plugin is currently disabled.  <a href="#" id="plugin-enable">click here</a> to enable it.'),$("#plugin-enable").click(function(e){e.preventDefault(),proboards.ajax({url:proboards.data("plugins_disable_url"),data:{disable:0,plugin_id:proboards.data("plugin_id")},success:function(){$("#plugin-requirement-warning").slideUp()}})});$("#plugin-requirement-warning").show()}else $("#plugin-requirement-warning").hide()},size_warning:function(e){e=parseInt(e||0);var t=parseInt(proboards.data("plugin_size_max"));t<e?($("#plugin-size-warning").html("This plugin exceeds the maximum export size ("+$.byteSize(proboards.data("plugin_size_max"))+") by "+$.byteSize(e-t)+".  Images or components must be removed before the plugin can be exported."),$("#plugin-size-warning").show(),$("#export-container input").prop("disabled",!0)):($("#plugin-size-warning").hide(),$("#export-container input").prop("disabled",!1))},resizeAutoforms:function(){$(".autoform.horizontal").each(function(){var e=15;$("> li > ul:first > li",this).each(function(){e+=$(this).outerWidth(!0)}),$(this).width(e)})}}};var postManager={init:function(e){"object"!=typeof e&&(e={}),this.options=e,this.selected_posts=[],this.runAll(0),this.content=$(".lm-content-"+this.options.id);return this},cache:{posts:{},threads:{}},runAll:function(e){$(".post-options-checkbox input.ui-manager-checkbox").removeAttr("checked"),this.add_options_menus(e),this.bind_like_buttons(),this.bind_quote_buttons(),this.bind_edit_buttons(),this.bind_block_buttons(),this.bind_reply_buttons(),this.bind_video_overlays()},get_selection:function(){var e,t=this.selected_posts,i=[],n=this.selected_posts.length;for(e=0;e<n;e++)i[e]=$("#post-"+t[e]);return{ids:t,length:n,items:i}},select_items:function(e){var t=this;e.each(function(){var e=parseInt($(this).attr("id").match(/\d+/)[0]);-1==$.inArray(e,t.selected_posts)&&(t.selected_posts.push(e),$(".post-"+e+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#post-"+e+"-options").addClass("state-selected"))})},unselect_items:function(e){var i=this;e.each(function(){var e=parseInt($(this).attr("id").match(/\d+/)[0]),t=$.inArray(e,i.selected_posts);-1!=t&&(i.selected_posts.splice(t,1),$(".post-"+e+"-checkbox input.ui-manager-checkbox").attr("checked",!1),$("#post-"+e+"-options").removeClass("state-selected"))})},unselect_all:function(){this.unselect_items($(".item",this.content))},select_all:function(){this.select_items($(".item",this.content))},add_options_menus:function(e){var u=this;$(".post-options").show().css("display","inline-block"),$(".options_menu").each(function(){var c=/(^| )post-([0-9]+)($| )/.test($(this).attr("class"))?RegExp.$2:"",d=/(^| )user-([0-9]+)($| )/.test($(this).attr("class"))?RegExp.$2:"";e&&$("#post-"+c+"-options").empty();$(this).selectMenu({container:"#post-"+c+"-options",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){var e;for(e in $(this).next().addClass("open-menu"),$(".post-"+c+"-checkbox input.ui-manager-checkbox").attr("checked")?($(this).menu("hideOption",c+"-selectPost"),$(this).menu("showOption",c+"-deselectPost")):($(this).menu("showOption",c+"-selectPost"),$(this).menu("hideOption",c+"-deselectPost")),proboards.data("ips")||proboards.data("ips",[]),proboards.data("ips"))$(".ip-"+e).removeClass("banable"),$(".ip-"+e).addClass("banned");proboards.data("is_search_results")&&($(this).menu("hideOption",c+"-moveAllAbove"),$(this).menu("hideOption",c+"-moveAllBelow"))},onClose:function(){$("#post-"+c+"-options").removeClass("open-menu")},menuOptions:{click:function(e,t){var i=$(t.item).attr("class");if(i==c+"-selectPost")u.select_items($("#post-"+c));else if(i==c+"-deselectPost")u.unselect_items($("#post-"+c));else if(i==c+"-giveGift"||i==c+"-sendMessage")window.location=$(e.target).attr("href");else if("badge_action"==i)proboards.badge.action.dialog($(t.item).data("badge-id"),$(t.item).data("user-id"));else if(i==c+"-deletePost"){for(var n=[],a=0;a<u.selected_posts.length;a++)u.selected_posts[a]==c||0!=$("#post-"+u.selected_posts[a]).length&&!$("#post-"+u.selected_posts[a]).hasClass("deletable")||n.push(u.selected_posts[a]);n.push(c),proboards.confirm_dialog("posts","delete",n,function(e){void 0!==e.redirect_url?window.location=e.redirect_url:(u.unselect_all(),listMan.research(),listMan.selected_ids=[],listMan.selected_items={})})}else if(i==c+"-moveOnlyThis"||i==c+"-moveAllAbove"||i==c+"-moveAllBelow"||i==c+"-moveAllSelected"){n=[];i==c+"-moveAllSelected"?(n=u.selected_posts,-1==$.inArray(parseInt(c),u.selected_posts)&&n.push(c)):n.push(c);var o=document.createElement("form");o.setAttribute("method","POST"),o.setAttribute("action",proboards.route("move_post"));var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","selection"),r.setAttribute("value",n.join(",")),o.appendChild(r);var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","type"),s.setAttribute("value",i.split("-")[1]),o.appendChild(s),document.body.appendChild(o),o.submit()}else if(i==c+"-reportPost")0==$("#report-post-container").length?($(document.body).append('<div id="report-post-container"></div>'),proboards.dialog("report-post-container",{autoOpen:!1,width:620,height:"auto",title:"Report Post",buttons:[{text:"Report Post",class:"report-post-button",click:function(e){return proboards.loading(!0),proboards.ajax({url:proboards.route("create_report",{post_id:c}),data:{reason:$("#report-post-container textarea").val()},dataType:"json",success:function(e){$("#report-post-container").html(e.message),$(".report-post-button").hide(),$(".close-window-button").show()},complete:function(){proboards.loading(!1)}}),!1}},{text:"Close Window",class:"close-window-button hide",click:function(e){return $("#report-post-container").dialog("close"),!1}}]})):$("#report-post-container").dialog("option","buttons",[{text:"Report Post",class:"report-post-button",click:function(e){return proboards.loading(!0),proboards.ajax({url:proboards.route("create_report",{post_id:c}),data:{reason:$("#report-post-container textarea").val()},dataType:"json",success:function(e){$("#report-post-container").html(e.message),$(".report-post-button").hide(),$(".close-window-button").show()},complete:function(){proboards.loading(!1)}}),!1}},{text:"Close Window",class:"close-window-button hide",click:function(e){return $("#report-post-container").dialog("close"),!1}}]),proboards.ajax({url:proboards.route("report_post",{post_id:c}),dataType:"html",success:function(e){$("#report-post-container").html(e),$("#report-post-container").dialog("open"),$("#report-post-container textarea").focus(),$("#report-post-container textarea").bind("click keyup paste",function(){var e=$("#report-post-container textarea").val(),t=e.length;256<=t&&($("#report-post-container textarea").val(e.substr(0,256)),t=256)})}});else if(i==c+"-warn"||i==c+"-disable")window.location=proboards.route("edit_user_admin",{user_id:d});else if("searchIP actionable ui-menu-has-sub-menu"==i)proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this post: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(t.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();else if(i==c+"-ipBan")proboards.member.ban({id:d,checked:["ip"],from:{type:"post",id:c},success:function(){$("."+i).hide()}});else if(i==c+"-deletePostsByIp"){$("#confirm-container").length||$(document.body).append('<div id="confirm-container"></div>'),proboards.dialog("confirm-container",{autoOpen:!1,width:620,title:"Delete Posts by IP"}),proboards.ajax({url:proboards.route("posts_delete_by_ip_dialog"),dataType:"html",data:{post_id:c},success:function(e){$("#confirm-container").html(e),$("#confirm-container form").bind("validated",function(e){return e.preventDefault(),proboards.ajax({url:$("#confirm-container form").attr("action"),data:$("#confirm-container form").serialize(),dataType:"json",success:function(e){""==e.redirect_url?(listMan.research(),$("#confirm-container").dialog("close")):window.location=e.redirect_url},error:function(e){listMan.research(),proboards.error(e.error),$("#confirm-container").dialog("close")}}),!1}),$("#confirm-container").dialog("open")}})}else if(i==c+"-ipSearchMembers")window.location=proboards.route("members")+"?view=ip&type=post&id="+c;else if(i==c+"-ipSearchThreads")window.location=proboards.route("threads_by_ip",{type:"post",id:c});else if(i==c+"-ipSearchPosts")window.location=proboards.route("posts_by_ip",{type:"post",id:c});else if(i==c+"-ipSearchLogs")window.location=proboards.route("security_logs_by_ip",{type:"post",id:c});else if(i==c+"-postLink"){0==$("#copy-link-container").length&&($(document.body).append('<div id="copy-link-container"></div>'),proboards.dialog("copy-link-container",{autoOpen:!1,width:375,height:150,title:"Link to Post",open:function(){$("#thread-post-link",this).focus().select()}}));var l=document.location.protocol+"//"+document.location.host;$("#copy-link-container").html('<form><div>Link to this post in this thread:</div><div><input size="60" type="text" name="thread_post_link" id="thread-post-link" value="'+l+proboards.route("view_post_in_thread",{post_id:c})+'" /></div><div>Link to only this post:</div><div><input size="60" type="text" name="post_link" id="post-link" value="'+l+proboards.route("permalink",{post_id:c})+'" /></div></form>'),$("#copy-link-container").dialog("open")}else i==c+"-toTop"&&window.scroll({top:0,behavior:"smooth"});return e.preventDefault(),!1}}})});for(var t=u.selected_posts.length;t--;){var i=u.selected_posts[t];$(".post-"+i+"-checkbox input.ui-manager-checkbox").prop("checked",!0),$("#post-"+i+"-options").addClass("state-selected")}},display_like:function(e){var t=$("#post-"+e),i=(parseInt($(".likes-total",t).text()),$(".likes-button",t));proboards.item("post",e)&&proboards.item("post",e).liked?i.show().addClass("liked"):i.show().removeClass("liked")},bind_like_buttons:function(){var i=this;$(".likes-button").each(function(){var t=$(this).data("id")?$(this).data("id"):listManager.prototype.getItemId(this);$(this).unbind("click"),$(this).bind("click",function(){return proboards.ajax({url:proboards.route("post_like"),data:{post_id:t},dataType:"json",success:function(e){$("#post-"+t+" .likes").html(e.likes_html),proboards.item("post",t).liked=e.liked,i.display_like(t),$(".ui-search .search-input").autosearch("clearCache")}}),!1})}),$(".likes").on("click",".view-likes",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".post").attr("id").match(/\d+/)[0],i=$("#"+t+"-tooltip");0==i.length&&(i=$('<div id="'+t+'-tooltip"></div>'),$(document.body).append(i),i.dialog({autoOpen:!1,width:460,maxHeight:600,title:"Members Who Like This",close:function(){$(".control-bar",i).remove()}})),proboards.ajax({url:proboards.route("likes_of_post"),data:{post_id:t},dataType:"html",success:function(e){i.html(e),i.dialog("open"),553<i.height()&&(i.dialog("option","height",600),i.dialog("close"),i.dialog("open"))}})})},bind_quote_buttons:function(){var l=this;$(".quote-button").each(function(){if(!$(this).hasClass("guest-prompt")){var o=$(this).closest(".post").attr("id").match(/\d+/)[0],r="";void 0!==proboards.data("thread_id")?r=proboards.data("thread_id"):proboards.item("post",o).thread_id;var s=proboards.data("page_url")||"";$(this).bind("click",function(e){var t=$(this).attr("href")+s,i=l.summary_setup(t);if(0!=l.selected_posts.length){for(var n="",a=0;a<l.selected_posts.length;a++)l.selected_posts[a]!=o&&(n+=l.selected_posts[a],n+=",");n+=o,i.setAttribute("action",proboards.route("quote_posts",{post_ids:n,thread_id:r}))}return $(i).targetBlank(e),i.submit(),!1})}})},bind_block_buttons:function(){$(".display-blocked-post.button").each(function(){var t=$(this).closest(".post.item");$(this).unbind("click"),$(this).bind("click",function(e){return e.preventDefault(),t.removeClass("blocked"),$(".blocked",t).hide(),$(".unblocked",t).show(),!1})})},bind_edit_buttons:function(){var n=this;$(".edit-button").each(function(){$(this).click(function(e){var t=$(this).attr("href"),i=n.summary_setup(t);return $(i).targetBlank(e),i.submit(),!1})})},bind_reply_buttons:function(){var a=this;$(".reply-button").each(function(){$(this).click(function(e){if(!$(this).hasClass("guest-prompt")){var t=proboards.route("new_post",{thread_id:proboards.data("thread_id")}),i=a.summary_setup(t);if(0<a.selected_posts.length){var n=a.selected_posts.join(",");i.setAttribute("action",proboards.route("quote_posts",{post_ids:n,thread_id:proboards.data("thread_id")}))}return $(i).targetBlank(e),i.submit(),!1}})})},bind_video_overlays:function(){$(".video-embed-container").each(function(e){var t=$(this).find("video"),i=$(this).find(".embed-video-overlay"),n=$(this).find(".embed-video-overlay-play");Modernizr.video?(n.css("top",i.height()/2-n.height()/2),i.add(t).on("click",function(){var e=t.get(0);e.paused?(e.play(),e.paused||i.hide()):(e.pause(),e.paused&&i.show())})):i.hide()})}};$.extend(proboards,{postManager:postManager}),$.extend(proboards.postManager,proboards.shared.manager),$.extend(proboards,{postPageManager:{init:function(e){var t=this;"object"!=typeof e&&(e={}),this.options=e,this.fields={},this.applied_effects={};var i="#"+this.options.form_id;if(this.fields.$bookmark=$(i+"_bookmark_input"),this.fields.$labels=$(i+"_labels_input"),this.fields.$announcement=$(i+"_announcement_input"),this.fields.$sticky=$(i+"_sticky_input"),this.fields.$lock=$(i+"_lock_input"),this.fields.$falling=$(i+"_falling_input"),this.fields.$announcement_expires=$(i+"_announcement_expires_input"),this.fields.$announcement_expires_date=$(i+"_announcement_expires_date_input"),this.fields.$announcement_expires_time=$(i+"_announcement_expires_time_input"),this.fields.$post_as=$(i+"_post_as_input"),1==this.fields.$bookmark.val()&&(this.applied_effects.bookmark=1),1==this.fields.$announcement.val()&&(this.applied_effects.announcement=1),1==this.fields.$sticky.val()&&(this.applied_effects.sticky=1),1==this.fields.$lock.val()&&(this.applied_effects.lock=1),1==this.fields.$falling.val()&&(this.applied_effects.falling=1),""!=this.fields.$announcement_expires.val()&&""!=this.fields.$announcement_expires_date.val()&&""!=this.fields.$announcement_expires_time.val()&&(this.applied_effects.announcement_expires=this.fields.$announcement_expires_date.val()+" at "+this.fields.$announcement_expires_time.val()),this.fields.$announcement_expires_date.on("localeconvert",function(){t.applied_effects.announcement_expires=t.fields.$announcement_expires_date.val()+" at "+t.fields.$announcement_expires_time.val(),t.update_magic_sentence()}),this.labels={},this.applied_effects.labels=0,this.fields.$labels.length&&""!=this.fields.$labels.val()){var n=this.fields.$labels.val().split(",");this.applied_effects.labels=n.length;for(var a=0;a<n.length;a++)this.labels[n[a]]=!0}this.create_options_menu(),this.bind_date_stuff(),this.bind_poll_stuff(),this.bind_attachment_stuff(),proboards.postManager.bind_video_overlays(),this.update_magic_sentence(),proboards.embedded.processEmbedded()},create_options_menu:function(){var l=this,e=$(".posting-options-list");$(".post-options").css("display","inline-block"),$("li.label",e).each(function(){var e=$(this),t=e.clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)});$(".posting-options-list").selectMenu({container:"#posting-options-container",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$("#posting-options-container").addClass("open-menu"),$("li.label",e).each(function(){var e=$(this),t=e.hasClass("label-add"),i=e.data("id");l.labels[i]?t?e.hide():e.show():t?e.show():e.hide()}),1==l.applied_effects.bookmark?($(this).menu("showOption","unbookmark"),$(this).menu("hideOption","bookmark")):($(this).menu("showOption","bookmark"),$(this).menu("hideOption","unbookmark")),1==l.applied_effects.lock?($(this).menu("showOption","unlock"),$(this).menu("hideOption","lock")):($(this).menu("showOption","lock"),$(this).menu("hideOption","unlock")),1==l.applied_effects.sticky?($(this).menu("showOption","unsticky"),$(this).menu("hideOption","sticky")):($(this).menu("showOption","sticky"),$(this).menu("hideOption","unsticky")),1==l.applied_effects.announcement?($(this).menu("showOption","unannounce"),$(this).menu("hideOption","announce")):($(this).menu("showOption","announce"),$(this).menu("hideOption","unannounce")),1==l.applied_effects.falling?($(this).menu("showOption","disable_falling"),$(this).menu("hideOption","enable_falling")):($(this).menu("showOption","enable_falling"),$(this).menu("hideOption","disable_falling"))},onClose:function(){$("#posting-options-container").removeClass("open-menu")},menuOptions:{click:function(e,t){var i=$(t.item),n=i.attr("class");if("bookmark"==n)l.applied_effects.bookmark=1,l.fields.$bookmark.val(1);else if("unbookmark"==n)l.applied_effects.bookmark=0,l.fields.$bookmark.val("");else if(-1!=n.indexOf("label")&&-1==n.indexOf("ui-menu-has-sub-menu")){var a=i.data("id"),o=i.hasClass("label-add")?"add":"remove";l.labels[a]="add"==o,"add"==o?l.applied_effects.labels++:l.applied_effects.labels--;var r=[];for(var s in l.labels)l.labels.hasOwnProperty(s)&&l.labels[s]&&r.push(s);l.fields.$labels.val(r.join(","))}else if("announce"==n)$("#announcement-options").hasClass("ui-dialog")||(proboards.dialog("announcement-options",{title:"Announcement Options",autoOpen:!1,width:255,height:240,buttons:[{text:"Make Announcement",click:function(){var e=$('input[name="temp_announcement_expires"]',this),t=$('input[name="temp_announcement_expires_time"]',this);if($("#announcement_show_date_and_time").attr("checked"))if($.check_date_format(e.val(),proboards.data("locale_settings")))if($.check_time_format(t.val())){var i=new Date;e.datepicker("getDate").setSeconds(t.timepicker("getTime"))<i?proboards.alert("Announcements cannot expire in the past."):(l.fields.$announcement.val(1),l.applied_effects.announcement=1,l.fields.$announcement_expires.val(1),l.fields.$announcement_expires_date.val(e.val()),l.fields.$announcement_expires_time.val(t.val()),l.applied_effects.announcement_expires=e.val().toString()+" at "+t.val().toString(),$(this).dialog("close"))}else $.inputError(t,"You must enter a valid time.");else $.inputError(e,"You must enter a valid date.");else l.fields.$announcement.val(1),l.applied_effects.announcement=1,l.fields.$announcement_expires.val(""),l.fields.$announcement_expires_date.val(""),l.fields.$announcement_expires_time.val(""),l.applied_effects.announcement_expires=0,$(this).dialog("close")}}],close:function(){l.update_magic_sentence(),$.clearInputError()}}),proboards.dialogEnter($("#announcement-options"))),$("#announcement-options").dialog("open"),$('#announcement-options input[name="temp_announcement_expires"]').datepicker("option","minDate",new Date);else if("unannounce"==n)l.fields.$announcement.val(""),l.applied_effects.announcement=0,l.fields.$announcement_expires.val(""),l.fields.$announcement_expires_date.val(""),l.fields.$announcement_expires_time.val(""),l.applied_effects.announcement_expires=0,$("#announcement-options").dialog("close");else if("sticky"==n)l.applied_effects.sticky=1,l.fields.$sticky.val(1);else if("unsticky"==n)l.applied_effects.sticky=0,l.fields.$sticky.val("");else if("enable_falling"==n)l.applied_effects.falling=1,l.fields.$falling.val(1);else if("disable_falling"==n)l.applied_effects.falling=0,l.fields.$falling.val("");else if("lock"==n)l.applied_effects.lock=1,l.fields.$lock.val(1);else if("unlock"==n)l.applied_effects.lock=0,l.fields.$lock.val("");else if("postAs"==n.substr(0,6)){s=n.substr(7);l.applied_effects.postingAs=0!=s?i.text():"",l.fields.$post_as.val(s)}l.update_magic_sentence()}}})},update_magic_sentence:function(){var e="",t=[],i=0;if("post"==this.options.type)e="The thread in which you are posting will be ";else{if("thread"!=this.options.type)return;e="This thread will be "}for(var n in this.applied_effects)this.applied_effects[n]&&"attachment"!=n&&"pollQuestion"!=n&&"announcement_expires"!=n&&i++;if(1<i){if(this.applied_effects.bookmark&&t.push("bookmarked"),this.applied_effects.labels){var a=1<this.applied_effects.labels?" labels":" label";t.push("labeled with "+this.applied_effects.labels+a)}if(this.applied_effects.announcement&&t.push("announced"+(this.applied_effects.announcement_expires?" (expires on "+this.applied_effects.announcement_expires+")":"")),this.applied_effects.sticky&&t.push("stickied"),this.applied_effects.lock&&t.push("locked"),this.applied_effects.falling&&t.push("falling"),this.applied_effects.poll){var o="displayed with a poll";void 0!==this.applied_effects.pollQuestion&&""!=this.applied_effects.pollQuestion&&(o+=' asking "'+this.applied_effects.pollQuestion+'"'),t.push(o)}for(var r in this.applied_effects.event&&t.push("added to the calendar"),void 0!==this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&t.push("posted under the user "+this.applied_effects.postingAs),t)r==i-1&&(e+="and "),e+=t[r],e+=r==i-1?".":2<i?", ":" "}else if(0<i)if(this.applied_effects.bookmark)e+="bookmarked.";else if(this.applied_effects.labels){a=1<this.applied_effects.labels?" labels.":" label.";e+="labeled with "+this.applied_effects.labels+a}else this.applied_effects.announcement?e+="announced"+(this.applied_effects.announcement_expires?" (expires on "+this.applied_effects.announcement_expires+")":"")+".":this.applied_effects.sticky?e+="stickied.":this.applied_effects.lock?e+="locked.":this.applied_effects.falling?e+="falling.":this.applied_effects.poll?(e+="displayed with a poll",void 0!==this.applied_effects.pollQuestion&&""!=this.applied_effects.pollQuestion?e+=' asking "'+this.applied_effects.pollQuestion+'"':e+="."):this.applied_effects.event?e+="added to the calendar.":void 0!==this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&(e+="posted under the user "+this.applied_effects.postingAs+".");else"post"==this.options.type?e="The thread in which you are posting has no effects applied to it.":"thread"==this.options.type&&(e="This thread has no effects applied to it.");0<this.applied_effects.attachment&&(e+=" &nbsp;This post will be displayed with attachments."),$("#magic-sentence").html(e)},bind_date_stuff:function(){var a=this;if("thread"==this.options.type){var e=$('<div id="event-dialog" class="event"></div>');$("#"+a.options.form_id).append(e),e.html(proboards.data("event_dialog_html")),e.dialog({autoOpen:!1,width:500,height:"auto",open:function(){proboards.data("start_date",$("#"+a.options.form_id+"_start_date_input").val()),proboards.data("start_time",$("#"+a.options.form_id+"_start_time_input").val()),proboards.data("end_date",$("#"+a.options.form_id+"_end_date_input").val()),proboards.data("end_time",$("#"+a.options.form_id+"_end_time_input").val()),proboards.data("all_day_event",$("#"+a.options.form_id+"_all_day_event_input").prop("checked")?1:0)},close:function(){var e=$("#"+a.options.form_id+"_start_time_input"),t=$("#"+a.options.form_id+"_end_time_input"),i=$("#"+a.options.form_id+"_all_day_event_input");if(proboards.data("start_date")&&($("#"+a.options.form_id+"_start_date_input").val(proboards.data("start_date")),e.val(proboards.data("start_time")),$("#"+a.options.form_id+"_end_date_input").val(proboards.data("end_date")),t.val(proboards.data("end_time")),i.prop("checked",proboards.data("all_day_event")).trigger("change")),i.prop("checked")){var n=24==proboards.data("locale_settings").input_time_format?"00:00":"12:00 AM";e.val(n),t.val(n)}a.update_magic_sentence(),$.clearInputError()}}),$("#"+a.options.form_id).append(e.parent()),$("#"+a.options.form_id+"_all_day_event_input").bind("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change");var t=$("#event-button"),i=proboards.data("locale_settings").input_date_placeholder;void 0!==$("#"+a.options.form_id+"_start_date_input").val()&&""!=$("#"+a.options.form_id+"_start_date_input").val()&&$("#"+a.options.form_id+"_start_date_input").val()!=i?(a.applied_effects.event=1,a.update_magic_sentence(),t.html("Edit Event"),t.bind("click",function(e){e.preventDefault(),a.editEvent()})):(t.bind("click",function(e){e.preventDefault(),a.addEvent()}),a._bind_auto_populate()),$("input, select",e).on("keydown",function(e){return e.which!=Keys.enter||(a.saveEvent(),!1)})}},addEvent:function(){var e=this,t=$("#event-dialog"),i=!1;$("html").is(".ie8")&&(i=!0),t.dialog("option","title","Add Event"),t.dialog("option","buttons",[{text:"Add Event",click:function(){e.saveEvent()}}]),i?t.dialog("open"):(t.dialog("widget").css("visibility","hidden"),t.dialog("open"),t.dialog("widget").css("visibility","visible"))},editEvent:function(){var e=this,t=$("#event-dialog"),i=!1;$("html").is(".ie8")&&(i=!0),t.dialog("option","title","Edit Event"),t.dialog("option","buttons",[{text:"Save Event",click:function(){e.saveEvent()}},{text:"Remove Event",click:function(){e.removeEvent()}}]),i?t.dialog("open"):(t.dialog("widget").css("visibility","hidden"),t.dialog("open"),t.dialog("widget").css("visibility","visible"))},saveEvent:function(){for(var t=this,e=$("#event-dialog"),i=$("#event-button"),n=$("#"+t.options.form_id).data().form,a=n.options.validations,o=!0,r=0;r<a.length;r++)if(!n.validate(a[r],"has_event")){o=!1;break}if(o){$("#"+t.options.form_id+"_has_event_input").val(1),t.applied_effects.event=1;var s=["start_date","start_time","end_date","end_time","all_day_event"];for(r=0;r<s.length;r++)proboards.data(s[r],null);e.dialog("close"),i.html($("#event-button").html().replace(/Add/,"Edit")),i.unbind("click"),i.bind("click",function(e){e.preventDefault(),t.editEvent()})}},removeEvent:function(){var t=this,e=$("#event-dialog"),i=$("#event-button");$("#"+t.options.form_id+"_has_event_input").val(""),t.applied_effects.event=0,e.dialog("close"),i.html(i.html().replace(/Edit/,"Add")),i.unbind("click").bind("click",function(e){e.preventDefault(),t.addEvent()}),t._bind_auto_populate()},_bind_auto_populate:function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})},bind_poll_stuff:function(){var i=this;if("thread"==this.options.type){var e=$('<div id="poll-dialog" class="poll"></div>');$("#"+i.options.form_id).append(e),e.html(proboards.data("poll_dialog_html"));var t=$("#poll-button");e.dialog({autoOpen:!1,width:460,height:"auto",close:function(){if(proboards.data("poll_question")){$("#"+i.options.form_id+"_poll_question_input").val(proboards.data("poll_question")),$("#"+i.options.form_id+"_poll_max_answers_input").val(proboards.data("poll_max_answers")),$("#"+i.options.form_id+"_poll_expires_on_date_input").val(proboards.data("poll_expires_on")),$("#"+i.options.form_id+"_poll_expires_on_time_input").val(proboards.data("poll_expires_on_time")),$("#"+i.options.form_id+"_poll_view_votes_input").val(proboards.data("poll_view_votes"));var e=proboards.data("poll_answers"),t=0;$('input[name="poll_answers[]"]').each(function(){e[t]?$(this).val(e[t].value):$(this).remove(),t++})}i.update_magic_sentence(),$.clearInputError()}}),$("#"+i.options.form_id).append(e.parent()),proboards.data("current_poll_question")?(i.applied_effects.poll=1,i.applied_effects.pollQuestion=proboards.data("current_poll_question"),i.update_magic_sentence(),t.html("Remove Poll"),t.bind("click",function(e){e.preventDefault(),i.removeOldPoll()})):t.bind("click",function(e){e.preventDefault(),i.addPoll()}),$("input, select",e).on("keydown",function(e){return e.which!=Keys.enter||(i.savePoll(),!1)})}},addPoll:function(){var e=this,t=$("#poll-dialog");t.dialog("option","title","Add Poll"),t.dialog("option","buttons",[{text:"Add Poll",click:function(){e.savePoll()}}]),t.dialog("open"),$("#"+e.options.form_id+"_poll_expires_on_date_input").datepicker("option","minDate",new Date)},editPoll:function(){var e=this,t=$("#poll-dialog");t.dialog("option","title","Edit Poll"),t.dialog("option","buttons",[{text:"Save Poll",click:function(){e.savePoll()}},{text:"Remove Poll",click:function(){e.removePoll()}}]),t.dialog("open")},savePoll:function(){for(var t=this,e=$("#poll-dialog"),i=$("#poll-button"),n=$("#"+t.options.form_id).data().form,a=n.options.validations,o=!0,r=0;r<a.length;r++)if(!n.validate(a[r],"has_poll")){o=!1;break}var s=$("#"+t.options.form_id+"_poll_expires_on_date_input").datepicker("getDate");if(1==o&&s){var l=new Date,c=$("#"+t.options.form_id+"_poll_expires_on_time_input").timepicker("getTime");$("#"+t.options.form_id+"_poll_expires_on_date_input").datepicker("getDate").getTime()/1e3+c<Math.floor(l.getTime()/1e3)&&(o=!1,proboards.alert("Polls cannot expire in the past."))}o&&(proboards.data("poll_question",$("#"+t.options.form_id+"_poll_question_input").val()),proboards.data("poll_answers",$('input[name="poll_answers[]"]').serializeArray()),proboards.data("poll_max_answers",$("#"+t.options.form_id+"_poll_max_answers_input").val()),proboards.data("poll_expires_on",$("#"+t.options.form_id+"_poll_expires_on_date_input").val()),proboards.data("poll_expires_on_time",$("#"+t.options.form_id+"_poll_expires_on_time_input").val()),proboards.data("poll_view_votes",$("#"+t.options.form_id+"_poll_view_votes_input").val()),$("#"+t.options.form_id+"_has_poll_input").val(1),t.applied_effects.poll=1,t.applied_effects.pollQuestion=proboards.escape_html($("#"+t.options.form_id+"_poll_question_input").val()),e.dialog("close"),i.html(i.html().replace(/Add/,"Edit")),i.unbind("click"),i.bind("click",function(e){e.preventDefault(),t.editPoll()}))},removePoll:function(){var t=this,e=$("#poll-dialog"),i=$("#poll-button");e.html(proboards.data("poll_dialog_html")),$("#"+t.options.form_id+"_has_poll_input").val(""),t.applied_effects.poll=0,proboards.data("poll_question",null),e.dialog("close"),i.html(i.html().replace(/Edit/,"Add")),i.unbind("click"),i.bind("click",function(e){e.preventDefault(),t.addPoll()}),$("input, select",e).on("keydown",function(e){return e.which!=Keys.enter||(t.savePoll(),!1)})},removeOldPoll:function(){var t=this,e=$("#poll-button");proboards.confirm("Are you sure you want to remove this poll?",function(){$("#"+t.options.form_id+"_replace_poll_input").val(1),t.applied_effects.poll=0,t.update_magic_sentence(),e.html("Add Poll"),e.unbind("click"),e.bind("click",function(e){e.preventDefault(),t.addPoll()})})},bind_attachment_stuff:function(){var e=this,t=$("#show-attachment"),i=$("#attachment-button");t.dialog({autoOpen:!1,width:700,height:"auto",open:function(){$(this).dialog("option","title",i.html())},close:function(){0<$(".template-download").length?(i.html(i.html().replace(/Add/,"Edit").replace(/Attachment$/,"Attachments")),e.applied_effects.attachment=1):(i.html(i.html().replace(/Edit/,"Add").replace(/Attachments/,"Attachment")),e.applied_effects.attachment=0),e.update_magic_sentence()},buttons:[{text:"Done",click:function(){$(this).dialog("close")}}]}),$("#"+e.options.form_id).append(t.parent()),pbFileUpload.init({selWysiwygInput:"#"+e.options.form_id+"_message_input",onDragEnter:function(){$("#attachment-button").trigger("click")}},{maxNumberOfFiles:proboards.data("max_attachments_per_post"),maxFileSize:1024*proboards.data("max_attachment_size")*1024,updateLimits:function(){var e=$(this).data("fileupload"),t=e.options.getNumberOfFiles(),i=e.options.maxNumberOfFiles;$("#limits").html(t+"/"+i+" files"),i<=t?$(".fileinput-button").on("click.max",function(e){return proboards.error("You have reached the attachment limit for this post."),!1}):$(".fileinput-button").off("click.max")}});var n=$("#"+e.options.form_id),a=!0,o=[];n.on("submit",function(){a=!1}),$("#fileupload").on("fileuploaddone",function(e,t){o.push(t.result[0].id),window.onbeforeunload=function(){if(a)return proboards.ajax({url:proboards.route("cleanup_attachment"),data:{ids:o},async:!1}),"If you leave the page now, your attachment(s) will be discarded."}}),0<$(".template-download").length&&(i.html("Edit Attachments"),e.applied_effects.attachment=1,e.update_magic_sentence()),i.bind("click",function(e){e.preventDefault(),t.dialog("open")})}}}),$.extend(proboards,{search:{options:{searchComplete:0,searching:0,limit:0},create_user_search:function(a){var n=this;void 0===a.searchBox&&(a.searchBox=1),void 0===this.user_search_index?this.user_search_index=0:++this.user_search_index;var e="user-search-"+this.user_search_index,t="";if(a.searchBox){var i=proboards.data("default_avatar");i||(i=proboards.image_path()+"/defaultavatar.png");var o=['name="user_search_box_input"'];o.push('class="'+e+'-input user-search-input search-input"'),o.push('maxlength="'+proboards.data("search-query-max")+'"'),o.push('placeholder="Enter a username"'),a.autofocus&&o.push("autofocus"),null!=a.tabindex&&o.push('tabindex="'+parseInt(a.tabindex)+'"'),t='<div class="'+e+'-box user-search-box micro-profile"><div class="avatar"><div class="avatar-wrapper avatar_size_small avatar-1"><img src="'+i+'" alt="Default Avatar" /></div></div><div class="info"><input '+o.join(" ")+'/><span class="search-filters-button"><span class="icon"></span></span></div></div>'}a.container.append('<div id="'+e+'" class="user-search"><ul class="'+e+'-selection user-search-selection ui-helper-clearfix"></ul>'+t+"</div>");var r=$("#"+e),s=$("."+e+"-box"),l=$("."+e+"-selection"),c="";""!==a.displayboxId&&(c='id="'+a.displayboxId+'" ');var d=$("<div "+c+'class="'+e+'-displaybox user-search-displaybox ui-corner-bottom container"><div class="ui-helper-clearfix center control-bar"><ul class="'+e+'-pagination user-search-pagination"></ul></div><div class="'+e+'-pagination-note user-search-pagination-note"><span class="note small">Note: there is a maximum of 200 pages of results.</span></div><div class="'+e+'-filterlist user-search-filterlist"></div><ul class="'+e+'-selectlist user-search-selectlist"></ul></div>').appendTo(document.body),u=$("."+e+"-pagination"),p=$("."+e+"-pagination-note"),h=$("."+e+"-input"),f=$("."+e+"-selectlist");$("."+e+"-filterlist");void 0===this.user_search&&(this.user_search=[]),this.user_search[this.user_search_index]=f,d.displaybox({friendlies:[h,l,"#ui-datepicker-div"],position:{my:"left top",at:"left bottom",of:s,collision:"flipfit"}});var m=!1;u.pagination({maxSlots:5,change:function(e,t){m=!0,h.autosearch("setData","page",t.page)}}),f.selectlist({selectedItemFormat:"{item.partial}",listedItemFormat:"{item.partial}",blockListFormat:'<div class="block_list_options">{item.block_list_options}</div>',blockListOptionFormat:'<span class="block-list-{item.option_id}"><input id="{item.form_id}_block-list-{item.item_id}_input_{item.option_id}" type="checkbox"{item.option_checked} name="block-list-{item.item_id}_{item.option_id}" value="1" /><label for="{item.form_id}_block-list-{item.item_id}_input_{item.option_id}">{item.option_label}</label><br /></span>',blockListOptions:["Hide this member's posts.","Do not let this member start new conversations with me.","Do not let this member follow me or my activities.","Block notifications from this member."],pendingListItemFormat:'<div class="pending_list_options"><input type="button" class="accept" id="{item.item_id}" value="Accept" /><input type="button" class="reject" id="{item.item_id}" value="Reject" /></div>',maxSelectable:proboards.data("selectableLimit")?proboards.data("selectableLimit"):0,maxSelectableApplies:!!proboards.data("selectableLimits"),selection:l,select:function(e,t){a.limit&&t.ids.length>=a.limit&&s.hide();var i=$.merge([],t.ids);a.currentUser&&i.push(a.currentUser),h.autosearch("setDataLite","excluded_ids[]",i),"function"==typeof a.focusDone&&a.limit&&a.focusDone.call(this,null),"function"!=typeof a.change||n.nochange||a.change.call(this,null,{type:"select",ids:t.ids,itemData:t.itemData}),"function"!=typeof a.newChange||f.selectlist("option","loadingExisting")||a.newChange.call(this,null,{type:"select",ids:t.ids,itemData:t.itemData}),d.hide(),$(this).selectlist("refresh",[]),u.pagination("refresh",{total:0}),h.autosearch("setDataLite","q","").val(""),d.is(":visible")&&h.focus(),a.searchComplete=0,$(".user-search").force_ie7_rerender()},deselect:function(e,t){a.limit&&t.ids.length<a.limit&&s.show();var i=t.ids;a.currentUser&&i.push(a.currentUser),h.autosearch("setDataLite","excluded_ids[]",i),"function"==typeof a.change&&a.change.call(this,null,{type:"deselect",ids:t.ids}),"function"==typeof a.newChange&&a.newChange.call(this,null,{type:"select",ids:t.ids})},getData:function(e,t){var i=$("li:first-child .small",f).html(),n=[];if(null!=i){n.username=i.slice(1,-1);var a=$("li:first-child",f),o=$(a).attr("class").match(/item\-(\d+)/);n.id=o[1]}return n},onCreateItem:function(e){var t=e.find("span.name"),i=e.find("span.name a");i.length&&(t.attr("title",i.attr("title")),t.attr("style",i.attr("style")),t.html(i.html()))},formId:a.formId,checkedHash:a.checkedHash,isPendingList:a.isPendingList,showAdded:0!=a.showAdded,disabledMessage:a.massEmail?"This member cannot be sent emails or has opted out of forum emails.":""});var g=!1,v=(a.currentUser?a.currentUser:new Array,{user_search_box:1});a.showDeletedUsers||(void 0===v.filters&&(v.filters=[]),v.filters.push("deleted:only:0")),1==proboards.data("staff_recipients_only")&&(v.staff_recipients_only=1),a.massEmail&&(v.mass_email=1),a.formId&&(v.block_list=1),h.autosearch({url:proboards.route("user_search"),data:v,ajax:!0,cache:!0,hash:!1,delay:500,minChars:1,up:function(e,t){f.selectlist("previous")},down:function(e,t){f.selectlist("next")},pageUp:function(e,t){u.pagination("gotoPreviousPage")},pageDown:function(e,t){u.pagination("gotoNextPage")},enter:function(e,t){a.searchComplete&&(f.selectlist("select"),h.focus())},search:function(e,t){if(1e3<=t.response.total?p.show():p.hide(),f.selectlist("refresh",t.response.results),u.pagination("refresh",t.response),""==h.val())d.displaybox("hide"),a.searching=0,a.searchComplete=0;else if(h[0]===document.activeElement||g)d.is(":visible")||g||(a.searching=1,d.displaybox("show"));else{var i=!(a.searching=1);$(".close",l).bind("click",function(e){$(this).data("events").click.length<=1&&(i=!0),$(this).unbind(e)});var n=m;setTimeout(function(){var e=f.selectlist("getData");void 0===e.username||void 0===e.id||i||n||e.username!=h.val()&&e.username.charAt(0).toUpperCase()+e.username.slice(1)!=h.val()||f.selectlist("select",e.id)},200)}m=g=!1},afterSearch:function(e,t){a.searching&&(a.searchComplete=1)},tab:function(e,t){d.is(":visible")&&(d.displaybox("hide"),a.searchComplete=0)},escape:function(e,t){d.is(":visible")&&(d.hide(),a.searchComplete=0)}}),a.allowManualInput&&h.autosearch("option","error",function(){if(!h.data("searchError")){var e="Could not connect to the search server.";e+=" "+(1==a.limit?"You may enter a username instead.":"You may enter a comma separated list of usernames instead."),a.eventError?$(document).trigger("proboardsError",[{error:e}]):proboards.error(e),h.autosearch("destroy"),h.unbind(".usersearch"),h.data("searchError",!0)}}),a.currentUser&&h.autosearch("setDataLite","excluded_ids[]",[a.currentUser]),n.nochange=1,f.data("selectlist").apply_selected(a.results,a.showExisting),n.nochange=0,h.bind("focus.usersearch",function(e){""!=h.val()&&h.is(".state-editing:not(.placeholder)")&&!d.is(":visible")&&d.displaybox("show")}).bind("blur.usersearch",function(e){l.bind("click",function(e){$(this).data("events").click.length<=1&&(d.displaybox("hide"),a.searchComplete=0),l.unbind(e)});var t=!1;$(".close",l).bind("click",function(e){l.data("events").click.length<=1&&(g=t=!0),$(".close",l).unbind(e)}),u.bind("click",function(e){m=!0,u.unbind(e)}),setTimeout(function(){var e=f.selectlist("getData");void 0===e.username||void 0===e.id||t||m||e.username.toLowerCase()!=h.val().toLowerCase()||f.selectlist("select",e.id)},200)}),$(".search-filters-button",r).click(function(){$(".search-filters-dialog-"+e).dialog("open")}),$('<div class="search-filters-dialog-'+e+'"></div>').appendTo(document.body).filterlist({filters:[{display:"Post Count",name:"posts",condition_input_options:[["less than","<"],["less than or equal to","<="],["equal to","="],["greater than or equal to",">="],["greater than",">"]],value_input_type:"text",value_input_size:4}],change:function(e,t){0==t.values.length?$(".search-filters-button",r).removeClass("state-active"):$(".search-filters-button",r).addClass("state-active"),h.autosearch("setData","filters",t.values)}}).dialog({autoOpen:!1,title:"User Search Filters",width:"50%"})}}});var SHOUTBOX_SCROLL_NORMAL=0,SHOUTBOX_SCROLL_OVERRIDE=1,SHOUTBOX_SCROLL_CONTEXTUAL=2;if($.extend(proboards,{shoutbox:{init:function(e){this.timeout,this.refreshFrequency=0,this.manualRefreshTimer=0,this.height_adjustment=0,this.lastUpdateTime=e.lastUpdateTime,this.currentTime=(new Date).getTime(),this.newestAt=parseInt(e.newestAt),void 0===this.newestAt&&(this.newestAt=0),this.serverDate=new Date(proboards.data("serverDate")),this.local_time=Date.parse((new Date).toUTCString()),this.server_time=Date.parse(this.serverDate.toUTCString()),this.diff=this.local_time-this.server_time,this.smiles=e.smileyList,this.open_tags={b:0,i:0,u:0,s:0,url:0},this.canPost=$('.shoutbox [name="message"]').length&&$(".shoutbox form").length,this.setup_shoutbox()},setup_shoutbox:function(){var n=this,t=$(".shoutbox form");this.canPost&&($(".shoutbox_post_button").click(function(e){e.preventDefault(),t.submit()}),t.bind("keypress submit",function(e){if("submit"==e.type||"13"==e.which)return n.add_shoutbox(this),!1}),$(".shoutbox_bold").click(function(){n.add_tags(this,"b")}),$(".shoutbox_italic").click(function(){n.add_tags(this,"i")}),$(".shoutbox_underline").click(function(){n.add_tags(this,"u")}),$(".shoutbox_strike").click(function(){n.add_tags(this,"s")}),$(".shoutbox_url").click(function(){n.add_tags(this,"url")}),jQuery.isEmptyObject(this.smiles)?$(".shoutbox_smiley").remove():n.get_smiles()),$(".shoutbox_cancel_button").hide().click(function(e){e.preventDefault(),n.cancel_shout()}),$(".shoutbox").on("click keyup paste",'textarea[name="message"]',function(){var e=$(this).val(),t=e.length;256<=t&&($(this).val(e.substr(0,256)),t=256);var i=$(this).parents(".shoutbox").find(".shoutbox_amount");i.length&&i.html(t)}),$(".shoutbox").on("click keyup paste",'input[name="guest_name"]',function(){var e=$(this).val();30<=e.length&&$(this).val(e.substr(0,30))}),$(".shoutbox_messages").length&&(this.keep_scrolled(this.newestAt,SHOUTBOX_SCROLL_OVERRIDE),$(".shoutbox_refresh_button").on("click",function(e){e.preventDefault();var t=$(".shoutbox_refresh_button");if($(this).is(".active"))n.reload_timer(0),t.removeClass("active"),t.attr("title","Click to Update"),clearTimeout(n.timeout);else{var i=(new Date).getTime();i>n.manualRefreshTimer+1e4?(n.manualRefreshTimer=i,n.update_shoutbox(1,SHOUTBOX_SCROLL_OVERRIDE)):n.timeout=setTimeout(function(){n.update_shoutbox(1,1)},1e4-(i-n.manualRefreshTimer)),t.addClass("active"),t.attr("title","Auto-Updating")}}),this.set_post_events())},set_post_events:function(e){var t=this;e||(e=$(".shoutbox-post")),e.on("mouseover",function(){$(".shoutbox_edit_button, .shoutbox_ban_button",this).removeClass("hidden")}).bind("mouseout",function(){$(".shoutbox_edit_button, .shoutbox_ban_button",this).addClass("hidden")}),e.on("click",".shoutbox_ban_button",function(e){e.preventDefault();var t=$(this).attr("id").split("-"),i=t[1],n=t[3];proboards.member.ban({id:n,from:{type:"shout",id:i},checked:["ip"]})}),e.on("click",".shoutbox_delete_button",function(e){e.preventDefault(),$(this).parents(".shoutbox-post").remove(),t.delete_shoutbox(this)}),e.on("click",".shoutbox_edit_button",function(e){e.preventDefault(),t.edit_shoutbox(this)}),e.on("click",".user-link",function(e){if(e.altKey){var t=$(".shoutbox form textarea");return t.val()==t.attr("placeholder")?t.val($(this).attr("title")):t.replaceSelection($(this).attr("title")),t.focus(),!1}})},add_tags:function(e,t,i){i=i||0;var n,a=$(e).parents(".shoutbox").find('[name="message"]')[0];$(a).focus();var o="["+t+"]",r="[/"+t+"]",s=t,l=this.get_input_selection(a);n=a.value.substr(l.start,l.end-l.start),i?"Enter your reply here..."==a.value.substr(0,24)?a.value=s:a.value=a.value.substr(0,l.start)+s+a.value.substr(l.end,a.value.length):""==n?"Enter your reply here..."==a.value.substr(0,24)?a.value=o+r:a.value=a.value.substr(0,l.start)+o+r+a.value.substr(l.end,a.value.length):a.value=a.value.substr(0,l.start)+o+n+r+a.value.substr(l.end,a.value.length),a.focus()},get_input_selection:function(e){var t,i,n,a,o,r=0,s=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(r=e.selectionStart,s=e.selectionEnd):(i=document.selection.createRange())&&i.parentElement()==e&&(a=e.value.length,t=e.value.replace(/\r\n/g,"\n"),(n=e.createTextRange()).moveToBookmark(i.getBookmark()),(o=e.createTextRange()).collapse(!1),-1<n.compareEndPoints("StartToEnd",o)?r=s=a:(r=-n.moveStart("character",-a),r+=t.slice(0,r).split("\n").length-1,-1<n.compareEndPoints("EndToEnd",o)?s=a:(s=-n.moveEnd("character",-a),s+=t.slice(0,s).split("\n").length-1))),{start:r,end:s}},get_smiles:function(){var o=this;$(".shoutbox").each(function(){for(var e=$(".shoutbox_smiley",this),t="",i=[],n=1;n<o.smiles.length;n+=2)i.push(o.smiles[n]);proboards.preload(i);for(n=0;n<o.smiles.length;n++){var a=o.smiles[n];t+='<li class=" '+a+'"><a><img src="'+o.smiles[++n]+'" alt="'+a+'" title="'+a+'" /></a></li>'}$(this).append('<div class="controls"><ul class="smiley-menu"></ul></div>'),$(".smiley-menu",this).append(t).menu({button:e,position:{my:"left top",at:"left bottom",of:e,collision:"flipfit"},showOn:"click",clickHide:!0,click:function(e,t){var i=$(t.item).attr("class");o.add_tags(this,i,1)}})})},put_smiley:function(){},add_shoutbox:function(e){var t=this,i=$(e).parents(".shoutbox");if(0!=$('[name="message"]',i).val().length){if($(".shoutbox_messages .state-selected",i).length){n=$('[name="message"]',i).val();$('[name="message"]',i).val(""),proboards.ajax({url:proboards.data("shoutbox_edit_url"),data:{id:$(e)[0].className,message:n},dataType:"json",success:function(e){$(".shoutbox_edit_button",i).parents(".shoutbox-post").removeClass("state-selected"),$('input[name="guest_name"]',i).attr("value","Send"),$("form",i).removeClass(),$(".shoutbox_amount",i).html("0"),$(".shoutbox_cancel_button",i).hide(),$(".shoutbox_error",i).html(""),t.update_shoutbox(0,0)}})}else{var n=$('[name="message"]',i).val();$('[name="message"]',i).val(""),$(".shoutbox_error",i).html(""),proboards.ajax({url:proboards.data("shoutbox_add_url"),data:{message:n,guest_name:$('input[name="guest_name"]',i).val()},dataType:"json",success:function(e){$(".shoutbox_amount",i).html("0"),t.update_shoutbox(1,1)},error:function(e){$(".shoutbox_amount",i).html(n.length),$('[name="message"]',i).val(n),proboards.error(e.error),t.update_shoutbox(1,1)}})}return!1}$(".shoutbox_error",i).html("You must enter text")},edit_shoutbox:function(e){var t=$(e).parents(".shoutbox-post").attr("class").match(/shoutbox-post-(\d+)/)[1],i=$(e).parents(".shoutbox");$(".shoutbox_edit_button",i).parents(".shoutbox-post").removeClass("state-selected"),$("form",i).removeClass(),$(e).parents(".shoutbox-post").addClass("state-selected"),$(".shoutbox_cancel_button",i).show(),$('[name="message"]',i).unbind(),$('[name="message"]',i).removeClass("gray"),proboards.ajax({url:proboards.data("shoutbox_message_url"),data:{id:t},dataType:"json",success:function(e){$('[name="message"]',i).val(e.message);var t=$('[name="message"]',i).val();$(".shoutbox_amount",i).html(t.length)}}),$("form",i).addClass(t)},cancel_shout:function(){var e=$(".shoutbox");$(".shoutbox_edit_button",e).parents(".shoutbox-post").removeClass("state-selected"),$('[name="message"]',e).val(""),$(".shoutbox_amount",e).html("0"),$("form",e).removeClass(),$(".shoutbox_cancel_button",e).hide()},delete_shoutbox:function(e){var t=this;proboards.ajax({url:proboards.data("shoutbox_remove_url"),data:{id:$(e).parents(".shoutbox-post").attr("class").match(/shoutbox-post-(\d+)/)[1]},dataType:"json",success:function(e){t.update_shoutbox(0,0)}})},update_shoutbox:function(e,t){var s=this,i=0;e&&$(".shoutbox_messages .shoutbox-post").length&&(i=$(".shoutbox_messages .shoutbox-post:"+(s.newestAt?"first":"last")+"-child").attr("class").match(/shoutbox-post-(\d+)/)[1]),proboards.ajax({url:proboards.data("shoutbox_update_url"),cache:!1,type:"GET",data:{latest_id:i},dataType:"json",ignorePending:!0,success:function(e){var t=$(".shoutbox_messages");if(t.length){var i=$.trim(e.shoutbox_post);if(i)if(s.mark_scrolled(),"incremental"==e.type){var n=0;$("> .shoutbox-post",t).each(function(){n+=$(this).outerHeight(!0)});for(var a=0;a<e.new_ids.length;a++)$(".shoutbox-post-"+e.new_ids[a],t).remove();var o=$(i);t[s.newestAt?"prepend":"append"](o);var r=0;$("> .shoutbox-post",t).each(function(){r+=$(this).outerHeight(!0)}),s.height_adjustment=r-n,s.set_post_events(o)}else t.html(i),s.set_post_events();this.lastUpdateTime=1e3*e.last_updated,s.reload_timer(this.lastUpdateTime),s.keep_scrolled(s.newestAt,SHOUTBOX_SCROLL_CONTEXTUAL),$(".shoutbox").each(function(){if(null!=$("form",this).attr("class")){var e=$("form",this).attr("class");$(".shoutbox-post-"+e,this).addClass("state-selected"),$("form",this).addClass(e)}})}}})},reload_timer:function(e){var t=this;this.currentTime=(new Date).getTime();var i=this.currentTime-(e+this.diff);i<=3e5?(this.refreshFrequency=i<=0?1e3:i<=1e3?2e3:i<=3e3?3e3:i<=6e3?4e3:i<=1e4?5e3:i<=15e3?6e3:i<=21e3?7e3:i<=28e3?8e3:i<=36e3?9e3:i<=45e3?1e4:i<=55e3?11e3:i<=66e3?12e3:i<=78e3?13e3:i<=91e3?14e3:i<=105e3?15e3:i<=12e4?16e3:i<=136e3?17e3:i<=153e3?18e3:i<=171e3?19e3:i<=19e4?2e4:i<=21e4?21e3:i<=231e3?22e3:i<=253e3?23e3:i<=276e3?24e3:25e3,clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.update_shoutbox(1,0)},this.refreshFrequency),$(".shoutbox_refresh_button").hasClass("active")||($(".shoutbox_refresh_button").addClass("active"),$(".shoutbox_refresh_button").attr("title","Auto-Updating"))):(clearTimeout(this.timeout),$(".shoutbox_refresh_button").removeClass("active"),$(".shoutbox_refresh_button").attr("title","Click to Update"))},mark_scrolled:function(){$(".shoutbox_messages").each(function(){var e=$(this),t=this.offsetHeight+this.scrollTop>=this.scrollHeight,i=!1;0==e.scrollTop()&&(i="top"),t&&(i="bottom"),e.data("override",i)})},keep_scrolled:function(a,o){var r=this;$(".shoutbox_messages").each(function(){var e=$(this),t=this.offsetHeight+this.scrollTop>=this.scrollHeight,i=0==e.scrollTop(),n=a?"top":"bottom";o==SHOUTBOX_SCROLL_OVERRIDE||o==SHOUTBOX_SCROLL_CONTEXTUAL&&e.data("override")===n?"bottom"==n?(e.scrollTop(this.scrollHeight),e.animate({scrollTop:this.scrollHeight})):e.scrollTop(0):t?"bottom"==n&&(e.scrollTop(this.scrollHeight),e.animate({scrollTop:this.scrollHeight})):i?"top"==n&&e.scrollTop(0):"top"==n&&(e.scrollTop(e.scrollTop()+r.height_adjustment),r.height_adjustment=0)})}}}),void 0===Keys)var Keys={tab:9,enter:13};proboards.tabHandler=function(e){this.init(e)},$.extend(proboards.tabHandler.prototype,{init:function(e){this.options=$.extend({container:"div.item",tabs:[]},e);var r=this;r.parent=null,r.tab=null;var s=!1;$(document).keypress(function(e){s&&e.preventDefault()}),$(document).keyup(function(e){s&&(s=!1)}),$(document).keydown(function(e){if(e.which==Keys.tab||e.which==Keys.enter){var t=e.shiftKey,i=$(e.target),n=i.parents(r.options.container);if(i.length){if(n.length){if(!r.parent)return;r.parent=n}var a=r._getTabIndex(i);if(-1!=a){r.tab=a;var o=r.options.tabs[a];e.preventDefault(),s=!0,r._tabOut(o,i,t);t?r.prev():r.next()}else r.currentRow=0}}});for(var t=[],i=0;i<r.options.tabs.length;++i)t.push(r._getSelector(r.options.tabs[i]));t=t.join(",");$(t).live("click",function(e){var t=$(e.target),i=t.parents(r.options.container);if(t.length){i.length&&(r.parent=i);var n=r._getTabIndex(t);if(-1!=n){r.tab=n;var a=r.options.tabs[n];r._tabIn(a,t),e.preventDefault(),e.stopPropagation()}}})},next:function(e){void 0===e&&(e=1);for(var t=this.tab,i=0;i<e;++i)t+1==this.options.tabs.length?(t=0,this.parent=this.parent.next()):++t;var n=this.options.tabs[t],a=this._getElement(n);return a.focus().select(),this._tabIn(n,a),this.tab=t,{tab:n,element:a}},prev:function(e){void 0===e&&(e=1);for(var t=this.tab,i=0;i<e;++i)if(t<=0){if(t=this.options.tabs.length-1,void 0===this.parent.prev().attr("id"))return{tab:!1,element:!1};this.parent=this.parent.prev()}else--t;var n=this.options.tabs[t],a=this._getElement(n);return a.focus().select(),this._tabIn(n,a,!0),this.tab=t,{tab:n,element:a}},_getTabData:function(e){return this.options.tabs[this._getTabIndex(e)]},_getElement:function(e){var t=$(this._getSelector(e),this.parent);return t.length||(t=$(this._getSelector(e))),t},_tabOut:function(e,t,i){var n=i?"tabOutReverse":"tabOut";void 0!==e.tabOutAll&&e.tabOutAll.call(this,t),void 0!==e[n]&&e[n].call(this,t)},_tabIn:function(e,t,i){var n=i?"tabInReverse":"tabIn";void 0!==e.tabInAll&&e.tabInAll.call(this,t),void 0!==e[n]&&e[n].call(this,t)},_getTabIndex:function(e){for(var t=0;t<this.options.tabs.length;++t){var i=this._getSelector(this.options.tabs[t]);if(e.is(i))return t}return-1},_getSelector:function(e){var t=[];return void 0!==e.id&&t.push("#"+e.id),void 0!==e.class&&t.push("."+e.class),void 0!==e.name&&t.push('[name="'+e.name+'"]'),t.join(",")}}),proboards.thread={select:function(e,t,i){var n=$.extend({},i),a=Math.floor(1e6*Math.random()),o=proboards.dialog("thread_listing",{title:"Select Thread",html:'<div id="list_manager"><div class="container threads">\t<div class="control-bar ui-helper-clearfix"></div>\t<div class="content cap-bottom">\t\t<table class="list">\t\t\t<thead>\t\t\t\t<tr class="head">\t\t\t\t\t<th class="radio_button"></th>\t\t\t\t\t<th class="icon"></th>\t\t\t\t\t<th class="not_main">Subject</th>\t\t\t\t\t<th class="created-by">Created By</th>\t\t\t\t\t<th class="replies">Replies</th>\t\t\t\t\t<th class="views">Views</th>\t\t\t\t\t<th class="latest last">Last Post</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t<tbody class="lm-content-'+a+'"></tbody>\t\t</table>\t</div></div></div>',width:800,height:400,buttons:{Select:function(){var e=$('input[name="thread_id"]:checked',this).val();null!=e&&($(this).dialog("close"),t(e,$("#remember-thread").prop("checked")))}}});proboards.ajax({url:proboards.route("admin_thread_list"),data:{board_id:e,list_manager_id:a},dataType:"json",success:function(e){$(".lm-content-"+a,o).html(e.results),$(".control-bar",o).html('<div class="ui-search hide lm-search-'+a+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+a),new listManager("threads",{total:e.thread_count,limit:e.limit,page:e.page,pageCache:".lm-content-"+a,data:{board_id:e.board_id},id:a,hash:!1},{route_name:"admin_thread_list",float_control_bar:!1}),void 0!==n.remember&&o.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-thread" type="checkbox" '+(n.remember?"checked ":"")+'/><label for="remember-thread">&nbsp;Remember my choice</label></span>')}})}},$.extend(proboards,{time:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],createDate:function(e,t,i){var n=0,a=0,o=0,r=0,s=0,l="",c=proboards.data("locale_settings"),d=c.input_date_format,u=new RegExp(c.input_date_regex),p=e.match(u);if(p){var h=d.replace(/[^dmY]/g,"").split("");for(p.shift();p.length;){var f=parseInt(p.shift(),10);switch(h.shift()){case"d":o=f;break;case"m":a=f-1;break;case"Y":n=f}}if(!(!n||a<0||11<a||!o||31<o)&&/(?:^((?:0?[1-9])|(?:1[0-2])):([0-5][0-9])\s?([ap]m)$)|(?:^((?:[01]?[0-9])|(?:20|21|22|23)):([0-5][0-9])$)/i.test(t))return""==RegExp.$3?(r=parseInt(RegExp.$4,10),s=parseInt(RegExp.$5,10)):(r=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10),l=RegExp.$3),"pm"==l.toLowerCase()&&12!=r?r+=12:"am"==l.toLowerCase()&&12==r&&(r=0),null!=i&&1==i.utc?new Date(Date.UTC(n,a,o,r,s)):new Date(n,a,o,r,s)}},dateToUTCTimestamp:function(e){return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/1e3},dateToUTCString:function(e){for(var t=e.getUTCFullYear(),i=[e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()],n=0;n<i.length;n++)1==i[n].toString().length&&(i[n]="0"+i[n]);return t+"-"+i[0]+"-"+i[1]+" "+i[2]+":"+i[3]+":00"},dateToString:function(e,t){t||(t={});var i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),s="";t.military||(s=o<12?" AM":" PM",0==o?o=12:12<o&&(o-=12));for(var l=[n,a,o,r],c=0;c<l.length;c++)1==l[c].toString().length&&(l[c]="0"+l[c]);return{date:(t.dateFormat||"%Y-%m-%d").replace("%Y",i).replace("%m",l[0]).replace("%d",l[1]),time:l[2]+":"+l[3]+s,time_no_pad:o+":"+l[3]+s}},genFormInput:function(e,t,i){0==$('input[name="'+t+'"]').length?$(e).append('<input type="hidden" name="'+t+'" value="'+i+'" />'):$('input[name="'+t+'"]').val(i)},convertToUTCBeforeSubmit:function(e){var t=$(e.dateSelector),i=$(e.timeSelector),n=!e.mobile&&t.is(".date");if(t.val()){if(n)(a=t.datepicker("getDate"))&&i.length&&a.setSeconds(i.timepicker("getTime"));else var a=this.createDate(t.val(),i.val());if(a){var o=a.getTime()/1e3;this.genFormInput(e.formSelector,e.formInputName,o)}}},insertTimeIntoInputs:function(e){var t=this,i=$(e.dateSelector),n=$(e.timeSelector),a=!e.mobile&&i.is(".date");if(a&&!i.data("datepicker"))return setTimeout(function(){t.insertTimeIntoInputs(e)},250);if(i.val()&&n.val()){var o=proboards.data("locale_settings"),r=24==o.input_time_format;if(e=$.extend({mobile:!1,utc:!0},e),a)var s=t._createDateFromInputs({datepickerElem:i,timepickerElem:n,utc:e.utc});else s=t.createDate(i.val(),n.val(),{utc:e.utc});if(s){var l=t.dateToString(s,{dateFormat:o.input_date_format,military:r});i.val(l.date);var c=r?l.time:l.time_no_pad;n.val(c),i.trigger("localeconvert")}}},daysInMonth:function(e,t){var i=(t=$.extend({utc:!1},t)).utc?e.getUTCFullYear():e.getFullYear(),n=t.utc?e.getUTCMonth():e.getMonth(),a=new Date(i,n+1,0);return t.utc?a.getUTCDate():a.getDate()},getMonthName:function(e,t){var i=(t=$.extend({utc:!1},t)).utc?e.getUTCMonth():e.getMonth();return this.monthNames[i]},_createDateFromInputs:function(e){e=$.extend({datepickerElem:null,timepickerElem:null,isUTC:!0},e);var t=$(e.datepickerElem),i=$(e.timepickerElem),n=t.datepicker("getDate");return i.length&&n.setSeconds(i.timepicker("getTime")),e.isUTC&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()))),n}}});var pb={data:function(e,t){return proboards.data(e,t)},item:function(e,t,i,n){return proboards.item(e,t,i,n)},size:function(e){return proboards.size(e)},loading:function(e,t){return proboards.loading(e,t)},help_icon:function(e){return proboards.help_icon(e)},unsaved_changes:function(){return 0<proboards.unsaved_changes},active_ajax_calls:function(){return proboards.active_ajax_calls},cookie:function(i){return{get:function(){return proboards.cookie(i)},set:function(e,t){return proboards.cookie(i,e,t)}}},window:{dialog:function(e,t){return proboards.dialog(e,t)},confirm:function(e,t,i){return i=$.extend({},i),proboards.confirm(e,t,i)},alert:function(e,t,i){return proboards.alert(e,t,i)},select_dialog:function(e){return proboards.select_dialog(e)},image_preview:function(e){return proboards.image_preview(e)},error:function(e){return proboards.error(e)}},image:{is_valid_url:function(e){return proboards.is_valid_image_url(e)},preload:function(e){return proboards.preload(e)}},number:{commify:function(e){return proboards.commify(e)},add_commified_numbers:function(e){return proboards.add_commified_numbers(e)}},text:{escape_html:function(e){return proboards.escape_html(e)},nl2br:function(e){return proboards.nl2br(e)},nbsp:function(e){return proboards.nbsp(e)},mono:function(e){return proboards.mono(e)},capitalize:function(e){return proboards.capitalize(e)},validate_unicode:function(e){return proboards.validateUnicode(e)}},board:{select:function(e,t){return e=$.extend({},e),proboards.board.select(t,e)}},thread:{select:function(e,t,i){return proboards.thread.select(e,t,i)}},member:{select:function(e,t){return proboards.member.select_dialog($.extend({},e,{onComplete:t}))}},date:{create_date:function(e,t,i){return proboards.time.createDate(e,t,i)},date_to_UTC_timestamp:function(e){return proboards.time.dateToUTCTimestamp(e)},date_to_UTC_string:function(e){return proboards.time.dateToUTCString(e)},date_to_string:function(e,t){return proboards.time.dateToString(e,t)}},form:{confirm_ignore_changes:function(e){return proboards.form.confirm_ignore_changes(e)},consolidate_params:function(e){return proboards.consolidateParams(e)},gen_option_range:function(e,t,i,n){return(void 0===i||i<1)&&(i=1),proboards.form.genOptionRange(e,t,i,n)},gen_verify_box:function(e,t,i,n,a,o,r,s){return proboards.form.gen_verify_box(e,t,i,n,a,o,r,s)}},events:{on:function(e,t){return proboards.on(e,t)},one:function(e,t){return proboards.one(e,t)}},list_manager:function(t){return{get_selection:function(){return proboards.listManagers[t].get_selection()},select_item:function(e){return proboards.listManagers[t].select_item(e)},unselect_item:function(e){return proboards.listManagers[t].unselect_item(e)},select_items:function(e){return proboards.listManagers[t].select_items(e)},unselect_items:function(e){return proboards.listManagers[t].unselect_items(e)}}},plugin:{key_types:function(){return proboards.plugin.key_type},status_codes:function(){return proboards.plugin.status},get:function(e){return proboards.plugin.get(e)},key:function(n){return{type:function(){return proboards.plugin.key(n).type},get:function(e){return proboards.plugin.key(n).get(e)},set:function(e){return e=$.extend({},e,{set:1}),proboards.plugin.key(n).set_new(e)},set_on:function(e,t,i){return proboards.plugin.key(n).set_on(e,t,i)},append:function(e){return e=$.extend({},e,{append:1}),proboards.plugin.key(n).set_new(e)},prepend:function(e){return e=$.extend({},e,{prepend:1}),proboards.plugin.key(n).set_new(e)},increment:function(e){return e=$.extend({},e,{increment:1}),proboards.plugin.key(n).set_new(e)},decrement:function(e){return e=$.extend({},e,{decrement:1}),proboards.plugin.key(n).set_new(e)},push:function(e){return e=$.extend({},e,{push:1}),proboards.plugin.key(n).set_new(e)},pop:function(e){return e=$.extend({},e,{pop:1}),proboards.plugin.key(n).set_new(e)},shift:function(e){return e=$.extend({},e,{shift:1}),proboards.plugin.key(n).set_new(e)},unshift:function(e){return e=$.extend({},e,{unshift:1}),proboards.plugin.key(n).set_new(e)},can_read:function(e){return proboards.plugin.key(n).can_read(e)},can_write:function(e){return proboards.plugin.key(n).can_write(e)}}}}};!function(i){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=i,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=299)}([function(e,t,i){var m=i(1),g=i(9),v=i(14),b=i(10),_=i(22),y=function(e,t,i){var n,a,o,r,s=e&y.F,l=e&y.G,c=e&y.S,d=e&y.P,u=e&y.B,p=l?m:c?m[t]||(m[t]={}):(m[t]||{}).prototype,h=l?g:g[t]||(g[t]={}),f=h.prototype||(h.prototype={});for(n in l&&(i=t),i)o=((a=!s&&p&&void 0!==p[n])?p:i)[n],r=u&&a?_(o,m):d&&"function"==typeof o?_(Function.call,o):o,p&&b(p,n,o,e&y.U),h[n]!=o&&v(h,n,r),d&&f[n]!=o&&(f[n]=o)};m.core=g,y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,e.exports=y},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var n=i(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var n=i(48)("wks"),a=i(30),o=i(1).Symbol,r="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=r&&o[e]||(r?o:a)("Symbol."+e))}).store=n},function(e,t,i){var n=i(18),a=Math.min;e.exports=function(e){return 0<e?a(n(e),9007199254740991):0}},function(e,t,i){var n=i(3),a=i(86),o=i(27),r=Object.defineProperty;t.f=i(8)?Object.defineProperty:function(e,t,i){if(n(e),t=o(t,!0),n(i),a)try{return r(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var i=e.exports={version:"2.6.4"};"number"==typeof __e&&(__e=i)},function(e,t,i){var o=i(1),r=i(14),s=i(13),l=i(30)("src"),n=i(127),c=(""+n).split("toString");i(9).inspectSource=function(e){return n.call(e)},(e.exports=function(e,t,i,n){var a="function"==typeof i;a&&(s(i,"name")||r(i,"name",t)),e[t]!==i&&(a&&(s(i,l)||r(i,l,e[t]?""+e[t]:c.join(String(t)))),e===o?e[t]=i:n?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[l]||n.call(this)})},function(e,t,i){var n=i(25);e.exports=function(e){return Object(n(e))}},function(e,t,i){var n=i(0),a=i(2),r=i(25),s=/"/g,o=function(e,t,i,n){var a=String(r(e)),o="<"+t;return""!==i&&(o+=" "+i+'="'+String(n).replace(s,"&quot;")+'"'),o+">"+a+"</"+t+">"};e.exports=function(t,e){var i={};i[t]=e(o),n(n.P+n.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",i)}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(7),a=i(29);e.exports=i(8)?function(e,t,i){return n.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(44),a=i(25);e.exports=function(e){return n(a(e))}},function(t,e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?t.exports=n=function(e){return i(e)}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)},n(e)}t.exports=n},function(e,t,i){"use strict";var n=i(2);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?n:i)(e)}},function(e,t,i){var n=i(45),a=i(29),o=i(15),r=i(27),s=i(13),l=i(86),c=Object.getOwnPropertyDescriptor;t.f=i(8)?c:function(e,t){if(e=o(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return a(!n.f.call(e,t),e[t])}},function(e,t,i){var a=i(0),o=i(9),r=i(2);e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],n={};n[e]=t(i),a(a.S+a.F*r(function(){i(1)}),"Object",n)}},function(e,t,i){var _=i(22),y=i(44),A=i(11),w=i(6),n=i(217);e.exports=function(u,e){var p=1==u,h=2==u,f=3==u,m=4==u,g=6==u,v=5==u||g,b=e||n;return function(e,t,i){for(var n,a,o=A(e),r=y(o),s=_(t,i,3),l=w(r.length),c=0,d=p?b(e,l):h?b(e,0):void 0;c<l;c++)if((v||c in r)&&(a=s(n=r[c],c,o),u))if(p)d[c]=a;else if(a)switch(u){case 3:return!0;case 5:return n;case 6:return c;case 2:d.push(n)}else if(m)return!1;return g?-1:f||m?m:d}}},function(e,t,i){var o=i(23);e.exports=function(n,a,e){if(o(n),void 0===a)return n;switch(e){case 1:return function(e){return n.call(a,e)};case 2:return function(e,t){return n.call(a,e,t)};case 3:return function(e,t,i){return n.call(a,e,t,i)}}return function(){return n.apply(a,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){"use strict";if(i(8)){var v=i(31),b=i(1),_=i(2),y=i(0),A=i(59),n=i(85),p=i(22),w=i(42),a=i(29),x=i(14),o=i(43),r=i(18),k=i(6),$=i(112),s=i(33),l=i(27),c=i(13),C=i(46),S=i(4),h=i(11),f=i(77),T=i(34),D=i(36),E=i(35).f,m=i(79),d=i(30),u=i(5),g=i(21),I=i(49),P=i(47),M=i(81),O=i(39),N=i(52),j=i(41),L=i(80),R=i(103),F=i(7),z=i(19),q=F.f,H=z.f,W=b.RangeError,V=b.TypeError,U=b.Uint8Array,B=Array.prototype,Y=n.ArrayBuffer,K=n.DataView,J=g(0),G=g(2),X=g(3),Q=g(4),Z=g(5),ee=g(6),te=I(!0),ie=I(!1),ne=M.values,ae=M.keys,oe=M.entries,re=B.lastIndexOf,se=B.reduce,le=B.reduceRight,ce=B.join,de=B.sort,ue=B.slice,pe=B.toString,he=B.toLocaleString,fe=u("iterator"),me=u("toStringTag"),ge=d("typed_constructor"),ve=d("def_constructor"),be=A.CONSTR,_e=A.TYPED,ye=A.VIEW,Ae=g(1,function(e,t){return Ce(P(e,e[ve]),t)}),we=_(function(){return 1===new U(new Uint16Array([1]).buffer)[0]}),xe=!!U&&!!U.prototype.set&&_(function(){new U(1).set({})}),ke=function(e,t){var i=r(e);if(i<0||i%t)throw W("Wrong offset!");return i},$e=function(e){if(S(e)&&_e in e)return e;throw V(e+" is not a typed array!")},Ce=function(e,t){if(!(S(e)&&ge in e))throw V("It is not a typed array constructor!");return new e(t)},Se=function(e,t){return Te(P(e,e[ve]),t)},Te=function(e,t){for(var i=0,n=t.length,a=Ce(e,n);i<n;)a[i]=t[i++];return a},De=function(e,t,i){q(e,t,{get:function(){return this._d[i]}})},Ee=function(e){var t,i,n,a,o,r,s=h(e),l=arguments.length,c=1<l?arguments[1]:void 0,d=void 0!==c,u=m(s);if(null!=u&&!f(u)){for(r=u.call(s),n=[],t=0;!(o=r.next()).done;t++)n.push(o.value);s=n}for(d&&2<l&&(c=p(c,arguments[2],2)),t=0,i=k(s.length),a=Ce(this,i);t<i;t++)a[t]=d?c(s[t],t):s[t];return a},Ie=function(){for(var e=0,t=arguments.length,i=Ce(this,t);e<t;)i[e]=arguments[e++];return i},Pe=!!U&&_(function(){he.call(new U(1))}),Me=function(){return he.apply(Pe?ue.call($e(this)):$e(this),arguments)},Oe={copyWithin:function(e,t){return R.call($e(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return Q($e(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return L.apply($e(this),arguments)},filter:function(e){return Se(this,G($e(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return Z($e(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ee($e(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){J($e(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ie($e(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return te($e(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return ce.apply($e(this),arguments)},lastIndexOf:function(e){return re.apply($e(this),arguments)},map:function(e){return Ae($e(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return se.apply($e(this),arguments)},reduceRight:function(e){return le.apply($e(this),arguments)},reverse:function(){for(var e,t=$e(this).length,i=Math.floor(t/2),n=0;n<i;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return X($e(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return de.call($e(this),e)},subarray:function(e,t){var i=$e(this),n=i.length,a=s(e,n);return new(P(i,i[ve]))(i.buffer,i.byteOffset+a*i.BYTES_PER_ELEMENT,k((void 0===t?n:s(t,n))-a))}},Ne=function(e,t){return Se(this,ue.call($e(this),e,t))},je=function(e){$e(this);var t=ke(arguments[1],1),i=this.length,n=h(e),a=k(n.length),o=0;if(i<a+t)throw W("Wrong length!");for(;o<a;)this[t+o]=n[o++]},Le={entries:function(){return oe.call($e(this))},keys:function(){return ae.call($e(this))},values:function(){return ne.call($e(this))}},Re=function(e,t){return S(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Re(e,t=l(t,!0))?a(2,e[t]):H(e,t)},ze=function(e,t,i){return!(Re(e,t=l(t,!0))&&S(i)&&c(i,"value"))||c(i,"get")||c(i,"set")||i.configurable||c(i,"writable")&&!i.writable||c(i,"enumerable")&&!i.enumerable?q(e,t,i):(e[t]=i.value,e)};be||(z.f=Fe,F.f=ze),y(y.S+y.F*!be,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:ze}),_(function(){pe.call({})})&&(pe=he=function(){return ce.call(this)});var qe=o({},Oe);o(qe,Le),x(qe,fe,Le.values),o(qe,{slice:Ne,set:je,constructor:function(){},toString:pe,toLocaleString:Me}),De(qe,"buffer","b"),De(qe,"byteOffset","o"),De(qe,"byteLength","l"),De(qe,"length","e"),q(qe,me,{get:function(){return this[_e]}}),e.exports=function(e,u,t,o){var p=e+((o=!!o)?"Clamped":"")+"Array",i="get"+e,r="set"+e,h=b[p],s=h||{},n=h&&D(h),a=!h||!A.ABV,l={},c=h&&h.prototype,f=function(e,a){q(e,a,{get:function(){return e=a,(t=this._d).v[i](e*u+t.o,we);var e,t},set:function(e){return t=a,i=e,n=this._d,o&&(i=(i=Math.round(i))<0?0:255<i?255:255&i),void n.v[r](t*u+n.o,i,we);var t,i,n},enumerable:!0})};a?(h=t(function(e,t,i,n){w(e,h,p,"_d");var a,o,r,s,l=0,c=0;if(S(t)){if(!(t instanceof Y||"ArrayBuffer"==(s=C(t))||"SharedArrayBuffer"==s))return _e in t?Te(h,t):Ee.call(h,t);a=t,c=ke(i,u);var d=t.byteLength;if(void 0===n){if(d%u)throw W("Wrong length!");if((o=d-c)<0)throw W("Wrong length!")}else if((o=k(n)*u)+c>d)throw W("Wrong length!");r=o/u}else r=$(t),a=new Y(o=r*u);for(x(e,"_d",{b:a,o:c,l:o,e:r,v:new K(a)});l<r;)f(e,l++)}),c=h.prototype=T(qe),x(c,"constructor",h)):_(function(){h(1)})&&_(function(){new h(-1)})&&N(function(e){new h,new h(null),new h(1.5),new h(e)},!0)||(h=t(function(e,t,i,n){var a;return w(e,h,p),S(t)?t instanceof Y||"ArrayBuffer"==(a=C(t))||"SharedArrayBuffer"==a?void 0!==n?new s(t,ke(i,u),n):void 0!==i?new s(t,ke(i,u)):new s(t):_e in t?Te(h,t):Ee.call(h,t):new s($(t))}),J(n!==Function.prototype?E(s).concat(E(n)):E(s),function(e){e in h||x(h,e,s[e])}),h.prototype=c,v||(c.constructor=h));var d=c[fe],m=!!d&&("values"==d.name||null==d.name),g=Le.values;x(h,ge,!0),x(c,_e,p),x(c,ye,!0),x(c,ve,h),(o?new h(1)[me]==p:me in c)||q(c,me,{get:function(){return p}}),l[p]=h,y(y.G+y.W+y.F*(h!=s),l),y(y.S,p,{BYTES_PER_ELEMENT:u}),y(y.S+y.F*_(function(){s.of.call(h,1)}),p,{from:Ee,of:Ie}),"BYTES_PER_ELEMENT"in c||x(c,"BYTES_PER_ELEMENT",u),y(y.P,p,Oe),j(p),y(y.P+y.F*xe,p,{set:je}),y(y.P+y.F*!m,p,Le),v||c.toString==pe||(c.toString=pe),y(y.P+y.F*_(function(){new h(1).slice()}),p,{slice:Ne}),y(y.P+y.F*(_(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!_(function(){c.toLocaleString.call([1,2])})),p,{toLocaleString:Me}),O[p]=m?d:g,v||m||x(c,fe,g)}}else e.exports=function(){}},function(e,t,i){var a=i(4);e.exports=function(e,t){if(!a(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!a(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var n=i(30)("meta"),a=i(4),o=i(13),r=i(7).f,s=0,l=Object.isExtensible||function(){return!0},c=!i(2)(function(){return l(Object.preventExtensions({}))}),d=function(e){r(e,n,{value:{i:"O"+ ++s,w:{}}})},u=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[n].w},onFreeze:function(e){return c&&u.NEED&&l(e)&&!o(e,n)&&d(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t){e.exports=!1},function(e,t,i){var n=i(88),a=i(63);e.exports=Object.keys||function(e){return n(e,a)}},function(e,t,i){var n=i(18),a=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?a(e+t,0):o(e,t)}},function(e,t,n){var a=n(3),o=n(89),r=n(63),s=n(62)("IE_PROTO"),l=function(){},c=function(){var e,t=n(60)("iframe"),i=r.length;for(t.style.display="none",n(65).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c.prototype[r[i]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(l.prototype=a(e),i=new l,l.prototype=null,i[s]=e):i=c(),void 0===t?i:o(i,t)}},function(e,t,i){var n=i(88),a=i(63).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},function(e,t,i){var n=i(13),a=i(11),o=i(62)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,i){var n=i(4);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,i){var n=i(7).f,a=i(13),o=i(5)("toStringTag");e.exports=function(e,t,i){e&&!a(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t){e.exports={}},function(e,t,i){var n=i(5)("unscopables"),a=Array.prototype;null==a[n]&&i(14)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t,i){"use strict";var n=i(1),a=i(7),o=i(8),r=i(5)("species");e.exports=function(e){var t=n[e];o&&t&&!t[r]&&a.f(t,r,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var a=i(10);e.exports=function(e,t,i){for(var n in t)a(e,n,t[n],i);return e}},function(e,t,i){var n=i(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var a=i(24),o=i(5)("toStringTag"),r="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?i:r?a(t):"Object"==(n=a(t))&&"function"==typeof t.callee?"Arguments":n}},function(e,t,i){var a=i(3),o=i(23),r=i(5)("species");e.exports=function(e,t){var i,n=a(e).constructor;return void 0===n||null==(i=a(n)[r])?t:o(i)}},function(e,t,i){var n=i(9),a=i(1),o=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(31)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var l=i(15),c=i(6),d=i(33);e.exports=function(s){return function(e,t,i){var n,a=l(e),o=c(a.length),r=d(i,o);if(s&&t!=t){for(;r<o;)if((n=a[r++])!=n)return!0}else for(;r<o;r++)if((s||r in a)&&a[r]===t)return s||r||0;return!s&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var r=i(0),n=i(25),s=i(2),l=i(67),a="["+l+"]",o=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),d=function(e,t,i){var n={},a=s(function(){return!!l[e]()||"\u200b\x85"!="\u200b\x85"[e]()}),o=n[e]=a?t(u):l[e];i&&(n[i]=o),r(r.P+r.F*a,"String",n)},u=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},function(e,t,i){var o=i(5)("iterator"),r=!1;try{var n=[7][o]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var n=[7],a=n[o]();a.next=function(){return{done:i=!0}},n[o]=function(){return a},e(n)}catch(e){}return i}},function(e,t,i){"use strict";var n=i(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){"use strict";var a=i(46),o=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var n=i.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,i){"use strict";i(105);var d=i(10),u=i(14),p=i(2),h=i(25),f=i(5),m=i(82),g=f("species"),v=!p(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),b=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(i,e,t){var n=f(i),o=!p(function(){var e={};return e[n]=function(){return 7},7!=""[i](e)}),a=o?!p(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===i&&(t.constructor={},t.constructor[g]=function(){return t}),t[n](""),!e}):void 0;if(!o||!a||"replace"===i&&!v||"split"===i&&!b){var r=/./[n],s=t(h,n,""[i],function(e,t,i,n,a){return t.exec===m?o&&!a?{done:!0,value:r.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),l=s[0],c=s[1];d(String.prototype,i,l),u(RegExp.prototype,n,2==e?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}}},function(e,t,i){var p=i(22),h=i(101),f=i(77),m=i(3),g=i(6),v=i(79),b={},_={};(t=e.exports=function(e,t,i,n,a){var o,r,s,l,c=a?function(){return e}:v(e),d=p(i,n,t?2:1),u=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(f(c)){for(o=g(e.length);u<o;u++)if((l=t?d(m(r=e[u])[0],r[1]):d(e[u]))===b||l===_)return l}else for(s=c.call(e);!(r=s.next()).done;)if((l=h(s,d,r.value,t))===b||l===_)return l}).BREAK=b,t.RETURN=_},function(e,t,i){var n=i(1).navigator;e.exports=n&&n.userAgent||""},function(e,t,i){"use strict";var v=i(1),b=i(0),_=i(10),y=i(43),A=i(28),w=i(56),x=i(42),k=i(4),$=i(2),C=i(52),S=i(38),T=i(68);e.exports=function(n,e,t,i,a,o){var r=v[n],s=r,l=a?"set":"add",c=s&&s.prototype,d={},u=function(e){var i=c[e];_(c,e,"delete"==e?function(e){return!(o&&!k(e))&&i.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!k(e))&&i.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!k(e)?void 0:i.call(this,0===e?0:e)}:"add"==e?function(e){return i.call(this,0===e?0:e),this}:function(e,t){return i.call(this,0===e?0:e,t),this})};if("function"==typeof s&&(o||c.forEach&&!$(function(){(new s).entries().next()}))){var p=new s,h=p[l](o?{}:-0,1)!=p,f=$(function(){p.has(1)}),m=C(function(e){new s(e)}),g=!o&&$(function(){for(var e=new s,t=5;t--;)e[l](t,t);return!e.has(-0)});m||(((s=e(function(e,t){x(e,s,n);var i=T(new r,e,s);return null!=t&&w(t,a,i[l],i),i})).prototype=c).constructor=s),(f||g)&&(u("delete"),u("has"),a&&u("get")),(g||h)&&u(l),o&&c.clear&&delete c.clear}else s=i.getConstructor(e,n,a,l),y(s.prototype,t),A.NEED=!0;return S(s,n),d[n]=s,b(b.G+b.W+b.F*(s!=r),d),o||i.setStrong(s,n,a),s}},function(e,t,i){for(var n,a=i(1),o=i(14),r=i(30),s=r("typed_array"),l=r("view"),c=!(!a.ArrayBuffer||!a.DataView),d=c,u=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(n=a[p[u++]])?(o(n.prototype,s,!0),o(n.prototype,l,!0)):d=!1;e.exports={ABV:c,CONSTR:d,TYPED:s,VIEW:l}},function(e,t,i){var n=i(4),a=i(1).document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,i){t.f=i(5)},function(e,t,i){var n=i(48)("keys"),a=i(30);e.exports=function(e){return n[e]||(n[e]=a(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(24);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(1).document;e.exports=n&&n.documentElement},function(e,t,a){var i=a(4),n=a(3),o=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,i,n){try{(n=a(22)(Function.call,a(19).f(Object.prototype,"__proto__").set,2))(e,[]),i=!(e instanceof Array)}catch(e){i=!0}return function(e,t){return o(e,t),i?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,i){var o=i(4),r=i(66).set;e.exports=function(e,t,i){var n,a=t.constructor;return a!==i&&"function"==typeof a&&(n=a.prototype)!==i.prototype&&o(n)&&r&&r(e,n),e}},function(e,t,i){"use strict";var a=i(18),o=i(25);e.exports=function(e){var t=String(o(this)),i="",n=a(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var i=Math.expm1;e.exports=!i||22025.465794806718<i(10)||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:i},function(e,t,i){var l=i(18),c=i(25);e.exports=function(s){return function(e,t){var i,n,a=String(c(e)),o=l(t),r=a.length;return o<0||r<=o?s?"":void 0:(i=a.charCodeAt(o))<55296||56319<i||o+1===r||(n=a.charCodeAt(o+1))<56320||57343<n?s?a.charAt(o):i:s?a.slice(o,o+2):n-56320+(i-55296<<10)+65536}}},function(e,t,i){"use strict";var _=i(31),y=i(0),A=i(10),w=i(14),x=i(39),k=i(100),$=i(38),C=i(36),S=i(5)("iterator"),T=!([].keys&&"next"in[].keys()),D=function(){return this};e.exports=function(e,t,i,n,a,o,r){k(i,t,n);var s,l,c,d=function(e){if(!T&&e in f)return f[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},u=t+" Iterator",p="values"==a,h=!1,f=e.prototype,m=f[S]||f["@@iterator"]||a&&f[a],g=m||d(a),v=a?p?d("entries"):g:void 0,b="Array"==t&&f.entries||m;if(b&&(c=C(b.call(new e)))!==Object.prototype&&c.next&&($(c,u,!0),_||"function"==typeof c[S]||w(c,S,D)),p&&m&&"values"!==m.name&&(h=!0,g=function(){return m.call(this)}),_&&!r||!T&&!h&&f[S]||w(f,S,g),x[t]=g,x[u]=D,a)if(s={values:p?g:d("values"),keys:o?g:d("keys"),entries:v},r)for(l in s)l in f||A(f,l,s[l]);else y(y.P+y.F*(T||h),t,s);return s}},function(e,t,i){var n=i(75),a=i(25);e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(a(e))}},function(e,t,i){var n=i(4),a=i(24),o=i(5)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},function(e,t,i){var n=i(5)("match");e.exports=function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[n]=!1,!"/./"[t](i)}catch(t){}}return!0}},function(e,t,i){var n=i(39),a=i(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},function(e,t,i){"use strict";var n=i(7),a=i(29);e.exports=function(e,t,i){t in e?n.f(e,t,a(0,i)):e[t]=i}},function(e,t,i){var n=i(46),a=i(5)("iterator"),o=i(39);e.exports=i(9).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[n(e)]}},function(e,t,i){"use strict";var s=i(11),l=i(33),c=i(6);e.exports=function(e){for(var t=s(this),i=c(t.length),n=arguments.length,a=l(1<n?arguments[1]:void 0,i),o=2<n?arguments[2]:void 0,r=void 0===o?i:l(o,i);a<r;)t[a++]=e;return t}},function(e,t,i){"use strict";var n=i(40),a=i(104),o=i(39),r=i(15);e.exports=i(73)(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t,i){"use strict";var n,a,o=i(53),r=RegExp.prototype.exec,s=String.prototype.replace,l=r,c=(n=/a/,a=/b*/g,r.call(n,"a"),r.call(a,"a"),0!==n.lastIndex||0!==a.lastIndex),d=void 0!==/()??/.exec("")[1];(c||d)&&(l=function(e){var t,i,n,a;return d&&(i=new RegExp("^"+this.source+"$(?!\\s)",o.call(this))),c&&(t=this.lastIndex),n=r.call(this,e),c&&n&&(this.lastIndex=this.global?n.index+n[0].length:t),d&&n&&1<n.length&&s.call(n[0],i,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(n[a]=void 0)}),n}),e.exports=l},function(e,t,i){"use strict";var n=i(72)(!0);e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},function(e,t,i){var n,a,o,r=i(22),s=i(94),l=i(65),c=i(60),d=i(1),u=d.process,p=d.setImmediate,h=d.clearImmediate,f=d.MessageChannel,m=d.Dispatch,g=0,v={},b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){b.call(e.data)};p&&h||(p=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},h=function(e){delete v[e]},"process"==i(24)(u)?n=function(e){u.nextTick(r(b,e,1))}:m&&m.now?n=function(e){m.now(r(b,e,1))}:f?(o=(a=new f).port2,a.port1.onmessage=_,n=r(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(n=function(e){d.postMessage(e+"","*")},d.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(r(b,e,1),0)}),e.exports={set:p,clear:h}},function(e,t,i){"use strict";var n=i(1),a=i(8),o=i(31),r=i(59),s=i(14),l=i(43),c=i(2),d=i(42),u=i(18),p=i(6),h=i(112),f=i(35).f,m=i(7).f,g=i(80),v=i(38),b="prototype",_="Wrong index!",y=n.ArrayBuffer,A=n.DataView,w=n.Math,x=n.RangeError,k=n.Infinity,$=y,C=w.abs,S=w.pow,T=w.floor,D=w.log,E=w.LN2,I=a?"_b":"buffer",P=a?"_l":"byteLength",M=a?"_o":"byteOffset";function O(e,t,i){var n,a,o,r=new Array(i),s=8*i-t-1,l=(1<<s)-1,c=l>>1,d=23===t?S(2,-24)-S(2,-77):0,u=0,p=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===k?(a=e!=e?1:0,n=l):(n=T(D(e)/E),e*(o=S(2,-n))<1&&(n--,o*=2),2<=(e+=1<=n+c?d/o:d*S(2,1-c))*o&&(n++,o/=2),l<=n+c?(a=0,n=l):1<=n+c?(a=(e*o-1)*S(2,t),n+=c):(a=e*S(2,c-1)*S(2,t),n=0));8<=t;r[u++]=255&a,a/=256,t-=8);for(n=n<<t|a,s+=t;0<s;r[u++]=255&n,n/=256,s-=8);return r[--u]|=128*p,r}function N(e,t,i){var n,a=8*i-t-1,o=(1<<a)-1,r=o>>1,s=a-7,l=i-1,c=e[l--],d=127&c;for(c>>=7;0<s;d=256*d+e[l],l--,s-=8);for(n=d&(1<<-s)-1,d>>=-s,s+=t;0<s;n=256*n+e[l],l--,s-=8);if(0===d)d=1-r;else{if(d===o)return n?NaN:c?-k:k;n+=S(2,t),d-=r}return(c?-1:1)*n*S(2,d-t)}function j(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function L(e){return[255&e]}function R(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return O(e,52,8)}function q(e){return O(e,23,4)}function H(e,t,i){m(e[b],t,{get:function(){return this[i]}})}function W(e,t,i,n){var a=h(+i);if(a+t>e[P])throw x(_);var o=e[I]._b,r=a+e[M],s=o.slice(r,r+t);return n?s:s.reverse()}function V(e,t,i,n,a,o){var r=h(+i);if(r+t>e[P])throw x(_);for(var s=e[I]._b,l=r+e[M],c=n(+a),d=0;d<t;d++)s[l+d]=c[o?d:t-d-1]}if(r.ABV){if(!c(function(){y(1)})||!c(function(){new y(-1)})||c(function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name})){for(var U,B=(y=function(e){return d(this,y),new $(h(e))})[b]=$[b],Y=f($),K=0;Y.length>K;)(U=Y[K++])in y||s(y,U,$[U]);o||(B.constructor=y)}var J=new A(new y(2)),G=A[b].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||l(A[b],{setInt8:function(e,t){G.call(this,e,t<<24>>24)},setUint8:function(e,t){G.call(this,e,t<<24>>24)}},!0)}else y=function(e){d(this,y,"ArrayBuffer");var t=h(e);this._b=g.call(new Array(t),0),this[P]=t},A=function(e,t,i){d(this,A,"DataView"),d(e,y,"DataView");var n=e[P],a=u(t);if(a<0||n<a)throw x("Wrong offset!");if(a+(i=void 0===i?n-a:p(i))>n)throw x("Wrong length!");this[I]=e,this[M]=a,this[P]=i},a&&(H(y,"byteLength","_l"),H(A,"buffer","_b"),H(A,"byteLength","_l"),H(A,"byteOffset","_o")),l(A[b],{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return j(W(this,4,e,arguments[1]))},getUint32:function(e){return j(W(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(W(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(W(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){V(this,1,e,L,t)},setUint8:function(e,t){V(this,1,e,L,t)},setInt16:function(e,t){V(this,2,e,R,t,arguments[2])},setUint16:function(e,t){V(this,2,e,R,t,arguments[2])},setInt32:function(e,t){V(this,4,e,F,t,arguments[2])},setUint32:function(e,t){V(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){V(this,4,e,q,t,arguments[2])},setFloat64:function(e,t){V(this,8,e,z,t,arguments[2])}});v(y,"ArrayBuffer"),v(A,"DataView"),s(A[b],r.VIEW,!0),t.ArrayBuffer=y,t.DataView=A},function(e,t,i){e.exports=!i(8)&&!i(2)(function(){return 7!=Object.defineProperty(i(60)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(1),a=i(9),o=i(31),r=i(61),s=i(7).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},function(e,t,i){var r=i(13),s=i(15),l=i(49)(!1),c=i(62)("IE_PROTO");e.exports=function(e,t){var i,n=s(e),a=0,o=[];for(i in n)i!=c&&r(n,i)&&o.push(i);for(;t.length>a;)r(n,i=t[a++])&&(~l(o,i)||o.push(i));return o}},function(e,t,i){var r=i(7),s=i(3),l=i(32);e.exports=i(8)?Object.defineProperties:function(e,t){s(e);for(var i,n=l(t),a=n.length,o=0;o<a;)r.f(e,i=n[o++],t[i]);return e}},function(e,t,i){var n=i(15),a=i(35).f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return r&&"[object Window]"==o.call(e)?function(e){try{return a(e)}catch(e){return r.slice()}}(e):a(n(e))}},function(e,t,i){"use strict";var p=i(32),h=i(50),f=i(45),m=i(11),g=i(44),a=Object.assign;e.exports=!a||i(2)(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=a({},e)[i]||Object.keys(a({},t)).join("")!=n})?function(e,t){for(var i=m(e),n=arguments.length,a=1,o=h.f,r=f.f;a<n;)for(var s,l=g(arguments[a++]),c=o?p(l).concat(o(l)):p(l),d=c.length,u=0;u<d;)r.call(l,s=c[u++])&&(i[s]=l[s]);return i}:a},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,i){"use strict";var o=i(23),r=i(4),s=i(94),l=[].slice,c={};e.exports=Function.bind||function(t){var i=o(this),n=l.call(arguments,1),a=function(){var e=n.concat(l.call(arguments));return this instanceof a?function(e,t,i){if(!(t in c)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";c[t]=Function("F,a","return new F("+n.join(",")+")")}return c[t](e,i)}(i,e.length,e):s(i,e,t)};return r(i.prototype)&&(a.prototype=i.prototype),a}},function(e,t){e.exports=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var n=i(1).parseInt,a=i(51).trim,o=i(67),r=/^[-+]?0[xX]/;e.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var i=a(String(e),3);return n(i,t>>>0||(r.test(i)?16:10))}:n},function(e,t,i){var n=i(1).parseFloat,a=i(51).trim;e.exports=1/n(i(67)+"-0")!=-1/0?function(e){var t=a(String(e),3),i=n(t);return 0===i&&"-"==t.charAt(0)?-0:i}:n},function(e,t,i){var n=i(24);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,i){var n=i(4),a=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&a(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,i){"use strict";var n=i(34),a=i(29),o=i(38),r={};i(14)(r,i(5)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=n(r,{next:a(1,i)}),o(e,t+" Iterator")}},function(e,t,i){var o=i(3);e.exports=function(e,t,i,n){try{return n?t(o(i)[0],i[1]):t(i)}catch(t){var a=e.return;throw void 0!==a&&o(a.call(e)),t}}},function(e,t,i){var d=i(23),u=i(11),p=i(44),h=i(6);e.exports=function(e,t,i,n,a){d(t);var o=u(e),r=p(o),s=h(o.length),l=a?s-1:0,c=a?-1:1;if(i<2)for(;;){if(l in r){n=r[l],l+=c;break}if(l+=c,a?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;a?0<=l:l<s;l+=c)l in r&&(n=t(n,r[l],l,o));return n}},function(e,t,i){"use strict";var c=i(11),d=i(33),u=i(6);e.exports=[].copyWithin||function(e,t){var i=c(this),n=u(i.length),a=d(e,n),o=d(t,n),r=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===r?n:d(r,n))-o,n-a),l=1;for(o<a&&a<o+s&&(l=-1,o+=s-1,a+=s-1);0<s--;)o in i?i[a]=i[o]:delete i[a],a+=l,o+=l;return i}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){"use strict";var n=i(82);i(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(e,t,i){i(8)&&"g"!=/./g.flags&&i(7).f(RegExp.prototype,"flags",{configurable:!0,get:i(53)})},function(e,t,i){"use strict";var n,a,o,r,s=i(31),l=i(1),c=i(22),d=i(46),u=i(0),p=i(4),h=i(23),f=i(42),m=i(56),g=i(47),v=i(84).set,b=i(238)(),_=i(108),y=i(239),A=i(57),w=i(109),x=l.TypeError,k=l.process,$=k&&k.versions,C=$&&$.v8||"",S=l.Promise,T="process"==d(k),D=function(){},E=a=_.f,I=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[i(5)("species")]=function(e){e(D,D)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==C.indexOf("6.6")&&-1===A.indexOf("Chrome/66")}catch(e){}}(),P=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},M=function(d,i){if(!d._n){d._n=!0;var n=d._c;b(function(){for(var l=d._v,c=1==d._s,e=0,t=function(e){var t,i,n,a=c?e.ok:e.fail,o=e.resolve,r=e.reject,s=e.domain;try{a?(c||(2==d._h&&j(d),d._h=1),!0===a?t=l:(s&&s.enter(),t=a(l),s&&(s.exit(),n=!0)),t===e.promise?r(x("Promise-chain cycle")):(i=P(t))?i.call(t,o,r):o(t)):r(l)}catch(e){s&&!n&&s.exit(),r(e)}};n.length>e;)t(n[e++]);d._c=[],d._n=!1,i&&!d._h&&O(d)})}},O=function(o){v.call(l,function(){var e,t,i,n=o._v,a=N(o);if(a&&(e=y(function(){T?k.emit("unhandledRejection",n,o):(t=l.onunhandledrejection)?t({promise:o,reason:n}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",n)}),o._h=T||N(o)?2:1),o._a=void 0,a&&e.e)throw e.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(t){v.call(l,function(){var e;T?k.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},R=function(e){var i,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(i=P(e))?b(function(){var t={_w:n,_d:!1};try{i.call(e,c(R,t,1),c(L,t,1))}catch(e){L.call(t,e)}}):(n._v=e,n._s=1,M(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};I||(S=function(e){f(this,S,"Promise","_h"),h(e),n.call(this);try{e(c(R,this,1),c(L,this,1))}catch(e){L.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(43)(S.prototype,{then:function(e,t){var i=E(g(this,S));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=T?k.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&M(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=c(R,e,1),this.reject=c(L,e,1)},_.f=E=function(e){return e===S||e===r?new o(e):a(e)}),u(u.G+u.W+u.F*!I,{Promise:S}),i(38)(S,"Promise"),i(41)("Promise"),r=i(9).Promise,u(u.S+u.F*!I,"Promise",{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===r?S:this,e)}}),u(u.S+u.F*!(I&&i(52)(function(e){S.all(e).catch(D)})),"Promise",{all:function(e){var r=this,t=E(r),s=t.resolve,l=t.reject,i=y(function(){var n=[],a=0,o=1;m(e,!1,function(e){var t=a++,i=!1;n.push(void 0),o++,r.resolve(e).then(function(e){i||(i=!0,n[t]=e,--o||s(n))},l)}),--o||s(n)});return i.e&&l(i.v),t.promise},race:function(e){var t=this,i=E(t),n=i.reject,a=y(function(){m(e,!1,function(e){t.resolve(e).then(i.resolve,n)})});return a.e&&n(a.v),i.promise}})},function(e,t,i){"use strict";var a=i(23);function n(e){var i,n;this.promise=new e(function(e,t){if(void 0!==i||void 0!==n)throw TypeError("Bad Promise constructor");i=e,n=t}),this.resolve=a(i),this.reject=a(n)}e.exports.f=function(e){return new n(e)}},function(e,t,i){var n=i(3),a=i(4),o=i(108);e.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}},function(e,t,i){"use strict";var r=i(7).f,s=i(34),l=i(43),c=i(22),d=i(42),u=i(56),n=i(73),a=i(104),o=i(41),p=i(8),h=i(28).fastKey,f=i(37),m=p?"_s":"size",g=function(e,t){var i,n=h(t);if("F"!==n)return e._i[n];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,o,i,n){var a=e(function(e,t){d(e,a,o,"_i"),e._t=o,e._i=s(null),e._f=void 0,e._l=void 0,e[m]=0,null!=t&&u(t,i,e[n],e)});return l(a.prototype,{clear:function(){for(var e=f(this,o),t=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete t[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=f(this,o),i=g(t,e);if(i){var n=i.n,a=i.p;delete t._i[i.i],i.r=!0,a&&(a.n=n),n&&(n.p=a),t._f==i&&(t._f=n),t._l==i&&(t._l=a),t[m]--}return!!i},forEach:function(e){f(this,o);for(var t,i=c(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(i(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(f(this,o),e)}}),p&&r(a.prototype,"size",{get:function(){return f(this,o)[m]}}),a},def:function(e,t,i){var n,a,o=g(e,t);return o?o.v=i:(e._l=o={i:a=h(t,!0),k:t,v:i,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[m]++,"F"!==a&&(e._i[a]=o)),e},getEntry:g,setStrong:function(e,i,t){n(e,i,function(e,t){this._t=f(e,i),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?a(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,a(1))},t?"entries":"values",!t,!0),o(i)}}},function(e,t,i){"use strict";var r=i(43),s=i(28).getWeak,a=i(3),l=i(4),c=i(42),d=i(56),n=i(21),u=i(13),p=i(37),o=n(5),h=n(6),f=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return o(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var i=v(this,e);i?i[1]=t:this.a.push([e,t])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(e,i,n,a){var o=e(function(e,t){c(e,o,i,"_i"),e._t=i,e._i=f++,e._l=void 0,null!=t&&d(t,n,e[a],e)});return r(o.prototype,{delete:function(e){if(!l(e))return!1;var t=s(e);return!0===t?m(p(this,i)).delete(e):t&&u(t,this._i)&&delete t[this._i]},has:function(e){if(!l(e))return!1;var t=s(e);return!0===t?m(p(this,i)).has(e):t&&u(t,this._i)}}),o},def:function(e,t,i){var n=s(a(t),!0);return!0===n?m(e).set(t,i):n[e._i]=i,e},ufstore:m}},function(e,t,i){var n=i(18),a=i(6);e.exports=function(e){if(void 0===e)return 0;var t=n(e),i=a(t);if(t!==i)throw RangeError("Wrong length!");return i}},function(e,t,i){var n=i(35),a=i(50),o=i(3),r=i(1).Reflect;e.exports=r&&r.ownKeys||function(e){var t=n.f(o(e)),i=a.f;return i?t.concat(i(e)):t}},function(e,t,i){var d=i(6),u=i(69),p=i(25);e.exports=function(e,t,i,n){var a=String(p(e)),o=a.length,r=void 0===i?" ":String(i),s=d(t);if(s<=o||""==r)return a;var l=s-o,c=u.call(r,Math.ceil(l/r.length));return c.length>l&&(c=c.slice(0,l)),n?c+a:a+c}},function(e,t,i){var l=i(32),c=i(15),d=i(45).f;e.exports=function(s){return function(e){for(var t,i=c(e),n=l(i),a=n.length,o=0,r=[];o<a;)d.call(i,t=n[o++])&&r.push(s?[t,i[t]]:i[t]);return r}}},function(e,t){var n,i;n=window,(i=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);var t=this,i=function(){setTimeout(function(){!0===t._options.checkOnLoad&&(!0===t._options.debug&&t._log("onload->eventCallback","A check loading is launched"),null===t._var.bait&&t._creatBait(),setTimeout(function(){t.check()},1))},1)};void 0!==n.addEventListener?n.addEventListener("load",i,!1):n.attachEvent("onload",i)}).prototype._options=null,i.prototype._var=null,i.prototype._bait=null,i.prototype._log=function(e,t){console.log("[BlockAdBlock]["+e+"] "+t)},i.prototype.setOption=function(e,t){if(void 0!==t){var i=e;(e={})[i]=t}for(var n in e)this._options[n]=e[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+e[n]+'"');return this},i.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=n.document.body.appendChild(e),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},i.prototype._destroyBait=function(){n.document.body.removeChild(this._var.bait),!(this._var.bait=null)===this._options.debug&&this._log("_destroyBait","Bait has been removed")},i.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===e?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return!(this._var.loopNumber=0)===e&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},i.prototype._checkBait=function(e){var t=!1;if(null===this._var.bait&&this._creatBait(),null===n.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(t=!0),void 0!==n.getComputedStyle){var i=n.getComputedStyle(this._var.bait,null);!i||"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(t=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===t?"positive":"negative")),!0===e&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===t?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===e&&(this._var.checking=!1)):null!==this._var.loop&&!1!==e||(this._destroyBait(),this.emitEvent(!1),!0===e&&(this._var.checking=!1))},i.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,!(this._var.loopNumber=0)===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},i.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===e?"positive":"negative")+" detection was called");var t=this._var.event[!0===e?"detected":"notDetected"];for(var i in t)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+t.length),t.hasOwnProperty(i)&&t[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},i.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},i.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===e?"detected":"notDetected")+'" was added'),this},i.prototype.onDetected=function(e){return this.on(!0,e)},i.prototype.onNotDetected=function(e){return this.on(!1,e)},n.BlockAdBlock=i,void 0===n.blockAdBlock&&(n.blockAdBlock=new i({checkOnLoad:!0,resetOnEnd:!0}))},function(e,t,i){var n=i(290),a=i(291),o=i(292);e.exports=function(e){return n(e)||a(e)||o()}},function(e,t,i){"use strict";var n=i(293),r=i(294),s=i(295);function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function a(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function o(e,t){var a=function(e){var n;switch((t=r({arrayFormat:"none"},t)).arrayFormat){case"index":return function(e,t,i){n=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),n?(void 0===i[e]&&(i[e]={}),i[e][n[1]]=t):i[e]=t};case"bracket":return function(e,t,i){n=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),n?void 0!==i[e]?i[e]=[].concat(i[e],t):i[e]=[t]:i[e]=t};default:return function(e,t,i){void 0!==i[e]?i[e]=[].concat(i[e],t):i[e]=t}}}(),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),n=0<t.length?t.join("="):void 0;n=void 0===n?null:s(n),a(s(i),n,o)}),Object.keys(o).sort().reduce(function(e,t){var i=o[t];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(i):e[t]=i,e},Object.create(null))):o}t.extract=a,t.parse=o,t.stringify=function(n,a){!1===(a=r({encode:!0,strict:!0,arrayFormat:"none"},a)).sort&&(a.sort=function(){});var o=function(n){switch(n.arrayFormat){case"index":return function(e,t,i){return null===t?[l(e,n),"[",i,"]"].join(""):[l(e,n),"[",l(i,n),"]=",l(t,n)].join("")};case"bracket":return function(e,t){return null===t?l(e,n):[l(e,n),"[]=",l(t,n)].join("")};default:return function(e,t){return null===t?l(e,n):[l(e,n),"=",l(t,n)].join("")}}}(a);return n?Object.keys(n).sort(a.sort).map(function(t){var e=n[t];if(void 0===e)return"";if(null===e)return l(t,a);if(Array.isArray(e)){var i=[];return e.slice().forEach(function(e){void 0!==e&&i.push(o(t,e,i.length))}),i.join("&")}return l(t,a)+"="+l(e,a)}).filter(function(e){return 0<e.length}).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:o(a(e),t)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Gettext});var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(120),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),Gettext=function(){function Gettext(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,Gettext),this.localeData=e.localeData,this.contextDelimiter=String.fromCharCode(4),this.language=this.localeData[""].language}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Gettext,[{key:"_translateText",value:function(e,t,i,n,a){var o="";t||console.error("No text was provided to translate.");var r=t;e&&(r=e+this.contextDelimiter+t);var s=this.localeData[r];return s?(s[0],o=n?s[this._evalPluralIdx(n)+1]:s[1]):o=$.isNumeric(n)&&1!=n?i:t,a&&(o=this._interpolateVars(o,a)),o}},{key:"_evalPluralIdx",value:function _evalPluralIdx(n){var pluralForms=this.localeData[""]["plural-forms"],nplurals,plural,idx=eval(pluralForms);return!0===idx?idx=1:!1===idx&&(idx=0),idx}},{key:"_interpolateVars",value:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var a=i[n],o=new RegExp("{"+a+"}","g");e=e.replace(o,t[a])}return e}}]),Gettext}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,i){var n=i(296),a=i(297),o=i(298);e.exports=function(e,t){return n(e)||a(e,t)||o()}},function(e,t,i){"use strict";(function(e){i(125),i(269),i(271),i(273),i(275),i(277),i(279),i(281),i(283),i(285),i(289),e._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e._babelPolyfill=!0}).call(this,i(124))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){i(126),i(129),i(130),i(131),i(132),i(133),i(134),i(135),i(136),i(137),i(138),i(139),i(140),i(141),i(142),i(143),i(144),i(145),i(146),i(147),i(148),i(149),i(150),i(151),i(152),i(153),i(154),i(155),i(156),i(157),i(158),i(159),i(160),i(161),i(162),i(163),i(164),i(165),i(166),i(167),i(168),i(169),i(170),i(172),i(173),i(174),i(175),i(176),i(177),i(178),i(179),i(180),i(181),i(182),i(183),i(184),i(185),i(186),i(187),i(188),i(189),i(190),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(205),i(207),i(208),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(219),i(220),i(221),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(230),i(231),i(81),i(232),i(105),i(233),i(106),i(234),i(235),i(236),i(237),i(107),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(248),i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),e.exports=i(9)},function(e,t,i){"use strict";var n=i(1),r=i(13),a=i(8),o=i(0),s=i(10),l=i(28).KEY,c=i(2),d=i(48),u=i(38),p=i(30),h=i(5),f=i(61),m=i(87),g=i(128),v=i(64),b=i(3),_=i(4),y=i(15),A=i(27),w=i(29),x=i(34),k=i(90),$=i(19),C=i(7),S=i(32),T=$.f,D=C.f,E=k.f,I=n.Symbol,P=n.JSON,M=P&&P.stringify,O=h("_hidden"),N=h("toPrimitive"),j={}.propertyIsEnumerable,L=d("symbol-registry"),R=d("symbols"),F=d("op-symbols"),z=Object.prototype,q="function"==typeof I,H=n.QObject,W=!H||!H.prototype||!H.prototype.findChild,V=a&&c(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=T(z,t);n&&delete z[t],D(e,t,i),n&&e!==z&&D(z,t,n)}:D,U=function(e){var t=R[e]=x(I.prototype);return t._k=e,t},B=q&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Y=function(e,t,i){return e===z&&Y(F,t,i),b(e),t=A(t,!0),b(i),r(R,t)?(i.enumerable?(r(e,O)&&e[O][t]&&(e[O][t]=!1),i=x(i,{enumerable:w(0,!1)})):(r(e,O)||D(e,O,w(1,{})),e[O][t]=!0),V(e,t,i)):D(e,t,i)},K=function(e,t){b(e);for(var i,n=g(t=y(t)),a=0,o=n.length;a<o;)Y(e,i=n[a++],t[i]);return e},J=function(e){var t=j.call(this,e=A(e,!0));return!(this===z&&r(R,e)&&!r(F,e))&&(!(t||!r(this,e)||!r(R,e)||r(this,O)&&this[O][e])||t)},G=function(e,t){if(e=y(e),t=A(t,!0),e!==z||!r(R,t)||r(F,t)){var i=T(e,t);return!i||!r(R,t)||r(e,O)&&e[O][t]||(i.enumerable=!0),i}},X=function(e){for(var t,i=E(y(e)),n=[],a=0;i.length>a;)r(R,t=i[a++])||t==O||t==l||n.push(t);return n},Q=function(e){for(var t,i=e===z,n=E(i?F:y(e)),a=[],o=0;n.length>o;)!r(R,t=n[o++])||i&&!r(z,t)||a.push(R[t]);return a};q||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=p(0<arguments.length?arguments[0]:void 0),i=function(e){this===z&&i.call(F,e),r(this,O)&&r(this[O],t)&&(this[O][t]=!1),V(this,t,w(1,e))};return a&&W&&V(z,t,{configurable:!0,set:i}),U(t)}).prototype,"toString",function(){return this._k}),$.f=G,C.f=Y,i(35).f=k.f=X,i(45).f=J,i(50).f=Q,a&&!i(31)&&s(z,"propertyIsEnumerable",J,!0),f.f=function(e){return U(h(e))}),o(o.G+o.W+o.F*!q,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=S(h.store),ie=0;te.length>ie;)m(te[ie++]);o(o.S+o.F*!q,"Symbol",{for:function(e){return r(L,e+="")?L[e]:L[e]=I(e)},keyFor:function(e){if(!B(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!q,"Object",{create:function(e,t){return void 0===t?x(e):K(x(e),t)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:G,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),P&&o(o.S+o.F*(!q||c(function(){var e=I();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,i,n=[e],a=1;arguments.length>a;)n.push(arguments[a++]);if(i=t=n[1],(_(t)||void 0!==e)&&!B(e))return v(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!B(t))return t}),n[1]=t,M.apply(P,n)}}),I.prototype[N]||i(14)(I.prototype,N,I.prototype.valueOf),u(I,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},function(e,t,i){e.exports=i(48)("native-function-to-string",Function.toString)},function(e,t,i){var s=i(32),l=i(50),c=i(45);e.exports=function(e){var t=s(e),i=l.f;if(i)for(var n,a=i(e),o=c.f,r=0;a.length>r;)o.call(e,n=a[r++])&&t.push(n);return t}},function(e,t,i){var n=i(0);n(n.S,"Object",{create:i(34)})},function(e,t,i){var n=i(0);n(n.S+n.F*!i(8),"Object",{defineProperty:i(7).f})},function(e,t,i){var n=i(0);n(n.S+n.F*!i(8),"Object",{defineProperties:i(89)})},function(e,t,i){var n=i(15),a=i(19).f;i(20)("getOwnPropertyDescriptor",function(){return function(e,t){return a(n(e),t)}})},function(e,t,i){var n=i(11),a=i(36);i(20)("getPrototypeOf",function(){return function(e){return a(n(e))}})},function(e,t,i){var n=i(11),a=i(32);i(20)("keys",function(){return function(e){return a(n(e))}})},function(e,t,i){i(20)("getOwnPropertyNames",function(){return i(90).f})},function(e,t,i){var n=i(4),a=i(28).onFreeze;i(20)("freeze",function(t){return function(e){return t&&n(e)?t(a(e)):e}})},function(e,t,i){var n=i(4),a=i(28).onFreeze;i(20)("seal",function(t){return function(e){return t&&n(e)?t(a(e)):e}})},function(e,t,i){var n=i(4),a=i(28).onFreeze;i(20)("preventExtensions",function(t){return function(e){return t&&n(e)?t(a(e)):e}})},function(e,t,i){var n=i(4);i(20)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(e,t,i){var n=i(4);i(20)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(e,t,i){var n=i(4);i(20)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(e,t,i){var n=i(0);n(n.S+n.F,"Object",{assign:i(91)})},function(e,t,i){var n=i(0);n(n.S,"Object",{is:i(92)})},function(e,t,i){var n=i(0);n(n.S,"Object",{setPrototypeOf:i(66).set})},function(e,t,i){"use strict";var n=i(46),a={};a[i(5)("toStringTag")]="z",a+""!="[object z]"&&i(10)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,i){var n=i(0);n(n.P,"Function",{bind:i(93)})},function(e,t,i){var n=i(7).f,a=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in a||i(8)&&n(a,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,i){"use strict";var n=i(4),a=i(36),o=i(5)("hasInstance"),r=Function.prototype;o in r||i(7).f(r,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=a(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,i){var n=i(0),a=i(95);n(n.G+n.F*(parseInt!=a),{parseInt:a})},function(e,t,i){var n=i(0),a=i(96);n(n.G+n.F*(parseFloat!=a),{parseFloat:a})},function(e,t,i){"use strict";var n=i(1),a=i(13),o=i(24),r=i(68),d=i(27),s=i(2),l=i(35).f,c=i(19).f,u=i(7).f,p=i(51).trim,h=n.Number,f=h,m=h.prototype,g="Number"==o(i(34)(m)),v="trim"in String.prototype,b=function(e){var t=d(e,!1);if("string"==typeof t&&2<t.length){var i,n,a,o=(t=v?t.trim():p(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=t.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var r,s=t.slice(2),l=0,c=s.length;l<c;l++)if((r=s.charCodeAt(l))<48||a<r)return NaN;return parseInt(s,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof h&&(g?s(function(){m.valueOf.call(i)}):"Number"!=o(i))?r(new f(b(t)),i,h):b(t)};for(var _,y=i(8)?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;y.length>A;A++)a(f,_=y[A])&&!a(h,_)&&u(h,_,c(f,_));(h.prototype=m).constructor=h,i(10)(n,"Number",h)}},function(e,t,i){"use strict";var n=i(0),c=i(18),d=i(97),u=i(69),a=1..toFixed,o=Math.floor,r=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!",h=function(e,t){for(var i=-1,n=t;++i<6;)n+=e*r[i],r[i]=n%1e7,n=o(n/1e7)},f=function(e){for(var t=6,i=0;0<=--t;)i+=r[t],r[t]=o(i/e),i=i%e*1e7},m=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==r[e]){var i=String(r[e]);t=""===t?i:t+u.call("0",7-i.length)+i}return t},g=function(e,t,i){return 0===t?i:t%2==1?g(e,t-1,i*e):g(e*e,t/2,i)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(2)(function(){a.call({})})),"Number",{toFixed:function(e){var t,i,n,a,o=d(this,p),r=c(e),s="",l="0";if(r<0||20<r)throw RangeError(p);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(i=(t=function(e){for(var t=0,i=o*g(2,69,1);4096<=i;)t+=12,i/=4096;for(;2<=i;)t+=1,i/=2;return t}()-69)<0?o*g(2,-t,1):o/g(2,t,1),i*=4503599627370496,0<(t=52-t)){for(h(0,i),n=r;7<=n;)h(1e7,0),n-=7;for(h(g(10,n,1),0),n=t-1;23<=n;)f(1<<23),n-=23;f(1<<n),h(1,1),f(2),l=m()}else h(0,i),h(1<<-t,0),l=m()+u.call("0",r);return 0<r?s+((a=l.length)<=r?"0."+u.call("0",r-a)+l:l.slice(0,a-r)+"."+l.slice(a-r)):s+l}})},function(e,t,i){"use strict";var n=i(0),a=i(2),o=i(97),r=1..toPrecision;n(n.P+n.F*(a(function(){return"1"!==r.call(1,void 0)})||!a(function(){r.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},function(e,t,i){var n=i(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,i){var n=i(0),a=i(1).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},function(e,t,i){var n=i(0);n(n.S,"Number",{isInteger:i(98)})},function(e,t,i){var n=i(0);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,i){var n=i(0),a=i(98),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return a(e)&&o(e)<=9007199254740991}})},function(e,t,i){var n=i(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,i){var n=i(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,i){var n=i(0),a=i(96);n(n.S+n.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(e,t,i){var n=i(0),a=i(95);n(n.S+n.F*(Number.parseInt!=a),"Number",{parseInt:a})},function(e,t,i){var n=i(0),a=i(99),o=Math.sqrt,r=Math.acosh;n(n.S+n.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:a(e-1+o(e-1)*o(e+1))}})},function(e,t,i){var n=i(0),a=Math.asinh;n(n.S+n.F*!(a&&0<1/a(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,i){var n=i(0),a=Math.atanh;n(n.S+n.F*!(a&&1/a(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,i){var n=i(0),a=i(70);n(n.S,"Math",{cbrt:function(e){return a(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,i){var n=i(0);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,i){var n=i(0),a=Math.exp;n(n.S,"Math",{cosh:function(e){return(a(e=+e)+a(-e))/2}})},function(e,t,i){var n=i(0),a=i(71);n(n.S+n.F*(a!=Math.expm1),"Math",{expm1:a})},function(e,t,i){var n=i(0);n(n.S,"Math",{fround:i(171)})},function(e,t,i){var o=i(70),n=Math.pow,r=n(2,-52),s=n(2,-23),l=n(2,127)*(2-s),c=n(2,-126);e.exports=Math.fround||function(e){var t,i,n=Math.abs(e),a=o(e);return n<c?a*(n/c/s+1/r-1/r)*c*s:(i=(t=(1+s/r)*n)-(t-n))>l||i!=i?a*(1/0):a*i}},function(e,t,i){var n=i(0),l=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var i,n,a=0,o=0,r=arguments.length,s=0;o<r;)s<(i=l(arguments[o++]))?(a=a*(n=s/i)*n+1,s=i):a+=0<i?(n=i/s)*n:i;return s===1/0?1/0:s*Math.sqrt(a)}})},function(e,t,i){var n=i(0),a=Math.imul;n(n.S+n.F*i(2)(function(){return-5!=a(4294967295,5)||2!=a.length}),"Math",{imul:function(e,t){var i=+e,n=+t,a=65535&i,o=65535&n;return 0|a*o+((65535&i>>>16)*o+a*(65535&n>>>16)<<16>>>0)}})},function(e,t,i){var n=i(0);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,i){var n=i(0);n(n.S,"Math",{log1p:i(99)})},function(e,t,i){var n=i(0);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,i){var n=i(0);n(n.S,"Math",{sign:i(70)})},function(e,t,i){var n=i(0),a=i(71),o=Math.exp;n(n.S+n.F*i(2)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(a(e)-a(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,i){var n=i(0),a=i(71),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=a(e=+e),i=a(-e);return t==1/0?1:i==1/0?-1:(t-i)/(o(e)+o(-e))}})},function(e,t,i){var n=i(0);n(n.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,i){var n=i(0),o=i(33),r=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,i=[],n=arguments.length,a=0;a<n;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");i.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return i.join("")}})},function(e,t,i){var n=i(0),r=i(15),s=i(6);n(n.S,"String",{raw:function(e){for(var t=r(e.raw),i=s(t.length),n=arguments.length,a=[],o=0;o<i;)a.push(String(t[o++])),o<n&&a.push(String(arguments[o]));return a.join("")}})},function(e,t,i){"use strict";i(51)("trim",function(e){return function(){return e(this,3)}})},function(e,t,i){"use strict";var n=i(72)(!0);i(73)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){"use strict";var n=i(0),a=i(72)(!1);n(n.P,"String",{codePointAt:function(e){return a(this,e)}})},function(e,t,i){"use strict";var n=i(0),r=i(6),s=i(74),l="".endsWith;n(n.P+n.F*i(76)("endsWith"),"String",{endsWith:function(e){var t=s(this,e,"endsWith"),i=1<arguments.length?arguments[1]:void 0,n=r(t.length),a=void 0===i?n:Math.min(r(i),n),o=String(e);return l?l.call(t,o,a):t.slice(a-o.length,a)===o}})},function(e,t,i){"use strict";var n=i(0),a=i(74);n(n.P+n.F*i(76)("includes"),"String",{includes:function(e){return!!~a(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,i){var n=i(0);n(n.P,"String",{repeat:i(69)})},function(e,t,i){"use strict";var n=i(0),a=i(6),o=i(74),r="".startsWith;n(n.P+n.F*i(76)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),i=a(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),n=String(e);return r?r.call(t,n,i):t.slice(i,i+n.length)===n}})},function(e,t,i){"use strict";i(12)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(e,t,i){"use strict";i(12)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,i){"use strict";i(12)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,i){"use strict";i(12)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,i){"use strict";i(12)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,i){"use strict";i(12)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(e,t,i){"use strict";i(12)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(e,t,i){"use strict";i(12)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,i){"use strict";i(12)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(e,t,i){"use strict";i(12)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,i){"use strict";i(12)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,i){"use strict";i(12)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,i){"use strict";i(12)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,i){var n=i(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,i){"use strict";var n=i(0),a=i(11),o=i(27);n(n.P+n.F*i(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=a(this),i=o(t);return"number"!=typeof i||isFinite(i)?t.toISOString():null}})},function(e,t,i){var n=i(0),a=i(206);n(n.P+n.F*(Date.prototype.toISOString!==a),"Date",{toISOString:a})},function(e,t,i){"use strict";var n=i(2),a=Date.prototype.getTime,o=Date.prototype.toISOString,r=function(e){return 9<e?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!n(function(){o.call(new Date(NaN))})?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),i=e<0?"-":9999<e?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+(99<t?t:"0"+r(t))+"Z"}:o},function(e,t,i){var n=Date.prototype,a=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(10)(n,"toString",function(){var e=o.call(this);return e==e?a.call(this):"Invalid Date"})},function(e,t,i){var n=i(5)("toPrimitive"),a=Date.prototype;n in a||i(14)(a,n,i(209))},function(e,t,i){"use strict";var n=i(3),a=i(27);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return a(n(this),"number"!=e)}},function(e,t,i){var n=i(0);n(n.S,"Array",{isArray:i(64)})},function(e,t,i){"use strict";var p=i(22),n=i(0),h=i(11),f=i(101),m=i(77),g=i(6),v=i(78),b=i(79);n(n.S+n.F*!i(52)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,n,a,o=h(e),r="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,c=void 0!==l,d=0,u=b(o);if(c&&(l=p(l,2<s?arguments[2]:void 0,2)),null==u||r==Array&&m(u))for(i=new r(t=g(o.length));d<t;d++)v(i,d,c?l(o[d],d):o[d]);else for(a=u.call(o),i=new r;!(n=a.next()).done;d++)v(i,d,c?f(a,l,[n.value,d],!0):n.value);return i.length=d,i}})},function(e,t,i){"use strict";var n=i(0),a=i(78);n(n.S+n.F*i(2)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,i=new("function"==typeof this?this:Array)(t);e<t;)a(i,e,arguments[e++]);return i.length=t,i}})},function(e,t,i){"use strict";var n=i(0),a=i(15),o=[].join;n(n.P+n.F*(i(44)!=Object||!i(17)(o)),"Array",{join:function(e){return o.call(a(this),void 0===e?",":e)}})},function(e,t,i){"use strict";var n=i(0),a=i(65),c=i(24),d=i(33),u=i(6),p=[].slice;n(n.P+n.F*i(2)(function(){a&&p.call(a)}),"Array",{slice:function(e,t){var i=u(this.length),n=c(this);if(t=void 0===t?i:t,"Array"==n)return p.call(this,e,t);for(var a=d(e,i),o=d(t,i),r=u(o-a),s=new Array(r),l=0;l<r;l++)s[l]="String"==n?this.charAt(a+l):this[a+l];return s}})},function(e,t,i){"use strict";var n=i(0),a=i(23),o=i(11),r=i(2),s=[].sort,l=[1,2,3];n(n.P+n.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!i(17)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),a(e))}})},function(e,t,i){"use strict";var n=i(0),a=i(21)(0),o=i(17)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return a(this,e,arguments[1])}})},function(e,t,i){var n=i(218);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,i){var n=i(4),a=i(64),o=i(5)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,i){"use strict";var n=i(0),a=i(21)(1);n(n.P+n.F*!i(17)([].map,!0),"Array",{map:function(e){return a(this,e,arguments[1])}})},function(e,t,i){"use strict";var n=i(0),a=i(21)(2);n(n.P+n.F*!i(17)([].filter,!0),"Array",{filter:function(e){return a(this,e,arguments[1])}})},function(e,t,i){"use strict";var n=i(0),a=i(21)(3);n(n.P+n.F*!i(17)([].some,!0),"Array",{some:function(e){return a(this,e,arguments[1])}})},function(e,t,i){"use strict";var n=i(0),a=i(21)(4);n(n.P+n.F*!i(17)([].every,!0),"Array",{every:function(e){return a(this,e,arguments[1])}})},function(e,t,i){"use strict";var n=i(0),a=i(102);n(n.P+n.F*!i(17)([].reduce,!0),"Array",{reduce:function(e){return a(this,e,arguments.length,arguments[1],!1)}})},function(e,t,i){"use strict";var n=i(0),a=i(102);n(n.P+n.F*!i(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return a(this,e,arguments.length,arguments[1],!0)}})},function(e,t,i){"use strict";var n=i(0),a=i(49)(!1),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(r||!i(17)(o)),"Array",{indexOf:function(e){return r?o.apply(this,arguments)||0:a(this,e,arguments[1])}})},function(e,t,i){"use strict";var n=i(0),a=i(15),o=i(18),r=i(6),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!i(17)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=a(this),i=r(t.length),n=i-1;for(1<arguments.length&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=i+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,i){var n=i(0);n(n.P,"Array",{copyWithin:i(103)}),i(40)("copyWithin")},function(e,t,i){var n=i(0);n(n.P,"Array",{fill:i(80)}),i(40)("fill")},function(e,t,i){"use strict";var n=i(0),a=i(21)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}}),i(40)("find")},function(e,t,i){"use strict";var n=i(0),a=i(21)(6),o="findIndex",r=!0;o in[]&&Array(1)[o](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}}),i(40)(o)},function(e,t,i){i(41)("Array")},function(e,t,i){var n=i(1),o=i(68),a=i(7).f,r=i(35).f,s=i(75),l=i(53),c=n.RegExp,d=c,u=c.prototype,p=/a/g,h=/a/g,f=new c(p)!==p;if(i(8)&&(!f||i(2)(function(){return h[i(5)("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")}))){c=function(e,t){var i=this instanceof c,n=s(e),a=void 0===t;return!i&&n&&e.constructor===c&&a?e:o(f?new d(n&&!a?e.source:e,t):d((n=e instanceof c)?e.source:e,n&&a?l.call(e):t),i?this:u,c)};for(var m=function(t){t in c||a(c,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},g=r(d),v=0;g.length>v;)m(g[v++]);(u.constructor=c).prototype=u,i(10)(n,"RegExp",c)}i(41)("RegExp")},function(e,t,i){"use strict";i(106);var n=i(3),a=i(53),o=i(8),r=/./.toString,s=function(e){i(10)(RegExp.prototype,"toString",e,!0)};i(2)(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):void 0)}):"toString"!=r.name&&s(function(){return r.call(this)})},function(e,t,i){"use strict";var u=i(3),p=i(6),h=i(83),f=i(54);i(55)("match",1,function(n,a,c,d){return[function(e){var t=n(this),i=null==e?void 0:e[a];return void 0!==i?i.call(e,t):new RegExp(e)[a](String(t))},function(e){var t=d(c,e,this);if(t.done)return t.value;var i=u(e),n=String(this);if(!i.global)return f(i,n);for(var a,o=i.unicode,r=[],s=i.lastIndex=0;null!==(a=f(i,n));){var l=String(a[0]);""===(r[s]=l)&&(i.lastIndex=h(n,p(i.lastIndex),o)),s++}return 0===s?null:r}]})},function(e,t,i){"use strict";var k=i(3),n=i(11),$=i(6),C=i(18),S=i(83),T=i(54),D=Math.max,E=Math.min,p=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;i(55)("replace",2,function(a,o,A,w){return[function(e,t){var i=a(this),n=null==e?void 0:e[o];return void 0!==n?n.call(e,i,t):A.call(String(i),e,t)},function(e,t){var i=w(A,e,this,t);if(i.done)return i.value;var n=k(e),a=String(this),o="function"==typeof t;o||(t=String(t));var r=n.global;if(r){var s=n.unicode;n.lastIndex=0}for(var l=[];;){var c=T(n,a);if(null===c)break;if(l.push(c),!r)break;""===String(c[0])&&(n.lastIndex=S(a,$(n.lastIndex),s))}for(var d,u="",p=0,h=0;h<l.length;h++){c=l[h];for(var f=String(c[0]),m=D(E(C(c.index),a.length),0),g=[],v=1;v<c.length;v++)g.push(void 0===(d=c[v])?d:String(d));var b=c.groups;if(o){var _=[f].concat(g,m,a);void 0!==b&&_.push(b);var y=String(t.apply(void 0,_))}else y=x(f,a,m,g,b,t);p<=m&&(u+=a.slice(p,m)+y,p=m+f.length)}return u+a.slice(p)}];function x(o,r,s,l,c,e){var d=s+o.length,u=l.length,t=f;return void 0!==c&&(c=n(c),t=h),A.call(e,t,function(e,t){var i;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return r.slice(0,s);case"'":return r.slice(d);case"<":i=c[t.slice(1,-1)];break;default:var n=+t;if(0===n)return e;if(u<n){var a=p(n/10);return 0===a?e:a<=u?void 0===l[a-1]?t.charAt(1):l[a-1]+t.charAt(1):e}i=l[n-1]}return void 0===i?"":i})}})},function(e,t,i){"use strict";var l=i(3),c=i(92),d=i(54);i(55)("search",1,function(n,a,r,s){return[function(e){var t=n(this),i=null==e?void 0:e[a];return void 0!==i?i.call(e,t):new RegExp(e)[a](String(t))},function(e){var t=s(r,e,this);if(t.done)return t.value;var i=l(e),n=String(this),a=i.lastIndex;c(a,0)||(i.lastIndex=0);var o=d(i,n);return c(i.lastIndex,a)||(i.lastIndex=a),null===o?-1:o.index}]})},function(e,t,i){"use strict";var u=i(75),_=i(3),y=i(47),A=i(83),w=i(6),x=i(54),p=i(82),n=i(2),k=Math.min,h=[].push,$=!n(function(){RegExp(4294967295,"y")});i(55)("split",2,function(a,o,g,v){var b;return b="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!u(e))return g.call(i,e,t);for(var n,a,o,r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,c=void 0===t?4294967295:t>>>0,d=new RegExp(e.source,s+"g");(n=p.call(d,i))&&!((a=d.lastIndex)>l&&(r.push(i.slice(l,n.index)),1<n.length&&n.index<i.length&&h.apply(r,n.slice(1)),o=n[0].length,l=a,r.length>=c));)d.lastIndex===n.index&&d.lastIndex++;return l===i.length?!o&&d.test("")||r.push(""):r.push(i.slice(l)),r.length>c?r.slice(0,c):r}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)}:g,[function(e,t){var i=a(this),n=null==e?void 0:e[o];return void 0!==n?n.call(e,i,t):b.call(String(i),e,t)},function(e,t){var i=v(b,e,this,t,b!==g);if(i.done)return i.value;var n=_(e),a=String(this),o=y(n,RegExp),r=n.unicode,s=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+($?"y":"g"),l=new o($?n:"^(?:"+n.source+")",s),c=void 0===t?4294967295:t>>>0;if(0===c)return[];if(0===a.length)return null===x(l,a)?[a]:[];for(var d=0,u=0,p=[];u<a.length;){l.lastIndex=$?u:0;var h,f=x(l,$?a:a.slice(u));if(null===f||(h=k(w(l.lastIndex+($?0:u)),a.length))===d)u=A(a,u,r);else{if(p.push(a.slice(d,u)),p.length===c)return p;for(var m=1;m<=f.length-1;m++)if(p.push(f[m]),p.length===c)return p;u=d=h}}return p.push(a.slice(d)),p}]})},function(e,t,i){var s=i(1),l=i(84).set,c=s.MutationObserver||s.WebKitMutationObserver,d=s.process,u=s.Promise,p="process"==i(24)(d);e.exports=function(){var i,n,a,e=function(){var e,t;for(p&&(e=d.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():n=void 0,e}}n=void 0,e&&e.enter()};if(p)a=function(){d.nextTick(e)};else if(!c||s.navigator&&s.navigator.standalone)if(u&&u.resolve){var t=u.resolve(void 0);a=function(){t.then(e)}}else a=function(){l.call(s,e)};else{var o=!0,r=document.createTextNode("");new c(e).observe(r,{characterData:!0}),a=function(){r.data=o=!o}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t),i||(i=t,a()),n=t}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,i){"use strict";var n=i(110),a=i(37);e.exports=i(58)("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(a(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,i){"use strict";var n=i(110),a=i(37);e.exports=i(58)("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(a(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,i){"use strict";var o,n=i(1),a=i(21)(0),r=i(10),s=i(28),l=i(91),c=i(111),d=i(4),u=i(37),p=i(37),h=!n.ActiveXObject&&"ActiveXObject"in n,f=s.getWeak,m=Object.isExtensible,g=c.ufstore,v=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},b={get:function(e){if(d(e)){var t=f(e);return!0===t?g(u(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(u(this,"WeakMap"),e,t)}},_=e.exports=i(58)("WeakMap",v,b,c,!0,!0);p&&h&&(l((o=c.getConstructor(v,"WeakMap")).prototype,b),s.NEED=!0,a(["delete","has","get","set"],function(n){var e=_.prototype,a=e[n];r(e,n,function(e,t){if(d(e)&&!m(e)){this._f||(this._f=new o);var i=this._f[n](e,t);return"set"==n?this:i}return a.call(this,e,t)})}))},function(e,t,i){"use strict";var n=i(111),a=i(37);i(58)("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(a(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,i){"use strict";var n=i(0),a=i(59),o=i(85),c=i(3),d=i(33),u=i(6),r=i(4),s=i(1).ArrayBuffer,p=i(47),h=o.ArrayBuffer,f=o.DataView,l=a.ABV&&s.isView,m=h.prototype.slice,g=a.VIEW;n(n.G+n.W+n.F*(s!==h),{ArrayBuffer:h}),n(n.S+n.F*!a.CONSTR,"ArrayBuffer",{isView:function(e){return l&&l(e)||r(e)&&g in e}}),n(n.P+n.U+n.F*i(2)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(c(this),e);for(var i=c(this).byteLength,n=d(e,i),a=d(void 0===t?i:t,i),o=new(p(this,h))(u(a-n)),r=new f(this),s=new f(o),l=0;n<a;)s.setUint8(l++,r.getUint8(n++));return o}}),i(41)("ArrayBuffer")},function(e,t,i){var n=i(0);n(n.G+n.W+n.F*!i(59).ABV,{DataView:i(85).DataView})},function(e,t,i){i(26)("Int8",1,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Uint8",1,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Uint8",1,function(n){return function(e,t,i){return n(this,e,t,i)}},!0)},function(e,t,i){i(26)("Int16",2,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Uint16",2,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Int32",4,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Uint32",4,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Float32",4,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(26)("Float64",8,function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){var n=i(0),o=i(23),r=i(3),s=(i(1).Reflect||{}).apply,l=Function.apply;n(n.S+n.F*!i(2)(function(){s(function(){})}),"Reflect",{apply:function(e,t,i){var n=o(e),a=r(i);return s?s(n,t,a):l.call(n,t,a)}})},function(e,t,i){var n=i(0),s=i(34),l=i(23),c=i(3),d=i(4),a=i(2),u=i(93),p=(i(1).Reflect||{}).construct,h=a(function(){function e(){}return!(p(function(){},[],e)instanceof e)}),f=!a(function(){p(function(){})});n(n.S+n.F*(h||f),"Reflect",{construct:function(e,t){l(e),c(t);var i=arguments.length<3?e:l(arguments[2]);if(f&&!h)return p(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var a=i.prototype,o=s(d(a)?a:Object.prototype),r=Function.apply.call(e,o,t);return d(r)?r:o}})},function(e,t,i){var n=i(7),a=i(0),o=i(3),r=i(27);a(a.S+a.F*i(2)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,i){o(e),t=r(t,!0),o(i);try{return n.f(e,t,i),!0}catch(e){return!1}}})},function(e,t,i){var n=i(0),a=i(19).f,o=i(3);n(n.S,"Reflect",{deleteProperty:function(e,t){var i=a(o(e),t);return!(i&&!i.configurable)&&delete e[t]}})},function(e,t,i){"use strict";var n=i(0),a=i(3),o=function(e){this._t=a(e),this._i=0;var t,i=this._k=[];for(t in e)i.push(t)};i(100)(o,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,i){var r=i(19),s=i(36),l=i(13),n=i(0),c=i(4),d=i(3);n(n.S,"Reflect",{get:function e(t,i){var n,a,o=arguments.length<3?t:arguments[2];return d(t)===o?t[i]:(n=r.f(t,i))?l(n,"value")?n.value:void 0!==n.get?n.get.call(o):void 0:c(a=s(t))?e(a,i,o):void 0}})},function(e,t,i){var n=i(19),a=i(0),o=i(3);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},function(e,t,i){var n=i(0),a=i(36),o=i(3);n(n.S,"Reflect",{getPrototypeOf:function(e){return a(o(e))}})},function(e,t,i){var n=i(0);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,i){var n=i(0),a=i(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return a(e),!o||o(e)}})},function(e,t,i){var n=i(0);n(n.S,"Reflect",{ownKeys:i(113)})},function(e,t,i){var n=i(0),a=i(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){a(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,i){var l=i(7),c=i(19),d=i(36),u=i(13),n=i(0),p=i(29),h=i(3),f=i(4);n(n.S,"Reflect",{set:function e(t,i,n){var a,o,r=arguments.length<4?t:arguments[3],s=c.f(h(t),i);if(!s){if(f(o=d(t)))return e(o,i,n,r);s=p(0)}if(u(s,"value")){if(!1===s.writable||!f(r))return!1;if(a=c.f(r,i)){if(a.get||a.set||!1===a.writable)return!1;a.value=n,l.f(r,i,a)}else l.f(r,i,p(0,n));return!0}return void 0!==s.set&&(s.set.call(r,n),!0)}})},function(e,t,i){var n=i(0),a=i(66);a&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(e){return!1}}})},function(e,t,i){i(270),e.exports=i(9).Array.includes},function(e,t,i){"use strict";var n=i(0),a=i(49)(!0);n(n.P,"Array",{includes:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}}),i(40)("includes")},function(e,t,i){i(272),e.exports=i(9).String.padStart},function(e,t,i){"use strict";var n=i(0),a=i(114),o=i(57);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,i){i(274),e.exports=i(9).String.padEnd},function(e,t,i){"use strict";var n=i(0),a=i(114),o=i(57);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,i){i(276),e.exports=i(61).f("asyncIterator")},function(e,t,i){i(87)("asyncIterator")},function(e,t,i){i(278),e.exports=i(9).Object.getOwnPropertyDescriptors},function(e,t,i){var n=i(0),l=i(113),c=i(15),d=i(19),u=i(78);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,i,n=c(e),a=d.f,o=l(n),r={},s=0;o.length>s;)void 0!==(i=a(n,t=o[s++]))&&u(r,t,i);return r}})},function(e,t,i){i(280),e.exports=i(9).Object.values},function(e,t,i){var n=i(0),a=i(115)(!1);n(n.S,"Object",{values:function(e){return a(e)}})},function(e,t,i){i(282),e.exports=i(9).Object.entries},function(e,t,i){var n=i(0),a=i(115)(!0);n(n.S,"Object",{entries:function(e){return a(e)}})},function(e,t,i){"use strict";i(107),i(284),e.exports=i(9).Promise.finally},function(e,t,i){"use strict";var n=i(0),a=i(9),o=i(1),r=i(47),s=i(109);n(n.P+n.R,"Promise",{finally:function(t){var i=r(this,a.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return s(i,t()).then(function(){return e})}:t,e?function(e){return s(i,t()).then(function(){throw e})}:t)}})},function(e,t,i){i(286),i(287),i(288),e.exports=i(9)},function(e,t,i){var n=i(1),a=i(0),o=i(57),r=[].slice,s=/MSIE .\./.test(o),l=function(a){return function(e,t){var i=2<arguments.length,n=!!i&&r.call(arguments,2);return a(i?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};a(a.G+a.B+a.F*s,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(e,t,i){var n=i(0),a=i(84);n(n.G+n.B,{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,i){for(var n=i(81),a=i(32),o=i(10),r=i(1),s=i(14),l=i(39),c=i(5),d=c("iterator"),u=c("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=a(h),m=0;m<f.length;m++){var g,v=f[m],b=h[v],_=r[v],y=_&&_.prototype;if(y&&(y[d]||s(y,d,p),y[u]||s(y,u,v),l[v]=p,b))for(g in n)y[g]||o(y,g,n[g],!0)}},function(P,e){!function(e){"use strict";var l,t=Object.prototype,c=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag",r="object"==typeof P,s=e.regeneratorRuntime;if(s)r&&(P.exports=s);else{(s=e.regeneratorRuntime=r?P.exports:{}).wrap=_;var u="suspendedStart",p="suspendedYield",h="executing",f="completed",m={},d={};d[a]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==t&&c.call(v,a)&&(d=v);var b=x.prototype=A.prototype=Object.create(d);w.prototype=b.constructor=x,x.constructor=w,x[o]=w.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},k($.prototype),$.prototype[n]=function(){return this},s.AsyncIterator=$,s.async=function(e,t,i,n){var a=new $(_(e,t,i,n));return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(b),b[o]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(i){var n=[];for(var e in i)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=E,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function e(e,t){return o.type="throw",o.arg=i,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var r=c.call(a,"catchLoc"),s=c.call(a,"finallyLoc");if(r&&s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(r){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;T(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:E(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=l),m}}}function _(e,t,i,n){var o,r,s,l,a=t&&t.prototype instanceof A?t:A,c=Object.create(a.prototype),d=new D(n||[]);return c._invoke=(o=e,r=i,s=d,l=u,function(e,t){if(l===h)throw new Error("Generator is already running");if(l===f){if("throw"===e)throw t;return I()}for(s.method=e,s.arg=t;;){var i=s.delegate;if(i){var n=C(i,s);if(n){if(n===m)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===u)throw l=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=h;var a=y(o,r,s);if("normal"===a.type){if(l=s.done?f:p,a.arg===m)continue;return{value:a.arg,done:s.done}}"throw"===a.type&&(l=f,s.method="throw",s.arg=a.arg)}}),c}function y(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function A(){}function w(){}function x(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function $(l){var t;this._invoke=function(i,n){function e(){return new Promise(function(e,t){!function t(e,i,n,a){var o=y(l[e],l,i);if("throw"!==o.type){var r=o.arg,s=r.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,n,a)},function(e){t("throw",e,n,a)}):Promise.resolve(s).then(function(e){r.value=e,n(r)},function(e){return t("throw",e,n,a)})}a(o.arg)}(i,n,e,t)})}return t=t?t.then(e,e):e()}}function C(e,t){var i=e.iterator[t.method];if(i===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,C(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=y(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,m;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(c.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=l,e.done=!0,e};return n.next=n}}return{next:I}}function I(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,i){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,i){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,n,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var r in i=Object(arguments[o]))c.call(i,r)&&(a[r]=i[r]);if(l){n=l(i);for(var s=0;s<n.length;s++)d.call(i,n[s])&&(a[n[s]]=i[n[s]])}}return a}},function(e,t,i){"use strict";var a=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var i=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(i),o(n))}function l(t){try{return decodeURIComponent(t)}catch(e){for(var i=t.match(a),n=1;n<i.length;n++)i=(t=o(i,n).join("")).match(a);return t}}e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},i=s.exec(e);i;){try{t[i[0]]=decodeURIComponent(i[0])}catch(e){var n=l(i[0]);n!==i[0]&&(t[i[0]]=n)}i=s.exec(e)}t["%C2"]="\ufffd";for(var a=Object.keys(t),o=0;o<a.length;o++){var r=a[o];e=e.replace(new RegExp(r,"g"),t[r])}return e}(t)}}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var i=[],n=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,i){"use strict";i.r(t),i(123);var n=i(117),r=i.n(n),a=i(16),f=i.n(a),o=i(118),s=(i.n(o),{}),l={},m={},g={setKeyOrder:function(e,t){s[e]=t},addToDataStore:function(e,t){l[e]||(l[e]={}),Object.assign(l[e],t)},get:function(n,e){var t=l[n][e],a={};if(!t)throw"no data loaded for ".concat(n," with id: ").concat(e);return t.forEach(function(e,t){var i=s[n][t];a[i]=e}),a},destroy:function(){s={},l={}},get dataStore(){return l},get keyOrder(){return s}},c=function(e,t){return void 0===t?v(e):d(e,t)};function v(e){return void 0===m[e]?null:m[e]}function d(e,t){var i=e;Array.isArray(i)||(i=[[i,t]]),i.forEach(function(e){var t,i,n,a,o,r,s,l,c,d,u,p=e[0],h=e[1];a=p,b.test(a)?(c=h,u=v(l=p),(d=u)===Object(d)?Object.assign(u,c):m[l]=c):"_fauxJSONKeyOrder"===p?(i=(t=h).type,n=t.order,g.setKeyOrder(i,n)):"_fauxJSONData"===p?(r=(o=h).type,s=o.data,g.addToDataStore(r,s)):m[p]=h})}c.get=v,c.set=d,c.getObject=function(e,t){return g.get(e,t)},c.previewData=function(){return console.warn("This function is included for plugin developers to use to be able to easily see what data is currently available.  It is not intended for production use in a plugin."),m},c.previewObjects=function(){return console.warn("This function is included for plugin developers to use to be able to easily see what data is currently available.  It is not intended for production use in a plugin."),g.dataStore};var w=c,b=/proboards\.(conversation|message|post|report|thread|user)/,_=function(e){var t=w.get("csrf_token"),i={method:"post",url:e.url,data:{csrf_token:t}};e.pure&&(i.pure=!0);var n,a,o=(n=e.data,a=Object.assign({},n),n&&Object.keys(n).forEach(function(e){var t=e.length-2;if(0<t&&e.indexOf("[]")===t){var i=e.substr(0,t);a[i]=n[e],delete a[e]}}),a);return i.data=Object.assign({},i.data,o),i.data=JSON.stringify(i.data),i.data=encodeURIComponent(i.data),i.data="json=".concat(i.data),u(i)};function u(e){return new Promise(function(n,a){var o=new XMLHttpRequest;o.open(e.method,e.url),e.pure||(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-Content-Type","application/json")),o.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(e.data),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){var e=null!==(i=(t=o).getResponseHeader("Content-Type"))&&i.match(/json/)?JSON.parse(t.response):t.response;!function(e){if("object"===f()(e.pb_data))for(var t in e.pb_data)if("_google_analytics_events"===t);else if("_plugin_data"===t);else if("_user_ids_on_page"===t){if(null!==w.get("_user_ids_on_page")){var i=w.get("_user_ids_on_page").concat(e.pb_data[t]),n=new Set(i);w.set("_user_ids_on_page",r()(n))}}else w.set(t,e.pb_data[t])}(e),200<=o.status&&o.status<300?n(e):a(e)}var t,i}})}var p=i(119),y=null,A=null,h={init:function(e,t){A=t||{};var i=Object.assign({"":{language:null,"plural-forms":null}},e);y=new p.a({localeData:i})},translate_text:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},t);y||this.init();var n,a,o=0,r=0,s=null,l=null;e||console.error("No text was provided to translate."),new RegExp(/(.*?)(?:\[(\d+)\])?$/).test(e);var c=RegExp.$1,d=RegExp.$2||0,u=A[c]||{};"string"==typeof u&&(u=A[u]),u.context&&(s=u.context[d]),!s&&d&&(console.error("Error processing string: ".concat(e)),console.error("A context was expected, but none was found in the translation data.")),s&&o++,l=u.one||c,o++;var p=1!==i.count;a=i.count,n=p?u.many:null,-1===l.indexOf("{count}")&&(p=!1,delete i.count),p&&!n&&(console.error("Error processing string: ".concat(e)),console.error('Translating singular / plural, but the "many" setting was not found in the translation data.')),n&&(o+=2);for(var h=!1,f=Object.keys(i),m=0;m<f.length;m++){f[m],h=!0;break}h&&r++;var g="";return 1===o&&0===r?g=y._translateText(null,l,null,null):1===o&&1===r?g=y._translateText(null,l,null,null,i):2===o&&0===r?g=y._translateText(s,l,null,null):2===o&&1===r?g=y._translateText(s,l,null,null,i):3===o&&0===r?g=y._translateText(null,l,n,a):3===o&&1===r?g=y._translateText(null,l,n,a,i):4===o&&0===r?g=y._translateText(s,l,n,a):4===o&&1===r&&(g=y._translateText(s,l,n,a,i)),g},join_with_and:function(e){if(Array.isArray(e)){var t=e.length;if(t<1)return"";if(1===t)return e[0];if(2===t)return e[0]+this.translate_text(" and ")+e[1];var i=e.pop(),n=e.join("".concat(","," ")),a="".concat(this.translate_text(" and ")).concat(i);return"".concat(n).concat(",").concat(a)}},capitalizeFirstLetter:function(e){return"".concat(e.charAt(0).toLocaleUpperCase()).concat(e.slice(1))}};h.translate_text("Confirm"),h.translate_text("Please confirm your action"),h.translate_text("Yes"),h.translate_text("No"),h.translate_text("Alert"),h.translate_text("OK"),h.translate_text("Selection"),h.translate_text("Confirm Selection"),h.translate_text("Cancel"),h.translate_text("Verify"),h.translate_text("Verify"),h.translate_text("Verify");var x="click";$(function(){$.fn.onEvent=function(e,t){switch(e){case"click":this.each(function(){!function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=!0;e.addEventListener("touchstart",function(e){i=!1!==t(e)},{passive:!1}),e.addEventListener("touchend",function(e){!i&&e.cancelable&&e.preventDefault()},{passive:!1}),e.addEventListener("click",function(e){!1!==t(e)||e.preventDefault()})}(this,t)});break;case"longPress":this.each(function(){!function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=null,n=!0;e.addEventListener("touchstart",function(e){n=!0,i=setTimeout(function(){n=!1,t(e)},k)}),e.addEventListener("touchmove",function(e){clearTimeout(i)}),e.addEventListener("touchend",function(e){clearTimeout(i),n||e.preventDefault()})}(this,t)});break;case"mouseenter":this.each(function(){$(this).on("mouseenter",t)})}return this}});var k=1e3,C="pb_accepted_gdpr",S="pb_declined_gdpr_time",T=!1;function D(i){var t=$(".shoutbox form");function a(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:25;if(i){var n=$(e).data("form")||$(e).data("ui-form");n?t(n):setTimeout(function(){a(e,t,--i)},250)}}function e(e){var t=e.options.beforeSubmit;e.options.beforeSubmit=function(){if(!i.hasAccepted)return n(),!1;t()}}function n(){alert("You must agree to ProBoards' Privacy Policy to use this feature. www.proboards.com/privacy"),i.showNotice()}T||(a(".js-form-post-quick-reply",e),a(".js-form-post-new",e),a(".js-form-post-edit",e),a(".js-form-thread-new",e),a(".js-form-thread-edit",e),a(".js-form-conversation-new",e),a(".js-form-message-new",e),i.hasAccepted||($(".shoutbox_post_button").off(),t.off()),$(".shoutbox_post_button").click(function(e){return i.hasAccepted?proboards.shoutbox.add_shoutbox(t):(e.preventDefault(),n()),!1}),T=!0)}var E="https://www.proboards.com/privacy";var I=i(122),P=i.n(I),M=function(e){for(var t=document.cookie.split("; "),i=0;i<t.length;++i){var n=t[i].split("=");if(n[0]===e)return decodeURIComponent(n[1])}},O=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},i);n.expires&&(n.expires=function(e){var t=e,i=e;if("never"===i&&(i=18250),Number.isInteger(i)){var n=new Date;n.setDate(n.getDate()+i),t=n.toUTCString()}return t}(n.expires));var a="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t));return[["expires",n.expires],["path",n.path],["domain",n.domain]].map(function(e){var t=P()(e,2),i=t[0],n=t[1];a+=n?"; ".concat(i,"=").concat(n):""}),a+=n.secure?"; secure":"",document.cookie=a},N="/gdpr-agreement/agree",j="/gdpr-agreement/decline";function L(){var t=null,i=null,n=null;function a(){return void 0!==proboards&&proboards.data}function o(){var e=r().is_logged_in||0;return!(e=parseInt(e,10))}function r(){return t("user")}function s(){o()?i.show():(n.show(),window.scroll({top:0,behavior:"smooth"}))}var l={get isEnabled(){return this._isEnabled()},_isEnabled:function(){return console.error("isEnabled is not implemented"),!1},get isRequired(){return this._isRequired()},_isRequired:function(){return console.error("isRequired is not implemented"),!1},get hasAccepted(){var e=localStorage.getItem(C);return!(!e||1!==parseInt(e,10))},set hasAccepted(e){e?localStorage.setItem(C,1):localStorage.removeItem(C)},get declinedTime(){var e=localStorage.getItem(S)||0;return parseInt(e,10)},set declinedTime(e){e?localStorage.setItem(S,e):localStorage.removeItem(S)},setDeclinedTime:function(){var e=new Date;this.declinedTime=e.getTime()},hasDeclinedRecently:function(){return!!this.declinedTime&&(new Date).getTime()-this.declinedTime<18e5}};return Object.assign(l,{init:function(){var e;t=a()?proboards.data.bind(proboards):w.get,l.isEnabled&&(o()?i=function(e){var t=e.onAgree,i=e.onDecline,n=Math.random().toString(36).replace(/[^a-z]+/g,""),a=!1;function o(e){$(document.body).css({"margin-bottom":"".concat(e,"px")})}function r(){$("#".concat(n)).remove(),o(0)}return{show:function(){if(a||$("<style>").html("\n            #".concat(n," {\n                animation: show-banner 0.5s forwards;\n                background: #083e5d;\n                color: #fff;\n                display: flex;\n                flex-direction: row;\n                font-size: 62.5%;\n                position: fixed;\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                z-index: 9999;\n                box-shadow: 0px -2px 5px 0px rgba(0,0,0,0.2);\n            }\n\n            @keyframes show-banner {\n                0% {\n                    bottom: -25%;\n                }\n\n                100% {\n                    bottom: 0;\n                }\n            }\n\n            #").concat(n," .gdpr-banner-content-wrapper {\n                display: flex;\n                flex-direction: row;\n                justify-content: center;\n                align-items: center;\n                margin: 0 auto;\n                padding: 1em 2em 3em;\n            }\n\n            #").concat(n," .gdpr-banner-content {\n                flex: 1 1 auto;\n                text-align: center;\n            }\n\n            #").concat(n," .c-gdpr-agreement__header {\n                color: white;\n                font-size: 2.5em;\n                font-weight: bold;\n                margin: 0.5em 0;\n            }\n\n            #").concat(n," .paragraph {\n                font-size: 1.6em;\n                margin: 1em 0;\n            }\n\n            #").concat(n," a,\n            #").concat(n," a:hover,\n            #").concat(n," a:focus {\n                color: white;\n                text-decoration: underline;\n            }\n\n            #").concat(n," .c-gdpr-agreement__decline {\n                margin: 1em 2em;\n                text-decoration: none;\n            }\n\n            #").concat(n," .c-gdpr-agreement__agree,\n            #").concat(n," .c-gdpr-agreement__agree:hover,\n            #").concat(n," .c-gdpr-agreement__agree:focus {\n                background: #107dbc;\n                border: 3px solid white;\n                color: white;\n                cursor: pointer;\n                display: inline-block;\n                font-size: 2em;\n                padding: 0.5em 1em;\n                border-radius: 3px;\n            }\n\n            #").concat(n," .t-small-text {\n                font-size: 1.3em;\n            }\n        ")).appendTo(document.body),a=!0,!$("#".concat(n)).length){var e=$("<div>").attr("id",n).append("\n            <div class='gdpr-banner-content-wrapper'>\n                <div class='gdpr-banner-content'>\n                    <div class=\"c-gdpr-agreement__header\">Please Review: Privacy Policy</div>\n                    <div class=\"paragraph\">\n                        I agree to ProBoards' <a href=\"".concat(E,'" target="_blank">Privacy&nbsp;Policy</a>:\n                        <br>\n                        <a href="').concat(E,'#cookies" target="_blank">Cookies</a>,\n                        <a href="').concat(E,'#data-collection" target="_blank">Data&nbsp;Collection</a>,\n                        <a href="').concat(E,'#data-use" target="_blank">Data&nbsp;Use</a>,\n                        and\n                        <a href="').concat(E,'#data-sharing" target="_blank">Data&nbsp;Sharing</a>\n                    </div>\n                    <div>\n                        <a href="javascript:void(0);" class="c-gdpr-agreement__decline t-small-text js-gdpr-banner-decline-button">Decline</a>\n                        <div class="c-gdpr-agreement__agree js-gdpr-banner-agree-button">I Agree</div>\n                    </div>\n                    <div class="paragraph t-small-text">\n                        You can revisit your privacy settings at anytime by clicking "Consent" at the bottom of the page.\n                    </div>\n                </div>\n            </div>\n        '));e.appendTo(document.body),o(e.height()),$(".js-gdpr-banner-agree-button").on("click",function(){r(),t&&t()}),$(".js-gdpr-banner-decline-button").on("click",function(){r(),i&&i()})}}}}({onAgree:function(){l.hasAccepted=!0,l.declinedTime=0},onDecline:function(){l.hasAccepted=!1,l.declinedTime=0,D(l)}}):n=function(e){var t=e.onAgree,i=e.onDecline,n=(e.forumId,e.forumUserId,e.globalId,!1);function a(e){return e==="".concat(location.protocol,"//").concat(location.host)}function o(){$("#gdpr-frame").remove()}return{show:function(){if(n||($("<style>").html("\n            #gdpr-frame {\n                width: 100%;\n            }\n        ").appendTo(document.body),window.addEventListener("message",function(e){a(e.origin)&&e.data&&"object"===f()(e.data)&&void 0!==e.data.height&&$("#gdpr-frame").css("height","".concat(e.data.height,"px"))}),window.addEventListener("message",function(e){a(e.origin)&&e.data&&"object"===f()(e.data)&&void 0!==e.data.gdprAccepted&&(e.data.gdprAccepted?(o(),t&&t()):(o(),i&&i()))},!1)),!$("#gdpr-frame").length){var e='<iframe id="'.concat("gdpr-frame",'" src="').concat("/gdpr-agreement",'">');$(document.body).prepend(e)}n=!0}}}({onAgree:function(){l.hasAccepted=!0,l.declinedTime=0,a()?proboards.ajax({url:N,error:function(e){return proboards.error(e.error)}}):_({url:N}).catch(function(e){return console.error(e)})},onDecline:function(){l.hasAccepted=!1,l.setDeclinedTime(),D(l),a()?proboards.ajax({url:j,error:function(e){return proboards.error(e.error)}}):_({url:j}).catch(function(e){return console.error(e)})},forumId:parseInt(t("forum_id"),10),forumUserId:r().id,globalId:r().global_id}),$(".js-privacy-consent").on(x,function(e){e.preventDefault(),s()}),o()||(e=!!r().has_accepted_gdpr,!!l.hasAccepted!==e&&(l.hasAccepted=e)),!l.isRequired||l.hasDeclinedRecently()||l.hasAccepted||s(),l.isRequired&&D(l))},showNotice:s,_isEnabled:function(){return!!this._getUserData().gdpr_subject},_isRequired:function(){return!!this._getUserData().requires_gdpr_notice}}),Object.defineProperty(l,"hasAccepted",{set:function(e){l._isGuest()&&(e?O(C,1,{expires:"never",path:"/"}):O(C,0,{expires:0,path:"/"})),e?localStorage.setItem(C,1):localStorage.removeItem(C)}}),Object.assign(l,{_isGuest:o,_getUserData:r}),l}i(116);var R={adblock:{name:"AdBlock",logoImage:"data:image/png;base64,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",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ab.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ab.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ab.gif"}}},adblockplus:{name:"AdBlock Plus",logoImage:"data:image/png;base64,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",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/abp.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/abp.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/abp.gif"},ie:{image:"//storage.proboards.com/forum/images/blockers/ie/abp.gif"}}},ublock:{name:"uBlock Origin",logoImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABGlBMVEUAAAD////////////////p0tKKFRWAAADq1NTs2NjcubmBAwP+/Pzt29vu3Nzx4uL27Oz79vb79/f16uqBAgLv3t6HDw+XLy/jxsaoUVHbt7e6dHTIkZHQoaG0aGjy5eWfPz+VKiqLFhbAgID37u6GDQ2/fn6fPj7+/f2qVVX06en8+fm2bGyAAQHMmJjixMSpU1OUKCjz5uaSJCT9+vrfv7/QoKDFiorEiYnJkpLOnZ3YsLDHj4+JEhK2bW3VqqqFCwvevLyCBATDh4edOzvmzc3Hjo6nT0/cuLj06OjatbXBgoKmTEyIEBCMGBisWVnLl5fgwcHy5OT//v7ly8vUqamyZGShQkKNGxuECAiLFxeQICCTJiaPHh7O7ACbAAAABXRSTlMAW/z/APGd+dQAAAI6SURBVHgBtM5LboNAAMBQwwDTpJ/7H7crWCHFQrIv4IdoWcej1mX7HNvHrn8ioPl7Aea/H/NBx24EyH8moPs7AeFfCSj/RkD6FwLSvxCQ/oWA9C8EpH8hIP0LAelfCPD/RoD/NwL8vxHg/40A/28E+H8jwP8bAf7fCPD/RoD/NwL8vxHg/40A/28E+H8jwP8bAf7fCPD/RoD/NwL8vxEg/qkA8U8F+P/8ep29503v19W3FzDGkP/5M85+501/48oB5n/79rHTMBREYXgxIleIRQKYHmoScDBgei+BEHrv9f1fAyGEBiSy8A34F9KcF5hvP+dkROQd4CiA+78AAxjAAAYwgAEMYAADGMAABjBAlgbkGECrfKaNAbTrhQABdOiFTgTQpBe6EEC3XuhBAL16oQ8B5PVCPwIY0AuDCGBINMMEYEQ0BQLgsnqiWCIAedGMEoAx0YRlABCMiyaamEwd4Kbka+LpklPczGwKgLl5+ZZoYXGpsLyyuhY3RyIpANy61E8qgI0iDHCbNMBt0YBKDAFUsP3rgEwywU41bBygTyuft+FuTeonrO3tJ3gc+j0ug/JBKD/k8Oj45DTZ49L7dXt2fnF5dS0fiXI3t9W7+weP121jz+vHp+eX10ylxf91zL/v+QIDX+HgSyx8jYcvMqFVLr7Mxtf5+EIjX+nkS618rZcvNvPVbr7cztf7+YEDP/HgRy78zIcfOvFTL37sxs/9+MEjP/nkR6/87JcfPvPTb378rvnT+f8bakiNSoNR9SIAAAAASUVORK5CYII=",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ublock.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ublock.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ublock.gif"}}},ghostery:{name:"Ghostery",logoImage:"data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//9k=",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ghostery.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ghostery.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ghostery.gif"}}},unknown:{text:["Please support us by whitelisting us in your ad blocker"]}},F=R,z={chrome:["adblock","adblockplus","ublock","ghostery"],firefox:["adblock","adblockplus","ublock","ghostery"],edge:["adblock","adblockplus","ublock","ghostery"],ie:["adblockplus"],windowsPhone:[],android:[],ios:[],unknown:[]},q="data:image/png;base64,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",H="//storage.proboards.com/forum/images/blockers/modal-img--desktop.png";function W(e){var t=e.id,i=e.adBlocker,n=e.browserOrMobileOS,a=null,o=(a=R[i]&&R[i].instructions&&R[i].instructions[n]?R[i].instructions[n]:R.unknown).text?"".concat(a.text.join("<br>"),"<br>"):"",r=a.image?"<img src='".concat(a.image,"' alt='Unblock ").concat(R[i].name,"'>"):"";return'\n        <div class="'.concat(t,"-popup-help  ").concat(t,'-popup-text">\n            ').concat(o,"\n            ").concat(r,"\n        </div>\n    ")}function V(){var e;return(e=navigator.userAgent||navigator.vendor||window.opera,/windows phone/i.test(e)?"windowsPhone":/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":"")||(window.opr&&opr.addons||window.opera||0<=navigator.userAgent.indexOf(" OPR/")?"opera":"undefined"!=typeof InstallTrigger?"firefox":/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString()?"safari":document.documentMode?"ie":window.StyleMedia?"edge":window.chrome&&window.chrome.webstore?"chrome":"unknown")}var U=function(){ga("create","UA-3734504-7","auto","popup")},B=function(e){var t=e.action,i=e.label||"",n=t;void 0!==proboards&&proboards.analytics&&proboards.analytics.google.send({trackerName:"popup",eventLabel:i,eventAction:n,eventCategory:"DisableAdBlock",hitType:"event"})};var Y={display:["Select Ad","top ad","bottom ad 1","bottom ad 2"],values:["","topAd","bottomLeftAd","bottomRightAd"]},K={display:["Select Category","adult content","annoying","audio","malicious","redirect","other"],values:["","adult_content","annoying","audio","malicious","redirect","other"]},J="\n    #report-ad-overlay {\n        animation: show-popup 0.5s forwards;\n        background: rgba(0, 0, 0, 0.7);\n        color: #333;\n        display: flex;\n        justify-content: center;\n        align-items: flex-start;\n        position: fixed;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 100%;\n        z-index: 9999;\n        overflow-y: scroll;\n    }\n    @keyframes show-popup {\n        0% {\n            opacity: 0;\n        }\n\n        100% {\n            opacity: 1;\n        }\n    }\n\n    .report-ad-popup {\n        background: white;\n        border-radius: 3px;\n        box-shadow: 0 0 15px;\n        display: flex;\n        flex-direction: column;\n        flex: 1 1 auto;\n        max-width: 800px;\n        padding: 1rem;\n        margin: 20px;\n    }\n\n    .report-ad-title {\n        color: #333;\n        font-size: 24px;\n        font-weight: bold;\n        margin-bottom: 20px;\n    }\n\n    .report-ad-preview {\n        margin-bottom: 15px;\n    }\n\n    .report-ad-field {\n        margin-bottom: 15px;\n    }\n\n    .report-ad-label-text {\n        display: block;\n        margin-bottom: 5px;\n    }\n\n    .report-ad-textarea {\n        box-sizing: border-box;\n        height: 100px;\n        width: 100%;\n    }\n\n    .report-ad-button,\n    input.report-ad-button,\n    .report-ad-button:active,\n    input.report-ad-button:active {\n        border-radius: 5px;\n        color: #000;\n        font: 12px Verdana, Arial;\n        text-decoration: none;\n        background: #dadada;\n        border: 1px solid #a7a7a7;\n        padding: 2px 6px;\n        display: inline-block;\n        vertical-align: middle;\n        margin: 0 3px 0 0;\n        cursor: pointer;\n        min-height: 26px;\n    }\n\n    .report-ad-button:hover,\n    input.report-ad-button:hover {\n        background: #e7e7e7;\n    }\n\n    .report-ad-no-scroll {\n        overflow: hidden;\n        position: fixed;\n        width: 100%;\n    }\n",G=!1;$(function(){var e=L();e.init(),e.isRequired&&!e.hasAccepted||function(e){var t=e.isGuest,i=1,n="aab",u=function(){for(var e=15,t="";e--;)t+=String.fromCharCode(Math.floor(26*Math.random())+97);return t}(),o=t,a=null,r=0,p=null;function s(){var e=new Date,t=new Date;return t.setHours(e.getHours()+i),t}function l(){$(window).on("scroll.AntiAdBlock",function(e){var t=window.scrollY||window.pageYOffset;null===a?a=t:500<=Math.abs(t-a)&&($(window).off(".AntiAdBlock"),o?c():function(){$("<style>").html("\n            #".concat(u,"-banner {\n                animation: show-banner 0.5s forwards;\n                background: #083e5d;\n                color: #fff;\n                display: flex;\n                position: fixed;\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                z-index: 9999;\n                box-shadow: 0px -2px 5px 0px rgba(136,136,136,1);\n                cursor: pointer;\n            }\n\n            @keyframes show-banner {\n                0% {\n                    bottom: -25%;\n                }\n\n                100% {\n                    bottom: 0;\n                }\n            }\n\n            .").concat(u,"-banner-content-wrapper {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                margin: 0 auto;\n                padding: 0.5rem 1rem;\n            }\n\n            .").concat(u,"-banner-icon {\n                background: url(").concat(q,");\n                background-size: cover;\n                flex: 0 0 auto;\n                height: 60px;\n                width: 60px;\n                margin-right: 1rem;\n                border-radius: 50%;\n                border: 1px solid #ffffff;\n            }\n\n            .").concat(u,"-banner-content {\n                flex: 1 1 auto;\n            }\n\n            .").concat(u,"-banner-text {\n                margin: 0.5rem 0;\n            }\n\n            .").concat(u,"-banner-chevron {\n                display: block;\n                background: url(").concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAOCAYAAADE84fzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFFRkEzNzFBNzE1ODExRTc4QjEwQ0FENUEyOEY4MzczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFFRkEzNzFCNzE1ODExRTc4QjEwQ0FENUEyOEY4MzczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUVGQTM3MTg3MTU4MTFFNzhCMTBDQUQ1QTI4RjgzNzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUVGQTM3MTk3MTU4MTFFNzhCMTBDQUQ1QTI4RjgzNzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5gSkTvAAAAfUlEQVR42pyRUQ2AQAxDDwdIQAIScMI5O5wgAQlIQMLYEhYIIaRtk+Z+eu99rDOzAqZ6p+vFEnCg1e4s4J/CgimBAoYFKhgSsOCdETDg2dt7N1TAgHMDC1gwJVDAsEAFQ4IYNBH8Jzi8Qw6aCP4SBHh8H7SJ4KdgTXD0FGAARPfuUTtrQWoAAAAASUVORK5CYII=",");\n                width: 23px;\n                height: 14px;\n                margin-left: 25px;\n                background-position: center center;\n                background-repeat: no-repeat;\n            }\n\n            @media screen and (max-width: 1199px) {\n                .").concat(u,"-lg-only {\n                    display: none;\n                }\n            }\n            @media screen and (max-width: 600px) {\n                .").concat(u,"-sm-only {\n                    display: none;\n                }\n            }\n        ")).appendTo(document.body);var e,t,i=$("<div>").attr("id","".concat(u,"-banner")).append("\n            <div class='".concat(u,"-banner-content-wrapper'>\n                <div class='").concat(u,"-banner-icon' title='Can we talk?'></div>\n                <div class='").concat(u,"-banner-content'>\n                    <div class='").concat(u,"-banner-text'>\n                        <strong>Can we talk?</strong>\n                    </div>\n                    <div class='").concat(u,"-banner-text ").concat(u,"-sm-only'>\n                        We work hard to provide the best communities\n                    </div>\n\n                </div>\n                <div>\n                    <span class='").concat(u,"-banner-chevron'></span>\n                </div>\n            </div>\n        "));i.appendTo(document.body),e=i.height(),$("body").css({"margin-bottom":"".concat(e,"px")}),(t=i).on("click",function(e){t.remove(),c(),B({action:"Banner click",label:"Banner"})})}())})}function c(){var e;$("<style>").html("\n            #".concat(u,"-overlay {\n                animation: show-popup 0.5s forwards;\n                background: rgba(0, 0, 0, 0.7);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                position: fixed;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n                overflow: auto;\n                z-index: 9999;\n            }\n            @keyframes show-popup {\n                0% {\n                    opacity: 0;\n                }\n\n                100% {\n                    opacity: 1;\n                }\n            }\n\n            #").concat(u,"-overlay * {\n                box-sizing: border-box;\n            }\n\n            #").concat(u,"-popup-wrapper {\n                display: flex;\n                margin: 2rem;\n            }\n\n            .").concat(u,"-popup {\n                position: relative;\n                background: #efefef;\n                color: #52504f;\n            }\n\n            .").concat(u,"-popup-side {\n                display: none;\n            }\n\n            .").concat(u,"-popup-side img {\n                height: 100%;\n            }\n\n            @media screen and (min-width: 1200px) {\n                .").concat(u,"-popup-side {\n                    background: url(").concat(H,") no-repeat;\n                    background-size: cover;\n                    display: block;\n                    min-height: 546px;\n                    width: 465px;\n                }\n\n                .").concat(u,"-popup {\n                    width: 500px;\n                    z-index: 1;\n                }\n            }\n\n            @media screen and (max-width: 1199px) {\n                .").concat(u,"-lg-only {\n                    display: none;\n                }\n            }\n\n            .").concat(u,"-popup-content {\n                display: flex;\n                text-align: center;\n                flex-direction: column;\n                height: 100%;\n                padding: 2rem;\n            }\n\n            .").concat(u,"-popup-title {\n                font-size: 2rem;\n                margin: 1rem 0;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .").concat(u,"-popup-title--small {\n                font-size: 1.25rem;\n                margin: 0 0 1rem 0;\n            }\n\n            .").concat(u,"-header-icon {\n                display: inline-block;\n                background: url(").concat(q,");\n                background-size: cover;\n                flex: 0 0 auto;\n                height: 30px;\n                width: 30px;\n                margin-right: 1rem;\n                border-radius: 50%;\n                border: 1px solid #ffffff;\n            }\n\n            .").concat(u,"-popup-main-content {\n                flex: 1 1 auto;\n            }\n\n            .").concat(u,"-popup-main-content--front {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n\n            .").concat(u,"-popup-text {\n                margin-bottom: 1rem;\n                line-height: 1.5;\n            }\n\n            .").concat(u,"-popup-help img {\n                max-width: 100%;\n            }\n\n            .").concat(u,"-button,\n            .").concat(u,"-button:hover,\n            .").concat(u,"-button:focus {\n                display: inline-block;\n                background: #ff9d47;\n                color: #fff;\n                padding: 0.5rem 2rem;\n                margin-bottom: 1rem;\n                font-size: 1rem;\n            }\n\n            .").concat(u,"-button--blue,\n            .").concat(u,"-button--blue:hover,\n            .").concat(u,"-button--blue:focus {\n                background: #004fa0;\n            }\n\n            .").concat(u,"-no-scroll {\n                overflow: hidden;\n                position: fixed;\n                width: 100%;\n            }\n\n            .").concat(u,"-icon-wrap {\n                display: inline-block;\n                text-align: center;\n                padding: 1rem;\n            }\n\n            @media screen and (max-width: 768px) {\n                .").concat(u,"-icon-wrap {\n                    width: 50%;\n                }\n            }\n\n            .").concat(u,"-icon-wrap:hover {\n                background-color: #ccc;\n                cursor: pointer;\n            }\n\n            .").concat(u,"-icon {\n                margin: 0 auto;\n                width: 64px;\n                height: 64px;\n                background-size: 100%;\n                margin-bottom: 0.5rem;\n            }\n\n            .").concat(u,"-back {\n                    position: absolute;\n                    top: 10px;\n                    left: 10px;\n                    font-weight: bold;\n                    font-size: 18px;\n                    cursor: pointer;\n            }\n\n            .").concat(u,"-back-text {\n                font-size: 0.8rem;\n            }\n\n            .").concat(u,"-subscribe {\n                display: flex;\n                margin-top: 30px;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .").concat(u,"-proboards-plus {\n                display: inline-block;\n                background-size: 100%;\n                background-image: url(").concat("data:image/png;base64,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",");\n                background-position: center center;\n                flex: 0 0 32px;\n                height: 32px;\n                background-repeat: no-repeat;\n            }\n\n            .").concat(u,"-proboards-plus-text {\n                display: inline-block;\n                padding-left: 0.5rem;\n            }\n\n            .").concat(u,"-disclaimer {\n                font-size: 0.5rem;\n            }\n\n            .").concat(u,"-pbplus-animation {\n                width: 100%;\n                max-width: 300px;\n                align-self: center;\n            }\n\n            @media screen and (max-height: 610px) {\n                #").concat(u,"-overlay {\n                    align-items: flex-start;\n                }\n            }\n\n            @media screen and (max-width: 450px) {\n                #").concat(u,"-overlay {\n                    justify-content: flex-start;\n                }\n\n                #").concat(u,"-popup-wrapper {\n                    flex: 1 1 auto;\n                    margin: 1rem;\n                }\n\n                .").concat(u,"-popup {\n                    flex: 1 1 auto;\n                }\n\n                .").concat(u,"-popup-content {\n                    padding: 2rem 1rem;\n                }\n\n                .").concat(u,"-popup-title {\n                    font-size: 1.6rem;\n                }\n\n                .").concat(u,"-popup-text {\n                    font-size: 0.8rem;\n                }\n\n                .").concat(u,"-button {\n                    font-size: 1rem;\n                }\n\n                .").concat(u,"-proboards-plus-text {\n                    font-size: 0.75rem;\n                }\n            }\n        ")).appendTo(document.body),function(){var e,t=$("<div>").attr("id","".concat(u,"-overlay")),i=$("\n            <div class='".concat(u,"-popup-content ").concat(u,"-main'>\n                <div class='").concat(u,"-popup-main-content ").concat(u,"-popup-main-content--front'>\n                    <h1 class='").concat(u,"-popup-title'>\n                        <span class='").concat(u,"-header-icon' title='A message from ProBoards'></span>\n                        Can we talk?\n                    </h1>\n                    <p class='").concat(u,"-popup-text'>\n                        We work hard to provide\n                        <span style='white-space: nowrap'>the best communities.</span>\n                        <br>\n                        Please support us!\n                    </p>\n                    <div>\n                        <a href='#' class='").concat(u,"-button ").concat(u,"-button-disable'>\n                            Disable Ad Blocker\n                        </a>\n                    </div>\n                </div>\n                <div class=\"").concat(u,"-popup-text\">\n                    <a href='#' class='").concat(u,"-close-popup'>Sorry, I'll do it next time</a>\n                </div>\n            </div>\n        "));p=$("<div class='".concat(u,"-popup'>")),o||(i.find(".".concat(u,"-popup-main-content")).append(((e=$("\n            <p class='".concat(u,"-popup-text'>\n                or\n            </p>\n            <div>\n                <a href='#' class='").concat(u,"-button ").concat(u,"-button--blue'>\n                    Get ProBoards+\n                </a>\n            </div>\n            <p class='").concat(u,"-popup-text'>\n                ProBoards+ members get no ads!\n            </p>\n        "))).find(".".concat(u,"-button--blue")).on(x,function(){d(),B({action:"CTA",label:"Get PB+"})}),e)),p.append(function(){var e=v(),t=$("\n            <div class='".concat(u,"-popup-content ").concat(u,"-pbplus'>\n                <h1 class='").concat(u,"-popup-title'>\n                    Get ProBoards+\n                </h1>\n                <img src='").concat("//storage.proboards.com/forum/images/blockers/pbplus.gif","'\n                    alt='ProBoards+ is personal Ad Free!' class='").concat(u,"-pbplus-animation'>\n                <br>\n                <p class='").concat(u,"-popup-text'>\n                    Enjoy any ProBoards forum with unlimited personal ad free!\n                </p>\n                <div>\n                    <a href='").concat(e,"' class='").concat(u,"-button ").concat(u,"-button--blue'\n                        alt='Subscribe to ProBoards+' target='_blank'>\n                        Subscribe now!\n                    </a>\n                </div>\n            </div>\n        "));t.find(".".concat(u,"-button")).on(x,function(e){B({action:"Subscribe",label:"Subscribe"})});var i=m(h);return t.append(i).hide(),t}())),p.append(i).append(function(){var e,t=$("\n            <div class='".concat(u,"-popup-content ").concat(u,"-choices'>\n            </div>\n        ")),i=$("<div class='".concat(u,"-popup-main-content'></div>")),d=V(),n=(e=V(),z[e]?z[e]:[]);0<n.length?(t.append("\n                <h2 class='".concat(u,"-popup-title--small'>\n                    Choose your Ad Blocker\n                </h2>\n            ")),n.forEach(function(c){var e=F[c].logoImage,t=$("\n                    <div class='".concat(u,"-icon-wrap' data-blocker='").concat(c,"'>\n                        <div class='").concat(u,"-icon ").concat(u,"-icon--").concat(c,"'\n                            style='background-image: url(").concat(e,")'></div>\n                        ").concat(F[c].name,"\n                    </div>"));i.append(t),t.on(x,function(){var e,t,i,n,a,o,r,s,l;s=(e={adBlocker:c,browserOrMobileOS:d}).adBlocker,l=e.browserOrMobileOS,_(),0===p.find(".".concat(u,"-").concat(s)).length&&(n=W({id:u,adBlocker:i=(t={adBlocker:s,browserOrMobileOS:l}).adBlocker,browserOrMobileOS:t.browserOrMobileOS}),a=$("\n            <div class='".concat(u,"-popup-content ").concat(u,"-").concat(i,"'>\n                <h2 class='").concat(u,"-popup-title--small'>Instructions</h2>\n                ").concat(n,"\n            </div>")),o=f(),r=m(g),a.append(o).append(r).append(b()).appendTo(p)),y(s),B({action:"AdBlocker",label:"".concat(c," - ").concat(d)})})})):(i.append('<div class="'.concat(u,'-popup-text"></div>')).append(W({id:u,adBlocker:"unknown"})).append(f()),B({action:"Help",label:"Unknown AdBlocker"}));var a=0<n.length?$("\n            <div class='".concat(u,"-disclaimer'>\n                All logos are trademarks of their respective owners.\n            </div>\n        ")):$(""),o=m(h);return t.append(i).append(a).append(o).append(b()).hide(),t}());var n=$("<div class='".concat(u,"-popup-side'></div>")),a=$("<div>").attr("id","".concat(u,"-popup-wrapper")).append(n).append(p);return p.find(".".concat(u,"-button-disable")).on(x,function(){_(),y("choices"),B({action:"CTA",label:"Disable"})}),t.append(a)}().appendTo(document.body),r=window.scrollY||window.pageYOffset,$(document.body).addClass("".concat(u,"-no-scroll")).css("top","-".concat(r,"px")),$(".".concat(u,"-close-popup")).on("click",function(e){e.preventDefault(),A(),B({action:"Close popup",label:"Next time"})}),e=s(),O(n,e.toUTCString(),{path:"/"})}function d(){_(),y("pbplus")}function h(){B({action:"Back",label:"Back to Start"}),_(),y("main")}function f(){var e=$("<div><a href='#' class='".concat(u,"-button'>I've done it!</a></div>"));return e.on(x,function(e){e.preventDefault(),A(),B({action:"Close popup",label:"Done"})}),e}function m(e){var t=$("<div class='".concat(u,"-back' title='Back'>&lsaquo; ")+"<span class='".concat(u,"-back-text'>Back</span></div>"));return t.on(x,function(){e&&"function"==typeof e&&e()}),t}function g(){B({action:"Back",label:"Blocker selection"}),_(),y("choices")}function v(){var e,t;return void 0!==proboards&&proboards.data?(e=proboards.data("forum_url"),t=proboards.data("user").id):(e=w.get("forum_url"),t=w.get("user").id),"https://www.proboards.com/store/add_cart/proboards_plus/1/".concat(e,"/").concat(t)}function b(){if(!o){v();var e=$("\n                    <a class='".concat(u,"-subscribe' href='#'>\n                        <div class='").concat(u,"-proboards-plus'></div>\n                        <div class='").concat(u,"-proboards-plus-text'>\n                            Get unlimited personal ad-free!\n                        </div>\n                    </a>\n                "));return e.on(x,function(e){e.preventDefault(),d(),B({action:"BTF Link",label:"Get PB+"})}),e}}function _(){p.find(".".concat(u,"-popup-content")).hide()}function y(e){p.find(".".concat(u,"-").concat(e)).css({display:"flex"})}function A(){$("#".concat(u,"-overlay")).remove(),$(document.body).removeClass("".concat(u,"-no-scroll")).removeAttr("style"),window.scrollTo(0,r)}window.runAntiAdBlock&&!function(){var e=M(n);if(!e)return!1;var t=new Date(e);return!isNaN(t.getTime())&&!(new Date>t)&&t<s()}()&&((new Image).src=H,U(),"undefined"==typeof blockAdBlock?l():blockAdBlock.on(!0,l))}({isGuest:!proboards.data("user").is_logged_in}),function(){var u=!1,t=0,h=function(){},p=null,m="";function g(e){e&&e.preventDefault(),h(),$(document.body).removeClass("report-ad-no-scroll").removeAttr("style"),window.scrollTo(0,t),p.hide()}$(".js-report-ad").on(x,function(e){e.preventDefault(),function(){if(!u){var e,t,i,a,o,r,n=$("<div>").attr({id:"report-ad-overlay",class:"js-ad-overlay"});n.append('<div class="report-ad-popup js-report-ad-popup"><h2 class="report-ad-title">Report Ad</h2><form id="report-ad-form" class="js-report-ad-form">'+'<div class="report-ad-field">'.concat((i=Y.display,a=Y.values,o="",r=0,i.forEach(function(e){var t=a[r++],i=""===t,n=!!window[t]&&!!window[t].iframe;!i&&n&&(o+='<option value="'.concat(t,'">').concat(e,"</option>"))}),'<select class="js-report-ad-select-ad" required>'.concat(o,"</select>")),"</div>")+'<div class="report-ad-preview js-report-ad-preview"></div>'+'<div class="report-ad-field">'.concat((s=K.display,l=K.values,c="",d=0,s.forEach(function(e){var t=l[d++];c+='<option value="'.concat(t,'">').concat(e,"</option>")}),'<select name="category" required>'.concat(c,"</select>")),"</div>")+"".concat("object"===f()(window.pbrp)&&window.pbrp.m?'<div class="report-ad-field"><fieldset><label><span class="report-ad-label-text">Are you on a cellular network?</span></label><label class="report-ad-label-text"><input type="radio" name="is_mobile_data" value="0" required>No</label><label class="report-ad-label-text"><input type="radio" name="is_mobile_data" value="1" required>Yes</label></fieldset></div>':"")+'<div class="report-ad-field"><label><span class="report-ad-label-text">What is wrong with the ad?</span><textarea name="reason" class="report-ad-textarea"></textarea></label></div><div><button class="report-ad-button js-report-ad-cancel">Cancel</button><input class="report-ad-button" type="submit" value="Submit"></div></form><div>'),p=n.hide().appendTo(document.body),(t=$(".js-report-ad-select-ad")).on("change",function(){var e=t.val();!function(e){var t,i,n,a=$(".js-report-ad-preview");if(h(),""!==e){var o=window[e].iframe,r=$(o),s=o.getAttribute("style")||"";h=function(){o.setAttribute("style",s)};var l=r.height(),c=r.width();a.css({height:"".concat(l,"px"),width:"".concat(c,"px")});var d=a.offset(),u=d.top,p=d.left;r.css({position:"fixed",top:"".concat(u,"px"),left:"".concat(p,"px"),zIndex:1e4}),i=(t={$adPreview:a,$ad:r}).$adPreview,n=t.$ad,$(".js-ad-overlay").on("scroll",function(){var e=i.get(0).getBoundingClientRect();n.css({top:"".concat(e.top,"px")})})}else a.removeAttr("style")}(e),m=e}),$(".js-report-ad-cancel").on(x,g),$(".js-report-ad-form").on("submit",function(e){e.preventDefault();var t=window[m].iframe;G?t.contentWindow.postMessage({type:"takeScreenshot"},"*"):window.postMessage({type:"screenshotDone",image:""},"*")}),window.addEventListener("message",function(f){"screenshotDone"===f.data.type&&function(e){var t,i,n,a,o,r=f.data.image,s="/ad-report/new",l=Object.assign({screenshot:r},(t=$(".js-report-ad-popup"),i=t.find('[name="category"]').val(),n=t.find('[name="reason"]').val(),a=t.find('[name="is_mobile_data"]:checked').length?t.find('[name="is_mobile_data"]:checked').val():0,o=window[m].lastRenderedBid||"",{category:i,reason:n,isMobileData:a,bid:o=JSON.stringify(o),userAgent:window.navigator.userAgent})),c="Your ad report has been submitted. Thank you!",d="We are unable to send the ad report.  Please contact our support team for assistance.";if(void 0!==proboards&&proboards.data){var u=null,p=null,h=new Promise(function(e,t){u=e,p=t});return proboards.ajax({url:s,data:l,success:function(){return u(c)},error:function(e){return p(e.error||d)}}),h}return _({url:s,data:l}).then(function(){return Promise.resolve(c)},function(e){return Promise.reject(e.error||d)})}().then(function(e){g(),$(".js-report-ad-form").get(0).reset(),alert(e)}).catch(alert)},!1),e=$("<style>").html(J),$(document.body).append(e),u=!0}var s,l,c,d}(),t=window.scrollY||window.pageYOffset,$(document.body).addClass("report-ad-no-scroll").css("top","-".concat(t,"px")),p.css("display","flex"),$(".js-report-ad-select-ad").trigger("change")})}(),{isGuest:!proboards.data("user").is_logged_in}.isGuest||blockAdBlock.on(!0,function(){var e,t,i,n,a,o,r;$("#ad1").length&&($("<style>").html("\n            .c-pb-plus__container {\n                display: flex;\n                justify-content: center;\n                text-align: center;\n                margin: 10px 0 10px 0;\n            }\n            .c-pb-plus__message {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                border-width: 1px;\n                border-style: solid;\n                font-size: 20px;\n                max-width: 728px;\n                color: #333;\n                background-color: #eee;\n            }\n\n            .c-pb-plus__message-text {\n                padding: 8px;\n            }\n\n            .c-pb-plus-text__ad-free {\n                display: inline-block;\n            }\n\n            @media only screen and (max-width: 768px) {\n                .c-pb-plus__message {\n                    font-size: 16px;\n                }\n            }\n\n            @media only screen and (max-width: 480px) {\n                .c-pb-plus__message {\n                    font-size: 13px;\n                }\n\n                .c-pb-plus__message-text {\n                    padding: 2px;\n                }\n            }\n        ").appendTo(document.body),$("#ad1").replaceWith((e=$("<div>").attr({class:"c-pb-plus__container"}),t=$((i=h.translate_text('Support the services you love. $2.99/month gets you unlimited <span class="c-pb-plus-text__ad-free">ad-free</span> browsing of all the ProBoards forums you are a member of.'),n=h.translate_text("Click here to subscribe!"),void 0!==proboards&&proboards.data?(o=proboards.data("forum_url"),r=proboards.data("user").id):(o=w.get("forum_url"),r=w.get("user").id),a="https://www.proboards.com/store/add_cart/proboards_plus/1/".concat(o,"/").concat(r),'\n            <a href="'.concat(a,"\">\n                <div class='c-pb-plus__message'>\n                    <p class='c-pb-plus__message-text'>").concat(i,"<br>").concat(n,"</p>\n                </div>\n            </a>\n        "))),e.append(t),e)))})})}]);var standard_bookmarks=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),offset:proboards.data("lm_offset"),id:proboards.data("lm_id"),page:proboards.data("lm_page"),data:{user_id:proboards.data("lm_user_id")}})})},standard_confirm=function(){$(document).ready(function(){proboards.data("num_items")<1&&$("#action-button").button("disable").addClass("ui-state-disabled")})},standard_home=function(){$(document).ready(function(){var e=$("#news .arrow"),t=$("#news .title"),n=$("#news .items"),i=$("#news .left"),a=$("#news .right"),o=$("#news .front"),r=$("#news .back"),s=0,l=pb.data("news_items"),c=pb.data("news_speed"),d=1==proboards.data("news_relative")?1:0,u="",p="",h=0;if("flip"==pb.data("news_animation")){var f=(b=$("#news .item")).length;if(b.each(function(){h=$(this).outerHeight()>h?$(this).outerHeight():h}),$.set_heights(h,e,t),$("#news .hidden").hide(),o.height()<h){var m=h-o.height();o.attr("style","padding-top: "+m/2+"px;")}function g(e){clearTimeout(p),u=n.hasClass("flip")?o:r;var t=l[function(e){"forward"==e?s==l.length-1?s=0:s++:0==s?s=l.length-1:s--;return s}(e)].text;if(u.html(t),u.attr("style",""),u.height()<h){var i=h-u.height();u.attr("style","padding-top: "+i/2+"px;")}n.toggleClass("flip"),v(t)}function v(e){d&&(c=1500+50*e.length),p=setTimeout(function(){g("forward")},c)}1<f?(a.on("click",function(){g("forward")}),i.on("click",function(){g("backward")}),n.on("mouseenter",function(){clearTimeout(p)}),n.on("mouseleave",function(){v(o.text())}),v(o.text())):$.one_entry(t,e)}else{proboards.data("news_speed")&&$("#news").slidable({autoChange:proboards.data("news_speed"),items:".items",relative:1==proboards.data("news_relative")});var b=$("#news .itemSlide"),_=$("#news .items.panel > div");f=b.length;h=_.outerHeight(),$.set_heights(h,e,t),b.each(function(){if($(this).outerHeight()<h){var e=h-$(this).outerHeight();$(this).css({height:h+"px","padding-top":e/2+"px"})}}),1==f&&$.one_entry(t,e)}$(".guests-online-link").on("click",function(e){e.preventDefault(),proboards.guestsOnlineDialog()})}),$.one_entry=function(e,t){t.remove(),e.css({"border-color":e.parents("#news").css("border-color"),width:"40px"})},$.set_heights=function(e,t,i){t.attr("style","height: "+e+"px; cursor: pointer;"),$("#news, #news .items.panel").attr("style","height: "+e+"px;"),i.attr("style","line-height: "+e+"px !important; height: "+e+"px")}},standard_members=function(){$(document).ready(function(){listMan=new listManager("members",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_message=function(){$(document).ready(function(){proboards.data("conversation_id")&&$(".change-parts").bind("click",function(){0==$("#change-users-container").length&&($(document.body).append('<div id="change-users-container"></div>'),proboards.dialog("change-users-container",{autoOpen:!1,width:310,height:400,title:"Change Participants",buttons:{Save:function(){$("#change-users-container form").submit()}}})),proboards.ajax({url:proboards.route("change_users",{type:"change"}),data:{recipients:proboards.data("participants"),conversation_id:proboards.data("conversation_id"),page:"mess"},dataType:"html",success:function(e){$("#change-users-container").html(e),$("#change-users-container").dialog("open"),$(".user-search .user-search-input").blur()}})}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg(),proboards.embedded.processEmbedded()})},standard_poll=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_poll_id"),type:"vote",user_search_box:!0},id:proboards.data("lm_id")})})};if($(document).ready(function(){"use strict";$.extend(proboards,{googleAnalytics:{settings:{tracking_id:"",delay:500,trackerName:"custom",events:{threadCreate:{enable:!0,eventCategory:"thread",eventAction:"create",eventLabel:"New Thread",eventValue:1},postCreate:{enable:!0,eventCategory:"post",eventAction:"create",eventLabel:"New Post",eventValue:1},userRegister:{enable:!0,eventCategory:"user",eventAction:"register",eventLabel:"New User",eventValue:1}}},init:function(){$.extend(this.settings,proboards.data("google_analytics_settings"));var t=this,e=this.settings,i=e.events;e.tracking_id&&(setTimeout(function(){t.processQueue()},e.delay),i.threadCreate.enable&&$(".form_thread_new").submit(function(){if(proboards.form.isValidForm()){var e=$.extend({hitType:"event"},i.threadCreate);t.queueEvent(e)}}),i.postCreate.enable&&$(".form_post_new, .form_post_quick_reply").submit(function(){if(proboards.form.isValidForm()){var e=$.extend({hitType:"event"},i.postCreate);t.queueEvent(e)}}),i.userRegister.enable&&$(".form_registration_register").submit(function(){if(proboards.form.isValidForm()){var e=$.extend({hitType:"event"},i.userRegister);t.queueEvent(e)}}))},passCaptcha:function(){return!proboards.data("captcha_init")||!proboards.data("is_current_user_guest")||!proboards.data("captcha_init").captcha_errors},validSource:function(){if(!sessionStorage||!sessionStorage.getItem("referrer"))return!1;var e=sessionStorage.getItem("referrer");return/\x2F((register)(\x2Fsubmit)*|((thread|post)\x2F(create|new)\x2F\d+)|(thread\x2F\d+?.*)|(post\x2F\d+?\x2Fquote\x2F\d+?.*))$/.test(e)},queueEvent:function(e){delete e.enable;try{e&&sessionStorage.setItem("event",JSON.stringify(e))}catch(e){}},sendEvent:function(e){ga(this.settings.trackerName+".send",e)},processQueue:function(){if(sessionStorage&&sessionStorage.getItem("event")){var e=JSON.parse(sessionStorage.getItem("event"));try{e&&this.passCaptcha()&&(this.validSource()&&this.sendEvent(e),sessionStorage.removeItem("event"))}catch(e){}}}}})}),$.extend(proboards,{routeMap:{home:"/",forum:"/forum",help:"/help",help_page:"/help/:type",login:"/login/:key/:user_id",login_post:"/login/:key/:user_id/1",logout:"/logout",switch_user:"/switch/user/:user_id",set_version:"/set_version",gdpr_agreement:"/gdpr-agreement",gdpr_agree:"/gdpr-agreement/agree",test:"/test",test_select:"/test/select",dev_css:"/dev/css",dev_css_component:"/dev/css/:component",dev_css_subcomponent:"/dev/css/:component/:subcomponent",dev_css_help:"/dev/css/help",dev_form_ajax:"/dev/form/ajax",dev_form_autosave:"/dev/form/autosave",dev_exceptions:"/dev/exceptions",calendar:"/calendar",calendar_event_dialog:"/calendar/event/dialog",calendar_month:"/calendar/:month/:year",calendar_day:"/calendar/:month/:day/:year",calendar_list_default:"/calendar/list",calendar_list:"/calendar/list/:month/:year",calendar_load_more_events:"/calendar/load_more_events",members:"/members",list_members:"/members/list",follow_member:"/members/follow",unfollow_member:"/members/unfollow",guests:"/members/guests",board_guests:"/members/guests/:board_id",search:"/search",search_results:"/search/results",user_search:"/search/user",get_selected_users:"/search/get_selected_users",get_full_structure:"/search/get_full_structure",get_user_groups:"/search/user_groups",get_selected_user_groups:"/search/get_selected_user_groups",shoutbox_add:"/shoutbox/add",shoutbox_remove:"/shoutbox/remove",shoutbox_edit:"/shoutbox/edit",shoutbox_update:"/shoutbox/update",shoutbox_message:"/shoutbox/get",show_group_leaders:"/user/group_leaders",change_group_members:"/user/group_members/:type",change_group_leaders:"/user/group_leaders/:type",join_group:"/user/join_group",leave_group:"/user/leave_group",user:"/user/:user_id",current_user:"/user",current_user_about:"/user/about",current_user_activity:"/user/activity",current_user_friends:"/user/friends",username:"/username/:username",show_user_activity:"/user/:user_id/activity",show_user_following:"/user/:user_id/following",show_user_groups:"/user/:user_id/groups",show_user_friends:"/user/:user_id/friends",show_user_notifications:"/user/:user_id/notifications",show_user_gift:"/user/:user_id/gift",edit_unified:"/user/:user_id/edit",edit_unified_admin:"/user/:user_id/edit/admin",update_unified:"/user/:user_id/edit/update",update_user_personal:"/user/:user_id/personal/update",update_profile_header:"/user/:user_id/personal/update_header",update_user_about:"/user/:user_id/personal/update_about",update_user_social:"/user/:user_id/social/update",update_user_privacy:"/user/:user_id/privacy/update",update_user_settings:"/user/:user_id/settings/update",update_user_admin:"/user/:user_id/admin/update",edit_user_avatar:"/user/:user_id/avatar",edit_user_badges:"/user/:user_id/badges",edit_user_social:"/user/:user_id/social",edit_user_personal:"/user/:user_id/personal",edit_user_notifications:"/user/:user_id/edit_notifications",edit_user_privacy:"/user/:user_id/privacy",edit_user_settings:"/user/:user_id/settings",edit_user_admin:"/user/:user_id/admin",edit_current_user_personal:"/user/edit/personal",edit_current_user_social:"/user/edit/social",edit_current_user_privacy:"/user/edit/privacy",edit_current_user_settings:"/user/edit/settings",edit_current_user_notifications:"/user/edit/notifications",edit_current_user_badges:"/user/edit/badges",edit_current_user_admin:"/user/edit/admin",edit_current_user_avatar:"/user/edit/avatar",update_user_notifications:"/user/:user_id/edit_notifications/update",update_user_notifications_forum:"/user/:user_id/edit_notifications/update/forum",update_user_notifications_board:"/user/:user_id/edit_notifications/update/board/:board_id/:type",update_user_notifications_add_board:"/user/:user_id/edit_notifications/add_board",update_user_notifications_remove_board:"/user/:user_id/edit_notifications/remove_board",update_user_badges:"/user/:user_id/badges/update",user_confirm:"/users/dialog/:action",delete_user:"/users/delete",ban_user:"/user/:user_id/ban",block_user_dialog:"/user/block/dialog",block_user:"/user/block",block_user_ajax:"/user/block/ajax",follow_user:"/user/follow",update_status:"/status/update",show_more_activities:"/activities/more",show_more_following:"/following/more",show_more_notifications:"/notifications/more",delete_activities:"/user/activities/delete",list_users:"/users/list",signature_preview:"/user/signature_preview",update_user_timezone:"/user/timezone/update",invite_dialog:"/user/invite/dialog",invite:"/user/invite",pbn_bar_hide:"/user/pbn_bar_hide",notification_center:"/user/notification_center",message_center:"/user/message_center",update_user_avatar:"/user/:user_id/avatar/update",save_avatar:"/user/:user_id/avatar/save",upload_avatar:"/user/:user_id/avatar/upload",avatar_link:"/user/avatar_link",forum_avatar:"/user/forum_avatars",remove_uploaded_avatar:"/user/remove_avatar",upload_cover:"/user/cover/upload",remove_uploaded_cover:"/user/cover/remove",bookmarks:"/bookmarks",link_to_oldest_new_bookmark:"/bookmarks/recent",optout:"/optout",optout_submit:"/optout/submit",board:"/board/:board_id",moderators:"/board/moderators",mark_boards:"/boards/mark/:type",board_notifications_dialog:"/board/notifications",board_notifications_save:"/board/notifications/save",thread:"/thread/:thread_id",list_threads:"/thread/list",new_thread:"/thread/new/:board_id",create_thread:"/thread/create/:board_id",edit_thread:"/thread/edit/:thread_id",update_thread:"/thread/update/:thread_id",previous_thread:"/thread/previous/:thread_id",next_thread:"/thread/next/:thread_id",delete_thread:"/threads/delete",thread_confirm:"/threads/dialog/:action",mark_threads:"/threads/mark/:type",recent_threads:"/threads/recent",participated_threads:"/threads/participated",recent_threads_created:"/user/:user_id/recent_threads",bookmark_threads:"/threads/bookmark",next_recent_post:"/threads/recent/:thread_id",thread_bump:"/threads/bump",thread_falling:"/threads/falling",thread_move_dialog:"/threads/move/dialog",thread_move:"/threads/move",thread_move_pm:"/threads/move/send_pm",thread_participants_list:"/thread/participants",thread_participants:"/thread/participants/:thread_id",threads_by_ip:"/threads/ip/:type/:id",thread_last_post:"/thread/last/:thread_id",apply_thread_label:"/threads/label/apply",permalink:"/post/:post_id",list_posts:"/post/list",new_post:"/post/new/:thread_id",create_post:"/post/create/:thread_id",edit_post:"/post/:post_id/edit",update_post:"/post/:post_id/update",recent_posts:"/user/:user_id/recent",all_recent_posts:"/posts/recent",post_like:"/post/like",likes_of_post:"/post/likes",quote_posts:"/post/:post_ids/quote/:thread_id",view_post_in_thread:"/post/:post_id/thread",delete_post:"/post/delete",post_confirm:"/posts/dialog/:action",posts_by_ip:"/posts/ip/:type/:id",posts_delete_by_ip:"/posts/ip/delete",posts_delete_by_ip_dialog:"/posts/ip/dialog",get_quoted_posts:"/post/quote/:thread_id/:post_ids",get_post_json_data:"/post/:post_id/json",report_post:"/report_post/:post_id",create_report:"/report_post/:post_id/create",vote_poll:"/poll/vote",open_or_close_poll:"/poll/open_close",voters:"/poll/voters",conversations_inbox:"/conversations",conversations_send_to_recipients:"/conversations/send/recipients/:recipient_ids",conversations:"/conversations/:folder",conversations_by_label:"/conversations/label/:label_id",list_conversations:"/conversation/list",conversation:"/conversation/:conversation_id",new_conversation:"/conversation/new",new_user_conversation:"/conversation/new/:recipients",create_conversation:"/conversation/create",link_to_oldest_new_message:"/conversation/recent",next_recent_message:"/conversation/recent/:conversation_id",mark_conversations:"/conversations/mark/:type",delete_conversations:"/conversations/delete",remove_conversations:"/conversations/remove",archive_all_conversations:"/conversations/archive_all",delete_all_conversations:"/conversations/delete_all",change_users:"/conversation/users/:type",list_participants:"/conversation/participants",forward_conversations:"/conversation/forward",conversation_confirm:"/conversations/dialog/:action",conversation_last_post:"/conversation/last/:conversation_id",list_labels:"/conversation/label_list",apply_conversation_label:"/conversation/label/apply",manage_conversation_labels:"/conversation/labels/manage",modify_conversation_labels:"/conversation/labels/modify",list_messages:"/message/list",new_message:"/message/new/:conversation_id",create_message:"/message/create/:conversation_id",quote_messages:"/message/:message_ids/quote/:conversation_id",view_message_in_conversation:"/message/:message_id/in/:conversation_id",get_quoted_messages:"/message/quote/:conversation_id/:message_ids",filter_html2bbcode:"/filter/html2bbcode",filter_bbcode2html:"/filter/bbcode2html",filter_html2bbcode2html:"/filter/html2bbcode2html",rss_public:"/rss/public",boardreader:"/boardreader/:start_id/:count",attachment:"/attachment/upload",download_attachment:"/attachment/download/:id",cleanup_attachment:"/attachment/cleanup",plugin_key_set:"/plugin/key/set",tapatalk:"/tapatalk",page:"/page/:page_id",maintenance:"/maintenance",disable_maintenance:"/maintenance/disable",badge_summary:"/badge/summary/:user_id/:badge_id",badge_edit:"/badge/edit",badge_stack_edit:"/badge/stack/edit/:badge_id",badge_action_prepare:"/badge/action/prepare/:badge_id",badge_action:"/badge/action/:badge_id",gift_dialog:"/badge/gift/dialog",gift_send:"/badge/gift/send",pb_staff_page_plugin_list:"/plugin/pb_staff_plugins",unsubscribe:"/unsubscribe/user/:user_id/key/:key",unsubscribe_save:"/unsubscribe/save",admin:"/admin",admin_settings:"/admin/settings",admin_themes:"/admin/themes",admin_structure:"/admin/structure",admin_plugins:"/admin/plugins",admin_members:"/admin/members",admin_security:"/admin/security",admin_upgrades:"/admin/upgrades",admin_marketing:"/admin/marketing",admin_board_list:"/admin/board_list",admin_thread_list:"/admin/thread_list",admin_conversation_list:"/admin/conversation_list",admin_user_searchbox_results:"/admin/user_searchbox_results",admin_user_data:"/admin/user_data",admin_image_name:"/admin/image/name",admin_image_link:"/admin/image/link",admin_image_upload:"/admin/image/upload",admin_image_reset:"/admin/image/reset",forum_settings:"/admin/settings/forum",forum_settings_login_reg:"/admin/settings/forum/login_registration",forum_settings_email_invite_key:"/admin/settings/forum/email_invite_key",forum_settings_calendar:"/admin/settings/forum/calendar",forum_settings_directory:"/admin/settings/forum/directory",forum_settings_directory_save:"/admin/settings/forum/directory/save",forum_settings_directory_delete:"/admin/settings/forum/directory/delete",forum_settings_save:"/admin/settings/forum/save",forum_settings_category:"/admin/settings/forum/category",forum_settings_category_save:"/admin/settings/forum/category/save",forum_settings_social_media:"/admin/settings/forum/social_media",forum_settings_navigation:"/admin/settings/navigation",forum_settings_navigation_save:"/admin/settings/navigation/save",forum_settings_navigation_reset:"/admin/settings/navigation/reset",news:"/admin/settings/forum/news",update_news:"/admin/settings/forum/news/update",update_news_order:"/admin/settings/forum/news/update_order",create_news:"/admin/settings/forum/news/create",delete_news:"/admin/settings/forum/news/delete",update_settings:"/admin/settings/forum/news/update_settings",shoutbox:"/admin/settings/forum/shoutbox",admin_shoutbox_update:"/admin/settings/forum/shoutbox/update",admin_shoutbox_clear:"/admin/settings/forum/shoutbox/clear",censors:"/admin/settings/censors",update_censors:"/admin/settings/censors/update",create_censors:"/admin/settings/censors/create",delete_censors:"/admin/settings/censors/delete",delete_forum:"/admin/settings/delete_forum",delete_forum_validate:"/admin/settings/delete_forum/validate",delete_forum_submit:"/admin/settings/delete_forum/delete",reserved_names:"/admin/settings/reserved_names",update_reserved_names:"/admin/settings/reserved_names/update",create_reserved_names:"/admin/settings/reserved_names/create",delete_reserved_names:"/admin/settings/reserved_names/delete",file_storage_attachments:"/admin/settings/attachments",file_storage_attachments_save:"/admin/settings/attachments/save",delete_attachments:"/admin/settings/attachments/delete",admin_download_attachment:"/admin/settings/attachment/:id",file_storage_overview:"/admin/file_storage/overview",file_storage_cancel_dialog:"/admin/file_storage/cancel_dialog",attachments_cancel_plan:"/admin/file_storage/cancel_plan",admin_theme_manager:"/admin/themes/manager",admin_theme_settings:"/admin/themes/settings",admin_theme_settings_id:"/admin/themes/:theme_id/settings",admin_theme_settings_save:"/admin/themes/:theme_id/settings/save",admin_theme_flags_save:"/admin/themes/:theme_id/flags/save",admin_theme_groups_save:"/admin/themes/:theme_id/groups/save",admin_theme_ranks_save:"/admin/themes/:theme_id/ranks/save",admin_theme_reset_groups:"/admin/themes/:theme_id/settings/reset_groups",admin_theme_reset_ranks:"/admin/themes/:theme_id/settings/reset_ranks",admin_theme_delete:"/admin/themes/:theme_id/delete",admin_theme_export:"/admin/themes/:theme_id/export",admin_theme_export_success:"/admin/themes/:theme_id/export/:item_id",admin_theme_get_thumbs:"/admin/themes/:theme_id/thumbs",admin_theme_new:"/admin/themes/new",admin_theme_create:"/admin/themes/create",admin_theme_import:"/admin/themes/import",admin_theme_install:"/admin/themes/install/:global_id",admin_theme_rate_dialog:"/admin/themes/:theme_id/rate_dialog",admin_theme_rate:"/admin/themes/:theme_id/rate",admin_theme_image_transfer:"/admin/themes/:theme_id/images/transfer/:operation",admin_theme_wizard:"/admin/themes/:theme_id/wizard",easy_themes_default:"/admin/themes/easy",easy_themes_scheme:"/admin/themes/:theme_id/easy",easy_themes_default_layout:"/admin/themes/easy/layout",easy_themes_layout:"/admin/themes/:theme_id/easy/layout",easy_themes_layout_preview:"/admin/themes/easy/layout/preview",easy_themes_layout_save:"/admin/themes/:theme_id/easy/layout/save",css_editor_default:"/admin/themes/css",css_editor:"/admin/themes/:theme_id/css",css_editor_save:"/admin/themes/:theme_id/css/save",css_editor_reset:"/admin/themes/:theme_id/css/reset",css_editor_reset_structure:"/admin/themes/:theme_id/structure/reset",css_editor_visual_default:"/admin/themes/visual",css_editor_visual:"/admin/themes/:theme_id/visual",advanced_themes_default:"/admin/themes/advanced",advanced_themes:"/admin/themes/:theme_id/advanced",edit_template:"/admin/themes/:theme_id/template/:template_id",save_template:"/admin/themes/:theme_id/save",reset_template:"/admin/themes/:theme_id/reset/:template_id",reset_all_templates:"/admin/themes/:theme_id/reset_all",transfer_template:"/admin/themes/:theme_id/transfer/:operation",category_board:"/admin/structure/category_board",category_board_board_dialog:"/admin/structure/category_board/board_dialog",category_board_cat_dialog:"/admin/structure/category_board/cat_dialog",category_board_update_board:"/admin/structure/category_board/update_board",category_board_update_category:"/admin/structure/category_board/update_cat",category_board_reorder:"/admin/structure/category_board/reorder",category_board_duplicate:"/admin/structure/category_board/duplicate",category_board_delete:"/admin/structure/category_board/delete",category_board_delete_prompt:"/admin/structure/category_board/delete_prompt",category_board_permissions:"/admin/structure/category_board/permissions",headers_footers:"/admin/structure/headers",view_headers:"/admin/structure/headers/old/:type/:id",edit_headers:"/admin/structure/headers/:type/:id",update_headers:"/admin/structure/headers/update",headers_priority:"/admin/structure/headers/priority",update_headers_priority:"/admin/structure/headers/priority/set",custom_pages:"/admin/structure/custom_pages",custom_pages_permissions_set:"/admin/structure/custom_pages/permissions/save",custom_pages_create:"/admin/structure/custom_pages/create",custom_pages_order:"/admin/structure/custom_pages/order",custom_pages_delete:"/admin/structure/custom_pages/delete",custom_page_setup:"/admin/structure/custom_pages/edit/:page_id/setup",custom_page_edit_visual:"/admin/structure/custom_pages/edit/:page_id/visual",custom_page_edit_html:"/admin/structure/custom_pages/edit/:page_id/html",custom_page_edit_html_save:"/admin/structure/custom_pages/edit/:page_id/html/save",custom_page_edit_settings:"/admin/structure/custom_pages/edit/:page_id/settings",custom_page_settings_save:"/admin/structure/custom_pages/edit/:page_id/settings/save",custom_page_setup_save:"/admin/structure/custom_pages/edit/:page_id/setup/save",custom_page_widget_add:"/admin/structure/custom_pages/edit/:page_id/widget/add",custom_page_widget_edit:"/admin/structure/custom_pages/edit/:page_id/widget/edit",custom_page_widget_delete:"/admin/structure/custom_pages/edit/:page_id/widget/delete",custom_page_widget_order:"/admin/structure/custom_pages/edit/:page_id/widget/order",custom_page_zone_settings_save:"/admin/structure/custom_pages/edit/:page_id/zone_settings/save",custom_page_widget_html_box:"/admin/structure/custom_pages/edit/:page_id/html_box_data",plugins_manage:"/admin/plugins/manage",plugins_import:"/admin/plugins/import",plugins_order:"/admin/plugins/order",plugins_delete:"/admin/plugins/delete",plugins_settings:"/admin/plugins/settings/:plugin_id",plugins_settings_save:"/admin/plugins/settings/:plugin_id/save",plugins_create:"/admin/plugins/create",plugins_key_delete:"/admin/plugins/key/delete",plugins_key_clear:"/admin/plugins/key/clear",plugins_create_dialog:"/admin/plugins/create_dialog",plugins_permissions_set:"/admin/plugins/permissions/set",plugins_disable:"/admin/plugins/disable",plugins_transfer:"/admin/plugins/settings/:plugin_id/transfer",plugins_transfer_save:"/admin/plugins/settings/:plugin_id/transfer/save",plugin_editor:"/admin/plugins/edit/:plugin_id",plugin_editor_save:"/admin/plugins/edit/:plugin_id/save",plugin_editor_development_log_save:"/admin/plugins/edit/:plugin_id/development_log/save",plugin_editor_key_create:"/admin/plugins/edit/:plugin_id/key/create",plugin_editor_key_update:"/admin/plugins/edit/:plugin_id/key/update",plugin_editor_key_delete:"/admin/plugins/edit/:plugin_id/key/delete",plugin_editor_image_upload:"/admin/plugins/edit/:plugin_id/image/upload",plugin_editor_image_name:"/admin/plugins/edit/:plugin_id/image/name",plugin_editor_image_link:"/admin/plugins/edit/:plugin_id/image/link",plugin_editor_image_reset:"/admin/plugins/edit/:plugin_id/image/reset",plugin_editor_image_reset_all:"/admin/plugins/edit/:plugin_id/image/reset/all",plugin_editor_component_save:"/admin/plugins/edit/:plugin_id/component/save",plugin_editor_settings_save:"/admin/plugins/edit/:plugin_id/settings/save",plugin_editor_get_thumbs:"/admin/plugins/edit/:plugin_id/thumbs",plugin_editor_export:"/admin/plugins/edit/:plugin_id/export",plugin_editor_export_success:"/admin/plugins/edit/:plugin_id/export/:item_id",plugins_install:"/admin/plugins/install/:global_id",plugins_rate_dialog:"/admin/plugins/:plugin_id/rate_dialog",plugins_rate:"/admin/plugins/:plugin_id/rate",plugins_install_cancel:"/admin/plugins/:plugin_id/cancel_install",groups:"/admin/members/groups",update_groups:"/admin/members/groups/update",create_groups:"/admin/members/groups/create",delete_groups:"/admin/members/groups/delete",manage_powers:"/admin/members/groups/:id/powers",update_powers:"/admin/members/groups/:id/update_powers",update_order_groups:"/admin/members/groups/update/order",manage_group:"/admin/members/groups/:group_id/manage",show_bans:"/admin/members/groups/:group_id/manage/show_bans",ban_from_group:"/admin/members/groups/:group_id/manage/ban",unban_from_group:"/admin/members/groups/:group_id/manage/unban",pending_group:"/admin/members/groups/:group_id/pending",pending_approve:"/admin/members/groups/:group_id/pending/approve",pending_reject:"/admin/members/groups/:group_id/pending/reject",ranks:"/admin/members/ranks",update_ranks:"/admin/members/ranks/update",create_ranks:"/admin/members/ranks/create",delete_ranks:"/admin/members/ranks/delete",custom_fields:"/admin/members/fields",create_field:"/admin/members/fields/create",update_field:"/admin/members/fields/update",update_fields_order:"/admin/members/fields/update_order",delete_field:"/admin/members/fields/delete",custom_field_dialog:"/admin/members/fields/dialog",custom_field_opts:"/admin/members/fields/options",forum_avatars:"/admin/members/avatars",add_forum_avatar:"/admin/members/avatars/add",delete_forum_avatar:"/admin/members/avatars/delete",order_forum_avatars:"/admin/members/avatars/order",update_default_avatar:"/admin/members/avatars/update_default",email_members:"/admin/members/email",email_send:"/admin/members/email/send",email_success:"/admin/members/email/success",pending_requests:"/admin/members/pending",update_reg_settings:"/admin/members/pending/update",accept_request:"/admin/members/pending/accept",decline_request:"/admin/members/pending/reject",security_log:"/admin/security/log",security_log_type:"/admin/security/log/:view",security_logs_by_ip:"/admin/security/log/ip/:type/:id",security_log_list:"/admin/security/log/list",member_ban:"/admin/security/ban_members",create_member_ban:"/admin/security/ban_members/create",update_member_ban:"/admin/security/ban_members/update",delete_member_ban:"/admin/security/ban_members/delete",admin_forum_cleanup:"/admin/security/forum_cleanup",admin_forum_cleanup_search:"/admin/security/forum_cleanup/search",admin_forum_cleanup_delete:"/admin/security/forum_cleanup/delete",reported_posts:"/admin/security/reported_posts",report_archive:"/admin/security/report_archive",list_reports:"/admin/security/reported_posts/list",reported_post:"/admin/security/reported_post/:post_id",edit_report_discussion:"/admin/security/reported_post/discussion/edit",update_report_discussion:"/admin/security/reported_post/discussion/update",delete_report_discussion:"/admin/security/reported_post/discussion/delete",submit_report_discussion:"/admin/security/reported_post/submit",resolve_report:"/admin/security/reported_post/resolve",delete_report:"/admin/security/reported_posts/delete",more_reasons:"/admin/security/reported_post/reasons",more_discussions:"/admin/security/reported_post/discussions",mark_reports:"/reports/mark/:type",move_post:"/admin/move_posts",move_reported_post:"/admin/move_reported_post",move_post_process:"/admin/move_posts_process",move_post_list:"/admin/move_posts/list",change_forum_url:"/admin/upgrades/change_forum_url",check_forum_url_availability:"/admin/upgrades/change_forum_url/check_forum_url_availability",custom_domains:"/admin/upgrades/domains",custom_domain_check:"/admin/upgrades/domain/check",custom_domain_default_save:"/admin/upgrades/domain/save",ad_free:"/admin/upgrades/ad_free",ad_free_save:"/admin/upgrades/ad_free/save",ad_free_cancel:"/admin/upgrades/ad_free/cancel",ad_free_settings:"/admin/upgrades/ad_free/settings",ad_free_settings_save:"/admin/upgrades/ad_free/settings/save",ad_free_history:"/admin/upgrades/ad_free/history",admin_experiments:"/admin/upgrades/experiments",admin_experiments_save:"/admin/upgrades/experiments/save",admin_promote:"/admin/marketing/promote",admin_marketing_analytics:"/admin/marketing/analytics",admin_marketing_analytics_update:"/admin/marketing/analytics/update",admin_marketing_google_analytics:"/admin/marketing/analytics/google",admin_marketing_google_analytics_update:"/admin/marketing/analytics/google/update",admin_marketing_google_analytics_reset:"/admin/marketing/analytics/google/reset",admin_marketing_viglink:"/admin/marketing/viglink",admin_marketing_viglink_update:"/admin/marketing/viglink/update",ads_txt:"/ads.txt",admin_ads_txt_edit:"/admin/marketing/ads_txt",admin_ads_txt_save:"/admin/marketing/ads_txt/save",v6_pages:"/adminv6/forum/pages",v6_pages_create:"/adminv6/forum/pages/create",v6_pages_delete:"/adminv6/forum/pages/delete",v6_pages_manage:"/adminv6/forum/pages/manage/:page_id",v6_pages_save:"/adminv6/forum/pages/save",v6_boards:"/adminv6/forum/boards",v6_boards_category_new_or_update:"/adminv6/forum/boards/category/new-or-update",v6_boards_categories_edit:"/adminv6/forum/boards/categories/edit",v6_boards_categories_update:"/adminv6/forum/boards/categories/update",v6_boards_boards_edit:"/adminv6/forum/boards/boards/edit",v6_boards_boards_update:"/adminv6/forum/boards/boards/update",v6_boards_reorder:"/adminv6/forum/boards/reorder",v6_boards_get_board:"/adminv6/forum/boards/:board_id",v6_boards_new_or_update_board:"/adminv6/forum/boards/new-or-update",v6_boards_categories_delete_count:"/adminv6/forum/boards/categories/delete_count",v6_boards_categories_delete:"/adminv6/forum/boards/categories/delete",v6_themes_manage:"/adminv6/forum/themes/manage",v6_easy_theme_editor:"/adminv6/forum/themes/easy/:theme_id",v6_easy_theme_save:"/adminv6/forum/themes/easy/:theme_id/save",v6_navigation:"/adminv6/forum/navigation",v6_navigation_update:"/adminv6/forum/navigation/update",v6_settings_login:"/adminv6/settings/login",v6_settings_registration:"/adminv6/settings/registration",v6_settings_login_registration_update:"/adminv6/settings/login-registration/update",v6_settings_general:"/adminv6/settings/general",v6_settings_general_update:"/adminv6/settings/general/update",v6_members_groups:"/adminv6/members/groups",v6_members_ranks:"/adminv6/members/ranks",v6_members_ranks_new_or_update:"/adminv6/members/ranks/new-or-update",v6_members_ranks_delete:"/adminv6/members/ranks/delete",v6_members_email:"/adminv6/members/email",v6_members_email_send:"/adminv6/members/email/send",v6_members_fields:"/adminv6/members/fields",v6_moderation_bans:"/adminv6/moderation/bans",v6_moderation_cleanup:"/adminv6/moderation/cleanup",v6_moderation_reported_posts:"/adminv6/moderation/reported-posts",v6_moderation_security_log:"/adminv6/moderation/security-log",v6_power_ups:"/adminv6/power-ups",v6_attachments_manage:"/adminv6/power-ups/attachments/manage",v6_attachments_delete:"/adminv6/power-ups/attachments/delete",v6_attachments_get_page:"/adminv6/power-ups/attachments/get_page",v6_analytics:"/adminv6/power-ups/analytics",v6_media_library:"/adminv6/forum/media-library",v6_media_library_view:"/adminv6/forum/media-library/view",v6_media_library_media_listing:"/adminv6/forum/media-library/media-listing",v6_media_library_upload:"/adminv6/forum/media-library/upload",v6_media_library_reset:"/adminv6/forum/media-library/reset",v6_change_url:"/adminv6/power-ups/change-url",v6_censored_words:"/adminv6/power-ups/censored-words",v6_domains:"/adminv6/power-ups/domains",v6_shoutbox:"/adminv6/power-ups/shoutbox",v6_forum_directory:"/adminv6/power-ups/forum-directory",v6_forum_directory_save:"/adminv6/power-ups/forum-directory/save",v6_forum_directory_delete:"/adminv6/power-ups/forum-directory/delete",v6_fdn_sso:"/adminv6/fdn/sso",v6_fdn_insite:"/adminv6/fdn/insite",e_register:"/register",e_register_check_username:"/register/username",e_register_invite:"/register/:invite_key",e_register_submit:"/register/submit",e_activate:"/activate",e_activate_submit:"/activate/submit",e_request_msg_submit:"/pending/message/submit",e_resend_activation:"/activate/email/:user_id",e_change_email:"/activate/change_email/:user_id",e_change_email_submit:"/activate/change_email",e_login:"/login",e_login_submit:"/login/submit",e_forgot_pw:"/forgot",e_forgot_pw_submit:"/forgot/submit",e_reset_pw:"/reset/:key/user/:user_id",e_reset_pw_submit:"/reset/:key/user/:user_id/submit",e_sso:"/sso/:sha1/:time/:data",reset_pass:"/reset/:key",activate:"/activation",activate_forum:"/activation/:forum",store_type:"/store/:type",store_type_category:"/store/:type/:category",store_add_item:"/store/add_item",store_edit_item:"/store/edit_item",store_remove_item:"/store/remove_item",store_checkout:"/store/checkout/:type",store_purchase:"/store/purchase",store_add_cart:"/store/add_cart/:item_type/:item_id/:forum_url/:user_id",store_create_cart:"/store/create_cart/:type/:forum_url/:user_id",store_card_remove:"/store/card/remove",library:"/library/:type",library_forum:"/library/:type/:forum_id",library_item:"/library/:type/item/:item_id",library_item_forum:"/library/:type/item/:item_id/:forum_url",account_settings:"/account/settings",plans:"/plans",features:"/features",contact:"/contact"}}),void 0===proboards)var proboards={};proboards.image_module={get_id:function(e){return $(e).attr("id").match(/^image\-module\-(.+)$/)[1]},get_data:function(e){return{id:proboards.image_module.get_id(e),name:$(".name .text",e).text(),url:$(".edit-link input",e).val()}},create:function(e,t,i){var n=$(e).clone();void 0===i&&(i="Image"),n.attr("id","image-module-"+t),n.removeClass("new"),n.find(".name .text").text(i),n.find(".edit-name input").val(i),n.find(".default.button").text("Delete"),n.find('input[type="file"]').attr("name","image_upload["+t+"]").removeAttr("multiple"),n.find(".image").show(),n.hide(),$(e).before(n),n.show("slide"),proboards.image_module.attach.apply(n);var a=$(e).parent(),o=a.attr("class").match(/category-max-(\d+)/);return o&&a.find(".image-module:not(.new)").length>=o[1]&&a.find(".image-module.new:visible").hide("slide"),n},apply_defaults:function(e,t){for(id in e){var i=$("#image-module-"+id);if(e[id].deleted){var n=i.parent();if(i.hide("slide",void 0,void 0,function(){$(this).remove()}),n.length&&n.attr("class")){var a=n.attr("class").match(/category-max-(\d+)/);a&&n.find(".image-module:not(.new)").length-1<a[1]&&n.find(".image-module.new:hidden").show("slide")}i.addClass("deleted"),i.trigger("module.delete",{type:"default",ajaxData:t})}else{var o=""!=e[id].url?'<img src="'+e[id].url+'">':"";$(".image span",i).html(o),$(".name .text",i).text(e[id].name),i.removeClass("overridden"),i.removeClass("overridden-name"),i.removeClass("overridden-link"),$(".edit-link input, .edit-name input",i).val(""),i.trigger("module.update",{type:"default",ajaxData:t})}}},attach:function(){var module=this;$(".link.button",module).click(function(e){e.preventDefault(),$(".buttons,.note.replace,.note.add",module).hide(),$(".edit-link,.note.link",module).show(),$(".edit-link input",module).focus()}),$(".edit-link form",module).submit(function(e){e.preventDefault();var o=$(".edit-link input",module).val();proboards.ajax({url:proboards.data("image-module-link-url"),data:{id:proboards.image_module.get_id(module),url:o,theme_id:proboards.data("theme_id")},success:function(e){if($(module).hasClass("new"))var t=proboards.image_module.create(module,e.id,e.name);var i=t||module,n=$(".image span",i).html(""),a=$("<img>").appendTo(n);a.attr("src",proboards.image_module.image_pending()),a.attr("src",e.url),$(i).addClass("overridden"),$(i).addClass("overridden-link"),$(".edit-link input",module).val(e.url),$(i).trigger("module.update",{type:"link",url:o,ajaxData:e})}}),$(".buttons,.note.replace",module).show(),$(".edit-link,.note.link",module).hide()}),$(".edit-link .back",module).click(function(e){e.preventDefault(),$(".buttons",module).show(),$(".edit-link,.note.link",module).hide(),$(module).hasClass("new")?$(".note.add",module).show():$(".note.replace",module).show()}),$(".name .edit",module).click(function(e){e.preventDefault();var t=$(".edit-name input",module).val();$(module).data("previous_name",t),$(".buttons,.note.replace,div.name,.edit-link,.note.link",module).hide(),$(".edit-name,.note.rename",module).show(),$(".edit-name input",module).focus()}),$(".edit-name form",module).submit(function(e){e.preventDefault();var t=$(".edit-name input",module).val(),i=$(module).data("previous_name");proboards.ajax({url:proboards.data("image-module-name-url"),data:{id:proboards.image_module.get_id(module),name:t,theme_id:proboards.data("theme_id")},error:function(e){$(".name .text",module).text(i),$(".edit-name input",module).val(i),proboards.error(e.error)},success:function(e){$(module).trigger("module.update",{type:"name",name:t,previous_name:i,ajaxData:e})}}),$(".name .text",module).text(t),$(module).addClass("overridden"),$(module).addClass("overridden-name"),$(".buttons,.note.replace,div.name",module).show(),$(".edit-name,.note.rename",module).hide()}),$(".edit-name .back",module).click(function(e){e.preventDefault();var t=$(module).data("previous_name");$(".edit-name input",module).val(t),$(".buttons,.note.replace,div.name",module).show(),$(".edit-name,.note.rename",module).hide()}),$(".default.button",module).click(function(e){e.preventDefault();var t="Delete"==$(this).text()?"Are you sure you wish to delete this image?":"Are you sure you wish to reset this image to default?";proboards.confirm(t,function(){var e=proboards.image_module.get_id(module);$(".image img",module).attr("src",proboards.image_module.image_pending());var t={};t.ids=e,void 0!==proboards.data("theme_id")&&(t.theme_id=proboards.data("theme_id")),proboards.ajax({url:proboards.data("image-module-reset-url"),data:t,success:function(e){proboards.image_module.apply_defaults(e.images,e)}})})});var id=proboards.image_module.get_id(module),url=null==proboards.data("theme_id")?proboards.data("image-module-upload-url"):proboards.data("image-module-upload-url")+"/id/"+id+"/theme_id/"+proboards.data("theme_id"),errorFunction=function(e,t){$(module).hasClass("new")&&($(module).data("sending",($(module).data("sending")||0)-1),0==$(module).data("sending")&&$(".image",module).hide());var i=$(".image img",module);i.data("prev-src")?i.attr("src",i.data("prev-src")):i.remove()};$(".upload.button input",module).each(function(){var re=new RegExp(eval(proboards.data("image_regex"))),extensions=$(this).data("valid-extensions");extensions&&(re=new RegExp(".("+extensions+")$","i"));var maxFileSize=$(this).data("max-size-bytes")||proboards.data("image_size_limit");$(this).fileupload({acceptFileTypes:re,maxNumberOfFiles:1,maxFileSize:maxFileSize,add:function(e,t){$(module).hasClass("new")&&($(module).data("sending")||$(".image",module).show(),$(module).data("sending",($(module).data("sending")||0)+1));var i=$(".image img",module);if(0==i.length){var n=$(".image span",module);i=$("<img>").appendTo(n)}i.data("prev-src",i.attr("src")),i.attr("src",proboards.image_module.image_pending()),t.submit()},success:function(e){var t;$(module).hasClass("new")&&(t=proboards.image_module.create(module,e.id,e.name),$(module).data("sending",($(module).data("sending")||0)-1),0==$(module).data("sending")&&$(".image",module).hide());var i=t||module,n=$(".image span",i).html("");$("<img>").appendTo(n).attr("src",e.url),$(".edit-link input",i).val(e.url),$(i).addClass("overridden"),$(i).addClass("overridden-link"),$(i).trigger("module.update",{url:e.url,ajaxData:e})},done:function(e,t){t&&t.result&&t.result.error&&(errorFunction.call(this,e,t),proboards.error(t.result.error))},fail:function(e,t){errorFunction.call(this,e,t);var i="Upload failed.",n=t&&$.isArray(t.files)&&t.files.length?t.files[0].error:"";if("maxFileSize"==n)i="The file exceeds the maximum size of "+$.byteSize(t.maxFileSize)+".";else if("minFileSize"==n)i="File is too small.";else if("acceptFileTypes"==n)i="Filetype not allowed.";else if("maxNumberOfFiles"==n)i="Max number of files exceeded.";else if(t&&t.result&&"string"==typeof t.result.responseText){var a=$.parseJSON(t.result.responseText);a&&a.error&&(i=a.error)}proboards.error(i)},sequentialUploads:!0,url:url,dropZone:$(module),dataType:"json"})}),$(".image a",module).click(function(e){e.preventDefault(),$(module).hasClass("overridden-link")&&proboards.image_preview($(".image img",module).attr("src"))})},image_pending:function(){return proboards.image_path()+"/loader/circle-16x16.gif"}};var scrollable_follow=function(){var i=$(".scrollable");$(window).bind("resize",function(e){var t=!1;i.each(function(){if(null!=$(this).data("parent")){t=!0;var e=$(this).data("placeholder");$(this).data("position",e.offset())}}),t&&$(window).trigger("scroll")}),$(window).bind("scroll",function(e){var r=this;i.each(function(){if($(this).is(":visible")&&!$(window).data("already_scrolled")){var e=null!=$(this).data("parent"),t=e?$(this).data("position"):$(this).offset();if($(r).scrollTop()>=t.top){if(!e){var i=$(this).clone().removeClass("scrollable").css("visibility","hidden");$(this).data("placeholder",i),$(this).data("parent",$(this).parents(".scrollable-container")),$(this).after(i);var n=$(this).width();$(this).data("position",$(this).offset()),$(this).css({width:n+"px",position:"fixed",left:t.left+"px",top:"0px","z-index":500}),$(this).data("placeholder",i)}var a=$(this).data("parent").offset().top+$(this).data("parent").height()-$(this).height();if($(r).scrollTop()>=a){if($(this).css({position:"absolute"}),$.browser.msie&&7==parseInt($.browser.version))var o={top:$(this).offset().top-$(this).position().top,left:$(this).offset().left-$(this).position().left};else{$(this).css({top:0,left:0});o={top:$(this).offset().top,left:$(this).offset().left}}$(this).css({top:a-o.top+"px",left:t.left-o.left+"px"})}else $(this).css({position:"fixed",top:"0px",left:t.left+"px"})}else if(e){i=$(this).data("placeholder");$(this).attr("style",""),i.before(this),i.remove(),$(this).data("placeholder",null),$(this).data("parent",null)}}})})};$(document).ready(function(){$(".scrollable").length&&scrollable_follow();var e=$(".image-module");e.length&&(document.createElement("img").src=proboards.image_module.image_pending(),e.each(proboards.image_module.attach));proboards.preload(proboards.data("admin_menu_gradients")),$("#color_picker_div").colorPicker({autoUpdate:!1})});var admin_home=function(){$(document).ready(function(){$("#admin-map-switcher .map_button").on("click",function(){$("#admin-map-switcher .map_button").removeClass("active"),$(this).addClass("active"),$(".map_section").hide(),$("#admin-map-"+$(this).data("section")).show()})})},admin_move_posts=function(){var e,n,t=0;function i(){proboards.ajax({url:proboards.route("move_post_list"),data:{board_id:$('input[name="board_id"]:checked').val(),list_manager_id:proboards.data("lm_id")},dataType:"json",success:function(e){$(".lm-content-"+proboards.data("lm_id")).html(e.results),$("#list_manager .control-bar").html('<div class="ui-search lm-search-'+proboards.data("lm_id")+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+proboards.data("lm_id")),new listManager("threads",{total:e.thread_count,limit:e.limit,page:e.page,pageCache:".lm-content-"+proboards.data("lm_id"),data:{board_id:e.board_id},id:proboards.data("lm_id")},{route_name:"move_post_list",float_control_bar:!1}),t=1},error:function(e){$("#list_manager_container").hide(),proboards.alert(e.error),t=0}})}function a(){if($('input[name="send_pm"]').attr("checked")&&0==$('textarea[name="message"]').val().length)$('input[name="submit_move"]').attr("disabled","disabled");else{if("new"==e){if(void 0!==$('input[name="board_id"]:checked').val()&&""!=$('input[name="subject"]').val())return void $('input[name="submit_move"]').removeAttr("disabled")}else if("merge"==e&&void 0!==$('input[name="board_id"]:checked').val()&&void 0!==n&&""!=n)return void $('input[name="submit_move"]').removeAttr("disabled");$('input[name="submit_move"]').attr("disabled","disabled")}}$(document).ready(function(){$("input:checked").removeAttr("checked"),$('input[name="submit_move"]').attr("disabled","disabled"),$('input[name="merging"]').change(function(){"new"==(e=$(this).val())?($("#new_subject").show(),$("#list_manager_container").hide()):(0<$('input[name="board_id"]:checked').length&&(i(),$("#list_manager_container").show()),$("#new_subject").hide(),t&&$("#list_manager_container").show()),a()}),$(".manager").bind("pagination_returned",function(){$('input[value="'+n+'"]').attr("checked","checked")}),$('input[name="board_id"]').change(function(){$("#list_manager").show(),"merge"==$('input[name="merging"]:checked').val()&&(i(),$("#list_manager_container").show()),n="",a()}),$('input[name="subject"]').bind("keyup.subject",function(){a()}),$('input[name="thread_id"]').live("change",function(){n=$('input[name="thread_id"]:checked').val(),$('input[name="submit_move"]').removeAttr("disabled")}),$('input[name="send_pm"]').change(function(){$("#send_pm_message").toggle(),a()}),$('textarea[name="message"]').change(function(){a()}),$("#move_posts form").submit(function(e){return e.preventDefault(),e.stopPropagation(),!1}),$('input[name="submit_move"]').on("click",function(){$("#move_posts form").submit()})}),$.extend(admin_move_posts,{submit_move:function(e){var t=$("#move_posts form");t.css("visibility","hidden"),$("#move_posts").prepend('<div class="working_overlay">'+proboards.processing_icon()+"&nbsp;&nbsp;Working</div>");var i=t.serialize();-1==i.indexOf("thread_id")&&(i+="&thread_id="+n),proboards.ajax({url:proboards.route("move_post_process"),data:i,dataType:"json",success:function(e){window.location=e.redirect_url},error:function(e){proboards.alert(e.error),t.css("visibility","visible"),$(".working_overlay").remove()}})}})},admin_plugins=function(){$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0}),fileStorage.pluginStoreLink()}),$(document).ready(function(){var i=function(){$("#plugins-manage .content.sortable > div:not(.ui-sortable-helper)").removeClass("even").filter(":odd").addClass("even")};$("#plugins-manage .headings .sortable").sortableList({container:$("#plugins-manage .content"),onComplete:i}),$("#plugins-manage .content.sortable").sortable({items:".item",handle:".drag-handle",placeholder:"placeholder",create:function(e,t){},update:function(e,t){var i={ids:[],order:[]},n=0;n=0;$("#plugins-manage .item").each(function(){var e="position-"+n;$(this).hasClass(e)||(i.ids.push($(this).attr("id").match(/\d+/)[0]),i.order.push(n),$(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(e)),++n}),proboards.ajax({url:proboards.data("plugins_order_url"),data:i,success:function(){var e=$(".status",t.item);e.html("Saved!").addClass("saved").hide().fadeIn(),setTimeout(function(){e.fadeOut(400,function(){$(this).html("").removeClass("saved")})},2e3)}})},change:function(e,t){i()},stop:function(e,t){$("#plugins-manage .content.sortable").setEven()}});var e=0;$("#plugins-manage .item").each(function(){$(this).addClass("position-"+e++)}),$(".plugin-delete span").click(function(){var e=$(this).parent().siblings(".plugin-name").html(),n=$(this).parents(".item"),a=n.attr("id").match(/\d+/)[0],t=function(i){proboards.ajax({url:proboards.data("plugins_delete_url"),data:{ids:[a],delete_keys:i},success:function(e){if(e.refresh_page&&(proboards.loading(!0),location.reload(!0)),n.remove(),$("#plugins-manage .content.sortable").setEven(),$("#plugin-build-"+a).remove(),$("#plugins-build > .content").setEven(),i)$("#plugins-keys .list > .item").each(function(){var e=$(this);a==$(".used-by",e).data("plugin-id")&&(o(e),e.remove())});else{var t=function(e){for(var t=proboards.data("keyData"),i=0,n=t.length;i<n;i++)if(t[i].key==e)return $("#"+t[i].id)};$.each(e.keys.removed,function(){var e=t(this);o(e),e.remove()}),$.each(e.keys.unused,function(){var e=t(this);$(".delete",e).removeClass("disabled").unbind("click",r),$(".used-by",e).html("")})}}})};proboards.dialog("confirmation",{title:"Confirm",html:"Are you sure you want to delete the plugin "+e+"?<br /><br /> This will remove the plugin from your forum completely, including from the Build section.",width:370,height:200,buttons:{"Delete Plugin":function(){$(this).dialog("close"),t(0)},"Delete Plugin & Data":function(){$(this).dialog("close"),t(1)},Cancel:function(){$(this).dialog("close")}}})});proboards.data("theme_selection").length;var u=function(e){var t=$(e).closest(".item"),i=t.attr("id").match(/\d+/)[0],n=proboards.data("plugin_permissions")[i]||{},a=t.find(".plugin-permissions input").arrayValue().length;t.is(".disabled")?a="-":0===a&&(a="All"),t.find(".plugin-permissions .themes-summary").text(a),t.find(".plugin-permissions .permissions-summary").attr("class","permissions-summary level-"+(n.level||0))};$("#plugins-manage .plugin-permissions button").bind("click",function(e){e.preventDefault();var a=$(this).closest(".item"),o=a.is(".disabled"),r=$(this).siblings("input"),s=proboards.data("theme_selection"),t=r.arrayValue(),l=a.attr("id").match(/\d+/)[0];if(!t.length)for(var i=0;i<s.length;++i)t.push(s[i].value);var c=this,n=proboards.select_dialog({title:"Permissions",options:s,selected:t,id:"plugin-permissions-dialog",width:455,onComplete:function(e){e.length||o||$(".plugin-enable",a).click(),e.length==s.length&&(e=[]),r.arrayValue(e).change();var t={},i={};$("input, select","#plugin-permissions-dialog .permissions").each(function(){i[$(this).attr("name")]=$(this).val(),t[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val()}),proboards.ajax({url:proboards.data("plugins_permissions_set_url"),data:{theme_ids:e.join(","),plugin_id:l,permissions:i}});var n=proboards.data("plugin_permissions");n[l]=t,proboards.data("plugin_permissions",n),u(c)}});n.prepend(n.parent().find("button:last").prev()),n.prepend(n.parent().find("button:last").prev()),n.prepend("<span>The plugin will only be applied to the following themes:</span>");var d=proboards.data("plugin_permissions")[l]||{};n.prepend(proboards.permissions.selection({action:"[b]view[/b] this plugin",values:d}))}).each(function(){u(this)}),$("#plugins-manage .item .plugin-enable").bind("click",function(e){e.preventDefault();var t=$(this).closest(".item");if(!t.hasClass("super_disabled")){var i=t.attr("id").match(/\d+/)[0],n=t.hasClass("disabled")?0:1;proboards.ajax({url:proboards.data("plugins_disable_url"),data:{disable:n,plugin_id:i},success:function(e){t.toggleClass("disabled"),$(".plugin-permissions button",t).each(function(){u(this)})}})}}),$("#import").click(function(){var n=proboards.dialog("import-dialog",{title:"Import Plugin",modal:!0,width:600});n.html();pbFileUpload.init({enableDragAndDrop:!1},{acceptFileTypes:/\.(pbp)$/i,url:proboards.data("plugins_import_url"),maxNumberOfFiles:1,maxFileSize:proboards.data("max_plugin_size")+proboards.data("max_plugin_size_buffer")}),$("#fileupload").on("fileuploaddone",function(e,t){var i=t.result[0].redirect;$(".fileupload-buttonbar",n).hide(),n.append("<br /><p>This plugin has been successfully installed, however you might still have a few steps remaining before your plugin will function properly.  Click Finish to proceed to this plugin's settings.</p><p><br /><strong>Don't forget to turn your plugin on when you're finished!</strong><br /><br />You can turn plugins on and off on the Manage page by clicking the checkboxes.  You can also set specific themes by clicking Edit there.</p><br />"),n.dialog("option","buttons",{Finished:function(){$(this).dialog("close")}}).dialog("option","close",function(){window.location=i})})}),$("#plugins-build .content .item:odd").addClass("even")});var o=function(e){$(".row-number",e).html(""),$(e).nextAll().each(function(){var e=$(".row-number",this),t=parseInt(e.html())-1;e.html(t),$(this).toggleClass("even"),$(".key-input",this).attr("tabindex",t)})},r=function(e){e.preventDefault(),e.stopImmediatePropagation(),proboards.error("There is currently a plugin associated with this key that must be removed before the key can be deleted.")},a=function(e){e.preventDefault(),e.stopPropagation();var t=$(this);if(t.is(".disabled"))proboards.error("This plugin key currently has no saved data associated with it.");else{var i=t.closest(".item").attr("id");proboards.confirm("Are you sure you wish to clear all data associated with this key?  This cannot be undone.",function(){proboards.ajax({url:proboards.data("plugins_key_clear_url"),data:{id:i}}),t.addClass("disabled")})}};$(document).ready(function(){var e,n=0;$("#plugins-keys .list").autoform({deleteURL:proboards.data("plugins_key_delete_url"),undelete:!1,fields:[],dataID:"id",itemData:proboards.data("keyData"),check:function(e,t){var i=$(".key-input",t.item).trimValue().val();return""==i?["key","You must enter a key name."]:i.match(/^[A-z0-9_]+$/)?!(1<$(".key-input").filter(function(){if($(this).val()==i)return this}).length)||["key","The key "+i+" is already in use."]:["key","A key name may only consist of letters, numbers, or underscores."]},checkDelete:function(e,t){if(""==$(".key-input",t.item).trimValue().val())return!0},onCreateItem:function(e,t){var i=$(t.item);i.prepend('<div class="clear-data"><a href="#" class="disabled">Clear</a></div>').prepend('<div class="used-by"></div>').prepend('<div class="plugin-type"></div>').prepend('<div class="plugin-key key-container"></div>').prepend('<div class="row-number"></div>'),i.find(".delete").html("Delete"),i.find(".clear-data a").bind("click",a)},onCreateExistingItem:function(e,t){var i=proboards.data("keyData")[n++];$(".plugin-key",t.item).html(i.key),$(".plugin-type",t.item).html(proboards.data("keyTypes")[i.type]),$(".used-by",t.item).html(i.used_by_plugin),i.used_by_plugin_id&&$(".used-by",t.item).data("plugin-id",i.used_by_plugin_id),(i.used_by_users||""!=i.used_by_plugin)&&$(".key-input",t.item).attr("disabled","disabled"),""!=i.used_by_plugin&&$(".delete",t.item).addClass("disabled").bind_first("click",r),null!=i.used_by_users&&$(".clear-data a",t.item).removeClass("disabled")},onDelete:function(e,t){o(t.item)}}),e=0,$(".list .row-number").each(function(){$(this).html(++e),$(this).next().find(".key-input").attr("tabindex",$(this).html())}),$("#plugins-keys .list").setEven(),$("#create").click(function(){proboards.ajax({url:proboards.data("plugins_create_dialog_url"),success:function(e){proboards.dialog("plugin-create-dialog",{title:"Create New Plugin",html:e.html,width:330,buttons:{Create:function(){$("form",this).submit()},Cancel:function(){$(this).dialog("close")}}})}})})})},favstar_active_url=proboards.image_path()+"/admin/themes/etc/favstar-active.png",favstar_dim_url=proboards.image_path()+"/admin/themes/etc/favstar-dim.png",scheme_properties=["body_background_color","title_bar_background_color","title_text_color","title_buttons_background_color","buttons_background_color","container_background_color_1","container_background_color_2","container_highlight_color","container_outer_border_color","container_inner_border_color"],admin_themes=function(){$(document).ready(function(){var e=$.parseJSON(proboards.data("theme_color_scheme"));if(null!=e){var t=$(".admin-theme-color-bar");t.is("div")||(t=$("td",t)),t.append(proboards.color_scheme.build(e,0))}$("input","#theme-manager-buttons").bind("change",function(){proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")}),$("#default-help").tipTip({}),$("#disabled-help").tipTip({}),$('select[name="theme"]').on("change",function(){var e=$(this).val(),t=window.location.pathname;t=t.replace(/(\/admin\/themes)(\/\d+)?/,"$1/"+e),window.location.pathname=t}),$('select[name="theme"]').val()==proboards.data("default_theme_id")&&disableDefaultTheme(),$('input[name="default"]').change(function(){$("#disabled-span").toggle(!$('input[name="default"]').prop("checked")),$(this).prop("checked")&&$('input[name="disabled"]').prop("checked",!1)})})},updateThemeDropdown=function(e){disableDefaultTheme(),$("#disabled-span").remove(),$('select[name="theme"] option[value="'+e+'"]').text($('select[name="theme"] option[value="'+e+'"]').text().replace(" (default)","")),$('select[name="theme"] option:selected').text($('select[name="theme"] option:selected').text()+" (default)")},disableDefaultTheme=function(){var e=$("#default-span"),t=$("<div />");t.css({position:"absolute",top:e.position().top,left:e.position().left,width:e.outerWidth(),height:e.outerHeight(),zIndex:1e4,backgroundColor:"#fff",opacity:0}),t.bind("click",function(){$("#default-help").tipTip("show")}),e.append(t),$('input[name="default"]').attr("checked","checked").attr("disabled","disabled")};function updateHexCodeLength(e){return 6!=e.length?e.charAt(0).hex_code.charAt(0).hex_code.charAt(1).hex_code.charAt(1).hex_code.charAt(2).hex_code.charAt(2):e}var mobile_board=function(){$(document).ready(function(){$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()})})},mobile_home=function(){$(document).ready(function(){$(".item.board").click(function(){document.location=$(this).find(".link a").attr("href")})})},mobile_members=function(){function t(){$('input[name="q"].placeholder-empty').val("");var e=$('.ui-search input[name="q"]').val();return window.location.search="?q="+e.replace(/\s/g,"+"),!1}$(document).ready(function(){var o=proboards.consolidateParams();o.view;$("#member-view-select").change(function(){window.location=proboards.route("members")+$(this).val()}),$(".ui-pagination a").click(function(e){e.preventDefault();var t=$(this).attr("href");if(void 0!==t){var i=t.split("?")[1],n=proboards.consolidateParams(i),a=$.extend(o,{page:n.page});a.page||delete a.page,window.location.search=proboards.genQueryString(a)}}),$(".sortable a").click(function(e){e.preventDefault(),o.sort=$(this).is(".name")?"name":"last_online",o.dir="asc"==o.dir?"desc":"asc",window.location.search=proboards.genQueryString(o)}),$("form.ui-search").submit(function(e){return e.preventDefault,t(),!1}),$(".search-filters-button span.icon").click(function(e){return e.preventDefault,t(),!1})})},admin_marketing_ads_txt=function(){$(document).ready(function(){var e=$(".js-form-admin-marketing-ads-txt"),n=$(".js-ads-txt-content");n.on("change",function(){proboards.unsaved_changes=1}),e.on("submit",function(e){e.preventDefault(),proboards.saving(i,!0);var t=n.val(),i=$(".js-save-ads-txt");return proboards.ajax({url:proboards.route("admin_ads_txt_save"),data:{ads_txt:t},success:function(e){proboards.unsaved_changes=0},complete:function(e,t){proboards.saving(i,!1,t)}}),!1})})},admin_marketing_analytics=function(){var d;$(document).ready(function(){var l=$.extend({},proboards.data("locale_settings"));$("#start_date, #end_date").datepicker("option","maxDate","+1").bind("change",function(){var e=$("#start_date"),t=$("#end_date"),i=e.val(),n=t.val();if(!$.check_date_format(i,l)||!$.check_date_format(n,l))return proboards.alert("Invalid date range selected.");var a=e.datepicker("getDate").getTime(),o=t.datepicker("getDate").getTime();o<a&&(n=i,o=a,t.val(i)),90<(o-a)/1e3/60/60/24&&(o=new Date(a+7776e6),t.datepicker("setDate",o),proboards.alert("Analytics can only display up to 90 days at a time. <br /><br />The end date has been automatically adjusted."));var r=$("#chartdiv").overlay(),s=$("#analytics-table").overlay();proboards.ajax({url:proboards.route("admin_marketing_analytics_update"),data:{start_date:i,end_date:n},dataType:"json",success:function(e){$("#analytics-table > tbody").html(e.html),d.dataProvider=e.chartData,d.validateData()},error:function(e){proboards.alert(e.error)},complete:function(){r.remove(),s.remove()}})});var e=$("#analytics-placeholder").offset(),t=$(".drop-shadow").offset();$("#chartdiv").css({left:e.left-t.left,top:e.top-t.top});var s={pageviews:{color:"#00BBCC",title:"Pageviews"},forum_requests:{color:"#1B48AC",title:"Forum Requests"},posts:{color:"#DB0000",title:"Posts Made"},threads:{color:"#69BF00",title:"Threads Created"},users:{color:"#F5B800",title:"New Members"}},c=proboards.data("chartData");c&&c[0]&&void 0===c[0].forum_requests&&delete s.forum_requests,AmCharts.ready(function(){(d=new AmCharts.AmSerialChart).pathToImages=proboards.image_path()+"/amcharts/",d.dataProvider=c,d.categoryField="date",d.dataDateFormat=l.amcharts_date_format;var e=d.categoryAxis;e.parseDates=!0,e.minPeriod="DD",e.axisColor="#DADADA",e.dashLength=1;var t=new AmCharts.ValueAxis;t.axisColor="#DADADA",t.axisThickness=2,t.gridAlpha=0,t.minMaxMultiplier=1.08,t.minimum=0,d.addValueAxis(t);var n=new AmCharts.ValueAxis;for(var a in n.position="right",n.axisColor=s.pageviews.color,n.axisThickness=2,n.gridAlpha=0,n.minMaxMultiplier=1.08,n.minimum=0,d.addValueAxis(n),s)s[a].graph=new AmCharts.AmGraph,s[a].graph.valueAxis="pageviews"==a||"forum_requests"==a?n:t,s[a].graph.type="smoothedLine",s[a].graph.bullet="round",s[a].graph.bulletColor="#FFFFFF",s[a].graph.bulletBorderColor=s[a].color,s[a].graph.bulletBorderAlpha=1,s[a].graph.bulletBorderThickness=2,s[a].graph.bulletSize=7,s[a].graph.title=s[a].title,s[a].graph.valueField=a,s[a].graph.lineThickness=2,s[a].graph.lineColor=s[a].color,s[a].graph.balloonText="[[title]]: [[value]]",d.addGraph(s[a].graph);var o=new AmCharts.ChartCursor;o.cursorPosition="mouse",d.addChartCursor(o);var r=new AmCharts.AmLegend;r.marginLeft=110,r.useGraphSettings=!0,r.valueText="",d.addLegend(r),r.addListener("showItem",function(e){$('.analytics-checkbox[data-type="'+e.dataItem.valueField+'"]').prop("checked",!0)}),r.addListener("hideItem",function(e){$('.analytics-checkbox[data-type="'+e.dataItem.valueField+'"]').prop("checked",!1)}),d.write("chartdiv"),$(".analytics-checkbox").on("change",function(){var e=$(this).attr("data-type");for(i in d.graphs)if(d.graphs[i].valueField==e){$(this).prop("checked")?d.showGraph(d.graphs[i]):d.hideGraph(d.graphs[i]);break}})})})},admin_marketing_google_analytics=function(){$(document).ready(function(){var e=$("input, select","#event-settings"),t=$(".event").find(".option:first select"),i=$('select[name="enabled"]'),n=$('input[name="tracking_id"]'),a=proboards.route("admin_marketing_google_analytics_update"),o=proboards.route("admin_marketing_google_analytics_reset");i.add(n).each(function(){var e=$(this),t=(t=$('<span class="status-box '+e.attr("name")+'-status"></span>')).appendTo(e.closest(".option"));e.autoSubmit({url:a,statusElement:t,beforeSendData:function(e){var t=$(this);/^\s*$/.test(n.val())&&"1"===i.val()&&t.is('[name="enabled"], [name="tracking_id"]')&&(t.is('[name="enabled"]')&&i.val(0),e.error="A Google Tracking ID is required.")},success:function(){i.trigger("rdy")}})}),e.each(function(){var e=$(this),t=(t=$('<span class="status-box '+e.attr("name")+'-status"></span>')).appendTo(e.closest(".option"));e.autoSubmit({url:a,statusElement:t,beforeSendData:function(e){$.extend(e,{events:r(this)})}})}),t.on("change rdy",function(){var e=$(this),t=parseInt(e.val()),i=e.parents(".option").siblings(".tabbed.option");$("input",i).prop("disabled",1!==t)}),i.on("rdy",function(){e.prop("disabled","1"!==$(this).val()),t.not(":disabled").trigger("rdy")}).trigger("rdy"),$("#reset-events").on("click",function(){proboards.confirm("Are you sure you want to restore the default values for the settings under Event Tracking?",function(){proboards.loading(!0),proboards.instapost(o)})});var r=function(e){var t=$(e),i=t.parents(".event").data("type"),n=t.parent().data("name"),a={};return a[i]={},a[i][n]=t.val(),a}})},admin_marketing_viglink=function(){$(document).ready(function(){$(".admin-content select, .admin-content input").autoSubmit({url:proboards.data("viglink_update_url"),statusElement:$(".admin-content .status-box")})})},admin_members_custom_fields=function(){$(document).ready(function(){$("#custom-fields .list").autoform({createURL:proboards.route("create_field"),updateURL:proboards.route("update_field"),deleteURL:proboards.route("delete_field"),fields:[["input",{name:"name",type:"text",size:32,required:1}],["select",{name:"type",heading:"Select Field Type",required:1},{0:"Text Field",1:"Text Area",2:"Drop Down Selection",3:"Radio Buttons",4:"Check Boxes"}],["input",{name:"options",type:"text"}],["select",{name:"location",default:2},{0:"Member Profiles Only",1:"Mini-Profiles Only",2:"Profiles &amp; Mini-Profiles"}],["select",{name:"edit"},{0:"Member and Staff With Power",1:"Staff With Power"}]],dataID:"id",itemData:proboards.data("itemData"),undelete:!1,check:function(e,t,i){return""!=$(".name-input",t.item).val()||["name","This field is required."]},onCreateItem:function(e,i){var t=$(".options-input",i.item),n=$(".type-container select",i.item);t.after('<span class="options_readable-input"><a href="#" class="view-edit">(View/Edit)</a></span>'),t.remove(),n.on("change",function(){$(".view-edit",i.item).toggle(""!==n.val())}).change(),$(i.item).delegate(".options_readable-input a","click",function(e){e.preventDefault();var t=function(e,t){proboards.ajax({url:proboards.route("custom_field_dialog"),data:{id:$(t.item).attr("id")},dataType:"json",success:function(e){$("#change-options-container").html(e.html),e.opts?(void 0!==e.autoform_data&&$("#change-options-container .list").autoform({fields:[["input",{name:"text",type:"text",required:1,size:32}]],itemData:proboards.data(e.autoform_data),undelete:!1,doNotSave:!0,checkDelete:function(e,t){return""==$(".text-input",t.item).val()}}),$("#change-options-container").dialog("option","height","auto"),$("#change-options-container").dialog("option","buttons",{Save:function(){proboards.dialog_toggle_buttons("change-options-container"),proboards.ajax({url:proboards.data("custom_field_opts_url"),data:$("#change-options-container input").serialize(),dataType:"json",success:function(){$("#change-options-container").dialog("close"),$("#custom-fields .list").autoform("setItemState",t.item,"saved")}})}}),proboards.dialogEnter($("#change-options-container"))):$("#change-options-container").dialog("option","buttons",{Close:function(){$("#change-options-container").dialog("close")}}),$("#change-options-container").dialog("open"),$("#change-options-container input").focus()}})};return proboards.dialog("change-options-container",{width:483,title:"Custom Field Options",html:'<div style="padding: 20px; text-align: center;">'+proboards.get_image({src:"/loader/circle-16x16.gif"})+"</div>"}),$(this).parents(".state-editing").length&&""!=$(".name-container input",i.item).val()?$(i.item).data("onUpdate",t):$(this).parents(".ui-autoform-new-item").length?(proboards.alert("This custom field must have a name and type first."),$("#change-options-container").dialog("close")):t(0,i),!1})},onCreate:function(e,t){$(t.item).data("onUpdate")&&($(t.item).data("onUpdate")(e,t),$(t.item).data("onUpdate",null))},onUpdate:function(e,t){$(t.item).data("onUpdate")&&($(t.item).data("onUpdate")(e,t),$(t.item).data("onUpdate",null))},sortable:!0,sortableSelector:".list.sortable",updateOrderURL:proboards.route("update_fields_order")}),$('select[name="type"]').each(function(){$(this).data("selected_original",$(this).val())}),$('select[name="type"]').bind_first("change",{},function(e){var t=$(this).parents(".item").attr("id"),i=$(this).val(),n=proboards.data("fields_used");if(n[t]){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),$(this).val($(this).data("selected_original"));var a=this;proboards.confirm("Changing this value will clear all user-entered custom field values.",function(){delete n[t],$(a).val(i),$(a).change()})}return!1})})},admin_members_email=function(){$(document).ready(function(){$(".user-search-container").insertBefore('input[value="groups"]'),$(".group-search-container").insertBefore('input[value="staff"]'),$('input[name="recipient_type"]').change(function(){var e=$('input[name="recipient_type"]:checked').val();"members"==e?($(".user-search-container").show(),$(".group-search-container").hide()):"groups"==e?($(".user-search-container").hide(),$(".group-search-container").show()):($(".user-search-container").hide(),$(".group-search-container").hide()),$(".cooldown").hide(),0<$("#cooldown-"+e).length?($("#cooldown-"+e).show(),$(".message-composer").hide(),$(".email-footer").hide()):($(".message-composer").show(),$(".email-footer").show())}),$('input[name="recipient_type"]').change(),$("#select-members-help").insertAfter('input[value="members"] + label').tipTip(),$("#subject-help").tipTip(),$("input:first").change(),$('input[name="submit"]').on("click",function(e){validateEmailRecipients()||e.preventDefault()})})},validateEmailRecipients=function(){var e=$('input[name="recipient_type"]:checked').val();if("members"==e){if(!$('input[name="users"]').val()&&/^\s*$/.test($('input[name="user_search_box_input"]').val()))return $.inputError($(".user-search-container"),"You must choose at least one member."),!1}else if("groups"==e&&!$('input[name="groups"]').val())return $.inputError($(".group-search-container"),"You must choose at least one group."),!1;return!0},admin_members_forum_avatars=function(){$(document).ready(function(){forum_avatars.bind_link_image(),forum_avatars.init_upload(),forum_avatars.bind_delete(),forum_avatars.sortable_setup(),forum_avatars.default_avatar_setup()})},forum_avatars={bind_link_image:function(){var i=this,n=proboards.data("form_id");$("#"+n+"_link_button").click(function(e){var t={src:$("#"+n+"_src_input").val()};return i.check_image_link(t.src)&&(proboards.ajax({url:proboards.route("add_forum_avatar"),data:t,success:function(e){i.link_image_success("<strong>Saved!</strong>"),i.add_forum_avatar(t.src)},error:function(e){i.link_image_error(e.error)}}),e.stopPropagation()),!1}),$("#"+n+"_src_input").bind("keydown",function(e){if(13==e.which)return $("#"+n+"_link_button").click(),!1})},add_forum_avatar:function(e){var t='<div class="avatar-wrapper full-size float-left"><div class="avatar-outer"><div class="avatar-inner full-size"><div class="default-overlay">Click to make this avatar the forum default</div><img src="'+e+'" class="max-size"><div class="delete-wrapper" title="Delete"><span class="delete"></span></div><div class="status small hide"></div></div></div></div>';$("#forum-avatars-wrapper").append(t),this.check_for_avatars()},init_upload:function(){var self=this;pbFileUpload.init({},{acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),url:proboards.route("add_forum_avatar"),maxNumberOfFiles:25,sequentialUploads:!0,maxFileSize:proboards.data("avatar_size_limit"),done:function(e,t){$(".ui-progressbar").html('<div class="ui-progressbar-complete"></div>'),setTimeout(function(){t.context.smoothRemove($("#fileupload .avatar-select"),500)},2e3),t.result&&$.isArray(t.result)&&t.result.length&&t.result[0].thumbnail_url&&self.add_forum_avatar(t.result[0].thumbnail_url)}})},bind_delete:function(){var n=this;$("#avatars").on("click",".delete-wrapper",function(e){e.stopPropagation();var t=$(this).parentsUntil("#forum-avatars-wrapper"),i=$(this).siblings("img").attr("src");proboards.ajax({url:proboards.route("delete_forum_avatar"),data:{src:i},beforeSend:function(){n.show_status("processing",$(".status.small",t),"<strong>Deleting...</strong>")},success:function(e){$(t).fadeOut(function(){$(this).remove(),n.check_for_avatars()})},error:function(e){n.show_status("error",$(".status.small",t),"<strong>Error: save failed</strong>")}})})},check_image_link:function(url){var self=this,msg="The link entered is not valid.",patt=/^(https?:\/\/|\/\/)/i;patt.test(url)||(url="http://"+url),patt=/^(https?:\/\/|\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?\/.*\./i;var patt_basic=/^(https?:\/\/|\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*/i;if(patt.test(url)){if(patt=new RegExp(eval(proboards.data("image_regex"))),!patt.test(url))return self.link_image_error(msg),!1}else if(!patt_basic.test(url))return self.link_image_error(msg),!1;return!0},link_image_success:function(e){$("#link .state",document).hide().removeClass("error").addClass("success").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()},link_image_error:function(e){$("#link .state",document).hide().removeClass("success").addClass("error").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()},check_for_avatars:function(){0<$(".avatar-wrapper").length?$("#no-avatars").addClass("hide"):($("#no-avatars").removeClass("hide"),$("#reset-default").addClass("hide"))},sortable_setup:function(){var n=this;$("#forum-avatars-wrapper").sortable({items:".avatar-wrapper",update:function(e,t){var i=[];$(".avatar-wrapper",this).each(function(){i.push({src:$(this).find("img").attr("src")})}),proboards.ajax({url:proboards.route("order_forum_avatars"),data:{img_order:JSON.stringify(i)},success:function(){n.show_status("success",$(".status.small",t.item),"<strong>Saved!</strong>")},error:function(){n.show_status("error",$(".status.small",t.item),"<strong>Error: save failed</strong>")}}),t.item.removeAttr("style")}})},show_status:function(e,t,i){$(t).stop(!0,!0).removeClass("success, error, processing").html(i).addClass(e).slideDown().delay(4e3).slideUp(function(){$(this).addClass("hide").removeAttr("style").removeClass(e)})},default_avatar_setup:function(){var t=this,n="Click to make this avatar the forum default";$("#avatars").on("click",".avatar-wrapper",function(){var i=$(this);if(!i.is(".default")){var e=i.find("img").attr("src");t.check_image_link(e)?proboards.ajax({url:proboards.route("update_default_avatar"),data:{default_avatar:e},success:function(e,t){$("#forum-avatars-wrapper .avatar-wrapper.default").removeClass("default").find(".default-overlay").text(n),i.addClass("default").find(".default-overlay").text("Forum's Default Avatar"),$("#reset-default").removeClass("hide")},error:function(){t.show_status("error",$(".status.small",i),"<strong>Error: save failed</strong>")}}):t.show_status("error",$(".status.small",i),"<strong>Error: invalid image</strong>")}}),$("#reset-default").click(function(){return proboards.ajax({url:proboards.route("update_default_avatar"),data:{default_avatar:""},success:function(){var e=$("#forum-avatars-wrapper .default");$("#reset-default").addClass("hide"),e.removeClass("default").find(".default-overlay").text(n)}}),!1})}};!function(r){r.fn.smoothAppendTo=function(i,n,a,o){return this.each(function(){i.stop(!0,!0);var e={height:i.height()+"px"};r(this).appendTo(n).show();var t={height:i.height()+"px"};i.css(e).animate(t,a,function(){i.each(function(){this.style.height=""}),r.isFunction(o)&&o()})})},r.fn.smoothRemove=function(i,n,a){return this.each(function(){i.stop(!0,!0);var e={height:i.height()+"px"};r(this).remove();var t={height:i.height()+"px"};i.css(e).animate(t,n,function(){i.each(function(){this.style.height=""}),r.isFunction(a)&&a()})})}}(jQuery);var admin_members_group_manage=function(){$(document).ready(function(){"management"==proboards.data("view")?group_manage.bind_view_bans():"pending"==proboards.data("view")&&group_pending.bind_pending_controls()})},group_manage={update_leaders:function(){var e=$('input[name="leaders_list"]').val();proboards.ajax({url:proboards.route("change_group_leaders",{type:"execute"}),data:{group_id:proboards.data("group_id"),leaders:e},success:function(e){$("#leaders-status").setStatus("saved"),$("#ban-count").html(e.block_count)},error:function(){$("#leaders-status").setStatus("error",{message:"save failed"})}})},add_member:function(){var e=$('input[name="add_members_list"]').val();proboards.ajax({url:proboards.route("change_group_members",{type:"execute"}),data:{group_id:proboards.data("group_id"),members:e},success:function(e){$("#members-status").setStatus("saved"),shared.update_count($("#member-count"),1),$("#ban-count").html(e.block_count)},error:function(){$("#members-status").setStatus("error",{message:"save failed"})}})},ban_member:function(){var t=$('input[name="ban_list"]'),e=$(".user-search","#ban-list").attr("id"),i=$("."+e+"-selectlist");proboards.ajax({url:proboards.route("ban_from_group",{group_id:proboards.data("group_id")}),data:{user_ids:t.val()},success:function(e){$("#ban-status").setStatus("saved"),shared.update_count($("#ban-count"),1)},error:function(e){t.val(e.original_bans),i.selectlist("manipulateIds",[e.ban_member_id],"deselect"),$("#ban-status").setStatus("error",{message:e.error})}})},unban_member:function(){var e=$('input[name="ban_list"]',"#view-bans-dialog").val(),i=$("#view-bans-dialog");return proboards.ajax({url:proboards.route("unban_from_group",{group_id:proboards.data("group_id")}),data:{user_ids:e},success:function(e){var t=$(".user-search","#ban-list").attr("id");$("."+t+"-selectlist").selectlist("manipulateIds",e.unbanned_ids,"deselect"),$("."+t+"-input").autosearch("setData","excluded_ids[]",e.ban_list.split(",")),$("#ban-count").html(e.ban_count),$("#ban-status").setStatus("saved"),i.dialog("close")}}),!1},bind_view_bans:function(){var t=this;$(document.body).append('<div id="view-bans-dialog"></div>');var i=$("#view-bans-dialog");i.dialog({title:"Banned Members",autoOpen:!1,maxHeight:600,width:505,buttons:{Save:function(){t.unban_member()}}}),$("#view-bans").bind("click",function(){return proboards.ajax({url:proboards.route("show_bans",{group_id:proboards.data("group_id")}),data:{id:proboards.data("group_id")},dataType:"html",success:function(e){i.html(e),t.check_empty($(".content",i),i,"There are no banned members."),i.dialog("open")}}),!1})},check_empty:function(e,t,i){0==e.length&&t.html(i)}},group_pending={bind_pending_controls:function(){$(".accept").live("click",function(){var t=this;return $(t).siblings("input").andSelf().attr("disabled","disabled"),proboards.ajax({url:proboards.route("pending_approve",{group_id:proboards.data("group_id")}),data:{user_id:t.id},success:function(e){$(".item-"+t.id).setStatus("saved",{text:"Accepted",position:"html"}),shared.update_count($("#pending-count"),-1),group_pending.check_list_empty()},complete:function(){$(t).siblings("input").andSelf().removeAttr("disabled")}}),!1});var e=$("#message").html();proboards.dialog("reject-dialog",{autoOpen:!1,modal:!0,title:"Reject Member",width:"500",buttons:{"Reject Member":function(){group_pending.reject()}},close:function(){$(".item-"+$("#user-id").val()+" input").removeAttr("disabled"),$("#user-id").val(""),$("#notify-member").attr("checked","checked"),$("#ban-member").removeAttr("checked"),$("#message").val(e).removeAttr("disabled")}});var t=$("#reject-dialog");$(".reject").live("click",function(){return $(this).siblings("input").andSelf().attr("disabled","disabled"),$("#user-id",t).val(this.id),t.dialog("open"),!1}),$("#notify-member").bind("click",function(){$(this).attr("checked")?$("#message").removeAttr("disabled"):$("#message").attr("disabled","disabled")})},reject:function(){var e=$("#reject-dialog"),t=$("#user-id",e).val(),i=$("#notify-member:checked",e).length,n=$("#ban-member:checked",e).length,a=$("#message",e).val();proboards.loading(!0),proboards.ajax({url:proboards.route("pending_reject",{group_id:proboards.data("group_id")}),data:{user_id:t,notify_flag:i,ban_flag:n,rejection_text:a},success:function(e){$(".item-"+t).setStatus("saved",{text:"Rejected",position:"html"}),shared.update_count($("#pending-count"),-1),group_pending.check_list_empty()},complete:function(){proboards.loading(!1),e.dialog("close")}})},check_list_empty:function(){0==$("#user-search-0 li .content").length&&($(".pending-yes").hide(),$(".pending-no").show())}},shared={update_count:function(e,t){var i=parseInt(e.html())+parseInt(t);e.html(i)}},admin_members_group_powers=function(){$(document).ready(function(){$("form").submit(function(){proboards.saving($('input[name="submit"]',this),!0)})})},admin_members_groups=function(){$(document).ready(function(){$("#member-groups .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),updateOrderURL:proboards.data("update_order_url"),sortable:!0,sortableSelector:".list.sortable",headers:$("#member-groups .headings"),fields:[["input",{name:"name",type:"text",required:1}],["select",{name:"group_type",heading:"Group Type",required:1},{0:"Open",1:"Petition",2:"Private",3:"Hidden"}],["input",{name:"color",type:"text"}],["input",{name:"desc",type:"text"}],["input",{name:"leader",type:"text"}],["input",{name:"stars",type:"text"}],["input",{name:"star_type",type:"text"}],["select",{name:"staff"},{0:"No",1:"Yes"}],["select",{name:"global"},{0:"No",1:"Yes"}],["input",{name:"powers",type:"text"}]],dataID:"id",itemData:proboards.data("itemData"),undelete:!1,confirmDelete:function(e){var t=$(this),i=t.attr("id"),n=$(".name-input",t).val();n=n?"the <strong>"+n+"</strong>":"this";var a=0;$.each(pb.data("itemData"),function(e,t){if(i==t.id)return a=t.members,!1}),proboards.form.gen_verify_box("member_groups_delete_dialog","Confirm Deletion","205","590","Are you sure you want to permanently delete "+n+" group with <strong>"+a+"</strong> members?<br><br>","Delete","Delete Group",e)},check:function(e,t,i){if(""==$(".name-input",t.item).val())return["name","The name is required."];var n=$(".stars-input",t.item).val();return!(""!=n&&!/^\d+$/.test(n))||["stars","The number of stars must be a positive whole number."]},checkDelete:function(e,t){if(""==$(".name-input",t.item).val()&&""==$(".description-input",t.item).val()&&""==$(".number_of_stars-input",t.item).val())return!0},onCreateItem:function(e,t){$(".color-input",t.item).after('<div class="color_preview" tabindex="1"><div class="delete-wrapper"><div class="delete"></div></div></div>'),$(".star_type-input",t.item).after(proboards.data("star_menu")),$(".leader-input",t.item).after('<span class="leader_readable-input"><a href="#" class="view-edit">(View/Edit)</a></span>'),$(".powers-input",t.item).after('<div class="power_bar"><div class="filled_bar"></div></div>'),$(".powers-input",t.item).after('<input type="button" class="powers_button" disabled="disabled" value="Edit" />'),$(".star_menu",t.item).bind("change",function(){var e=$(this).val().split("-");$(this).prev(".star_type-input").attr("value",e[0]),$(this).prev(".star_type-input").change()," "!=$(this).prev(".star_type-input").val()?(0==$(this).next(".star_preview").children("img").length&&$(this).next(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e[1]+'" alt="" />'),$(this).next(".star_preview").children("img").attr("src",proboards.image_path()+"/stars/"+e[1]),$(this).next(".star_preview").children("img").show()):$(this).next(".star_preview").children("img").hide()}),$(".leader_readable-input a",t.item).bind("click tabFocus",function(e){e.stopImmediatePropagation(),e.preventDefault();0==$(this).parents(".ui-autoform-new-item").length?(0==$("#change-leaders-container").length&&($(document.body).append('<div id="change-leaders-container"></div>'),proboards.dialog("change-leaders-container",{autoOpen:!1,width:483,title:"Group Leaders"})),proboards.ajax({url:proboards.route("change_group_leaders",{type:"change"}),data:{group_id:$(t.item).attr("id")},dataType:"html",success:function(e){$("#change-leaders-container").bind("save",function(){t.item.setStatus("saved")}),$("#change-leaders-container").html(e),$("#change-leaders-container").append('<input type="hidden" value="'+$(t.item).attr("id")+'" />'),$("#change-leaders-container").dialog("open"),$("#change-leaders-container input.user-search-input").focus()}})):proboards.alert("You must first give this group a name and type.")})},onCreateNewItem:function(e,t){$(".color_preview",t.item).html('<div class="text">None</div>'),$('input[name="stars"]',t.item).val(0),$(".leader_readable-input",t.item).prepend('<span class="leader-count">0 </span>')},onCreate:function(e,t){$(".powers_button",t.item).removeAttr("disabled"),$(".leader_readable-input",t.item).removeAttr("disabled")},updateOrderData:function(e,t){for(var i=[],n=$(e),a=0;a<n.length;a++){var o=parseInt(n.eq(a).attr("id"));if("number"!=typeof o||o<1)return!1;i.push(o)}return{group_ids:i}}}),$(".name-input").live("click focus",function(){0==$("#name_container").length&&($(document.body).append('<div id="name_container"></div>'),proboards.dialog("name_container",{autoOpen:!1,width:483,title:"Group Name"}));var e=$(this),t=$(this).parent().parent().find(".desc-input");$("#name_container").html('<table><tr><td>Name:</td><td><input type="text" id="name_field" name="name_field" />'+proboards.help_icon_plain({title:"This is the name of the group.  BBCode is allowed."})+'</td></tr><tr><td>Description:</td><td><input type="text" id="description_field" name="description_field" />'+proboards.help_icon_plain({title:"This will be displayed on the group tab in profiles."})+'</td></tr></table><br /><input type="button" id="name_submit" name="name_submit" value="Save" />'),$("#name_field").val(e.val()),$("#description_field").val(t.val()),$("#name_container").dialog("open"),$("#name_field").blur(),$("#name_field").focusin(function(){$("#name_field").val();$("#name_field").keyup(function(){$("#name_field").val()})}),$("#name_field").focusout(function(){$("#name_field").unbind("keyup")}),$("#name_field").focus().select(),$("#name_submit").click(function(){e.val($("#name_field").val()),t.val($("#description_field").val()),$("#name_container").dialog("close"),e.change(),t.change()})}),$(".color_preview").each(function(){var e=$(this).prev().val();""!=e?($(this).css("background-color","#"+e),$(this).html('<div class="delete-wrapper"><div class="delete"></div></div>')):$(this).html('<div class="text">None</div>')}),$("#color_picker_div").colorPicker({autoUpdate:!1}),$(document).on("click tabFocus",".color_preview",function(){var t=this,e=$(t).prev().val();$("#color_picker_div").colorPicker("show",{hex:e,pos:{of:t},update:function(e){$("#colorPicker-preview").css({backgroundColor:"#"+e}),$(t).css("background-color","#"+e),$(t).html('<div class="delete-wrapper"><div class="delete"></div></div>'),$(t).prev().val(e),$(t).prev().change(),$(t).focus().select(),$(this).colorPicker("hide")}}),$("#colorPicker-input input").focus().select()}),$(".color_preview .delete").live("click",function(e){e.stopPropagation(),$(this).parent().parent().css("background-color","#ffffff"),$(this).parent().parent().prev().val(""),$(this).parent().parent().prev().change(),$(this).parent().parent().html('<div class="text">None</div>')});var i=jQuery.parseJSON(proboards.data("leader_name_hash"));$(".ui-autoform .list").children(":not(.ui-autoform-new-item)").each(function(){var e=$(this).attr("id"),t=0;i&&i[e]&&(t=i[e].split(",").length),$(this).find(".leader_readable-input").prepend('<span class="leader-count">'+t+" </span>")}),$(".ui-autoform-input-container.star_type-container").each(function(){if(""==$(this).children(".star_type-input").val()||0==$(this).children(".star_type-input").val())return!0;var e=$(this).find('.star_menu option[value^="'+$(this).children(".star_type-input").val()+'-"]');e.attr("selected","selected")," "==$(this).find(".star_menu").val()?($(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val()+'" alt="" />'),$(this).find(".star_preview img").hide()):$(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val().replace(/^\d+-/,"")+'" alt="" />')}),$(".power_bar").each(function(){var e=$(this).prev().prev(".powers-input").val(),t=24-(e/4-Math.round(.04*e));$(this).children(".filled_bar").css("margin-bottom","-"+t+"px")}),$(".ui-autoform .list").children(":not(.ui-autoform-new-item)").each(function(){$(this).find(".powers_button").removeAttr("disabled")}),$(".powers_button").live("click",function(){window.location=proboards.route("manage_powers",{id:$(this).parent().parent().attr("id")})})});var e={groupOpen:function(e){e.trigger("tabFocus")},groupClose:function(e){$('[name="name_submit"]').trigger("click")},colorPickerOpen:function(e){$(".color_preview",this.parent).trigger("tabFocus")},colorPickerClose:function(e){$('[name="ok"]').trigger("click")},leadersOpen:function(e){$(".view-edit",this.parent).trigger("tabFocus")},leadersClose:function(e){$('#change-leaders-container [name="submit"]').trigger("click")}};$(document).ready(function(){new proboards.tabHandler({container:"li.item",tabs:[{name:"name",tabInAll:e.groupOpen},{name:"name_field",tabOutReverse:function(){this.prev(),e.groupClose()}},{name:"description_field",tabOut:e.groupClose},{name:"group_type",tabOut:e.colorPickerOpen,tabOutReverse:function(){this.prev(3)}},{class:"color_preview",tabInAll:e.colorPickerOpen},{name:"hex",tabOut:e.colorPickerClose,tabOutReverse:function(){this.prev(),e.colorPickerClose()}},{class:"view-edit",tabIn:e.leadersOpen},{class:"user-search-input",tabOut:e.leadersClose,tabOutReverse:function(){e.leadersClose(),this.prev(2)}},{name:"stars",tabOutReverse:e.leadersOpen},{class:"star_menu"},{name:"staff"},{name:"global"},{class:"powers_button"}]})})},admin_members_pending=function(){$(document).ready(function(){function i(){0==$("#request-list .item").length&&$("#request-list").before($('<div class="item center">There are no registration requests pending.</div>')).remove()}$("#request-list").setEven(),$("#request-list").on("click",".view",function(){proboards.alert("Request Message",$(this).data("text").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}),$("#request-list").on("click",".accept",function(){var e=$(this).parent().parent().attr("id");proboards.ajax({url:proboards.route("accept_request"),data:{id:e},dataType:"json",success:function(){$("#"+e).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),i()})},complete:function(){$("#"+e+" .options-container input").removeAttr("disabled")}})}),$("#request-list").on("click",".reject",function(){var e=$(this).parent().parent().attr("id");proboards.ajax({url:proboards.route("decline_request"),data:{id:e},dataType:"json",success:function(){$("#"+e).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),i()})},complete:function(){$("#"+e+" .options-container input").removeAttr("disabled")}})}),$("#request-list").on("click",".ban",function(){var e=$(this),t=e.parent().parent().attr("id");proboards.member.ban({id:t,checked:["ip","user_name","global_id"],success:function(){proboards.ajax({url:proboards.route("decline_request"),data:{id:t},dataType:"json",success:function(){$("#"+t).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),i()})}})}}),$("#ban-member-container").dialog("option","close",function(){e.parent().find("input").removeAttr("disabled")})}),$("#request-list").on("click",".options-container input",function(){$(this).parent().find("input").attr("disabled","disabled")});var e=$(".restrict_registration_message").parents(".option"),t=$(".registration_request_message").parents(".option"),n=$('input[name="registration_request_message"]'),a=$('input[name="require_new_account_approval"]');$("#settings-form .option input, #settings-form .option textarea").each(function(){$(this).autoSubmit({url:proboards.data("members_update_reg_settings_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),a.prop("checked")?(t.show(),n.prop("checked")?e.show():e.hide()):(t.hide(),e.hide()),a.on("change",function(){t.toggle(1==$(this).val()),1==$(this).val()&&n.prop("checked")?e.show():e.hide()}),n.on("change",function(){e.toggle(a.prop("checked")&&1==$(this).val())})})},admin_members_ranks=function(){$(document).ready(function(){$(".name-input").live("focusin",function(){var t=this;$(document).bind("keydown.name-field",function(e){13==e.which&&$(t).parent().next().children(".number_of_stars-input").focus()})}),$(".name-input").live("focusout",function(){$(document).unbind("keydown.name-field")}),$(".number_of_stars-input").live("focusin",function(){var t=this;$(document).bind("keydown.number_of_stars-field",function(e){13==e.which&&$(t).parent().next().children(".star_menu").focus()})}),$(".number_of_stars-input").live("focusout",function(){$(document).unbind("keydown.number_of_stars-field")}),$(".star_menu").live("focusin",function(){var t=this;$(document).bind("keydown.star-field",function(e){13==e.which&&$(t).parent().next().children(".posts_required-input").focus()})}),$(".star_menu").live("focusout",function(){$(document).unbind("keydown.star-field")}),$(".posts_required-input").live("focusin",function(){var t=this;$(document).bind("keydown.posts_required-field",function(e){13==e.which&&$(t).parent().parent().next().find(".name-input").focus()})}),$(".posts_required-input").live("focusout",function(){var e,t,i,n,a,o;$(document).unbind("keydown.posts_required-field"),e=this,t=$(".list.ui-autoform"),i=$(e).parent().parent(),n=parseInt($(e).val()),o=a=void 0,t.children(".item").each(function(){if(o=parseInt($(this).find(".posts_required-input").val()),(n<o||isNaN(o))&&0!=o)return a[0]!=i[0]&&(i.detach(),a.after(i)),!1;a=$(this)})}),$("#member-ranks .list").autoform({createURL:proboards.route("create_ranks"),updateURL:proboards.route("update_ranks"),deleteURL:proboards.route("delete_ranks"),fields:[["input",{name:"name",type:"text",size:32,required:1}],["input",{name:"number_of_stars",type:"text",size:32,required:1}],["input",{name:"star",type:"text",size:32}],["input",{name:"posts_required",type:"text",size:32,required:1}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){var n=/^\d+$/;if(""==$(".name-input",t.item).val())return["name","The name is required."];if(!n.test($(".number_of_stars-input",t.item).val()))return["number_of_stars","The number of stars must be a positive whole number."];for(var a=$(this).children(".item"),o=a.length,r=0;r<o;++r)if(!$(a[r]).hasClass("header")&&!$(a[r]).hasClass("state-deleted")&&a[r]!==t.item[0]&&$(".posts_required-input",a[r]).val()==$(".posts_required-input",t.item).val())return["posts_required","The required post count must be unique."];return!!n.test($(".posts_required-input",t.item).val())||["posts_required","The required post count must be a positive whole number."]},checkDelete:function(e,t){if(""==$(".name-input",t.item).val()&&""==$(".number_of_stars-input",t.item).val()&&""==$(".posts_required-input",t.item).val())return!0},onCreateItem:function(e,t){$(".star-input",t.item).after(proboards.data("star_menu")),"0"===$(".posts_required-input",t.item).val()&&($(".posts_required-input",t.item).attr("disabled","disabled"),$(".actions",t.item).hide())}}),$(".ui-autoform-input-container.star-container").each(function(){if(""==$(this).children(".star-input").val()||0==$(this).children(".star-input").val())return!0;var e=$(this).find('.star_menu option[value^="'+$(this).children(".star-input").val()+'-"]');e.attr("selected","selected"),""==$(this).find(".star_menu").val()?($(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val()+'" alt="" />'),$(this).find(".star_preview img").hide()):$(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val().replace(/^\d+-/,"")+'" alt="" />')}),$(".star_menu").live("change",function(){var e=$(this).val().split("-");$(this).prev(".star-input").attr("value",e[0]),$(this).prev(".star-input").change()," "!=$(this).prev(".star-input").val()?(0==$(this).next(".star_preview").children("img").length&&$(this).next(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e[1]+'" alt="" />'),$(this).next(".star_preview").children("img").attr("src",proboards.image_path()+"/stars/"+e[1]),$(this).next(".star_preview").children("img").show()):$(this).next(".star_preview").children("img").hide()})})},admin_plugins_plugin_editor=function(){var i={components:!1};function r(e,t){for(var i="",n=0;n<t;++n)i+=e;return i}function n(){var i=[];$("#plugins-keys .list > .item:not(.ui-autoform-deleted-item,.ui-autoform-new-item)").each(function(){var e={};e.id=$(this).attr("id"),e.key=$(".key-container input",this).val(),e.note=$(".note-container input",this).val(),e.type=$(".type-container input",this).val(),i.push(e)}),proboards.data("keyData",i),$("select.select-key").each(function(){var e=$(this).val();$(this).html("");for(var t=0;t<i.length;t++)$(this).append($("<option></option>").val(i[t].key).text(i[t].key));$(this).val(e)}),d("key"),$.each(proboards.data("keyData"),function(){c("key",this.key)})}$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0,callback:function(e){var t="components-container-tab"==e;t&&!i.components&&(!function(){$(".CodeMirror").live("focus blur",function(){void 0!==$(this).data("editor")&&(l=$($(this).data("editor").getTextArea()),action=l.hasClass("content-css")?"hide":"show",$("#plugin-assistant .insertion-box")[action](),$("#plugin-assistant #insert-variable")[action]())}),$("#plugin-assistant .insertion-box > ul > li").live("click",function(){s&&s.removeClass("selected"),s=$(this).addClass("selected")});var e=function(e){if(s&&l){var t=s.parent("ul").attr("class");"variables"===t&&(t="settings"),-1===$.inArray(t,["images","settings","keys"])&&(t="images");var i=$(l).attr("class").match(/content\-(\w+)/)[1],n=$.trim(s.html());if("css"!==i){var a;if("html"===i&&"keys"!=t)a="$[plugin."+t+"."+n+"]";else if("js"===i||"keys"==t){var o=$('#plugin-editor input[name="code_name"]').val();a="pb.plugin."+("keys"===t?"key('"+n+"').get()":"get('"+o+"')."+t+"."+n)}l.data("editor").replaceSelection(a),$(this).is("button")?(s.removeClass("selected"),s=null):e.preventDefault()}}else proboards.error("Select a variable from the plugin assistant and click somewhere in a code box to insert.")};$("#insert-variable","#plugin-assistant").click(e),$(".insertion-box > ul > li","#plugin-assistant").live("dblclick",e),$(".component-wrapper .tabs li").live("click",function(){$(this).attr("class").match(/(component-(?:[a-z-]+))/);var e="."+RegExp.$1,t=$(this).parentsUntil(".component-wrapper").parent(".component-wrapper");return t.find(".tabs").children().removeClass("active"),$(this).addClass("active"),t.find(".containers").children().removeClass("active").addClass("hide"),t.find(".containers "+e).addClass("active").removeClass("hide"),!1}),$(".component-wrapper .delete").live("click",function(){var t=$(this).parents(".component-wrapper"),e=function(){$("#components-container").trigger("change");var e=t.attr("id").match(/^(.+?)\-/)[1];$("#add-component-controls ."+e).removeClass("inactive"),--u[e],t.remove(),Settings.fields.components.show()};return""!==t.find("textarea:first").data("editor").getValue()?proboards.confirm("Are you sure you wish to delete this component?",e):e(),!1}),$("#add-component-controls div").click(function(){$("#components-container").trigger("change"),a($(this).attr("class").replace(/(\s*)inactive(\s*)/,""))}),$(".save-components").click(function(){return $("#components-container").trigger("submit"),function(){var e=o();proboards.data("components",e);var i=$(".save-components");proboards.saving(i,!0),proboards.ajax({url:proboards.data("component_save_url"),data:{components:e},success:function(t){for(var i in t.new_ids)$('textarea[name|="'+i+'"]').each(function(){var e=t.new_ids[i];$(this).attr("name",$(this).attr("name").replace(/^(.+?)\-(.+?)\-(.+?)$/,"$1-"+e+"-$3"))});proboards.plugin.settings.size_warning(t.size)},complete:function(e,t){proboards.saving(i,!1,t)}})}(),!1}),proboards.data("components")&&$.each(proboards.data("components"),function(){a(this.type,this)})}(),i.components=!0),$(".content-wrapper").toggleClass("components",t)}})}),$(document).ready(function(){var t=!1,a=$('textarea[name="development_log"]');$("#edit-development-log").click(function(){var e=$(this);return t?proboards.ajax({url:proboards.data("development_log_save_url"),data:{development_log:a.val()},success:function(){$('textarea[name="development_log"]').setStatus("saved",{position:"after"}),a.attr("disabled","disabled"),e.html("Edit")}}):(e.html("Save"),a.removeAttr("disabled")),t=!t,!1}),$("#add-development-log").click(function(){return proboards.dialog("add-development-log-dialog",{html:'<textarea id="add-development-log-input"></textarea>',title:"Development Log",width:330,buttons:{Add:function(){var e=$("#add-development-log-input").trimValue().val();if(""==e)$.inputError($("#add-development-log-input"),"Please enter a development log message to add.");else{var t=new Date,i=t.getUTCMonth()+1+"/"+t.getUTCDate()+"/"+t.getUTCFullYear()+" "+t.getUTCHours()+":"+(t.getUTCMinutes()<10?"0":"")+t.getUTCMinutes()+" GMT",n=function(e,t){var i=r(" ",1),n="+"+r("-",50-2*"+".length)+"+",a=n+"\n",o=50-2*"|".length-2-t.length;e.length>o-1&&(e=e.substr(0,o-1-3)+"...");return a+="|"+i+e+r(" ",o-e.length)+t+i+"|\n",a+=n+"\n"}(proboards.data("user").name,i)+"\n"+e+(a.val()?"\n\n":"");a.val(n+a.val()),$("#add-development-log-dialog").dialog("close"),proboards.ajax({url:proboards.data("development_log_save_url"),data:{development_log:a.val()},success:function(){$('textarea[name="development_log"]').setStatus("saved",{position:"after"})}})}},Cancel:function(){$("#add-development-log-dialog").dialog("close")}}}),!1}),$('.plugin_autosave input[name="code_name"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name="name"]').change(function(){$(".plugin-name").text($(this).val())}).autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave textarea[name="description"]').change(function(){$('#editor-settings .about textarea[name="description"]').val($(this).val())}).autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name^="version_"]').change(function(){$(this).closest("form").find('input[name="version"]').val($(this).closest("form").find('input[name="version_major"]').val()+"."+$(this).closest("form").find('input[name="version_minor"]').val()+"."+$(this).closest("form").find('input[name="version_revision"]').val()).trigger("change")}).trigger("change"),$('.plugin_autosave input[name="version"]').autoSubmit({url:proboards.data("plugin_save_url"),statusElement:$(".plugin_autosave .version-status"),instantUpdate:!0}),$('.plugin_autosave select[name="stage"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave textarea[name="change_log"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name="help_link"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave .content > input[name="developers"]').autoSubmit({url:proboards.data("plugin_save_url"),instantUpdate:!0,success:function(e){e.redirect&&(proboards.loading(!0),location.href=location.protocol+"//"+location.host+e.redirect)}}),$(".thumb input").change(function(){$(this).parent().next().show()}),$('select[name="plugin_manager"]').change(function(){window.location=$(this).val()});var i=$(".help_link");$('input[name="help_link"]').on("change",function(){var e=$(this).val();$.check_url(e)?i.attr("href",e).show():i.attr("href","#").hide()}).change()}),$(document).ready(function(){var e,i=0,t=function(e,t){$(".status-box.error",t.item[0]).hide(),proboards.error(t.data.error)};$("#plugins-keys .list").autoform({createURL:proboards.data("key_create_url"),updateURL:proboards.data("key_update_url"),deleteURL:proboards.data("key_delete_url"),undelete:!1,fields:[["input",{name:"key",type:"text",size:32,maxlength:50,required:1}],["select",{name:"type"},proboards.data("keyTypes")],["input",{name:"note",type:"text",size:65,maxlength:256}]],dataID:"id",itemData:proboards.data("keyData"),check:function(e,t){var i=$(".key-input",t.item).trimValue().val();return""==i?["key","You must enter a key name."]:!!i.match(/^[A-z0-9_]+$/)||["key","A key name may only consist of letters, numbers, or underscores."]},checkDelete:function(e,t){if(!(""!=$(".key-input",t.item).trimValue().val()||$(t.item).hasClass("ui-autoform-new-item")&&$("select",t.item).data("changed")))return!0},onCreateItem:function(e,t){$(t.item);var i=$(".key-container",t.item),n=$("select",t.item);i.before('<div class="row-number"></div>');var a=$("option",n),o=n.val();a.sort(function(e,t){return e.text==t.text?0:e.text>t.text?1:-1}),n.append(a).val(o),n.change(function(){$(this).data("changed",!0)})},onCreateNewItem:function(e,t){var i=$(t.item),n=parseInt($("#plugins-keys div.item:last").find(".row-number").html())+1;isNaN(n)&&(n=1),i.find(".row-number").html(n),n%2==0&&i.addClass("even")},onCreateExistingItem:function(e,t){proboards.data("keyData")[i++]},onCreate:function(e,t){d("key"),n()},onUpdate:function(e,t){d("key"),n()},onDelete:function(e,t){var i;$(".row-number",t.item).html(""),i=t.item,$(i).nextAll().each(function(){var e=$(".row-number",this),t=parseInt(e.html())-1;e.html(t),$(this).toggleClass("even"),$(".key-input",this).attr("tabindex",2*t),$(".note-input",this).attr("tabindex",2*t+1)}),n()},onCreateError:t,onUpdateError:t}),e=0,$(".list .row-number").each(function(){$(this).html(++e),$(this).next().find(".key-input").attr("tabindex",2*$(this).html()),$(this).next().next().find(".note-input").attr("tabindex",2*$(this).html()+1)}),$("#plugins-keys .list").setEven()});var s=null,l=null,u={};function a(e,t){if(null==t&&(t={}),null==u[e]&&(u[e]=0),!(1<=u[e]&&"board"!=e&&"category"!=e&&"js"!=e||2<=u[e]&&"board"!=e&&"category"!=e)){++u[e];var i=e+"-"+(null!=t.id?t.id:"new"+u[e]),n=(t=t||{},{board:"Board Header &amp; Footer",category:"Category Header &amp; Footer",css:"CSS "+proboards.help_icon_plain({title:"CSS code entered here will be placed in a CSS file, and does not need to be surrounded by style tags."}),global:"Global Header &amp; Footer",js:"Javascript "+proboards.help_icon_plain({title:"Javascript code entered here will be placed in a JS file, and does not need to be surrounded by script tags."}),main:"Main Header &amp; Footer"}[e]+(void 0!==t.title?": "+t.title:"")),a=$('<div class="component-wrapper space-bot" id="'+i+'"><div class="headings item"><h4>'+n+'</h4><span class="delete"><span>Delete</span></span></div><table class="component-container"></table></div>');if("board"==e||"category"==e){var o=t.name||"",r=t.description||"";a.find(".component-container").append('<tr class="input"><td><label>Name</label><input type="text" name="name" /></td></tr><tr class="input"><td><label>Description</label><input type="text" name="description" /></td></tr>'),$('input[name="name"]',a).val(o),$('input[name="description"]',a).val(r)}else(2<=u[e]||"js"!=e)&&$("#add-component-controls ."+e).addClass("inactive");var s=t.header||"",l=t.footer||"";"css"!=e&&"js"!=e?a.find(".component-container").append('<tr class="tab-menu"><td><ul class="tabs"><li class="component-header"><a href="javascript:void(0);">Header</a></li><li class="component-footer"><a href="javascript:void(0);">Footer</a></li></ul></td></tr><tr class="admin-content"><td class="content-container containers"><div class="component-header"><textarea name="'+i+'-header" class="content-html"></textarea></div><div class="component-footer"><textarea name="'+i+'-footer" class="content-html"></textarea></div></td></tr>'):a.find(".component-container").append('<tr class="admin-content"><td class="content-container containers"><textarea class="cssjs-header content-'+e+'" name="'+i+'-header"></textarea></td></tr>'),$("#components-"+e).append(a);var c=$('textarea[name="'+i+'-header"]',a).val(s),d=$('textarea[name="'+i+'-footer"]',a).val(l);c.length&&c.data("editor",proboards.code_editor({textarea:c,mode:"css"==e||"js"==e?e:"html"})),d.length&&($(".tab-menu .component-header a",a).click(),d.data("editor",proboards.code_editor({textarea:d}))),$('input[name="name"]',a).bind("change",Settings.fields.components.show),Settings.fields.components.show(),"css"!=e&&"js"!=e||$("img.help-icon").tipTip({defaultPosition:"top"})}}function o(){var a=[];return $(".component-wrapper").each(function(){var e=$(".containers > textarea, .containers > * > textarea",this),t=(e.data("editor"),e.eq(0).attr("name").split("-")),i=t[0],n={type:i,id:t[1],header:e.eq(0).data("editor").getValue()};2==e.length&&(n.footer=e.eq(1).data("editor").getValue(),"board"!=i&&"category"!=i||(n.name=$('input[name="name"]',this).val(),n.description=$('input[name="description"]',this).val())),a.push(n)}),a}function c(e,t){var i=e+"-"+t;$("#"+i).length||($("#plugin-assistant ."+e+"s").append('<li id="'+i+'">'+t+"</li>").prev().show(),$("#plugin-assistant .insertion-utils").show())}function d(e,t){void 0!==t?$("#"+e+"-"+t).remove():$("#plugin-assistant ."+e+"s").html(""),p()}function p(){var t=!1;$.each(["variable","image","key"],function(){var e=$("#plugin-assistant ."+this+"s");e.children().length?t=!0:e.prev().hide()}),t||$("#plugin-assistant .insertion-utils").hide()}var h=function(){var a=[];return $("#images-container .image-module:not(.new,.deleted)").each(function(){var e=$(this),t=e.attr("id").match(/\d+/)[0],i=$(".image img",e).attr("src"),n=$(".name .text",e).text();a.push({name:n,src:i,id:t})}),a};$(".image-module").live("module.delete module.update",function(e,t){d("image"),$(".image-module:not(.new,.deleted)",".image-modules").each(function(){c("image",$(".text",this).text())}),proboards.data("image_modules",h()),proboards.plugin.settings.size_warning(t.ajaxData.size)}),$(".image-module").live("module.delete",function(e,t){t=proboards.image_module.get_data(this);$("#settings-pages ul.images .row-"+t.name).remove()}),$(".image-module").live("module.update",function(e,t){if("name"==t.type){var i="row-"+t.previous_name,n="row-"+t.name;$("#settings-pages ul.images ."+i).removeClass(i).addClass(n).find(".name a").text(t.name)}}),$(document).on("click","#editor-images-remove",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to delete all plugin images?",function(){var t=[];$(".image-module").each(function(){var e=proboards.image_module.get_id($(this));"new"!=e.substr(0,3)&&t.push(e)}),t.length&&(proboards.loading(!0),proboards.ajax({url:proboards.data("image-module-reset-all-url"),success:function(e){proboards.image_module.apply_defaults(e.images,e),proboards.plugin.settings.size_warning(e.size)},complete:function(){proboards.loading(!1)}}))})}),Settings={pages:{add:function(e){var i=parseInt($("#settings-tab-add").prev().attr("id").match(/(\d+)/)[0])+1,t=$('<li id="settings-tab-'+i+'">'+proboards.escape_html(e)+"</li>");$("#settings-tab-add").before(t),$("#settings-pages").append('<div id="settings-page-'+i+'" style="display: none;" class="active"><div class="tab-settings"><label class="main-label">Tab Name</label><input name="name" value="'+proboards.escape_html(e)+'" /><a href="#">Delete Tab</a><span class="require-field">Require<input type="checkbox" checked="checked" />'+proboards.help_icon_plain({title:"Checking this box will require the user to set this setting before this plugin can be enabled."})+'</span></div><ul class="field-list"></ul></div>'),$("#settings-page-"+i+" .require-field input").change(function(){$(this).attr("checked","checked")}),$("#settings-page-"+i+" .tab-settings a").click(function(e){e.preventDefault();var t=function(){$("#settings-ui-container").trigger("change"),$("#settings-tab-"+i).prev().click(),$("#settings-tab-"+i).remove(),$("#settings-page-"+i).remove()};$("#settings-page-"+i).find('input[name="id"][value!=""],select[name="key"][value!=""]',parent).length?proboards.confirm("Are you sure you wish to delete this tab and all of the fields within it?",t):t()}),$("#settings-page-"+i+' .tab-settings input[name="name"]').bind("keyup keypress change",function(e){$("#settings-tab-"+i).text($(this).val())}),$("#settings-page-"+i+" .help-icon").tipTip();var n=$("#settings-page-"+i+" > ul.field-list");n.sortable({items:"> li",handle:".drag-handle",placeholder:"placeholder",axis:"y",start:function(e,t){$("> li.placeholder",n).height(t.item.outerHeight(!0)+"px")},stop:function(e,t){$("#settings-ui-container").trigger("change"),$(t.item).toggle().toggle(),n.setEven()}}),t.click()}},fields:{options:{"structure-title":{label:"Title Bar",inputs:[{type:"text",name:"text",placeholder:"Title Bar"}]},"structure-boldtext":{label:"Bold Text",inputs:[{type:"text",name:"text",placeholder:"Bold Text"}]},"structure-plaintext":{label:"Plain Text",inputs:[{type:"textarea",name:"text",placeholder:"Plain Text"}]},field:{label:"Field",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"},{type:"select",name:"validation",options:[{text:"Anything",value:"all"},{text:"Numbers Only",value:"number"},{text:"Alpha-numeric Only (A-Z, 0-9)",value:"alphanumeric"},{text:"Email Address",value:"email"},{text:"URL",value:"url"}]}]},textarea:{label:"Text<br />Area",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"}]},codebox:{label:"Code<br />Box",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"},{type:"select",name:"mode",options:[{text:"HTML",value:"html"},{text:"CSS",value:"css"},{text:"Javascript",value:"js"}]}]},color:{label:"Color Field",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"}]},selection:{label:"Selection",inputs:[{type:"text",label:"Option Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"select",label:"Option Type",name:"displaytype",options:[{text:"Selection Box",value:"select"},{text:"Checkboxes",value:"check"},{text:"Radio Buttons",value:"radio"}]},{type:"radio",label:"Multiple Answers",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}],help:"Allows the user to select multiple answers"},{type:"text",label:"Description",name:"description"},{type:"multi",name:"options",fields:[{type:"text",label:"Name {i}",name:"option"},{type:"text",label:"Value {i}",name:"value"}]}]},search:{label:"Search",inputs:[{type:"text",label:"Search Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"select",label:"Search Type",name:"searchtype",options:[{text:"Members",value:"members"},{text:"Boards",value:"boards"},{text:"Categories",value:"categories"},{text:"Themes",value:"themes"},{text:"Groups",value:"groups"},{text:"Custom Pages",value:"pages"}]},{type:"radio",label:"Multiple Answers",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}],help:"Allows the user to select multiple answers"},{type:"text",label:"Description",name:"description"}]},sortable:{label:"Sortable List",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"radio",label:"Show Check Boxes",name:"checkboxes",options:[{text:"Yes",value:1},{text:"No",value:0}]},{type:"text",label:"Check Label",name:"checkbox_label"},{type:"text",label:"Description",name:"description"},{type:"multi",name:"items",fields:[{type:"text",label:"Name {i}",name:"label"},{type:"text",label:"Value {i}",name:"value"}]}]},images:{label:"Image Selector",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"radio",label:"Allow more than one image to be selected by the plugin user",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}]},{type:"text",label:"Description",name:"description"},{type:"images",name:"images"}]},permissions:{label:"Key Perms.",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"select_key",label:"Select Key",name:"key"},{type:"select",label:"Limit Access",name:"access",options:[{text:"Read",value:"read"},{text:"Write",value:"write"},{text:"Read + Write",value:"both"}]},{type:"text",label:"All Text",name:"everyone",help:'Enter a text description for allowing a user to modify all keys.  The default is "Who can affect everything"'},{type:"text",label:"Creator Text",name:"self",help:'Enter a text description for allowing a user to modify keys for objects they own.  The default is "User can affect their own content"'},{type:"text",label:"Description",name:"description"}]},autoform:{label:"Auto Form",inputs:[{type:"text",label:"Autoform Title",name:"label"},{type:"select",label:"Format",name:"format",options:[{text:"Horizontal (Table)",value:"horizontal"},{text:"Vertical (Blocks)",value:"vertical"}]},{type:"text",label:"Variable ID",name:"id"},{type:"checkbox",label:'Prompt user "Are you sure?" when they delete auto form rows.',name:"promptOnDelete"}]}},add:function(e,t,i){function n(e,t){var i=$('<span class="input input-'+e.name+'"></span>');switch(e.type){case"text":var n=$('<input type="text" />').attr("name",e.name);i.append(n),e.label&&n.before("<label>"+e.label+"</label>"),e.placeholder&&n.attr("placeholder",e.placeholder),n.val(t);break;case"textarea":n=$("<textarea></textarea>").attr("name",e.name);i.append(n),e.label&&n.before("<label>"+e.label+"</label>"),e.placeholder&&n.attr("placeholder",e.placeholder),n.val(t);break;case"radio":var a=$.unique_id(e.name);e.label&&i.append('<label class="field-label">'+e.label+"</label>");for(var o=0;o<e.options.length;o++){var r=$.unique_id(e.name);n=$('<input type="radio" />').attr("name",a).attr("id",r).val(e.options[o].value);i.append(n).append($('<label class="field-sub-label">'+e.options[o].text+"</label>").attr("for",r))}$('input[value="'+(null!=t?t:0)+'"]',i).attr("checked","checked");break;case"checkbox":r=$.unique_id(e.name);i.append($('<input type="checkbox" class="field-checkbox" value="1" />').attr("name",e.name).prop("checked",t).attr("id",r)),e.label&&i.append('<label class="field-label checkbox-label">'+e.label+"</label>").attr("for",r);break;case"select_key":e.options=function(){for(var e=proboards.data("keyData"),t=[],i=0;i<e.length;++i)t.push({text:e[i].key,value:e[i].key});return t}(),e.className="select-key";case"select":var s=$("<select />").attr("name",e.name);for(o=0;o<e.options.length;o++)s.append($("<option></option>").val(e.options[o].value).text(e.options[o].text));i.append(s),e.className&&s.attr("class",e.className),e.label&&s.before("<label>"+e.label+"</label>"),s.val(t)}return i}"object"!=typeof t&&(t={}),fieldOptions=$.extend({target:$("#settings-pages > div.active > .field-list")},i);var a=this.options[e],o=$('<li class="field field-'+e+'"><div class="main-label">'+a.label+'</div><div class="warning-message hide"></div><div class="fields"></div></li>').addClass(e);if("autoform"==e){var r=$('<ul class="field-list"></ul>'),s=$('<a href="#">Add Field</a>');r.sortable({items:"> li",axis:"y",handle:".drag-handle",placeholder:"placeholder",start:function(e,t){$("> li.placeholder",r).height(t.item.outerHeight(!0)+"px")},stop:function(e,t){$("#settings-ui-container").trigger("change"),$(t.item).toggle().toggle(),r.setEven()}}),s.click(function(e){e.preventDefault();var t=$("#settings-assistant > .add-field-controls:visible").clone();$(".autoform",t).remove(),$(".permissions",t).remove();var i=proboards.dialog("add-field",{title:"Add Form Field to Auto Form",html:t,width:390,height:245});$("li",t).click(function(){$("#settings-ui-container").trigger("change");var e=$(this).attr("class");Settings.fields.add(e,{},{target:r}),i.dialog("close")})}),o.append(r),o.append(s)}for(var l=0;l<a.inputs.length;l++){var c=a.inputs[l],d=null!=typeof t[c.name]?t[c.name]:"",u=null;if("multi"==c.type){var p=$.unique_id(c.name);row=$('<div class="row-template"></div>');for(var h=0;h<c.fields.length;++h){var f=$.extend({},c.fields[h]);row.append(n(f))}(u=$('<span class="input multi-'+c.name+'" id="'+p+'"></span>').append(row)).autoRow(d)}else if("images"==c.type){p=$.unique_id(c.name);if(u=$('<span class="input images-'+c.name+'" id="'+p+'"><ul class="images"></ul><a href="#">Add More</a></span>'),$("a",u).click(function(e){e.preventDefault(),Settings.fields.images.dialog(u)}),$.isArray(d)){for(var m=[],g=0;g<d.length;++g)m.push(d[g].name);u.data("selected",m),Settings.fields.images.list(u);for(g=0;g<d.length;++g)$(".row-"+d[g].name+' input[name="value"]',u).val(d[g].value)}else Settings.fields.images.list(u)}else u=n(c,d);o.find(".fields").append(u),c.help&&u.append(proboards.help_icon(proboards.escape_html(c.help)))}o.find(".fields").append('<div class="clear-left"></div>'),o.append('<div class="plugin-required" title="Make this field required before this plugin can be enabled."><input type="checkbox" value="1" name="required" /></div><div class="plugin-drag drag-handle" title="click and drag to reorder"></div><div class="plugin-delete delete"><span></span></div>'),t.required&&$('.plugin-required input[name="required"]',o).attr("checked","checked"),$(".plugin-delete",o).click(function(){var e=$(this).closest("ul.field-list"),t=$(this).closest("li.field"),i=function(){t.remove(),e.setEven(),$("#settings-ui-container").trigger("change")};$('input[type="text"][value!=""],textarea[value!=""]',t).length?proboards.confirm("Are you sure you wish to remove this field?",i):i()}),"selection"==e&&$("select",o).change(function(){var e=$(".input-multipleanswers input",o);"radio"==$(this).val()?($('.input-multipleanswers input[type="radio"][value="0"]',o).attr("checked","checked"),e.attr("disabled","disabled")):e.removeAttr("disabled")}).change();var v=$('input[name="id"]',o),b=$('input[name="label"]',o);if(v.length&&b.length&&""===v.trimValue().val()){var _=function(){var e=b.val();e=(e=(e=e.replace(/ /g,"_")).replace(/[^a-zA-Z0-9_]+/g,"")).toLowerCase(),v.val(e)};b.bind("keyup change",_),v.bind("change",function(){b.unbind("keyup change",_)})}return fieldOptions.target.append(o).setEven(),o},images:{list:function(e){var t=proboards.data("image_modules"),i=e.data("selected")||[];if($(".row",e).each(function(){var e=$(this).attr("class").match(/row-(\w+)/)[1];-1==$.inArray(e,i)&&$(this).remove()}),null!=t)for(var n=0;n<t.length;++n)if(-1!=$.inArray(t[n].name,i)){var a=$(".row-"+t[n].name,e);if(a.length)$("ul.images",e).append(a);else{var o=$('<li class="row row-'+proboards.escape_html(t[n].name)+'"><span class="input input-name"><label>Image <span class="index"></span></label><span class="name"><a href="#">'+proboards.escape_html(t[n].name)+'</a></span></span><span class="input input-value"><label>Label <span class="index"></span></label><input type="text" name="value" /><div class="delete"><span></span></div></span><div class="clear-left"></div></li>');$("ul.images",e).append(o),$("a",o).click(function(e){e.preventDefault();var t=$(this).parents("li.row");Settings.fields.images.display(t.parent().parent(),t.attr("class").match(/row-(\w+)/)[1])}),$(".delete",o).click(function(e){e.preventDefault();var t=$(this).parents("li.row");Settings.fields.images.remove(t.parent().parent(),t.attr("class").match(/row-(\w+)/)[1])})}}var r=0;$(".row",e).each(function(){$(".index",this).html(++r)})},display:function(e,t){for(var i=proboards.data("image_modules"),n=0;n<i.length;++n)if(i[n].name==t)return void proboards.image_preview(i[n].src)},remove:function(e,t){var i=e.data("selected");i.splice($.inArray(t,i),1),e.data("selected",i),Settings.fields.images.list(e)},dialog:function(t){var e=proboards.data("image_modules"),i=t.data("selected"),n=[];if(null!=e)for(var a=0;a<e.length;++a)n.push({label:"<span>"+proboards.escape_html(e[a].name)+'</span><img src="'+proboards.escape_html(e[a].src)+'" />',value:e[a].name});proboards.select_dialog({title:"Select Images",id:"image-select-dialog",options:n,selected:i,labelTextType:"html",onComplete:function(e){t.data("selected",e),Settings.fields.images.list(t)}})}},components:{show:function(){var i=$("#plugin-editor ul.component-list");$("> li.component",i).remove();var e=o();$.each(e,function(){if("board"==this.type||"category"==this.type){var t=this,e=$('<li class="component field"><div class="label">'+proboards.capitalize(t.type)+' Selection</div><div class="label help">'+proboards.escape_html(t.name)+'</div><button>Edit</button><div class="clear-left"></div></li>');""!=t.description&&$(".help",e).after(proboards.help_icon(proboards.escape_html(t.description))),i.append(e),$("button",e).click(function(e){e.preventDefault(),$('.tab-menu ul.tabs li a[href="#components-container"]').click(),document.getElementById(t.type+"-"+t.id).scrollIntoView({behavior:"smooth"})})}}),$("> li",i).removeClass("even"),$("> li:even",i).addClass("even")}},export:function(){var i={pages:[]},p=function(e){var t=e.attr("class").match(/field\-(.+?)(\s|$)+/);if(t&&null!=Settings.fields.options[t[1]]){for(var i=Settings.fields.options[t[1]],n={type:t[1],required:$('.plugin-required input[name="required"]',e).is(":checked")},a=0;a<i.inputs.length;++a){var o=i.inputs[a];if("multi"==o.type){for(var r=[],s=$(".input.multi-"+o.name,e),l=[],c=0;c<o.fields.length;++c)l.push(o.fields[c].name);$(">*:not(.row-template)",s).each(function(){for(var e=$(this),t={},i=!1,n=0;n<l.length;++n)t[l[n]]=$('*[name="'+l[n]+'"]',e).val(),""!=t[l[n]]&&(i=!0);i&&r.push(t)}),n[o.name]=r}else if("images"==o.type){var d=[],u=$(".input.images-"+o.name,e);$("ul.images > li",u).each(function(){d.push({name:$(this).attr("class").match(/row-(\w+)/)[1],value:$('input[name="value"]',this).val()})}),n[o.name]=d}else"radio"==o.type?n[o.name]=$(".input-"+o.name+" input:checked",e).val():"checkbox"==o.type?n[o.name]=$('input[name="'+o.name+'"]',e).is(":checked"):n[o.name]=$('*[name="'+o.name+'"]',e).val()}return"permissions"==n.type&&(n.id="_permissions_"+n.key),"autoform"==n.type&&(n.fields=[],$("ul.field-list > .field",e).each(function(){var e=p($(this));!1!==n&&n.fields.push(e)})),n}return!1};return $("#settings-pages > div:not(:first)").each(function(){var e=$(this),t={name:$('.tab-settings input[name="name"]',e).val(),fields:[]};$("> ul.field-list > .field",e).each(function(){var e=p($(this));!1!==e&&t.fields.push(e)}),i.pages.push(t)}),i},get_full_id:function(e){var t=$(e).closest(".field").parent().closest(".field-autoform"),i=$(e).val();return t.length?$('> .fields input[name="id"]',t).val()+"."+i:i},validate:function(e){var l=[],c={},d={},t='#settings-pages input[name="id"], #settings-pages select[name="key"]';return $("#settings-pages .warning-message").hide(),$("#settings-tabs .warning").removeClass("warning"),$(t).each(function(){var e=Settings.fields.get_full_id(this);"SELECT"===this.nodeName?(void 0===d[e]&&(d[e]=0),++d[e]):(void 0===c[e]&&(c[e]=0),++c[e])}),$(t).each(function(){var e=$(this).closest(".field"),t=$("> .main-label",e).text(),i=[],n=$(this).val(),a=Settings.fields.get_full_id(this);if("SELECT"===this.nodeName?1<d[a]&&i.push(a+" has multiple permission selectors which will cause conflicts."):""===n?i.push(t+" is missing a variable identifier."):1<c[a]&&i.push(a+" is used as an identifier in multiple fields which will cause conflicts."),i.length){var o=$("> .warning-message",e),r=$(this).closest("#settings-pages > *").prevAll().length;$("#settings-tabs > *").eq(r).addClass("warning");o.show().text(i.join("<br />"));for(var s=0;s<i.length;++s)l.push(i[s])}}),$("li.field-sortable").each(function(){var o={};$('input[name="value"]:visible',this).each(function(){var e=$(this).val();if(o[e]){var t="Sortable list values must be unique to function properly.  Please rename or remove any duplicate values from the list.",i=$(this).closest(".field");l.push(t);var n=$("> .warning-message",i),a=$(this).closest("#settings-pages > *").prevAll().length;$("#settings-tabs > *").eq(a).addClass("warning");n.show().text(t)}o[e]=!0})}),l},import:function(e){$.isPlainObject(e)||(e={}),$.isArray(e.pages)||(e.pages=[]);for(var t=0;t<e.pages.length;++t){var i=e.pages[t];Settings.pages.add(i.name);for(var n=0;n<i.fields.length;++n){var a=i.fields[n],o=Settings.fields.add(a.type,a);if("autoform"==a.type&&$.isArray(a.fields))for(var r=0;r<a.fields.length;++r){var s=a.fields[r];Settings.fields.add(s.type,s,{target:$(".field-list",o)})}}}},update_component_assistant:function(){d("variable"),$('input[name="id"]').each(function(){var e=Settings.fields.get_full_id(this);""===e||e.match(/^\.|\.$/)||c("variable",e)})}}};var f=[];$(document).ready(function(){$("#settings-builder ul.tabs li").live("click",function(){$("#settings-builder ul.tabs li").removeClass("active"),$(this).addClass("active"),$("#settings-pages > div").removeClass("active").hide(),$("#"+$(this).attr("id").replace(/tab/,"page")).addClass("active").show(),$("#settings-assistant")["settings-tab-0"==$(this).attr("id")?"hide":"show"]()}),$("li#settings-tab-add").bind("click",function(e){e.stopImmediatePropagation(),Settings.pages.add("New Tab")}),$("#settings-assistant li").click(function(){if(!$("#settings-tab-0").is(".active")){var e=$(this).attr("class");Settings.fields.add(e),$("#settings-ui-container").trigger("change")}}),$('input:visible[type="text"]').live("keydown",function(e){if(e.which==Keys.backspace&&""==$(this).val()){e.stopPropagation(),e.preventDefault();var t=this,i=null,n=!1;$('input:visible[type="text"]').each(function(){n||($(this).is(t)&&(null!=i&&$(i).focus(),n=!0),i=this)})}}),proboards.data("image_modules",h()),Settings.fields.components.show(),$('#settings-pages .about textarea[name="description"]').change(function(){$('#editor-manage textarea[name="description"]').val($(this).val()).keydown()}),$('#editor-manage textarea[name="description"]').change(function(){$('#settings-pages .about textarea[name="description"]').val($(this).val())}),proboards.form.confirm_ignore_changes("#components-container, #settings-ui-container");var n,a={};if($("#settings-save-button").click(function(){var e=Settings.fields.validate(),i=this;proboards.saving(i,!0),$(".text",this)[(e.length?"add":"remove")+"Class"]("warning");var t=Settings.fields.export();t.defaults=a,proboards.ajax({url:proboards.data("settings_save_url"),data:{settings:JSON.stringify(t)},success:function(e){proboards.plugin.settings.requirement_warning(e),$("#settings-save-button").setStatus("saved",{position:"after"})},complete:function(e,t){proboards.saving(i,!1,t),$("#settings-ui-container").trigger("submit"),Settings.fields.update_component_assistant()}})}),$("#settings-preview-button").click(function(){$("#settings-builder").hide(),$("#settings-preview").html('<div class="settings-tabs"></div><div class="settings-pages"></div>'),n=Settings.fields.export();proboards.plugin.settings.render({container:$("#settings-preview > .settings-pages"),tabContainer:$("#settings-preview > .settings-tabs"),settings:n,data:a,preview:!0});var e=$("#settings-tabs .active").prevAll().length;$("#settings-preview .settings-tabs .tabs > li > a").eq(e).click(),$("#settings-preview").show(),$("#settings-preview-button").hide(),$("#settings-build-save-button").show(),$("#settings-build-cancel-button").show(),$("#settings-save-button").hide(),proboards.plugin.settings.resizeAutoforms()}),$("#settings-build-save-button,#settings-build-cancel-button").click(function(){var e=proboards.plugin.settings.export({container:$("#settings-preview > .settings-pages"),settings:n,defaults:!0});if(a=e.settings_data,e.message.unsaveable.length){var t=$('<span class="warning-message tab-ignore" />');t.text('The following fields contained data that could not be saved: "'+e.message.unsaveable.join('", "')+'"'),$("#plugin-editor").prepend(t),setTimeout(function(){t.slideUp()},5e3)}$("#settings-builder").show(),$("#settings-preview").hide(),$("#settings-preview-button").show(),$("#settings-build-save-button").hide(),$("#settings-build-cancel-button").hide(),$("#settings-save-button").show();var i=$("#settings-preview .settings-tabs .tabs .ui-active").prevAll().length;$("#settings-tabs > li").eq(i).click(),$(window).trigger("resize"),$(this).is("#settings-build-save-button")&&$("#settings-save-button").click()}),$("#settings-build-save-button").hide(),$("#settings-build-cancel-button").hide(),proboards.data("settings-ui")){var e=$.parseJSON(proboards.data("settings-ui"));e&&("object"==typeof e.defaults&&(a=e.defaults),Settings.fields.import(e),$("#settings-tab-0").click())}function o(){5<$(".export_tags:checked").length?proboards.error("Error: Too many tags selected."):5==$(".export_tags:checked").length?$(".export_tags").not(":checked").attr("disabled","disabled"):$(".export_tags").removeAttr("disabled"),$(".tag_container").show()}function r(e){$(".thumbs .thumb").addClass("whiteout"),$(".thumbs .thumb .preview_image").empty(),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$.each(e,function(e){$("#thumb_"+this.order+" .preview_image").addClass("active_selection").html('<img src="'+proboards.data("library_upload_path")+"/"+this.thumb_url+'" alt="thumb_'+this.order+'" />').show().parent().removeClass("whiteout").show(),$('input[name="thumb_choice_'+this.order+'"]').val(1)}),$(".loading_gif").hide(),$(".thumb_container").show()}$("#export-container form").bind("submit",function(e){e.stopPropagation(),e.stopImmediatePropagation()}),$("#select_computer").click(function(){$("#computer_container").show(),$("#select_export_option").hide(),$('input[name="mode"]').val("computer")}),$("#select_library").click(function(){$("#library_container").show(),$("#select_export_option").hide()}),$(".back_button").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#select_export_option").show()}),$("#select_new").click(function(){$("#update_container").hide(),$("#library_container_2").show(),$("#select_export_option_2").hide(),$('input[name="mode"]').val("new"),$('input[type="file"]').val(""),$('.export_tags, input[name="authorize"]').removeAttr("checked"),$(".preview_image, .or_text").hide(),$(".thumb td").removeClass("active_selection"),$(".primary.thumb .upload_box").addClass("active_selection"),$(".secondary.thumb .none_button").addClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".secondary.thumb, .thumb_container, .tag_container").show()}),$("#select_update").click(function(){$("#update_container").show(),$("#library_container_2").show(),$("#select_export_option_2").hide(),$('input[name="mode"]').val("update"),$('input[type="file"]').val(""),$('.export_tags, input[name="replacing"], input[name="authorize"]').removeAttr("checked"),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".preview_image, .or_text").show(),$(".thumb_container, .tag_container").hide()}),$(".back_button_2").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#library_container").hide(),$("#select_export_option").show()}),$(".back_button_3").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#select_export_option_2").show()}),$('input[name="replacing"]').change(function(){var t=$(this).val();$(".thumb_container").hide().after(proboards.processing_icon({alt:"preview_loading",class:"loading_gif"})),$("input.export_tags").prop("checked",!1);for(var e=proboards.data("tags")[t],i=0;i<e.length;i++)$('input[name="'+e[i].class+'"]').prop("checked",!0);o(),$('input[type="file"]').val(""),void 0===f[t]?proboards.ajax({url:proboards.route("plugin_editor_get_thumbs",{plugin_id:t}),success:function(e){f[t]=e.thumbs,r(f[t])}}):r(f[t])}),$(".export_tags").change(function(){o()}),$(".thumbs td").click(function(){($(this).hasClass("preview_image")&&!$(this).parent().hasClass("whiteout")||$(this).hasClass("upload_box")||$(this).hasClass("none_button"))&&($(this).addClass("active_selection"),$(this).siblings().removeClass("active_selection"),$(this).parent().find('input[type="hidden"]').val($(this).data("val")))}),$('#library_container_2 input[name="export"]').click(function(e){return"update"==$('input[name="mode"]').val()&&void 0===$('input[name="replacing"]:checked').val()?(proboards.error("You must select a plugin to replace."),e.preventDefault(),!1):"new"!=$('input[name="mode"]').val()||$('input[name="thumb_1"]').val()?!!$('input[name="authorize"]').prop("checked")||(proboards.error("You must authorize this plugin before you can export it."),e.preventDefault(),!1):(proboards.error("You must select at least one screenshot to upload with this plugin before you can export it."),e.preventDefault(),!1)}),$(document).bind("keydown",function(e){var t=$(".tab-menu ul.tabs li.ui-active a").attr("href");e.ctrlKey&&e.which==Keys.s&&(e.preventDefault(),e.stopPropagation(),"#components"==t?$(".save-components:first").click():"#settings-ui"==t&&$("#settings-save-button").click())}),proboards.plugin.settings.requirement_warning(proboards.data("plugin_requirements")),proboards.plugin.settings.size_warning(proboards.data("plugin_size")),p(),Settings.fields.update_component_assistant()})},admin_plugins_plugin_settings=function(){$(document).ready(function(){var i=$.parseJSON(proboards.data("settings-ui"))||[],e=proboards.data("settings-data"),t=proboards.data("component_map");"object"!=typeof(e=""!=e&&"{}"!=e?$.parseJSON(e)||{}:"object"==typeof i.defaults?i.defaults:{})&&(e={}),"object"!=typeof t&&(t={}),proboards.plugin.settings.render({container:$("#plugin-settings"),tabContainer:$("#plugin-setting-tabs"),useTabHash:!0,settings:i,data:e,component_map:t}),proboards.form.confirm_ignore_changes("#plugin-settings"),$('select[name="plugin_manager"]').change(function(){window.location=$(this).val()}),$("#plugin-settings-save").click(function(e){e.preventDefault(),proboards.loading(".admin-content",!0);var t=proboards.plugin.settings.export({container:$("#plugin-settings"),settings:i});proboards.ajax({url:proboards.data("plugins_settings_save_url"),data:{settings_data:JSON.stringify(t.settings_data),component_map:t.component_map},success:function(e){$("#plugin-settings-save").setStatus("saved",{position:"after"}),proboards.plugin.settings.requirement_warning(e),$("#plugin-settings").trigger("submit").removeClass("unsaved")},complete:function(){proboards.loading(".admin-content",!1)}})}),proboards.plugin.settings.requirement_warning(proboards.data("plugin_requirements")),$(".rate_button").on("click",function(){proboards.ajax({url:proboards.data("rate_dialog_url"),success:function(e){void 0===e.review&&(e.review={score:0,comments:""}),$("#rate-dialog textarea").val(e.review.comments);var t=e.review.score;n("#rate-dialog .star_rating",t),$("#rate-dialog .stars .star").on("click",function(){t=$(this).data("star"),n("#rate-dialog .star_rating",t)}),proboards.dialog("rate-dialog",{width:550,height:400,title:"Rate Forum Plugin",buttons:[{text:"Submit",id:"rate-submit-button",click:function(){proboards.ajax({url:proboards.data("rate_plugin_url"),data:{score:t,comments:$("#rate-dialog textarea").val()},complete:function(){proboards.alert("Plugin Rated","Thank you for rating this plugin."),$("#rate-dialog").dialog("close")}})}}]}).dialog("open").show()}})})});var n=function(e,t){var i=100-t/5*100;i<100?$(e).css("left","-"+i+"px").parent().css("opacity","1"):$(e).css("left","-100px").parent().css("opacity",".5")}},admin_plugins_plugin_settings_transfer=function(){$(document).ready(function(){$('select[name="key_option"]').change(function(e){1==$(this).val()?$(".keys_transfer_options").addClass("key_update").removeClass("key_reset"):2==$(this).val()?$(".keys_transfer_options").addClass("key_reset").removeClass("key_update"):$(".keys_transfer_options").removeClass("key_reset").removeClass("key_update"),0<$(this).val()&&0<$('input[name="key_choice"]:checked').length?$("#key_choice_next").removeAttr("disabled"):$("#key_choice_next").attr("disabled","disabled")}),$('input[name="key_choice"]').change(function(e){$(".key_choice").removeClass("current_choice"),0<$('select[name="key_option"]').val()?($("#key_choice_next").removeAttr("disabled"),$(this).parent().addClass("current_choice")):$("#key_choice_next").attr("disabled","disabled")}),$("#cancel_install").click(function(e){e.preventDefault(),proboards.instapost(proboards.data("no_install_url"))}),$("#key_choice_next").click(function(e){e.preventDefault(),$(".keys_transfer_options").hide(),$(".settings_transfer_options").show()}),$("#settings_transfer_back_1").click(function(e){e.preventDefault(),$(".keys_transfer_options").show(),$(".settings_transfer_options, .settings_transfer_form").hide()}),$("#settings_transfer_yes").click(function(e){e.preventDefault(),$(".settings_transfer_options").hide(),$(".settings_transfer_form").show(),$('input[name="transfer_settings"]').val(1)}),$("#settings_transfer_back_2").click(function(e){e.preventDefault(),$(".settings_transfer_options").show(),$(".settings_transfer_form").hide(),$('input[name="transfer_settings"]').val(0)}),$('select[name="plugin_choice"]').change(function(e){0<$(this).val()?$('input[type="submit"]').removeAttr("disabled"):$('input[type="submit"]').attr("disabled","disabled")})})},admin_security_ban=function(){$(document).ready(function(){for(var e=proboards.data("locale_settings"),t=24==e.input_time_format,d=$("#banned-members > div.ui-autoform > div.list"),o=function(e,t){var i,n,a,o=$("input.global_id-input:first",t.item),r=$("input.can_ip-input:first",t.item),s=$("input.ip-input:first",t.item);void 0!==t.data?(i=t.data.global_id,n=t.data.can_ip,a=t.data.ip,o.val(i),r.val(n),s.val(a)):(i=o.val(),n=r.val(),a=s.val()),d.autoform("ignoreChange",t.item.attr("id"),s);var l="";switch(i){case"1":l=$("<span>Banned </span>").append($('<a href="#">(Remove)</a>').click(function(e){return e.preventDefault(),o.val("2-"+Math.random()),o.change(),!1}));break;case"2":l=$("<span>Ban Global ID? </span>").append($('<a href="#">(Ban)</a>').click(function(e){return e.preventDefault(),o.val("1-"+Math.random()),o.change(),!1}))}$("span.global_id-visible:first",t.item).html(l);var c=$("span.ip-visible:first",t.item);""!=$.trim($("input.user_name-input:first",t.item).val())?(s.hide(),l=""!=$.trim(s.val())?$("<span>"+a+" </span>").append($('<a href="#">(Remove)</a>').click(function(e){return e.preventDefault(),s.val(""),s.change(),!1})):n?$("<span>Ban IP? </span>").append($('<a href="#">(Ban)</a>').click(function(e){return e.preventDefault(),s.val(1),s.change(),!1})):"",c.html(l),c.show()):(s.show(),c.hide())},i=function(e,t){var i=$("input.expire_date-input:first",t.item).val(),n=$("input.expire_time-input:first",t.item).val();if(""!=i){var a=proboards.time.createDate(i,n);if(null==a)return;var o=proboards.time.dateToUTCTimestamp(a);t.settings.expire_date_utc=o}},n=proboards.data("bans"),a=0;a<n.length;a++)if(""!=n[a].expire){var r=proboards.time.createDate(n[a].expire,n[a].expire_time,{utc:!0}),s=proboards.time.dateToString(r,{dateFormat:e.input_date_format,military:t});n[a].expire_date=s.date,n[a].expire_time=s.time_no_pad}proboards.data("bans",n);var l="time";t&&(l+=" military");var c=[["input",{name:"user_name",type:"text",size:32}],["input",{name:"global_id",type:"hidden"}],["input",{name:"can_ip",type:"hidden"}],["input",{name:"ip",type:"text",size:32}],["input",{name:"expire_date",type:"text",size:12,class:"date"}],["input",{name:"expire_time",type:"text",size:8,class:l}],["input",{name:"note",type:"text",size:32}]];proboards.data("is_enterprise")&&c.splice(1,1),d.autoform({createURL:proboards.route("create_member_ban"),updateURL:proboards.route("update_member_ban"),deleteURL:proboards.route("delete_member_ban"),fields:c,dataID:"id",undelete:!1,itemData:n,headers:$("#banned-members .headings"),check:function(e,t,i){void 0===i&&(i=!1);for(var n=t.item,a=$.trim($("input.user_name-input:first",n).val()),o=$.trim($("input.ip-input:first",n).val()),r=$(this).children(".item"),s=r.length,l=0;l<s;++l){var c=r[l];if(!$(c).hasClass("header")&&!$(c).hasClass("state-deleted")&&c!==n[0]){var d=$.trim($("input.user_name-input:first",c).val());if(""!=d&&a==d)return["user_name","The user '"+a+"' is already banned."]}}return""!=a||""!=o||"1"==$("input.global_id-input:first",t.item).val().substr(0,1)||["user_name","You must enter either a username, or an IP address."]},checkDelete:function(e,t){if(""==$.trim($("input.user_name-input:first",t.item).val())&&""==$.trim($("input.ip-input:first",t.item).val())&&"1"!=$("input.global_id-input:first",t.item).val().substr(0,1))return!0},onCreateItem:function(e,t){var i=$("input.expire_date-input:first",t.item).addClass("date"),n=$("input.expire_time-input:first",t.item);function a(e){""!=$.trim(e.val())?n.show():n.val("").hide()}(!$.browser.msie||9<parseInt($.browser.version))&&i.attr("placeholder","never"),i.on("change",function(){a($(this))}),a(i),$("input.global_id-input:first",t.item).after('<span class="global_id-visible"></span>'),$("input.ip-input:first",t.item).after('<span class="ip-visible"></span>'),o.call(this,e,t)},onCreate:o,onUpdate:o,onBeforeCreate:i,onBeforeUpdate:i})})},admin_security_forum_cleanup=function(){$(document).ready(function(){$('.form-spaced input[type="checkbox"]').change(function(){if("locate_posts"==$(this).attr("name")){var e=$('input[name="locate_threads"]').next("label");e.text(e.text().replace(/^And /,"")),void 0!==$(this).attr("checked")&&e.text("And "+e.text());var t=$('input[name="locate_pms"]').next("label");t.html(t.html().replace(/^And /,"")),void 0===$(this).attr("checked")&&void 0===$('input[name="locate_threads"]').attr("checked")||t.html("And "+t.html())}else if("locate_threads"==$(this).attr("name")){var i=$('input[name="locate_pms"]').next("label");i.html(i.html().replace(/^And /,"")),void 0===$(this).attr("checked")&&void 0===$('input[name="locate_posts"]').attr("checked")||i.html("And "+i.html())}});var e=$('input[name="by"][value="user"]');$('div[id$="user_input-searchbox-container"]').insertAfter(e.next("label")),$('input[name="by"]').change(function(){var e=$(this).val();$(".user-search").parent().toggle("user"==e),$('input[name="ip"]').toggle("ip"==e)}),$(".back-button").live("click",function(){$("#result-form").hide(),$("#find-form-container").show(),$('input[type="submit"]').removeAttr("disabled")}),$(".restart-button").live("click",function(){window.location.reload()});var t=$('input[name="by"][value="all"]');$('input[name="locate_pms"]').change(function(){$(this).prop("checked")?(t.prop("disabled",!0).next().css("color","#ddd"),t.prop("checked")&&e.prop("checked",!0).change()):t.prop("disabled",!1).next().css("color","#000")});var n=$("#board-listing");$('input[name="where"]').change(function(){"all"!=$(this).val()?n.show():n.hide()}),$(document).ready(function(){$('input[name="locate_posts"]').change(),$('input[name="locate_threads"]').change(),$('input[name="by"]:checked').change(),$('input[name="where"]:checked').change()});var i=function(){$("#find-form form").data("form")||setTimeout(i,500),$("#find-form form").form("option","submit",function(e){var t=[];$("input:checked",n).each(function(){t.push($(this).val())}),$('input[id$="where_input_radio_1"], #selected-boards').val(t.join(","));var i=$(this).serialize();return proboards.ajax({url:$(this).attr("action"),data:i,dataType:"html",success:function(e){$("#result-form").html(e),$("#result-form .back-button").show(),$("#find-form-container").hide(),$("#result-form").show(),$("#result-form form").bind("validated",function(e){proboards.ajax({url:$(this).attr("action"),data:i,dataType:"html",success:function(e){$("#result-form").html(e)},error:function(e){$("#result-form form input").attr("disabled",""),proboards.error(e)}}),$("#result-form form input").attr("disabled","disabled"),$("#result-form .back-button").hide(),$('#result-form form input[type="submit"]').val("Deleting, Please Wait"),$('#result-form form input[type="submit"]').progress_text(),$("#warning").hide()})},error:function(e){$('input[type="submit"]').prop("disabled",!1),proboards.error(e)}}),!1})};i()})},admin_security_reports_list=function(){$(document).ready(function(){new listManager("reports",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{archived:proboards.data("lm_archived")}})})},on_discussion_change=void 0,admin_security_reports_show=function(){$(window).load(function(){$("#more-reasons").live("click",function(){return proboards.ajax({url:proboards.route("more_reasons"),data:{post_id:proboards.data("post_id"),more:proboards.data("more-reasons"),when:proboards.data("when-reasons"),user_id:proboards.data("user_id-reasons")},dataType:"json",success:function(e){proboards.data("more-reasons",e.more),proboards.data("when-reasons",e.when),proboards.data("user_id-reasons",e.user_id),$(".container.reasons .content").append(e.html),$("#more-reasons-container").remove(),$(".reason").removeClass("last")}}),!1}),$(".toggle_button").on("click",function(){$(this).toggleClass("collapsed"),$(this).closest(".container").children().not(".title-bar").slideToggle()}),$("#more-discussions").live("click",function(){return $("#discussions-link").remove(),proboards.ajax({url:proboards.route("more_discussions"),data:{post_id:proboards.data("post_id"),more:proboards.data("more-discussions"),last:proboards.data("last-discussions")},dataType:"json",success:function(e){proboards.data("more-discussions",e.more),proboards.data("last-discussions",e.last),$(".container.discussions .content").prepend(e.html),on_discussion_change()}}),!1}),$("#hide-discussion").bind("click",function(){return $(this).hasClass("showing")?($(this).removeClass("showing"),$(this).html("Show Discussion"),$(".container.discussions .content").hide()):($(this).addClass("showing"),$(this).html("Hide Discussion"),$(".container.discussions .content").show()),$(window).trigger("scroll"),!1}),$("form .no-action").bind("change",function(){$(this).attr("checked")?($("form .affected").addClass("greyed"),$("form input.affected").not(".member-only").attr("disabled","disabled"),$("form textarea.affected").not(".member-only").attr("disabled","disabled")):($("form .affected").removeClass("greyed"),$("form input.affected").not(".member-only").removeAttr("disabled"),$("form textarea.affected").not(".member-only").removeAttr("disabled"))}),$("form .no-action").attr("checked")&&($("form .affected").addClass("greyed"),$("form input.affected").attr("disabled","disabled"),$("form textarea.affected").attr("disabled","disabled")),$("form .disable-check").bind("change",function(){$("form .disable-affected").toggle()}),$("form .disable-check").attr("checked")&&$("form .disable-affected").toggle(),$("form .ban-check").bind("change",function(){$("form .ban-affected").toggle()}),$("form .ban-check").attr("checked")&&$("form .ban-affected").toggle(),on_discussion_change=function(){$(".container.discussions .change-me").each(function(){var a=/(^| )discussion-([0-9]+)($| )/.test($(this).attr("class"))?RegExp.$2:"";$(this).selectMenu({container:"#discussion-"+a+"-options",status:proboards.get_image({src:"/icon-options.png",alt:"Options",title:"Options"}),staticStatus:!0,beforeShow:function(){$(this).next().addClass("open-menu"),$(this).menu("showOption",a+"-edit"),$(this).menu("showOption",a+"-delete")},onClose:function(){$("#discussion-"+a+"-options").removeClass("open-menu")},menuOptions:{click:function(e,t){var i=$(t.item).attr("class");if(i==a+"-edit"){0==$("#edit-report-discussion").length&&($(document.body).append('<div id="edit-report-discussion"></div>'),proboards.dialog("edit-report-discussion",{autoOpen:!1,width:433,title:"Edit Discussion Comment"}));var n={id:a};0<$(".discussion-"+a+" #discussions-link").length&&(n={id:a,more:proboards.data("more-discussions")}),proboards.ajax({url:proboards.route("edit_report_discussion"),data:n,dataType:"html",success:function(e){$("#edit-report-discussion").html(e),$("#edit-report-discussion").dialog("open")}})}else i==a+"-delete"&&proboards.confirm("Are you sure you wish to delete this message?",function(){proboards.loading(!0),proboards.ajax({url:proboards.route("delete_report_discussion"),data:{id:a},dataType:"json",success:function(e){0!=$(".container.discussions .discussion-"+a+" #discussions-link").length&&$("#more-discussions").click(),$(".container.discussions .discussion-"+a).remove()},complete:function(){proboards.loading(!1)}})})}}});$(this).removeClass("change-me")}),$(".discussion-options").show()},$("img",".reported-post .content").each(function(){$(this).data("orig_size",$(this).width()),$(this).width("100%"),$(this).css("max-width","100%"),$(".reported-post .content").width()-30>$(this).data("orig_size")?$(this).width($(this).data("orig_size")):$(this).width("100%")}),$(window).bind("scroll resize",function(){var e=$(".reported-post .content").width()-30;$("img",".reported-post .content").each(function(){void 0!==$(this).data("orig_size")&&(e>$(this).data("orig_size")?$(this).width($(this).data("orig_size")):$(this).width("100%"))}),$("#slide-container").width("auto"),$("#right-td-div").width("auto"),$("#right-td-div").width($("#right-td").width()),$("#slide-container").width($("#right-td-div").width());var t={left:$("#right-td-div").offset().left,top:$("#right-td-div").offset().top+$(".reported-user").innerHeight()},i=$("#left-td-div").offset().top+$("#left-td-div").height();$("#left-td-div").height()<$("#right-td-div").height()||$(".container.reported-user").offset().top+$(".container.reported-user").height()>=$("#slide-container").offset().top?($("#right-td-div").css("position","relative"),$("#slide-container").css({top:0,left:0,position:"relative"})):$(this).scrollTop()+100+$("#slide-container").height()>=i?($("#right-td-div").css("position","absolute"),$("#slide-container").css({top:$("#left-td").height()-$("#slide-container").height(),left:0,position:"absolute"})):$(this).scrollTop()>=t.top-100?($("#right-td-div").css("position","relative"),$("#slide-container").css({top:100,left:t.left,position:"fixed"})):($("#right-td-div").css("position","relative"),$("#slide-container").css({top:0,left:0,position:"relative"}))}),$("#immediate-action-link").bind("click",function(){return $(this).remove(),$("#immediate-actions").slideDown(200),!1}),$("#move-post-link").bind("click",function(){var e=[proboards.data("post_id")];if(0==e.length)return!1;var t=document.createElement("form");t.setAttribute("method","POST"),t.setAttribute("action",proboards.route("move_reported_post"));var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","selection"),i.setAttribute("value",e.join(",")),t.appendChild(i);var n=document.createElement("input");return n.setAttribute("type","hidden"),n.setAttribute("name","type"),n.setAttribute("value","move_post_selected"),t.appendChild(n),document.body.appendChild(t),t.submit(),!1}),$("#move-thread-link").bind("click",function(){var e=[proboards.data("thread_id")],t="Move Thread",i={},n=function(e){$("#move-threads-container").dialog("close")};return i[t]=function(){proboards.ajax({url:proboards.route("thread_move"),data:$("#move-threads-container form").serialize()+($('input[name="move_message"]').serialize()?"&"+$('input[name="move_message"]').serialize():"")+($('input[name="send_user_pm"]').serialize()?"&"+$('input[name="send_user_pm"]').serialize():""),dataType:"json",success:function(e){$(".discussions .content").append(e.discussion_html),void 0!==e.pm_dialog?(proboards.dialog("move-threads-container",{title:"Send PM",height:340,buttons:{"Send PM":function(){proboards.ajax({url:proboards.route("thread_move_pm"),data:$("#move-threads-container form").serialize(),dataType:"json",success:function(){n(e),proboards.dialog("move-threads-container",{title:t,height:420,buttons:i})}})}}}),$("#move-threads-container").html(e.pm_dialog)):n(e)}})},$("#move-threads-container").length||($(document.body).append('<div id="move-threads-container"></div>'),proboards.dialog("move-threads-container",{autoOpen:!1,width:620,height:420,title:t,buttons:i})),proboards.ajax({url:proboards.route("thread_move_dialog"),dataType:"html",data:{"thread_ids[]":e,type:self.type},success:function(e){$("#move-threads-container").html(e);var t=$("#move-threads-container").nextAll(".ui-dialog-buttonpane");t.children(".button-text").remove(),t.prepend($("#move-threads-container .button-text")),$("#move-threads-container").dialog("open")}}),!1}),$("#lock-thread-link").bind("click",function(){var t=this,e="";return $(this).hasClass("lock")?e+="lock":$(this).hasClass("unlock")&&(e+="unlock"),proboards.ajax({url:proboards.route("mark_threads",{type:e}),data:{"ids[]":[proboards.data("thread_id")]},success:function(e){$(t).hasClass("lock")?($(t).removeClass("lock"),$(t).addClass("unlock"),$(t).html("Unlock Thread")):($(t).removeClass("unlock"),$(t).addClass("lock"),$(t).html("Lock Thread")),$(".discussions .content").append(e.discussion_html)}}),!1}),$("#delete-post-link").bind("click",function(){var e=[proboards.data("post_id")];return 0==e.length||proboards.confirm_dialog("posts","delete",e,function(e){$("#move-post-link, #delete-post-link").remove(),$(".discussions .content").append(e.discussion_html)}),!1}),$("#delete-thread-link").bind("click",function(){var e=[proboards.data("thread_id")];return 0==e.length||proboards.confirm_dialog("threads","delete",e,function(e){$(".immediate-action-container").remove(),$(".discussions .content").append(e.discussion_html)}),!1}),$("#ban-user-link").bind("click",function(){return proboards.member.ban({id:proboards.data("user_id-ban"),checked:["ip","user_name","global_id"],from:{type:"reported_post",id:proboards.data("post_id")},success:function(e){$(".container.resolution #resolution-string").html(e.resolution_list)}}),!1}),1==$('input[name="account_disabled"]').val()&&$('input[name="account_disabled"]').attr("checked")&&$("#account-disabled-until-when").show(),$('input[name="account_disabled"]').bind("change",function(){1==$(this).val()&&$(this).attr("checked")||0==$(this).val()&&!$(this).attr("checked")?$("#account-disabled-until-when").show():$("#account-disabled-until-when").hide()}),$("#show-report.is-guest .member-only input").addClass("member-only"),$("#show-report.is-guest .member-only textarea").addClass("member-only"),$("#show-report.is-guest input.member-only").attr("disabled","disabled"),$("#show-report.is-guest textarea.member-only").attr("disabled","disabled"),on_discussion_change(),$(".report-reply form").submit(function(){proboards.saving($('input[type="submit"]',this),!0)}),proboards.data("saved")&&$('.report-reply form input[type="submit"]').setStatus("saved",{position:"after"})})},admin_security_security_log=function(){$(document).ready(function(){security_log.bind_ban_links(),security_log.setup_list_manager()})},security_log={bind_ban_links:function(){$(".security_logs").on("click",".security-log.item .ip",function(){var e=$(this).parent("tr"),t=0;null!=e.attr("id")&&(t=e.attr("id").substr(5));var i=0;1==$(".user a",e).length&&(userClass=$(".user a",e).attr("class"),userClass.match(/user-(\d+)/)&&(i=RegExp.$1)),t&&i&&proboards.member.ban({id:i,from:{id:t,type:"security_log"},checked:["ip"]})})},setup_list_manager:function(){var e=void 0!==proboards.data("lm_data")&&null!=proboards.data("lm_data")?proboards.data("lm_data"):{};listMan=new listManager("security_logs",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:e})}},admin_settings_censored_words=function(){$(document).ready(function(){$(".this-input").live("focusin",function(){var t=this;$(document).bind("keydown.this-field",function(e){13==e.which&&$(t).parent().next().children(".that-input").focus()})}),$(".this-input").live("focusout",function(){$(document).unbind("keydown.this-field")}),$(".that-input").live("focusin",function(){var t=this;$(document).bind("keydown.that-field",function(e){13==e.which&&$(t).parent().parent().next().find(".this-input").focus()})}),$(".that-input").live("focusout",function(){$(document).unbind("keydown.that-field")}),$("#censored-words .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),fields:[["input",{name:"this",type:"text",size:32,maxlength:250}],["input",{name:"that",type:"text",size:32,maxlength:1024}],["input",{name:"exact",type:"checkbox",value:1}]],dataID:"id",itemData:proboards.data("itemData"),headers:$("#censored-words .headings"),check:function(e,t,i){if(void 0===i&&(i=0),""==$(".this-input",t.item).val())return["this","The censored word field is required."];for(var n=$(this).children(".item"),a=n.length,o=0;o<a;++o)if(1==i){if(!$(n[o]).hasClass("header")&&!$(n[o]).hasClass("state-deleted")&&n[o]!==t.item[0]&&!$(n[o]).hasClass("state-error")){if($(".this-input",n[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already censored."];if($(".that-input",n[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already a replacement."]}}else if(!$(n[o]).hasClass("header")&&!$(n[o]).hasClass("state-deleted")&&n[o]!==t.item[0]){if($(".this-input",n[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already censored."];if($(".that-input",n[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already a replacement."]}return!0},checkDelete:function(e,t){if(""==$(".this-input",t.item).val()&&""==$(".that-input",t.item).val()&&!$(".exact-input",t.item).attr("checked"))return!0}})})},admin_settings_file_storage=function(){$(document).ready(function(){$(".storage-attachments .cancel-plan").on("click",function(e){e.preventDefault(),$('input[name="verify"]').val(""),proboards.loading(!0),proboards.ajax({url:proboards.data("cancel_dialog_url"),complete:function(){proboards.loading(!1)},success:function(e){proboards.dialog("cancel-plan-dialog",{modal:!0,width:450,title:"Change Storage",buttons:{"Cancel My Plan":function(){"cancel"==$('input[name="verify"]').val().toLowerCase()?(proboards.loading(!0),proboards.ajax({url:proboards.data("cancel_plan_url"),data:$("#cancel-plan-dialog form").serializeArray(),success:function(e){$(".button.change-storage").text("Increase Storage"),$(".storage-attachments .cancel-plan").unbind("click"),$(".storage-attachments .cancel-plan").removeClass("cancel-plan");var t=e.plan_details;$(".storage-attachments .usage-container .plan-name").text(t.plan_name),$(".storage-attachments .usage-container .size-max").text(t.size_max),$(".storage-attachments .usage-container .per-post-max").text(t.per_post_max),$(".storage-attachments .usage-container .bandwidth-max").text(t.bandwidth_max),$(".storage-attachments .graph-container .usage-max").text("/"+t.usage_max),$(".storage-attachments .graph-container .meter").css("width",t.usage_percent+"%"),proboards.alert("Your storage plan has been canceled."+(e.refunded?"  You have been refunded "+e.refunded+".  Please allow up to 72 hours for the refund transaction to be processed.":""))},complete:function(){$("#cancel-plan-dialog").dialog("close"),proboards.loading(!1)}})):$.inputError($('input[name="verify"]'),'You must type "cancel" in the box.')},Close:function(){$("#cancel-plan-dialog").dialog("close")}},html:e.html}),$("#cancel-plan-dialog form").on("submit",function(e){return e.preventDefault(),!1})}})}),$(".attachments-list .delete").on("click",function(e){e.preventDefault();var t=$(this),i=$("td.file-name a",t.closest("tr")).html(),n=$("td.checkbox input",t.closest("tr")).val();proboards.confirm("Are you sure you want to delete the attachment '"+i+"'?",function(){proboards.ajax({url:t.attr("href"),data:{ids:[n]},success:function(e){t.closest("tr").remove(),$("table.attachments-list tbody").setEven(),$(".storage-attachments .graph-container .usage").text(e.usage),$(".storage-attachments .graph-container .meter").css("width",e.usage_percent+"%")}})})});var i=function(){$(".delete-attachments").prop("disabled",0==$(".attachments-list td.checkbox input:checked").length)};$(".attachments-list td.checkbox input").on("change",i),i(),$(".delete-attachments").on("click",function(e){var t=$(".attachments-list td.checkbox input:checked").length;proboards.confirm("Are you sure you want to delete "+(1==t?"this attachment?":"these "+t+" attachments?"),function(){proboards.ajax({url:proboards.data("delete_attachments_url"),data:$("form").serializeArray(),success:function(e){for(var t=0;t<e.deleted_ids.length;t++)$('input[name="ids[]"][value="'+e.deleted_ids[t]+'"]').closest("tr").remove();$("table.attachments-list tbody").setEven(),i(),$(".storage-attachments .graph-container .usage").text(e.usage),$(".storage-attachments .graph-container .meter").css("width",e.usage_percent+"%")}})})}),$('select[name!="attachments_permissions_level"]').each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),fileStorage.pluginStoreLink()})},fileStorage={pluginStoreLink:function(){var t=$("#plugin-store-link-dialog");t.dialog({autoOpen:!1,width:550,title:"Plugin Store Link"}),$(".plugin-store-link").on("click",function(e){e.preventDefault(),t.dialog("open"),$("input",t).on("click",function(){e.preventDefault(),this.select()}).select()})}},admin_settings_navigation=function(){var a=function(e,t){(t&&(e=t.item),void 0!==e&&e.length)&&$(e).closest("li").setStatus("saved");var r=[];$("#navigation-item-container > li").each(function(){var e=$(this),t=$('input[name="name"]',e),i=$('input[name="desktop"]',e),n=$('input[name="mobile"]',e),a={id:e.attr("id").substr(2),name:t.val()};if(a.desktop=i.is(":checked")?1:0,a.mobile=n.is(":checked")?1:0,e.is(".custom")){var o=$('input[name="url"]',this);a.url=o.val()==o.attr("placeholder")&&o.hasClass("placeholder")?"":o.val(),a.permissions=$.parseJSON($('input[name="permissions"]',this).val()),a.theme_ids=$.parseJSON($('input[name="theme_ids"]',this).val())}(a.name||a.url)&&r.push(a)}),proboards.ajax({url:proboards.data("save_url"),data:{data:JSON.stringify(r)}})};$(document).ready(function(){$("#navigation-item-container").sortable({handle:".drag-handle",stop:a}),$("#navigation-item-container li").each(function(){var e=$(this);$("input",e).autoSubmit({send:a,statusElement:$(".status-box",e)})}),$("#navigation-add-custom").click(function(e){e.preventDefault();var t=$("#navigation-item-container"),i=($("> li:first",t),$('<li class="item custom">\n<span class="checkbox-wrapper"><input type="checkbox" name="desktop" checked="checked" /></span>\n<span class="checkbox-wrapper"><input type="checkbox" name="mobile" checked="checked" /></span>\n<span class="input-wrapper"><input type="text" name="name" value="" /></span>\n<span class="input-wrapper"><input type="text" name="url" value="" placeholder="http://" /></span>\n<div class="navigation-permissions">\n<button>Edit</button>\n<span class="permissions-summary">\n</span><span class="themes-summary">\n</span><input name="permissions" type="hidden" value="" />\n<input name="theme_ids" type="hidden" value="" />\n</div>\n<span class="drag-handle" title="click and drag to reorder"></span>\n<span class="delete"><span></span></span>\n<span class="status-box"></span>\n</li>')),n=0;t.find("li.custom").each(function(){var e=$(this).attr("id").substr(2);$.isNumeric(e)&&parseInt(e)>=n&&(n=parseInt(e)+1)}),i.attr("id","n-"+n),$("input",i).autoSubmit({send:a,statusElement:$(".status-box",i)}),d.apply(i),t.append(i)}),$("#navigation-item-container").on("click",".custom > .delete",function(){$(this).closest("li").remove(),a()}),$("#navigation-customization .content-container a").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you want to reset the navigation menu to default?",function(){proboards.instapost(proboards.data("reset_url"))})});var d=function(){var e=$(this),t=(e.attr("id").match(/\d+/)[0],$.parseJSON(e.find('input[name="permissions"]').val())||{});t=$.isPlainObject(t)?t:{};var i=$.parseJSON(e.find('input[name="theme_ids"]').val())||[];i=$.isArray(i)&&i.length?i.length:"All",e.find(".navigation-permissions .themes-summary").text(i),e.find(".navigation-permissions .permissions-summary").attr("class","permissions-summary level-"+(t.level||0))};$("#navigation-item-container").on("click",".navigation-permissions button",function(e){e.preventDefault();var t=$(this).closest(".item"),a=t.find('input[name="theme_ids"]'),o=t.find('input[name="permissions"]'),i=$.parseJSON(a.val())||[],n=$.parseJSON(o.val())||{},r=proboards.data("theme_selection");t.attr("id").match(/\d+/)[0];if($.isArray(i)||(i=[]),!i.length)for(var s=0;s<r.length;++s)i.push(r[s].value);var l=this,c=proboards.select_dialog({title:"Permissions",options:r,selected:i,id:"navigation-permissions-dialog",width:455,onComplete:function(e){e.length==r.length&&(e=[]),a.val(JSON.stringify(e));var i={},n={};$("input, select","#navigation-permissions-dialog .permissions").each(function(){var e=$(this).val(),t=$(this).attr("name");"permissions_include_groups"!=t&&"permissions_exclude_groups"!=t||(e=e.split(",")),n[t]=e,i[t.match(/^.+?_(.+)$/)[1]]=e}),o.val(JSON.stringify(i)),d.apply($(l).closest(".item")),t.find('input[name="desktop"]').change()}});c.prepend("<span>The button will only be applied to the following themes:</span>"),c.prepend(proboards.permissions.selection({action:"[b]view[/b] this button",values:n}))}),$("#navigation-item-container .item.custom").each(d)})},admin_settings_news=function(){$(document).ready(function(){$(".option select").each(function(){$(this).autoSubmit({url:proboards.route("update_settings"),statusElement:$(this).closest(".option").find(".status-box")})}),$("#explicit").on("keydown",".headline-input",function(e){e.which==Keys.enter&&$(this).closest("li.item").next().find(".headline-input").focus()}),$("#news .list").autoform({createURL:proboards.route("create_news"),updateURL:proboards.route("update_news"),deleteURL:proboards.route("delete_news"),fields:[["input",{name:"headline",type:"text",size:100,maxlength:200}],["input",{name:"displayed",type:"checkbox"}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){return""!=$(".headline-input",t.item).val()||["headline","This field is required."]},checkDelete:function(e,t){if(""==$(".headline-input",t.item).val())return!0},sortable:!0,sortableSelector:".list.sortable",updateOrderURL:proboards.route("update_news_order")});var t=$('select[name="news_data_source"]'),i=$('input[name="news_dynamic_board"]'),e=$("#select-board-status"),n=$("#dynamic"),a=$("#explicit");t.on("change pageload",function(){var e="dynamic"==t.val();n.toggle(e),a.toggle(!e)}).trigger("pageload");var o={display:"inline"};e.loadingStatus({loadingClass:"saved",loadingCss:o,successClass:"saved",successCss:o,successText:"Saved!",errorCss:o});var r=e.data("loadingStatus");i.on("click",function(){proboards.board.select(function(e,t){r.setStatus("loading"),proboards.ajax({url:proboards.route("update_settings"),data:{news_dynamic_board_id:e},success:function(){i.val(t),r.setStatus("success")},error:function(e){r.setStatus("error",e.error)}})},{useExisting:!0,mimicGuest:!0})})})},admin_settings_reserved_names=function(){$(document).ready(function(){$(".name-input").live("focusin",function(){var t=this;$(document).bind("keydown.name-field",function(e){13==e.which&&$(t).parent().parent().next().find(".name-input").focus()})}),$(".name-input").live("focusout",function(){$(document).unbind("keydown.name-field")}),$("#reserved-names .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),fields:[["input",{name:"name",type:"text",size:32}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){if(void 0===i&&(i=0),""==$(".name-input",t.item).val())return["name","The reserved name field is required."];for(var n=$(this).children(".item"),a=n.length,o=0;o<a;++o)if(1==i){if(!$(n[o]).hasClass("header")&&!$(n[o]).hasClass("state-deleted")&&n[o]!==t.item[0]&&!$(n[o]).hasClass("state-error")&&$(".name-input",n[o]).val()==$(".name-input",t.item).val())return["name","The word `"+$(".name-input",t.item).val()+"` is already reserved."]}else if(!$(n[o]).hasClass("header")&&!$(n[o]).hasClass("state-deleted")&&n[o]!==t.item[0]&&$(".name-input",n[o]).val()==$(".name-input",t.item).val())return["name","The word `"+$(".name-input",t.item).val()+"` is already reserved."];return!0},checkDelete:function(e,t){if(""==$(".name-input",t.item).val())return!0}})})},admin_settings_shoutbox=function(){$(document).ready(function(){$("#admin-shoutbox form").submit(function(){return!1}),0==$(".shoutbox-enabled select").val()&&$(".shoutbox_container").addClass("fade"),$('select, form input[name="welcome_message"], form input[name="height"]').each(function(){$(this).autoSubmit({url:proboards.data("settings_update_url"),statusElement:$(this).closest(".option").find(".status-box"),success:function(e){var t=$(this).attr("name");if("guest_posting_enabled"!=t){var i=$(".shoutbox_container:first");$.browser.msie&&7==parseInt($.browser.version)?(i.hide(),$(".shoutbox").replaceWith(e.shoutbox),proboards.shoutbox.init(e.shoutbox_init),"enabled"==t&&i.toggleClass("fade"),i.show()):i.slideUp(800,"swing",function(){$(".shoutbox").replaceWith(e.shoutbox),proboards.shoutbox.init(e.shoutbox_init),"enabled"==t&&i.toggleClass("fade"),i.slideDown(800,"swing")})}}})});var i=$("#clear-shouts");i.on("click",function(){var t=$(".shoutbox_container .content");if(0!=$(".shoutbox-post",t).length){i.prop("disabled",!0);var e=t.overlay();proboards.ajax({url:proboards.data("clear_shouts_url"),success:function(e){$(".shoutbox_messages",t).html(e.html)},complete:function(){i.prop("disabled",!1),e.remove()}})}})})},admin_structure_category_board=function(){$(document).ready(function(){proboards.preload(proboards.data("movement_images")),proboards.form.confirm_ignore_changes($(document)),$(".control-area .new_category").click(function(e){open_dialog("create","cat")}),$(".control-area .new_board").click(function(e){open_dialog("create","board")}),$(".control-area .edit_properties").click(function(e){open_dialog("edit")}),$(".control-area .duplicate").click(function(e){var t=$(tree.selected_arr[0]).attr("id").split("_");proboards.ajax({url:proboards.route("category_board_duplicate"),data:{id:t[1],type:t[0]},success:function(e){dialog_success(e),page_changed()}})}),tree=$.tree.create(),tree.init("#tree-container > .tree",{data:{type:"json",opts:{static:proboards.data("category_board_data")}},rules:{multiple:"ctrl",createat:"top"},ui:{theme_name:"boards",dots:!1},types:{cat:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1},selected:0},board:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1},selected:0}},callback:{onchange:function(e,t){0==t.settings.types.cat.selected&&0==t.settings.types.board.selected?($(".control-area .edit_properties").hide(),$(".control-area .duplicate").hide()):1==t.settings.types.cat.selected||1==t.settings.types.board.selected?($(".control-area .edit_properties").css("display","inline"),$(".control-area .duplicate").css("display","inline")):($(".control-area .edit_properties").css("display","inline"),$(".control-area .duplicate").hide())},onselect:function(e,t,i){var n=t.get_type(e),a=t.selected_arr.length-1;if("cat"==n&&0<t.settings.types.board.selected||"board"==n&&0<t.settings.types.cat.selected){for(var o=0;o<a;o++)t.deselect_branch(t.selected_arr[0]);t.settings.types.board.selected=0}t.settings.types[t.get_type(e)].selected++},ondeselect:function(e,t){t.settings.types[t.get_type(e)].selected--},onmove:function(t,i,e,n,a){$(t).addClass("processing"),$(i).addClass("processing");var o=[];$.isArray(t)?$.each(t,function(){o.push($(this).attr("id"))}):o.push(t.id),proboards.ajax({url:proboards.route("category_board_reorder"),data:{tree:JSON.stringify(n.get()),node_ids:o},success:function(e){$(t).removeClass("processing"),$(i).removeClass("processing"),page_changed()},error:function(e){$(t).removeClass("processing"),$(i).removeClass("processing"),$.tree.rollback(a),proboards.error(e.error)}})},check_move:function(e,t,i,n){return t=$(t)[0].parentNode,!$(e).hasClass("board")||!$(t).hasClass("cat")||"inside"==i},onrename:function(e,t,i){tree_add_leaf_controls(e)},ondblclk:function(e,t){var i=$(e).attr("id").split("_");open_dialog("edit",i[0],{ids:[i[1]]})}}}),$("#tree-container .tree ul li").each(function(){tree_add_leaf_controls(this)})})},open_dialog=function(e,o,r){if(proboards.loading(!0),void 0===r&&(r={ids:[]},"edit"==e))for(var t=0;t<tree.selected_arr.length;t++)r.ids.push($(tree.selected_arr[t]).attr("id").split("_")[1]);if("cat"==o)r.name="Category";else if("board"==o)r.name="Board";else if(0<tree.settings.types.cat.selected)o="cat",r.name="Category";else{if(!(0<tree.settings.types.board.selected))return proboards.loading(!1),!1;o="board",r.name="Board"}var i="",n="";if("create"==e)i=e.charAt(0).toUpperCase()+e.slice(1)+" New "+r.name,n="Create "+r.name;else{if("edit"!=e)return proboards.loading(!1),!1;i=e.charAt(0).toUpperCase()+e.slice(1)+" "+r.name+" Properties",n="Save Changes"}proboards.ajax({url:proboards.route("category_board_"+o+"_dialog"),data:{ids:r.ids,parent_type:r.parent_type,parent_id:r.parent_id},dataType:"json",success:function(e){e.content||(e.content="");proboards.dialog("dialog_settings",{html:e.content,title:i,width:700,resizable:!1,buttons:[{text:n,click:function(){var a=this;$('#dialog_settings form input[name="ids"]').val(r.ids);var e=$('input[name="board_id"]:checked').val();if(void 0!==e){var t=e,i="board";if(-1!=e.indexOf("cat")){var n=e.split("_");t=n[1],i=n[0]}$('#dialog_settings form input[name="parent_id"]').val(t),$('#dialog_settings form input[name="parent_type"]').val(i)}return 0<$('input[name="name"]').length&&""==$('input[name="name"]').val()?("board"==o?proboards.error("You must enter a board name.  Click on the About tab to pick a board name."):proboards.error("You must enter a category name."),proboards.loading(!1),!1):0<$('input[name="board_id"]').length&&1!=$('input[name="board_id"]:checked').length?(proboards.error("You must pick a board location.  Click on the Location tab to pick a board location."),proboards.loading(!1),!1):($("input[placeholder], textarea[placeholder]","#dialog_settings form").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&e.val("")}),proboards.loading(!0),void proboards.ajax({url:$("#dialog_settings form").attr("action"),data:$("#dialog_settings form").serialize(),dataType:"json",success:function(e){if(1==r.ids.length){var t=tree.get_node($("#"+o+"_"+r.ids[0])),i=t.find("> a > span.small.note"),n=t.find("> a > ins.description");t.find("> a > ins.description").remove(),tree.rename(t,$('#dialog_settings form input[name="name"]').val()),n.text($('#dialog_settings form textarea[name="description"]').val()),t.children("a").append(n).append(i)}dialog_success(e),$(a).dialog("close"),page_changed()},complete:function(){proboards.loading(!1)}}))}}],close:function(e){proboards.unsaved_changes=0}});function t(e,t){1==$(e).val()?$(t).show():$(t).hide()}$('#dialog_settings form input[name="redirect"]').on("blur",function(){var e=$(this).val(),t=$('#dialog_settings form input[name="password"]'),i=0<$.trim(e).length;t.prop("disabled",i)}),$('#dialog_settings form input[name="redirect"]').trigger("blur"),$("#dialog_settings form").submit(function(e){e.preventDefault()}),$("#board_dialog .ui-tabMenu li").click(function(e){e.preventDefault(),$("#board_dialog .ui-tabMenu li").removeClass("ui-active"),$(this).addClass("ui-active"),$("#content_area > div").hide();var t=$(this).attr("id").split("_")[1];$("#content_"+t).show()}),t($(".hidden_board_toggle input:checked"),".hidden_board_url"),$(".hidden_board_toggle input").click(function(){t(this,".hidden_board_url")}),$('.private_board_toggle input[name="private_threads"]').click(function(){for(var e=1==$(this).val(),t=["permissions_create_threads_level","permissions_reply_to_threads_level","permissions_create_polls_level"],i=0;i<t.length;i++){var n=$('select[name="'+t[i]+'"]',"#board_dialog");e?$('option[value="0"]',n).remove():0==$('option[value="0"]',n).length&&$(n).prepend('<option value="0">Everyone</option>')}e?$(".private_board_container").show():$(".private_board_container").hide()}),$(".private_board_toggle input:checked").trigger("click"),$(".thread_label_div .list").autoform({doNotSave:!0,fields:[["input",{name:"tl-name",type:"text",required:1,maxlength:40}],["input",{name:"tl-color",type:"text",maxlength:6}],["input",{name:"tl-permissions_accessible",type:"hidden"}],["input",{name:"tl-permissions_viewable",type:"hidden"}]],itemData:proboards.data("threadLabels"),undelete:!1,onCreateItem:function(e,i){$(".tl-color-input",i.item).parent().after('<div class="label_preview">test</div>'),$(".tl-name-input",i.item).parent().after('<div><span class="button permissions_button">Permissions</span></div>'),$(".tl-color-input",i.item).colorPickMe({update:function(e){$(".label_preview",i.item).css("color","#"+e)}}),$(".label_preview",i.item).text($(".tl-name-input",i.item).val()),""==$(".tl-color-input",i.item).val()&&$(".tl-color-input",i.item).val("000000");var t=$(".tl-color-input",i.item).val();$(".color-picker-preview",i.item).css("background-color","#"+t),$(".label_preview",i.item).attr("style","color: #"+t+";"),$(".tl-name-input",i.item).change(function(){$(".label_preview",i.item).text($(this).val())}),""==$(".tl-permissions_accessible-input",i.item).val()&&$(".tl-permissions_accessible-input",i.item).val("{}"),""==$(".tl-permissions_viewable-input",i.item).val()&&$(".tl-permissions_viewable-input",i.item).val("{}");var n=proboards.permissions.selection({name:"viewable",values:jQuery.parseJSON($(".tl-permissions_viewable-input",i.item).val())||{},action:"[b]view[/b] the label"}),a=proboards.permissions.selection({name:"accessible",values:jQuery.parseJSON($(".tl-permissions_accessible-input",i.item).val())||{},action:"[b]apply[/b] the label"}),o=n.wrap("<div></div>").after("<br /><br />",a).parent();$(".permissions_button",i.item).click(function(e){return e.preventDefault(),proboards.dialog("permissions_dialog",{html:o,title:"Label Permissions",width:700,height:450,buttons:[{text:"Apply",click:function(){$("#permissions_dialog .permissions").each(function(){var e={},t="";$("input, select",this).each(function(){t=$(this).attr("name").split("_")[0],""!=$(this).val()&&(e[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val())}),$(".tl-permissions_"+t+"-input",i.item).val(JSON.stringify(e))}),$(this).dialog("close")}}]}),proboards.loading(!1),!1})}}),$("img.help-icon, img.tiptipify").tipTip({defaultPosition:"top"})},complete:function(){proboards.loading(!1)}})},dialog_success=function(e){var t;if("duplicate"==e.mode)t=tree.create(e.data,"#"+e.type+"_"+e.ref_id,"before");else if("create"==e.mode)if("cat"==e.type)t=tree.create(e.data,-1),$(t).addClass("cat");else{var i="#"+e.parent_type+"_"+e.parent_id;t=tree.create(e.data,i,"inside")}tree_add_leaf_controls(t)},tree_add_leaf_controls=function(e){(e=$(e)).draggable({helper:function(){return $("<img />")},containment:"parent"});var t=e.hasClass("cat")?"New Board":"New Sub-Board",i=e.hasClass("cat")?"Category":"Board";$("#"+e.attr("id")+" > a").append('<div id="controls_'+e.attr("id")+'" class="controls"><div class="edit"><div class="icon" title="Edit Properties"></div></div><div class="create"><div class="icon" title="'+t+'"></div></div><div class="permissions"><div class="icon"></div></div><div class="goto"><div class="icon" title="Go To '+i+'"></div></div><div class="delete"><div></div></div></div>'),$("#"+e.attr("id")+" > a").bind("mouseenter",function(e){$(".controls",this).show(),$("span.small.note",this).show(),$("ins.description",this).show()}),$("#"+e.attr("id")+" > a").bind("mouseleave",function(e){$(".controls",this).hide(),$("span.small.note",this).hide(),$("ins.description",this).hide()}),$("> a > .controls .create",e).click(function(e){var t=$(this).closest("li").attr("id").split("_");open_dialog("create","board",{parent_type:t[0],parent_id:t[1],ids:[]})}),$("> a > .controls .edit",e).click(function(e){var t=$(this).closest("li").attr("id").split("_");open_dialog("edit",t[0],{ids:[t[1]]})}),$("> a > .controls .goto",e).click(function(){var e=$(this).closest("li").attr("id").split("_"),t=e[1];"board"==e[0]?window.open(proboards.route("board",{board_id:t})):"cat"==e[0]&&window.open(proboards.route("home")+"#category-"+t)}),$("> a > .controls .delete",e).click(function(){proboards.dialog("delete-confirm-container",{autoOpen:!1,width:620,title:"Delete",buttons:[{text:"Delete",id:"action-button",click:function(){"DELETE"===$('input[name="verify"]').val().toUpperCase()&&0<$('input[name="acknowledge"]:checked').length?($("#action-button").button("disable").addClass("ui-state-disabled"),proboards.loading(!0),proboards.ajax({url:proboards.route("category_board_delete"),data:$("#delete-confirm-container form").serialize(),success:function(e){$("#delete-confirm-container").dialog("close"),tree.remove($("#"+e.type+"_"+e.id)),page_changed(),proboards.loading(!1)},error:function(e){$("#action-button").button("enable").removeClass("ui-state-disabled"),proboards.error(e.error),proboards.loading(!1)}})):"DELETE"!=$('input[name="verify"]').val().toUpperCase()?proboards.alert('Please type the word "Delete" into the verification text box first.'):proboards.alert("Please click the checkbox to acknowledge your understanding of this warning.")}}]}),$("#delete-confirm-container").dialog("open"),$("#delete-confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+" Please Wait</div>"),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("category_board_delete_prompt"),data:{ids:e.attr("id").split("_")[1],type:tree.get_type(e)},datatype:"html",success:function(e){$("#delete-confirm-container").html(e),$("#action-button").button("enable").removeClass("ui-state-disabled"),$("#delete-confirm-container form").submit(function(e){e.preventDefault()})}})}),$(".controls .permissions").tipTip({content:function(t){var i=$(this).closest("li").attr("id"),n=i.split("_"),a=n[0];if("cat"==a?a="Category":"board"==a&&(a="Board"),i in cached_permissions)return permissions_html(n[1],a);var e=setTimeout(function(){proboards.ajax({url:proboards.route("category_board_permissions"),data:{id:n[1],type:a},success:function(e){cached_permissions[i]=1,t.content.html(permissions_html(n[1],a)),t.position()}})},1e3);return $(this).data("timeout",e),'<div class="tiptip_loading">'+proboards.processing_icon({alt:"Loading"})+"</div>"},exit:function(e){clearTimeout($(this).data("timeout"))}})},permissions_html=function(e,t){for(var i="To access this, you must meet all the requirements below: <br /><br />",n=proboards.data(t+"_"+e+"_hover"),a=n.length-1;-1<a;a--)i+="<b>"+n[a].name+"</b><br />",i+=n[a].permissions+"<br />";return i},cached_permissions={},page_changed=function(){cached_permissions={},$(document).trigger("submit")},admin_structure_custom_page_edit_html=function(){$(document).ready(function(){var c=$("#html"),e=$("#html-form"),d=($("save"),!!proboards.data("required_vars")),u=["head","header","footer"];d&&$(".var-section").first().attr("id","required");var i=proboards.code_editor({textarea:c,height:470,mode:"html",onChange:function(e,t){proboards.unsaved_changes=1,n(e)}}),n=function(e){$(".var-section, li",".var-list").show();var t=e.getValue(),i=t.match(/\$\[zone_\d+\]/g);if(i)for(var n=0;n<i.length;++n)$('.var-list a[alt="'+i[n]+'"]').parent().hide();if(d){for(n=0;n<u.length;n++){var a=u[n];new RegExp("\\$\\["+a+"\\]").test(t)&&$('.var-list a[alt="$['+a+']"]').parent().hide()}0==$("#required ul li:visible").length&&$("#required").hide()}};n(i),$(e).on("submit",function(){var e=c.data("editor").getValue();if(d){if(1==$("#required:visible").length)return proboards.error("Unable to save. All of the 'Required' variables on the right side must be included in the HTML."),!1;if(/((?:\$\[zone_\d+\])|(?:\$\[header\]))/.test(e),"$[header]"!=RegExp.$1)return proboards.error("Unable to save. The 'header' variable must be placed before all 'zone' variables."),!1}var t=[];t=t.concat(e.match(/(\$\[zone_(?:1?[1-9]|10|20)\])/g));for(var i=[],n=0;n<u.length;n++)i.push("\\$\\["+u[n]+"\\]");var a=new RegExp(i.join("|"),"g"),o=e.match(a)||[];if(d)t=t.concat(o);else if(0<o.length)return proboards.error("Unable to save.  The following variables may not be included in the HTML and must be removed:<br /><br />"+o.join("<br />")),!1;var r={},s=[];for(n=0;n<t.length;n++){var l=t[n];1==r[l]?(s.push(l),r[l]=2):r[l]||(r[l]=1)}return 0<s.length?proboards.error("Unable to save. Duplicates of the following variables were found:<br /><br />"+s.join("<br />")+"<br /><br />Each of these variables may only appear once in the HTML."):(proboards.saving($("#save"),!0),proboards.ajax({url:proboards.data("custom_page_edit_html_save_url"),data:{html:e},success:function(){proboards.unsaved_changes=0},complete:function(e,t){proboards.saving($("#save"),!1,t)}})),!1}),$("a.plus").live("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).next().next();return t.toggle(),$("span.arrow",this).attr("class",t.is(":visible")?"arrow down":"arrow right"),!1}),$("a.var").live("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).parents(".var-list");t.find("a.selected").removeClass("selected"),$(this).addClass("selected"),t.trigger("select")}),$(window).click(function(){$(".var-list a.selected").removeClass("selected"),$(".var-list").trigger("select")}),$("#insert-button").bind("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(".var-list a.selected").attr("alt");t&&i.replaceSelection(t)}),$("a.var").dblclick(function(e){return e.preventDefault(),e.stopPropagation(),i.replaceSelection($(this).attr("alt")),!1})})},admin_structure_custom_page_edit_settings=function(){$(document).ready(function(){$("input, select","form").change(function(){proboards.unsaved_changes=1}),$('input[type="submit"]').click(function(){proboards.unsaved_changes=0}),$("form").submit(function(){proboards.saving($('input[type="submit"]'),!0)}),proboards.data("homepage_disable")?$('input[name="homepage"]').prop("disabled",!0):$('input[name="homepage"]').change(function(){var e="<p>The custom page with id "+proboards.data("homepage_check")+" is already set as your forum's Homepage.</p><br /><p>Saving these changes will make this custom page the new homepage.</p>";1==$(this).val()&&proboards.data("homepage_check")&&proboards.dialog("change_check",{html:e,title:"Reassign Homepage",modal:!0,height:200,buttons:[{text:"Okay",click:function(){$(this).dialog("close")}},{text:"Cancel",click:function(){$('input[id$="homepage_input_radio_1"]').attr("checked","checked"),$(this).dialog("close")}}]})}),proboards.data("saved")&&$('input[name="settings_save"]').setStatus("saved",{position:"after"});var e=$("#basic-styles"),t=$("#container-styles");if(0!=e.length){for(var o=proboards.data("basic_styles"),r=proboards.data("container_styles"),i=0;i<o.length;i++){var n=o[i],a=theme_settings[n.func]({name:n.name,value:n.value});$("input",a).first().attr("name",n.input_name),e.append(a)}for(i=0;i<r.length;i++){if("set_field"!=(n=r[i]).func){var s={name:n.name};s.value=n.value||"",1==n.presets&&(s.presets=1);a=theme_settings[n.func](s);$("input",a).first().attr("name",n.input_name),"gen_border_radius"==n.func&&$('input[name="type"]',a).attr("name",n.input_name+"_type"),t.append(a)}else $('input[name="'+n.input_name+'"]').val(n.value)}theme_settings.setup_image_selector(proboards.data("bg_presets"),{imgPath:proboards.image_path()+"/gradients/",listId:"c-background-image-menu",listClass:"bg-presets"}),theme_settings.bind_upload_buttons(".bg-upload"),theme_settings.setup_color_picker(".property.color > input"),theme_settings.setup_comboboxes(".combobox","simple",1,{onOpen:function(){if(this.hasClass("presets")){var e=this.closest(".property").prev(".color").find("input"),t="transparent";0<e.length&&""!=e.val()&&(t="#"+e.val()),$("#c-background-image-menu li").css("backgroundColor",t)}}}),theme_settings.setup_comboboxes(".image-button","image",1),theme_settings.apply_image_menu_values(),$("#custom-page-settings form").submit(function(){for(var e=o.concat(r),t=0;t<e.length;t++){var i=e[t];if(void 0!==i.validate){var n=$('input[name="'+i.input_name+'"]'),a=n.val();a=validate[i.validate](a),n.val(a)}}})}})},admin_structure_custom_page_edit_visual=function(){$(document).ready(function(){var l=$("#visual-iframe"),c=l[0].contentWindow,e=$(".content-container").overlay();l.on("load",function(){!function(){var e=c.document,t=null,n=4,a=e.body.scrollHeight,i=function(){var i=e.body.scrollHeight;c.$("body *").filter(function(){return"absolute"===$(this).css("position")}).each(function(){var e=$(this),t=e.offset().top+e.outerHeight(!0);i<t&&(i=t)}),a<i?n=4:0==--n&&window.clearInterval(t),a=i,l.attr("height",i)},r=function(){n=4,window.clearInterval(t),t=window.setInterval(i,500)};c.$("body").bind("resizeIframe",r).trigger("resizeIframe"),$("#toggle-controls-checkbox").on("click",function(){$(this).attr("checked")?(c.$(".pbcpe-zone-header, .pbcpe-settings-handle").show(),c.$(".pbcpe-zone").removeAttr("style")):(c.$(".pbcpe-zone-header, .pbcpe-settings-container, .pbcpe-settings-handle").hide(),c.$(".pbcpe-zone").css({border:"none",padding:0}))});var o=l.offset(),s=o.left+" "+(o.top+5);$(".pbcpe-add-widget",e).combobox({menuId:"pbcpe-widget-menu",onOpen:function(e){$(document).one("click",function(){e.hide()})},onClick:function(e){var t=c.$(this).parents(".pbcpe-zone").first(),i=t.data("zoneId"),n=c.$(e).attr("class").replace("pbcpe-","");if(c.$(".pbcpe-widget:not(.pbcpe-new)").length>=proboards.data("max_widgets"))return proboards.dialog("error-message",{title:"Error",html:"This custom page has reached the maximum of "+proboards.data("max_widgets")+" widgets.  Please remove a widget before adding a new one."});var a=c.$('<div class="pbcpe-widget"></div>');a.addClass("widget-"+n),a.data("zone",i),a.data("type",n);var o=c.$('<div class="title-bar"><h2 class="pbcpe-widget-title"></h2></div>');a.append(o),c.$(".pbcpe-widgets",t).prepend(a),c.widgetForms.generateForm(a,c.proboards.data("widget"),"add"),a.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+c.$(e).text()+"</div>"),r()},position:{my:"right top",at:"right bottom",of:"self",collision:"flipfit",offset:s}}),$(e).on("click",'input[name="board_id_display"]',function(e){var n=this;proboards.board.select(function(e,t){var i=c.$(n);i.data("hiddenInput").val(e),i.val(t),$(n).trigger("change.widget",{name:t,value:e})})}),c.$(e).on("proboardsError",function(e,t){proboards.error(t.error)})}(),e.remove()}),$(document).on("click",function(){c.$(".pbcpe-js-overlay").remove()}),$(document).on("mouseup",function(){c.$("body").data("currentSortable")&&c.$("body").data("currentSortable").trigger("mouseup")})})},admin_structure_custom_page_setup=function(){$(document).ready(function(){var e=$("#layout-selector .selected");$("#layouts").on("click",".layout-option",function(){e.removeClass("selected"),e=$(this).addClass("selected"),$('input[name="layout"]').val(e.attr("id"))})})},admin_structure_custom_pages=function(){$(document).ready(function(){var r=$("#custom-page-create-dialog"),t=$("#new-id",r),i=$("#new-title",r),n=!1;t.keyup(function(){n=!0}),i.keyup(function(){if(!n){var e=i.val().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");t.val(e.slice(0,20))}}),r.dialog({autoOpen:!1,buttons:{Create:function(){if(!i.val())return $.inputError(i,"Required");if(!t.val().match(/^[A-z0-9-_]+$/))return $.inputError(t,"The ID field is required and must consist of letters, numbers, dashes, or underscores.");var e=!1;if($("#page-listing .page-id > a").each(function(){if($(this).text()==t.val())return e=!0}),e)return $.inputError(t,"A custom page already exists for this ID.  Please enter a different ID.");proboards.ajax({url:proboards.data("custom_pages_create_url"),data:{pageID:t.val(),title:i.val(),order:$("#page-listing .content .item").length++},success:function(e){if(e.redirect)location.href=e.redirect;else{var t=e.id,i=e.pageID,n=e.title,a=e.href,o=e.edit;$("#no-custom-pages").remove(),$("#page-listing .content br").before('<div class="item single-line clear" id="cpid-'+t+'"><div class="page-title"><a href="'+o+'">'+n+'</a></div><div class="page-id"><a href="'+a+'" title="'+a+'" target="_blank">'+i+'</a></div><div class="page-permissions"><button>Edit</button><span class="permissions-summary level-0"></span></div><div><div class="drag-handle float-left" title="click and drag to reorder"></div><div class="page-delete delete float-left"><span></span></div></div></div>'),r.dialog("close")}}})},Cancel:function(){$(this).dialog("close")}},close:function(){$.clearInputError(),$("input",$(this)).each(function(){$(this).val("")})},title:"Create a New Custom Page",create:function(){proboards.dialogEnter($(this))}}),$("#create-page").on("click",function(){r.dialog("open")});var o=function(e){var t=$(e).closest(".item"),i=t.attr("id").match(/cpid-([A-z-_0-9]+)/)[1],n=proboards.data("custom_page_permissions")[i]||{};t.find(".page-permissions .permissions-summary").attr("class","permissions-summary level-"+(n.level||0))},s=$("#permissions-dialog");s.dialog({autoOpen:!1,buttons:{Save:function(){var e=$(this),t=e.data("id"),i=e.data("button"),n={},a={};$("input, select",s).each(function(){a[$(this).attr("name")]=$(this).val(),n[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val()}),proboards.ajax({url:proboards.data("custom_pages_permissions_set_url"),data:{id:t,permissions:a},success:function(){var e=proboards.data("custom_page_permissions");e[t]=n,proboards.data("custom_page_permissions",e),o(i)},complete:function(){e.dialog("close")}})},Cancel:function(){$(this).dialog("close")}},close:function(){proboards.unsaved_changes=0},title:"Permissions",width:460}),$("#page-listing .content").on("click",".page-permissions button",function(e){e.preventDefault();var t=$(this).closest(".item").attr("id").match(/cpid-([A-z-_0-9]+)/)[1],i=proboards.data("custom_page_permissions")[t]||{};s.html(proboards.permissions.selection({action:"[b]view this page[/b]",values:i})),$("select",s).on("change",function(){proboards.unsaved_changes=1}),$(s).on("click","a, .delete",function(){proboards.unsaved_changes=1}),s.data("button",this),s.data("id",t),s.dialog("open")}),$(".page-permissions button").each(function(){o(this)}),$("#page-listing .sortable").sortable({items:".item",handle:".drag-handle",placeholder:"placeholder",create:function(e,t){},update:function(e,t){var i={ids:[],order:[]};$("#page-listing .item").each(function(e){var t="position-"+e;$(this).hasClass(t)||(i.ids.push($(this).attr("id").match(/\d+/)[0]),i.order.push(e),$(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(t))}),proboards.ajax({url:proboards.data("custom_pages_order_url"),data:i,success:function(){$(".status",t.item).setStatus("saved")}})},change:function(e,t){$("#page-listing .sortable > div:not(.ui-sortable-helper)").removeClass("even"),$("#page-listing .sortable > div:not(.ui-sortable-helper)").filter(":odd").addClass("even")},stop:function(e,t){$("#page-listing .sortable").setEven()}});var e=0;$("#page-listing .item").each(function(){$(this).addClass("position-"+e++)}),$(".page-delete span").click(function(){var t=$(this).parents(".item"),e=$(".page-title",t).text(),i=t.attr("id").match(/cpid-([A-z-_0-9]+)/)[1],n=t.attr("class").match(/position-(\d+)/)[1];proboards.dialog("confirmation",{title:"Confirm",html:'Are you sure you want to delete the "'+proboards.escape_html(e)+'" custom page?',width:330,height:200,buttons:{"Delete Custom Page":function(){$(this).dialog("close"),proboards.ajax({url:proboards.data("custom_pages_delete_url"),data:{ids:[i],titles:[e],order:n},success:function(e){t.remove(),$("#page-listing .sortable").setEven(),$("#page-listing .item").each(function(e){var t="position-"+e;$(this).hasClass(t)||($(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(t))})}})},Cancel:function(){$(this).dialog("close")}}})})})},admin_structure_headers=function(){$(document).ready(function(){if(0<$("#tree-container").length){tree=$.tree.create(),tree.init("#tree-container > .tree",{data:{type:"json",opts:{static:proboards.data("board_data")}},ui:{theme_name:"boards",dots:!0},types:{cat:{clickable:!1,renameable:!1,deletable:!1,creatable:!1,draggable:!1,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1}},board:{clickable:!1,renameable:!1,deletable:!1,creatable:!1,draggable:!1,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1}}}}),$("#extras").addClass("tree"),$("#tree-container .tree ul li, #extras ul li").each(function(){!function(e){var t=proboards.data("legacy"),i=proboards.data("current");e="object"==typeof e?e:$(e);var n=parseInt($(e).attr("id").match(/[\d]+$/));isNaN(n)&&(n=0);var a=$(e).hasClass("board")?"board":"category",o=proboards.route("edit_headers",{type:a,id:n});$("#"+$(e).attr("id")+" > a").attr("href",o).bind("click",function(e){e.stopPropagation()});var r=t[a][n]?' class="v4code"':"",s=i[a][n]?' class="hfcode"':"";$("#"+$(e).attr("id")+" > a").append('<div id="controls_'+$(e).attr("id")+'" class="controls"><div class="headers_icon"><div title="Click this icon to view the headers and footers from before this forum was upgraded to ProBoards v5."'+r+'></div></div><div class="headers_icon"><div'+s+"></div></div></div>"),$("#"+$(e).attr("id")+" > a .v4code").bind("click",function(e){return document.location=proboards.route("view_headers",{type:a,id:n}),!1})}(this)}),$("#headers .tree-boards li .controls").show()}if(0<$("#headers.edit-headers").length){var l=$('textarea[name="headers"]'),c=$('textarea[name="footers"]'),d=$('input[name="save"]'),u=65535;proboards.code_editor({textarea:l,height:200,mode:"html"}),proboards.code_editor({textarea:c,height:200,mode:"html"});d.click(function(e){var t=$('input[name="type"]').val(),i=$('input[name="id"]').val(),n=l.data("editor").getValue(),a=c.data("editor").getValue();if(n.length>u||a.length>u){var o="",r=n.length-u,s=a.length-u;return n.length>u&&(o+="You are over the header character limit of 65535 by "+r+" character"+(1<r?"s":"")+".<br /><br />"),a.length>u&&(o+="You are over the footer character limit of 65535 by "+s+" character"+(1<s?"s":"")+".<br /><br />"),o+="Please shorten your entry and try again.",proboards.error(o),!1}return proboards.saving(d,!0),proboards.ajax({url:proboards.data("update_url"),data:{type:t,id:i,headers:n,footers:a},async:!1,success:function(){proboards.unsaved_changes=!1},complete:function(e,t){proboards.saving(d,!1,t)}}),!1}),$("#headers.edit-headers .edit-check").bind("change",function(){proboards.unsaved_changes=!0})}var o;0<$("#headers.priority").length&&($("#type-list .item.movable").bind("mouseover",function(){var e=$(this).attr("id").substr(7);$("#header-"+e).addClass("affected"),$("#footer-"+e).addClass("affected"),$(this).bind("mouseout",function(){$("#type-list .item").removeClass("affected")})}),$("#sortable-top").sortable({items:"li",handle:".drag-handle",placeholder:"item ui-placeholder",update:function(e,t){for(var i=$(".item.head"),n=0;n<i.length;n++){var a=$(i[n]).attr("id").substr(7);$("#sortable-bottom").prepend($("#footer-"+a))}proboards.ajax({url:proboards.data("priority_update_url"),data:{"order[]":$("#sortable-top").sortable("toArray")},success:function(){$("#not-sortable .non-movable .state").css("visibility","visible"),clearTimeout(o),o=setTimeout(function(){$("#not-sortable .non-movable .state").css("visibility","hidden")},2e3)}})}}),$("#sortable-bottom").sortable({items:"li",handle:".drag-handle",placeholder:"item ui-placeholder",update:function(e,t){for(var i=$(".item.foot"),n=0;n<i.length;n++){var a=$(i[n]).attr("id").substr(7);$("#sortable-top").prepend($("#header-"+a))}proboards.ajax({url:proboards.data("priority_update_url"),data:{"order[]":$("#sortable-bottom").sortable("toArray")},success:function(){$("#not-sortable .non-movable .state").css("visibility","visible"),clearTimeout(o),o=setTimeout(function(){$("#not-sortable .non-movable .state").css("visibility","hidden")},2e3)}})}}))})},admin_themes_advanced=function(){var f=null,m=null,g={},v=[],b=null,_=null,y=null,A=null;$(document).ready(function(){function i(e){var t=e.parents(".var-list");t.find("a.selected").removeClass("selected"),e.addClass("selected"),t.trigger("select")}$(document.body).on("click",".var-list a.plus",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).next().next();return t.toggle(),$("span.arrow",this).attr("class",t.is(":visible")?"arrow down":"arrow right"),!1}),$(".var-list").on("click.var","a.var",function(e){e.preventDefault(),e.stopPropagation(),i($(this))}),$(window).click(function(e){$(e.target).is(".var")||!0===$("#if-else-dialog").dialog("isOpen")||($(".var-list a.selected").removeClass("selected"),$(".var-list").trigger("select"))}),$(document.body).on("dblclick",".var-list a.var",function(e){return e.preventDefault(),e.stopPropagation(),b.replaceSelection($(this).attr("alt")),!1});var r=function(e){var t=$("a.selected",e);if(!t.length)return{type:0,variable:"",name:""};var i=parseInt(t.parents("li").attr("class").match(/opt\-type\-(\S+)/)[1]);return{type:isNaN(i)?0:i,variable:t.attr("alt"),name:t.text()}};$(".var-list li:last-child").append('<span class="nub-roswell"></span>'),$("#save-changes, #save-theme").click(function(e){e.preventDefault();var i=this;b.save();var t=$(v).serialize();$('input[name="default"]').attr("checked")&&(t+=t?"&default=1":"default=1"),$('input[name="disabled"]').attr("checked")&&(t+=t?"&disabled=1":"disabled=1"),proboards.saving($(i),!0);var n={method:"post",url:proboards.route("save_template",{theme_id:proboards.data("theme_id")}),success:function(e){$('input[name="default"]').attr("checked")&&updateThemeDropdown(e.old_default),g={},v=[],proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")},complete:function(e,t){proboards.saving($(i),!1,t)}};""!=t&&(n.data=t),proboards.ajax(n)}),$("#preview-changes").bind("click",function(e){e.preventDefault();var t=p.match(/#(\d+)/)[1],i=proboards.data("template_preview_urls")[t],n=[],a=0;-1!=i.indexOf(":user_id")&&(i=i.replace(/:user_id/,proboards.data("user_id"))),-1!=i.indexOf(":thread_id")?(n.push("board"),n.push("thread")):-1!=i.indexOf(":board_id")?n.push("board"):-1!=i.indexOf(":conversation_id")?n.push("conversation"):-1!=i.indexOf(":post")&&n.push("post");var o=function(i,n){if(n.length){var e=n.shift();if("board"==e)return proboards.board.select(function(e,t){i=i.replace(/:board_id/,e),a=e,o(i,n)});if("thread"==e)return proboards.thread.select(a,function(e){i=i.replace(/:thread_id/,e),o(i,n)});if("conversation"==e)return proboards.conversation.select(function(e){i=i.replace(/:conversation_id/,e),o(i,n)});if("post"==e){var t=JSON.parse(i.substr(i.indexOf(":post")+6));for(_name in i=i.substr(0,i.indexOf(":post")),$("#template-form").attr("method","post"),t)t.hasOwnProperty(_name)&&$("#template-form").prepend($('<input type="hidden" />').attr("name",_name).val(t[_name]).addClass("added-by-js"))}}b.save(),window.open("","preview_window"),proboards.instapost(i,$("#template-form").serializeArray(),{target:"preview_window"}),$("#instapost").remove()};o(i,n)}),$("#tree-button").bind("click",function(e){if(e.stopPropagation(),e.preventDefault(),null!=A)return A.dialog("open");A=proboards.dialog("tree-dialog",{title:"Expanded Tree",width:600,height:400,html:'<div class="var-list" style="width: auto; height: auto;"><h3>'+$("#template-tabs .active a").html()+"</h3><h4>Loops and Variables</h4></div>",modal:!0,buttons:[{text:"< Insert",class:"require-selection",click:function(e){e.stopPropagation(),s(r($("#tree-dialog")).variable),$(this).dialog("close"),$("#insert-button").click()}},{text:"Define",class:"require-selection",click:function(){$(this).dialog("close")}},{text:"if / else",click:function(e){e.stopPropagation(),s(r($("#tree-dialog")).variable),$(this).dialog("close"),$("#if-button").click()}}]});var t=$("div.var-list > ul",_).clone();t.find("ul").show(),A.children("div").append(t),A.on("click","a.var",function(e){e.preventDefault(),i($(this))}),$("div.var-list",A).bind("select",n)});var n=function(e){var t=0==$("#tree-dialog a.selected").length;$("#tree-dialog").parent().find("button.require-selection").prop("disabled",t)},s=function(e){var t=$(".var-list",_);if($("a.selected",t).removeClass("selected"),$("ul ul",t).hide(),$(".arrow.down",t).removeClass("down").addClass("right"),e){var i=$('a[alt="'+e+'"]',t);i.parents("li").children("a.plus").click(),i.addClass("selected"),t.scrollTop(i.offset().top-t.offset().top+t.scrollTop()-30)}};function a(e){for(var i=$(e).data("action"),t=proboards.data("template_list"),n=proboards.data("theme_list"),a='Select the templates you want to export:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<t.length;o++)a+='<label><input type="checkbox" name="templates[]" value="'+t[o].value+'"'+(t[o].present?' checked="checked"':"")+">"+t[o].name+"</label><br />",12!=o&&25!=o||(a+="</td><td>");a+='</td></tr></table><br /><br /> Select a theme to export the selected templates to: <br /><br /><select name="theme">';for(o=0;o<n.length;o++)n[o].id!=proboards.data("theme_id")&&(a+='<option value="'+n[o].id+'">'+n[o].name+"</option>");a+="</select>",proboards.dialog("advanced-export-dialog",{title:"Export Templates",html:a,height:550,width:600,buttons:[{id:"advanced-export-button",text:"Export Template",click:function(){var t=this;proboards.confirm("Are you sure you want to replace all the selected templates?",function(){var e=$("#advanced-export-dialog input, #advanced-export-dialog select").serializeArray();e.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:e,success:function(){proboards.alert("Success","Export Successful")},complete:function(){$(t).dialog("close")}})},{title:"Confirm"})}}]}),l("#advanced-export-dialog","#advanced-export-button"),$("#advanced-export-dialog input").change(function(){l("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .select_all").click(function(){$('input[name="templates[]"]').attr("checked","checked"),l("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .deselect_all").click(function(){$('input[name="templates[]"]').removeAttr("checked"),l("#advanced-export-dialog","#advanced-export-button")})}function l(e,t){0<$(e+" input:checked").length?$(t).button("enable"):$(t).button("disable")}$("#insert-button").bind("click",function(e){e.stopPropagation(),e.preventDefault();var t=r(_).variable;t&&b.replaceSelection(t)}),$("#advanced-edit a.reset").bind("click",function(e){e.preventDefault();var t=$(this).data("action")+m;proboards.confirm("Are you sure you wish to reset this template?  Any changes made to this template will be lost.",function(){var n=f.parent().overlay();proboards.ajax({url:t,success:function(e){b.setValue(e.template),b.save();var t=f.attr("name");if(void 0!==g[t]){delete g[t];for(var i=0;i<v.length;i++)if(exists=$(v[i]).attr("name"),t==exists){v.splice(i,1);break}}0==v.length&&(proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")),n.remove()}})})}),$("#advanced a.reset-all").bind("click",function(e){e.preventDefault();var t=$(this).data("action");proboards.confirm("Are you sure you wish to reset all templates to default?",function(){proboards.ajax({url:t}),$(this).dialog("close"),$("#save-theme").removeClass("highlight")})}),$("#advanced a.import, #advanced-edit a.import").bind("click",function(e){e.preventDefault();for(var i=$(this).data("action"),t=proboards.data("template_list"),n=proboards.data("theme_list"),a='Select the templates you want to import:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<t.length;o++)a+='<label><input type="checkbox" name="templates[]" value="'+t[o].value+'"'+(t[o].present?' checked="checked"':"")+">"+t[o].name+"</label><br />",12!=o&&25!=o||(a+="</td><td>");a+='</td></tr></table><br /><br /> Select a theme to import the selected templates from: <br /><br /><select name="theme">';for(o=0;o<n.length;o++)n[o].id!=proboards.data("theme_id")&&(a+='<option value="'+n[o].id+'">'+n[o].name+"</option>");a+="</select>",proboards.dialog("advanced-import-dialog",{title:"Import Templates",html:a,height:550,width:600,buttons:[{id:"advanced-import-button",text:"Import Template",click:function(){var t=this;proboards.confirm("Are you sure you want to replace all the selected templates?",function(){var e=$("#advanced-import-dialog input, #advanced-import-dialog select").serializeArray();e.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:e,success:function(){location.reload()},complete:function(){$(t).dialog("close")}})},{title:"Confirm"})}}]}),l("#advanced-import-dialog","#advanced-import-button"),$("#advanced-import-dialog input").change(function(){l("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .select_all").click(function(){$('input[name="templates[]"]').attr("checked","checked"),l("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .deselect_all").click(function(){$('input[name="templates[]"]').removeAttr("checked"),l("#advanced-import-dialog","#advanced-import-button")})}),$("#advanced a.export, #advanced-edit a.export").bind("click",function(e){e.preventDefault();var t=$(this);proboards.unsaved_changes?proboards.confirm("You have unsaved changes.  If you try to export now, your changes will not be included.  Continue?",function(){a(t)},{title:"Unsaved Changes"}):a(t)}),$("#if-button").bind("click",function(e){e.preventDefault(),e.stopPropagation();var i=$("#if-else-dialog");i.dialog({title:"If / Else",width:600,beforeClose:function(){$("#var-list-holder").hide()}}),i.html('Create and insert if / else statements below. <div id="conditions"></div> <div><a href="#" class="elseif">+else If</a></div><div><a href="#" class="else">+else</a></div><div><button class="insert">&lt;&lt; Insert</button></div>'),$("a.elseif",i).click(function(e){e.preventDefault(),t("Else If")}),$("a.else",i).click(function(e){e.preventDefault(),$(this).hasClass("disabled")||t("Else")}),$("button.insert",i).click(function(e){e.preventDefault();var t=!0;$("#conditions .condition-line .condition-vars select").each(function(){$(this).val()||(t=!1)}),t&&(o(),i.dialog("close"))}),t("If"),i.dialog("open")});var t=function(e){var a=r(_),o=$('<div class="condition-line condition-line-'+e.toLowerCase().replace(/\s+/g,"")+'"><span class="condition-type">'+e.toLowerCase()+'</span><span class="condition-vars"></span><span class="condition-operator"><select name="operator"><option></option><option>==</option><option>!=</option><option class="operator-int">&lt;</option><option class="operator-int">&lt;=</option><option class="operator-int">=&gt;</option><option class="operator-int">&gt;</option></select></span><span class="condition-right-operand"><input type="text" name="right-operand" /></span><span class="condition-delete"><a href="#" class="button-x">X</a></span></div>');if("Else"==e)$("span:not(.condition-type,.condition-delete)",o).hide();else{var t='<button>change</button><span class="condition-var-name" alt="'+a.type+a.variable+'">'+a.name+"</span>";$(".condition-vars",o).append(t).click(function(e){if(e.preventDefault(),e.stopPropagation(),y&&0!=y.length||(y=$(".var-list",_).clone().attr("id","var-list-holder").appendTo(document.body).css({position:"absolute",zIndex:2e3,display:"none"})),!y.is(":visible")){var t=$(this).offset();y.css({top:t.top+$(this).height(),left:t.left-3})}y.toggle(),$("a.selected",y).removeClass("selected"),$("ul ul",y).hide(),$(".arrow.down",y).removeClass("down").addClass("right");var i=""!=$(".condition-var-name",o).attr("alt")?$(".condition-var-name",o).attr("alt").substr(1):a.variable;if(i){var n=$('a[alt="'+i+'"]',y);n.parents("li").children("a.plus").click(),n.addClass("selected"),y.scrollTop(n.offset().top-y.offset().top+y.scrollTop()-30)}y.off(".var"),y.on("click.var","a.var",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".var-list").find("a.selected").removeClass("selected"),$(this).addClass("selected");var t=r(y);return $(".condition-var-name",o).text(t.name),$(".condition-var-name",o).attr("alt",""+t.type+t.variable),s(t.variable),y.toggle(),d(o),!1}),$(window).on("click.ifelse",function(e){$(e.target).is("li, .var-list")||(y&&!0===y.is(":visible")&&y.hide(),$(this).off(".ifelse"))})}),$(".condition-operator select",o).change(u),$(".condition-operator select",o).change(),d(o)}"If"==e?$(".condition-delete",o).hide():$(".condition-delete a",o).click(function(e){e.preventDefault(),$(this).parents(".condition-line").remove(),c()}),$("#conditions .condition-line-else").length?$("#conditions .condition-line-else").before(o):$("#conditions").append(o),c()},c=function(){var e=$("#conditions .condition-line-else").length?"addClass":"removeClass";$("#if-else-dialog a.else")[e]("disabled")},d=function(e){var t=parseInt($(".condition-var-name",e).attr("alt").substr(0,1));if(1==t)$(".condition-operator",e).show(),$(".condition-operator select option",e).show(),$(".condition-right-operand",e).show();else if(2==t){$(".condition-operator",e).show(),$(".condition-operator select option.operator-int",e).hide(),$(".condition-right-operand",e).show();var i=$(".condition-operator select",e);$('option[value="'+i.val()+'"]:visible',i).length||i.val("")}else $(".condition-operator",e).hide(),$(".condition-right-operand",e).hide();$(".condition-operator select",e).change()},u=function(){var e=$(this).parents(".condition-line");""!=$(this).val()&&$(this).is(":visible")?$(".condition-right-operand",e).show():$(".condition-right-operand",e).hide()},o=function(){var o="",r=$("#conditions .condition-line");r.each(function(){var e=$(".condition-type",this).text().toLowerCase().replace(/ /,"");if("else"==e)o+="{else";else{var t=$(".condition-var-name",this).attr("alt").substr(1),i=parseInt($(".condition-var-name",this).attr("alt").substr(0,1)),n=$(".condition-operator select",this).val(),a=$(".condition-right-operand input",this).val();o+="{"+e+" "+t,""!=n&&(o+=" "+n+" ",1!=i&&(a='"'+a.replace(/"/,"")+'"'),o+=a)}o+="}\n",o+="else"==e?"\tcode to be executed if condition"+(2<r.length?"s are":" is")+" not met\n":"\tcode to be executed if condition is true\n"}),o+="{/if}\n",b.replaceSelection(o)};if($("#template-tabs").length){var p="";function e(){var e=location.hash;e=1<e.length?e:defaultTab,p!=e&&function(e){if(!0!==$("#if-else-dialog").dialog("isOpen")&&!0!==$("#tree-dialog").dialog("isOpen")){A=y=null,m=e.substr(1),f=$('textarea[name="template['+m+']"]');var t=$('#template-tabs a[href="'+e+'"]').parent();b&&(b.toTextArea(),b=null),b=proboards.code_editor({textarea:f,height:470,mode:"html",onChange:function(e,t){var i=e.getTextArea(),n=$(i).attr("name");void 0===g[n]&&(g[n]=1,v.push(i),$("#save-theme").addClass("highlight"),proboards.unsaved_changes=1)}}),$("#template-tabs .tab").removeClass("active"),$(".container").hide(),t.addClass("active"),$(e+"-container,"+e+"-vars").show(),p=e,_=$("#vars-wrapper "+e+"-vars")}}(e)}if(e(),$("#template-tabs").on("click",".tab",function(e){e.preventDefault(),e.stopPropagation(),!0!==$("#if-else-dialog").dialog("isOpen")&&!0!==$("#tree-dialog").dialog("isOpen")&&(window.location.hash=$(".tab-link",this).attr("href"))}),$("html").is(".ie7")?setInterval(e,500):$(window).bind("hashchange",e),$("#template-tabs .child-wrapper").width()<$("#template-tabs .child-wrapper table").width()){scroller={tabs:{current:0,last:0,all:$("#template-tabs .child-wrapper .tab"),total:$("#template-tabs .child-wrapper .tab").length},target:0,max:$(".child-wrapper table").width()-$(".child-wrapper").width(),container:$("#template-tabs .child-wrapper"),offset:$("#template-tabs .child-wrapper").offset().left,current:0,intervals:{scroll:0,click:0,hold:0},setTarget:function(e){scroller.tabs.current=e,scroller.target=Math.min($(scroller.tabs.all[e]).offset().left-scroller.offset+scroller.container.scrollLeft(),scroller.max),scroller.intervals.scroll||(scroller.intervals.scroll=setInterval(scroller.scroll,10))},scroll:function(){Math.abs(scroller.current-scroller.target)<5?(scroller.current=scroller.target,clearInterval(scroller.intervals.scroll),scroller.intervals.scroll=0):scroller.current+=(scroller.target-scroller.current)/5,scroller.container.scrollLeft(scroller.current)}},scroller.container.scrollLeft(0);for(var h=0;h<scroller.tabs.total;++h)if($(scroller.tabs.all[h]).offset().left-scroller.offset>=scroller.max){scroller.tabs.last=h;break}$("#template-tabs .scroll-left").mousedown(function(e){e.preventDefault(),e.stopPropagation();var t=function(e){0<scroller.tabs.current&&scroller.setTarget(scroller.tabs.current-1)};scroller.intervals.click=setTimeout(function(){scroller.intervals.hold=setInterval(t,70)},500),t()}),$("#template-tabs .scroll-right").mousedown(function(e){e.preventDefault(),e.stopPropagation();var t=function(e){scroller.tabs.current<scroller.tabs.last&&scroller.setTarget(scroller.tabs.current+1)};scroller.intervals.click=setTimeout(function(){scroller.intervals.hold=setInterval(t,70)},500),t()}),$("#template-tabs .scroll-right, #template-tabs .scroll-left").mouseup(function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(scroller.intervals.click),clearInterval(scroller.intervals.hold),scroller.intervals.click=0}).click(function(e){e.preventDefault(),e.stopPropagation()}).show()}}})},admin_themes_css_editor=function(){$(document).ready(function(){var p=$('textarea[name="css"]');if(p.length){var e,o={},a={},r=1,h=0,s='<div><select name="type"><option value="section">Section</option><option value="background">Background</option><option value="background-color">Background Color</option><option value="background-image">Background Image</option><option value="background-image-texture">Background Image Texture</option><option value="background-repeat">Background Repeat</option><option value="background-attachment">Background Attachment</option><option value="background-position">Background Position</option><option value="border">Border</option><option value="border-width">Border Width</option><option value="border-style">Border Style</option><option value="border-color">Border Color</option><option value="border-radius">Border Radius</option><option value="box-shadow">Box Shadow</option><option value="color">Color</option><option value="font">Font</option><option value="font-family">Font Family</option><option value="font-size">Font Size</option><option value="font-style">Font Style</option><option value="font-weight">Font Weight</option><option value="font-variant">Small Caps</option><option value="text-align">Text Align</option><option value="text-decoration">Text Decoration</option><option value="text-shadow">Text Shadow</option><option value="text-transform">Text Transform</option><option value="width">Width</option><option value="height">Height</option></select></div>',l=proboards.get_image({src:"/admin/themes/css-editor/icon-move.png",alt:"move",class:"control_button move_button"}),c=proboards.get_image({src:"/admin/themes/css-editor/icon-new.png",alt:"new",class:"control_button new_button"}),d=proboards.get_image({src:"/admin/themes/css-editor/icon-edit.png",alt:"edit",class:"control_button edit_button"}),u=proboards.get_image({src:"/admin/themes/css-editor/icon-accept.png",alt:"Ok",class:"row_button ok_button"}),f=proboards.get_image({src:"/admin/themes/css-editor/icon-create.png",alt:"Create",class:"row_button create_button"}),m=proboards.get_image({src:"/admin/themes/css-editor/icon-cancel.png",alt:"Cancel",class:"row_button cancel_button"}),g='<span class="control_button delete_button"><div class="delete"><div></div></div></span>',v=proboards.code_editor({textarea:p,height:553,mode:"css",onChange:function(){clearTimeout(e),$('input[name="css_submit"]').attr("disabled","disabled"),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),e=setTimeout(function(){t()},1e3)}});function t(){var i="",n=!0;less.Parser().parse(v.getValue(),function(e,t){if(e)message=e.message,"Syntax"==e.type&&(message+=" on line "+e.line),n=!1,$(".error_area").html(message+"<br /><br />");else{$(".error_area").empty(),i=t;try{t.toCSS(),$(".error_area").empty()}catch(e){n=!1,$(".error_area").html(e.message+" on line "+e.line+"<br /><br />")}n&&$('input[name="css_submit"]').removeAttr("disabled")}}),o={},r=1,n&&(theme_settings.options.stylesheetData=i,theme_settings.updateLivePreview())}$("#save-theme").click(function(){$('input[name="css_submit"]').click()}),$('input[name="css_submit"]').click(function(e){e.preventDefault();var i=$(this);$(this).val();v.save();var t={};t.css=p.data("editor").getValue();try{t.css_parsed=proboards.css.clean(proboards.css.parse(t.css).toCSS({compress:!0}))}catch(e){proboards.error(e.message)}var n=proboards.css.parse(theme_settings.options.stylesheetW);proboards.css.extendVariables(n,theme_settings.options.stylesheetData),proboards.css.extendVariables(n,proboards.css.parse(proboards.data("css_required_vars")));try{t.wysiwyg_css_parsed=proboards.css.clean(n.toCSS({compress:!0}))}catch(e){proboards.error(e.message)}var a=proboards.css.parse(theme_settings.options.stylesheetM);proboards.css.extendVariables(a,theme_settings.options.stylesheetData),proboards.css.extendVariables(a,proboards.css.parse(proboards.data("css_required_vars")));try{t.css_mobile=proboards.css.clean(a.toCSS({compress:!0}))}catch(e){proboards.error(e.message)}if($('input[name="default"]').attr("checked")&&(t.default=1),$('input[name="disabled"]').attr("checked")&&(t.disabled=1),1==h){var o=[];$("#forum-related > div").each(function(){($(this).hasClass("section")||$(this).hasClass("property_wrapper"))&&o.push(function e(t){if(t.hasClass("property_wrapper"))void 0!==(t=t.children(".property")).data().item.children&&delete t.data().item.children,delete t.data().item.value;else{var i=[];t.children("div").each(function(){($(this).hasClass("section")||$(this).hasClass("property_wrapper"))&&i.push(e($(this)))}),void 0!==t.data().item&&(t.data().item.children=i),delete t.data().item.variable}return t.data().item}($(this)))}),t.tree=JSON.stringify(o),h=0}for(var r=[],s=JSON.parse(proboards.data("unfiltered_vars")),l=proboards.css.variables(proboards.css.parse(t.css)),c=0;c<s.length;c++)void 0!==l[s[c].variable]&&r.push(s[c]);for(var d={scheme_id:"theme_preview"},u=0;u<r.length;u++)d[r[u].variable.slice(1)]=l[r[u].variable].value.slice(1);t.color_scheme=JSON.stringify(d),proboards.saving(i,!0),proboards.ajax({method:"post",url:proboards.data("css_save_url"),data:t,success:function(e){t.default&&updateThemeDropdown(e.old_default),$(".admin-theme-color-bar td").empty().append(proboards.color_scheme.build(d,0)),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")},complete:function(e,t){proboards.saving(i,!1,t)}})}),$("#menu-item-preview").click(function(e){$("#preview-container").show(),$("#builder-container").hide(),$("#code-container").hide(),$("#menu-item-preview").addClass("ui-active"),$("#menu-item-builder").removeClass("ui-active"),$("#menu-item-code").removeClass("ui-active")}),$("#menu-item-builder").click(function(e){$("#builder-container").show(),$("#preview-container").hide(),$("#code-container").hide(),$("#menu-item-builder").addClass("ui-active"),$("#menu-item-preview").removeClass("ui-active"),$("#menu-item-code").removeClass("ui-active")}),$("#menu-item-code").click(function(e){$("#code-container").show(),$("#preview-container").hide(),$("#builder-container").hide(),$("#menu-item-code").addClass("ui-active"),$("#menu-item-preview").removeClass("ui-active"),$("#menu-item-builder").removeClass("ui-active")}),$("#advanced-css a.reset").bind("click",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to reset the theme CSS?",function(){var t=$(".CodeMirror").overlay(),i=$("#builder-container:visible").overlay();proboards.ajax({url:proboards.data("css_reset_url"),success:function(e){v.setValue(e.css),t.remove(),i.remove(),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")}})})});try{theme_settings.setup_editor(1)}catch(e){t(),proboards.error("We're sorry. There was a problem loading the preview due to errors in your CSS file. Please check the error status area (in red) below the code editor for more details.")}$("#advanced-css a.reset_structure").bind("click",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to reset the Visual Editor structure?  <b>This will discard any unsaved changes to your CSS.</b>",function(){proboards.instapost(proboards.data("structure_reset_url"))})}),$(".section, .property_wrapper > .property:first-child").append(l+d+c+g),$("#forum-related").on("keypress","input",function(e){e.which==Keys.enter&&e.preventDefault()});var b=0;function i(t){var e=t.find('select[name="type"]').first(),i=t.find('select[name="variable"]').first();e.change(function(){"section"==e.val()?i.hide():i.show()}),i.focus(function(){var e=t.prev(".section, .property").data();e?i.html(_(e.item)):i.html(_())})}function n(e){var t=e.data().item;"background"==t.type||"border"==t.type||"box-shadow"==t.type||"font"==t.type||"text-shadow"==t.type?(e.parent().children(".section, .property").hide(),e.parent().children(".section, .property").last().after("<div>"+A(t)+"</div>"),i(e.parent().children(".section, .property").last().next())):(e.hide(),e.after("<div>"+A(t)+"</div>"),i(e.next()))}function _(e,t){0==proboards.size(o)&&y($("#forum-related"),o),void 0===t&&(t=0),1==r&&(a=proboards.css.variables(proboards.css.parse($(".CodeMirror").data("editor").getValue())),r=0);var i='<option value="">Select Variable</option>';for(var n in a)(void 0===o[n]||void 0!==e&&n==e.variable)&&(void 0!==e&&n==e.variable?i+='<option selected="selected" value="'+n+'">'+n+"</option>":i+='<option value="'+n+'">'+n+"</option>");return i}function y(e,t){e.hasClass("property_wrapper")?t[e.children(".property").first().data().item.variable]=1:e.children("div").each(function(){y($(this),t)})}function A(e,t,i){var n=$.extend({},e);void 0===n.type&&(n.type="section"),void 0===n.name&&(n.name=""),void 0===n.variable&&(n.variable=""),void 0===i&&(i=0);var a=$(s),o=$('<div><select name="variable">'+_(n,1)+"</select></div>"),r='<div class="edit_block'+(i?' creating">':'">')+'<input type="text" placeholder="name" name="name" value="'+n.name+'" />';return a.find('option[value="'+n.type+'"]').attr("selected","selected"),"section"==n.type&&0==i?(a.children("select").attr("disabled","disabled"),r+a.html()+u+m+"</div>"):("section"==n.type&&1==i?o.children("select").hide():o.find('option[value="'+n.variable+'"]').attr("selected","selected"),r+a.html()+" "+o.html()+(i?f:u)+m+"</div>")}function w(){var e=$('input[name="var_search"]').val();if("@"!=e.substr(0,1)&&(e="@"+e),1==r&&(a=proboards.css.variables(proboards.css.parse($(".CodeMirror").data("editor").getValue())),r=0),void 0===a[e])proboards.alert("Variable does not exist.");else if(0==proboards.size(o)&&y($("#forum-related"),o),void 0===o[e])proboards.alert("Variable is not currently in use.");else{var t="undefined";$(".property_wrapper > .property:first-child").each(function(){e!=$(this).data().item.variable||(t=$(this))}),"undefined"!=t&&($("#settings h2").siblings("div").hide(),$("h2 .arrow").removeClass("down").addClass("right"),t.parents(".section").each(function(){var e=$(this).children("h2").first();e.siblings("div").show(),$(".arrow",e).removeClass("right").addClass("down")}),$(document).scrollTop(t.offset().top),0!=t.next().length&&t.siblings("div").hasClass("edit_block")||n(t))}return!1}$("#forum-related").on("click",".move_button",function(){var e,a=$(this).closest(".section, .property_wrapper"),t=$("<div/>");b=0,t.html('<p>Choose where you want to move this element to: </p><br /><select name="move_location_rel"><option value="before">Before</option><option value="inside">Inside</option><option value="after">After</option></select><br /><br />'),t.append(function i(e,n){var a=$("<div/>");0==b&&a.attr("class","section_list");if(e.is(n));else if(e.hasClass("property_wrapper")){var t=$(e).attr("class").replace("property_wrapper ","");$('<input type="radio" name="move_location" id="move_location_'+b+'" class="location_property" /><label for="move_location_'+b+'">'+t+"</label><br />").appendTo(a).data("selector",e),b++}else e.children("div").not(n).each(function(){if($(this).hasClass("section")){var e=$(this).children("h2").children(".section_name").text();$('<input type="radio" name="move_location" id="move_location_'+b+'" class="location_section" /><label for="move_location_'+b+'"><b>'+e+"</b></label>").appendTo(a).data("selector",$(this)),b++,a.append(i($(this),n))}if($(this).hasClass("property_wrapper")){var t=$(this).attr("class").replace("property_wrapper ","");$('<input type="radio" name="move_location" id="move_location_'+b+'" class="location_property" /><label for="move_location_'+b+'">'+t+"</label><br />").appendTo(a).data("selector",$(this)),b++}});return a}($("#forum-related"),a)),proboards.dialog("move-location-dialog",{title:"Move Element",html:"",height:500,width:500,open:function(){e=$("#builder-container:visible").overlay(),$("#move-location-dialog").append(t)},close:function(){e.remove()},buttons:{Move:function(){var e=$('#move-location-dialog select[name="move_location_rel"]').val(),t=$('#move-location-dialog input[name="move_location"]:checked');if("inside"==e&&t.hasClass("location_property"))proboards.alert("Error: Cannot move elements inside of a property.");else{a.detach();var i=t.data().selector;"inside"==e?(i.append(a),a.hasClass("heading")&&(a.removeClass("heading").removeAttr("style"),a.children("h2").prepend('<span class="arrow down"><span></span></span>'),a.children().removeAttr("style"),theme_settings.setup_collapsable(a.children("h2"),1))):("before"==e?i.before(a):i.after(a),"forum-related"==i.parent().attr("id")&&(a.hasClass("section")&&(a.addClass("heading").removeAttr("style"),a.children("h2").children("span.arrow").remove(),a.children().removeAttr("style")),a.removeAttr("style")));var n=i.closest(".section");0<n.length&&("inside"!=e&&i.hasClass("section")&&(n=i.parent().closest(".section")),!n.hasClass("heading")&&$(".arrow",n).eq(0).hasClass("right")?a.hide():a.show()),theme_settings.setup_alternating_bg(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),h=1,$(this).dialog("close")}}}})}),$("#forum-related").on("click",".new_button",function(){var e=$(this).closest(".section, .property_wrapper");e.hasClass("property_wrapper")||(e.children("div").show(),(e=e.children("h2").first()).children(".arrow").removeClass("right").addClass("down")),e.after("<div>"+A({},void 0,1)+"</div>"),i(e.next()),theme_settings.setup_alternating_bg()}),$('button[name="new_top_level"]').click(function(){return $("#forum-related").prepend("<div>"+A({},void 0,1)+"</div>"),i($("#forum-related > div:first-child")),!1}),$("#forum-related").on("click",".edit_button",function(){n($(this).closest(".section, .property"))}),$("#forum-related").on("click",".delete_button",function(){var t=this;proboards.confirm("Are you sure you want to remove this?",function(){var e=$(t).closest(".section, .property_wrapper");e.hasClass("property_wrapper")&&0!=proboards.size(o)?(delete o[e.children(".property").first().data().item.variable],e.remove()):(e.remove(),o={},y($("#forum-related"),o)),theme_settings.setup_alternating_bg(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),h=1})}),$("#forum-related").on("click",".ok_button",function(){var e=new Object,t=$(this).parent(),i=t.parent().prev();if(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),h=1,$(this).siblings("input, select").each(function(){"name"==$(this).attr("name")?e.name=$(this).val():"type"==$(this).attr("name")?e.type=$(this).val():"variable"==$(this).attr("name")&&(e.variable=$(this).val())}),""==e.name&&(e.name=void 0),"section"==e.type&&i.hasClass("section"))i.data().item.name=e.name,i.find(".section_name").first().text(e.name),i.show(),t.remove();else if("section"==e.type){var n=t.parent();delete o[i.data().item.variable],e=$.extend({name:"Section"},e),n.empty(),"forum-related"==n.parent().attr("id")?(n.attr("class","heading section"),n.append('<h2><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+l+d+c+g)):(n.attr("class","section"),n.append('<h2><span class="arrow right"><span></span></span><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+l+d+c+g)),n.data("item",e),theme_settings.setup_collapsable(n.children("h2"),1),theme_settings.setup_alternating_bg(n)}else{var a=(t=t.parent()).prev().data().item.variable;t.prevUntil().remove(),theme_settings.select_editor_options(t.parent(),e,1),t.next().append(l+d+c+g),t.nextUntil().data("item",e),delete o[a],o[e.variable]=1,theme_settings.setup_alternating_bg(t.parent().children().last());n=t.parent();t.remove(),theme_settings.setup_comboboxes($(".combobox",n),"simple",1),theme_settings.setup_comboboxes($(".image-button",n),"image",1),theme_settings.setup_color_picker($(".property.color > input",n)),theme_settings.bind_upload_buttons($(".bg-upload",n),1)}}),$("#forum-related").on("click",".create_button",function(){var e=new Object,t=$(this).parent();if(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),h=1,$(this).siblings("input, select").each(function(){"name"==$(this).attr("name")?e.name=$(this).val():"type"==$(this).attr("name")?e.type=$(this).val():"variable"==$(this).attr("name")&&(e.variable=$(this).val())}),""==e.name&&(e.name=void 0),"section"==e.type){var i=t.parent();e=$.extend({name:"Section"},e),"forum-related"==i.parent().attr("id")?i.attr("class","heading section"):i.attr("class","section"),i.append('<h2><span class="arrow right"><span></span></span><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+l+d+c+g),i.data("item",e),t.remove(),theme_settings.setup_collapsable(i.children("h2"),1),theme_settings.setup_alternating_bg(i)}else{(i=t.parent()).attr("class","property_wrapper "+e.type).attr("style","display: block;"),theme_settings.select_editor_options(i,e,1),i.children(".property").data("item",e),t.next().append(l+d+c+g),t.remove(),theme_settings.setup_alternating_bg(i),0!=proboards.size(o)&&(o[e.variable]=1),theme_settings.setup_comboboxes($(".combobox",i),"simple",1),theme_settings.setup_comboboxes($(".image-button",i),"image",1),theme_settings.setup_color_picker($(".property.color > input",i)),theme_settings.bind_upload_buttons($(".bg-upload",i),1)}}),$("#forum-related").on("click",".cancel_button",function(){var e=$(this).parent().parent();e.hasClass("creating")||e.prevUntil().show(),e.remove()}),$('button[name="var_search_button"]').click(function(){return w(),!1}),$('input[name="var_search"]').keypress(function(e){if(13==e.which)return e.stopPropagation(),e.preventDefault(),w(),!1})}else if($("#settings").length){try{theme_settings.setup_editor()}catch(e){proboards.error("We're sorry. There was a problem loading the editor due to errors in your CSS file. You must manually fix your CSS <a href=\""+proboards.data("css_edit_url")+'">here</a> before you can proceed.')}$(".visual-save, #save-theme").click(function(e){saveButton(".admin-content",e,this)})}})},admin_themes_easy=function(){var r={},l=[],c=[],d=0;function u(e){void 0===e&&(e=0);for(var t=$("#current_scheme .scheme").data().scheme,i=0;i<c.length;i++)c[i].value="#"+t[c[i].variable.slice(1)],"#"!=c[i].value&&theme_settings.changeVariable(c[i],theme_settings.options.variables[c[i].variable],c[i].value);theme_settings.updateLivePreview(),e?(proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")):(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"))}function p(e){theme_settings.options.gradient_background="#"+e.title_bar_background_color,theme_settings.options.page_background="#"+e.body_background_color,theme_settings.options.banner_text="#"+e.title_text_color,$("#forum-related .property_wrapper.background-color .color-picker-preview").attr("style","background-color: #"+e.title_bar_background_color+";"),$('#forum-related .property_wrapper.background-color input[type="text"]').val(e.title_bar_background_color).trigger("change.color"),$("#forum-related .property_wrapper.color .color-picker-preview").attr("style","background-color: #"+e.title_text_color+";"),$('#forum-related .property_wrapper.color input[type="text"]').val(e.title_text_color).trigger("change.color")}function h(){$.each(r,function(e,t){1==t.current_favorite&&$("#scheme_"+e).prev("img").attr("src",favstar_active_url)})}function f(e,i,t,n){var a=[];"all"==i?a=e:"favorites"==i?a=$.grep(e,function(e,t){return void 0!==r[""+e.scheme_id]&&1==r[""+e.scheme_id].current_favorite?1:0}):"my_schemes"==i?(t=0,a=l):a=$.grep(e,function(e,t){return 1==e[i]?1:0}),n.empty();for(var o=0;o<a.length;o++)n.append(proboards.color_scheme.build(a[o],t))}$(document).ready(function(){var t=JSON.parse(proboards.data("schemes"));r=JSON.parse(proboards.data("favorites")),l=proboards.data("my_schemes");for(var e=0;e<l.length;e++)l[e].scheme_id=l[e].scheme_id+"_"+e;f($.extend(!0,[],t),"all",1,$("#schemes")),h();try{for(var i=JSON.parse(proboards.data("unfiltered_vars")),n=proboards.css.variables(proboards.css.parse(proboards.data("css_forum"))),s=0;s<i.length;s++)void 0!==n[i[s].variable]&&c.push(i[s])}catch(e){return void proboards.error("We're sorry. There was a problem loading the editor due to errors in your CSS file. You must manually fix your CSS <a href=\""+proboards.data("css_edit_url")+'">here</a> before you can proceed.')}for(var a={scheme_id:"current"},o=0;o<c.length;o++)a[c[o].variable.slice(1)]=n[c[o].variable].value.slice(1);$("#current_scheme").empty().append(proboards.color_scheme.build(a,0)),$('select[name="display_schemes"]').change(function(){var e=$(this).val();f($.extend(!0,[],t),"all"==e||"favorites"==e||"my_schemes"==e?e:"tag_"+e,1,$("#schemes")),h()}),$("#schemes .scheme").live("click",function(){var e=$(this).data().scheme,t=$(this).clone();t.attr("id","current_"+t.attr("id")),$("#current_scheme").empty().append(t),$("#current_scheme .scheme").data("scheme",e),p(e),u()}),$("#schemes .fav-star").live("click",function(){var e=$(this).next("div.scheme").attr("id").substr(7);void 0===r[e]?(r[e]={started_favorite:0,current_favorite:1},$(this).attr("src",favstar_active_url)):0==r[e].current_favorite?(r[e].current_favorite=1,$(this).attr("src",favstar_active_url)):(r[e].current_favorite=0,$(this).attr("src",favstar_dim_url))}),$(".customize_scheme_link, #current_scheme").click(function(e){e.preventDefault();var t=$("#current_scheme .scheme").data().scheme,i=$('<div class="etc_dialog"><div id="current_preview_scheme"></div><table><tr><td><div class="forum_header"><h3>Forum</h3></div><br /><div class="title_bars_header"><h3>Title Bars</h3></div><br /><div class="buttons_header"><h3>Buttons</h3></div><br /></td><td><div class="containers_header"><h3>Containers</h3></div><br /><div class="pagination_header"><h3>Pagination</h3></div><br /></td></tr></table></div>');if(void 0===t)i.text("Error: could not load selected color scheme.");else{var n=proboards.color_scheme.build(t,0);n.attr("id","preview_"+n.attr("id")),i.find("#current_preview_scheme").append(proboards.color_scheme.build(t,0));for(var a=0;a<c.length;a++)c[a].value=t[c[a].variable.slice(1)],void 0===c[a].value&&(c[a].value=""),i.find("."+c[a].section+"_header").append(theme_settings.gen_color(c[a],0));var o,r={};proboards.dialog("customize-scheme-dialog",{title:"Customize Scheme",html:i,height:540,width:600,open:function(){o=1},buttons:{"Apply Color Scheme":function(){for(s in o=0,$(this).dialog("close"),r)"title_bar_background_color"==s?theme_settings.options.gradient_background="#"+r[s]:"body_background_color"==s&&(theme_settings.options.page_background="#"+r[s]),r.hasOwnProperty(s)&&($("#current_preview_scheme .scheme").data().scheme[s]=r[s]);$("#current_scheme").html(proboards.color_scheme.build($("#current_preview_scheme .scheme").data("scheme"),0)),r={},d=1}},close:function(){1==o&&u(1)}}),theme_settings.setup_color_picker(".property.color > input",!1),theme_settings.bind_data_change(),$('.etc_dialog input[type="text"]').bind("change.data, change.color",function(){var e=$(this).closest(".property").data().item.variable.slice(1);r[e]=$(this).val(),$("#current_preview_scheme ."+e).css("background-color","#"+$(this).val())})}}),$(".scheme_refresh img").click(function(){d?proboards.confirm("Are you sure you want to reset your color scheme?",function(){$("#current_scheme").empty().append(proboards.color_scheme.build(a)),$("#current_scheme .scheme").attr("id","current_"+$("#current_scheme .scheme").attr("id")),u(),d=0,p(a)}):($("#current_scheme").empty().append(proboards.color_scheme.build(a)),$("#current_scheme .scheme").attr("id","current_"+$("#current_scheme .scheme").attr("id")),u(),d=0,p(a))}),theme_settings.setup_editor(0),void 0!==n["@title_bar_background_color"]?(theme_settings.options.gradient_background=n["@title_bar_background_color"].value,theme_settings.options.page_background=n["@body_background_color"].value):(theme_settings.options.gradient_background="#007bf7",theme_settings.options.page_background="#007bf7"),$(".help-icon").detach().appendTo("#forum-related .background-color label").show(),$(".property.background-image .combobox.presets").addClass("etc"),$(".property.background-image-texture .combobox.presets").addClass("etc"),$("#save-theme").click(function(e){$('input[name="css_submit"]').click()}),$('input[name="css_submit"]').click(function(e){saveButton(".half-editor.left",e,this,r),a=$("#current_scheme .scheme").data("scheme"),d=0})})},admin_themes_easy_layout=function(){var i=0;$(document).ready(function(){$("#template_layout_"+proboards.data("current_template_set")).addClass("selected"),$("#image_selector .avatar-wrapper").click(function(){$("#image_selector .avatar-wrapper").removeClass("selected"),$(this).addClass("selected"),$('input[name="template_set"]').val($(this).attr("id").split("_")[2]),i=0,proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")}),$("#image_selector .icon-wrapper").click(function(e){e.stopPropagation(),proboards.ajax({method:"post",url:proboards.data("layout_preview_url"),data:{id:$(this).closest(".avatar-wrapper").attr("id").split("_")[2]},success:function(e){var t="";if(0<e.file_paths.length)for(var i=0;i<e.file_paths.length;i++)t+='<img src="'+e.file_paths[i]+'" alt="Preview #'+i+'" title="Preview #'+i+'" />';else t="No Preview Images Found";proboards.dialog("layout-preview-dialog",{title:"Layout Preview",html:t,height:570,width:700})}})}),$("#save-theme").click(function(){$(".layout_form > form").submit()}),$(".layout_form > form").submit(function(e){var t=this;return 0==i&&(e.preventDefault(),proboards.data("dialog_text").length?proboards.form.gen_verify_box("layout-save-dialog","Verify &amp; Apply Layout",450,500,proboards.data("dialog_text"),"Delete","Verify & Apply",function(){i=1,proboards.unsaved_changes=0,$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),$(t).submit()}):(i=1,proboards.unsaved_changes=0,$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),$(t).submit())),$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),!0})})},admin_themes_export=function(){var o=[];$(document).ready(function(){function n(){5<$(".export_tags:checked").length?proboards.error("Error: Too many tags selected."):5==$(".export_tags:checked").length?$(".export_tags").not(":checked").attr("disabled","disabled"):$(".export_tags").removeAttr("disabled"),$(".tag_container").show()}function a(e){$(".thumbs .thumb").addClass("whiteout"),$(".thumbs .thumb .preview_image").empty(),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$.each(e,function(e){$("#thumb_"+this.order+" .preview_image").addClass("active_selection").html('<img src="'+proboards.data("library_upload_path")+"/"+this.thumb_url+'" alt="thumb_'+this.order+'" />').show().parent().removeClass("whiteout").show(),$('input[name="thumb_choice_'+this.order+'"]').val(1)}),$(".loading_gif").hide(),$(".thumb_container").show()}$("#select_computer").click(function(){$("#computer_container").show(),$("#select_export_option").hide(),$('input[name="mode"]').val("computer")}),$("#select_library").click(function(){$("#library_container").show(),$("#select_export_option").hide()}),$(".back_button").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#select_export_option").show()}),$("#select_new").click(function(){$("#update_container").hide(),$("#library_container_2").show(),$("#select_export_option_2").hide(),$('input[name="mode"]').val("new"),$('input[type="file"]').val(""),$('.export_tags, input[name="authorize"]').removeAttr("checked"),$(".preview_image, .or_text").hide(),$(".thumb td").removeClass("active_selection"),$(".primary.thumb .upload_box").addClass("active_selection"),$(".secondary.thumb .none_button").addClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".secondary.thumb, .thumb_container, .tag_container").show()}),$("#select_update").click(function(){$("#update_container").show(),$("#library_container_2").show(),$("#select_export_option_2").hide(),$('input[name="mode"]').val("update"),$('input[type="file"]').val(""),$('.export_tags, input[name="replacing"], input[name="authorize"]').removeAttr("checked"),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".preview_image, .or_text").show(),$(".thumb_container, .tag_container").hide()}),$(".back_button_2").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#library_container").hide(),$("#select_export_option").show()}),$(".back_button_3").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#select_export_option_2").show()}),$('input[name="replacing"]').change(function(){var t=$(this).val();$(".thumb_container").hide().after(proboards.processing_icon({alt:"preview_loading",class:"loading_gif"})),$("input.export_tags").prop("checked",!1);for(var e=proboards.data("tags")[t],i=0;i<e.length;i++)$('input[name="'+e[i].class+'"]').prop("checked",!0);n(),$('input[type="file"]').val(""),void 0===o[t]?proboards.ajax({url:proboards.route("admin_theme_get_thumbs",{theme_id:t}),success:function(e){o[t]=e.thumbs,a(o[t])}}):a(o[t])}),$(".export_tags").change(function(){n()}),$(".thumbs td").click(function(){($(this).hasClass("preview_image")&&!$(this).parent().hasClass("whiteout")||$(this).hasClass("upload_box")||$(this).hasClass("none_button"))&&($(this).addClass("active_selection"),$(this).siblings().removeClass("active_selection"),$(this).parent().find('input[type="hidden"]').val($(this).data("val")))}),$('#library_container_2 input[name="export"]').click(function(e){return"update"==$('input[name="mode"]').val()&&void 0===$('input[name="replacing"]:checked').val()?(proboards.error("You must select a theme to replace."),e.preventDefault(),!1):"new"!=$('input[name="mode"]').val()||$('input[name="thumb_1"]').val()?!!$('input[name="authorize"]').prop("checked")||(proboards.error("You must authorize this theme before you can export it."),e.preventDefault(),!1):(proboards.error("You must select at least one screenshot to upload with this theme before you can export it."),e.preventDefault(),!1)})})},admin_themes_manager=function(){$(document).ready(function(){$("div.theme-color_scheme .non_hover").each(function(){$(this).html(proboards.color_scheme.build(proboards.data("themes")[$(this).closest(".item").attr("id").split("-")[1]].color_scheme,0))}),$(".delete").on("click",function(e){var t=this,i=proboards.data("themes")[$(t).closest(".item").attr("id").split("-")[1]];e.preventDefault(),$("#delete-theme-container > strong").html(i.name),proboards.dialog("delete-theme-container",{width:550,title:"Delete Forum Theme",modal:!0,buttons:[{text:"Delete Forum Theme",id:"delete-theme-button",click:function(){"delete"!=$('input[name="verify"]').val().toLowerCase()?$.inputError($('input[name="verify"]'),'You must type "delete" in the box.'):proboards.ajax({url:i.delete_url,success:function(){$(t).parent().remove();var e=0;$("#theme-manager .item").each(function(){e++%2?$(this).addClass("even"):$(this).removeClass("even")})},complete:function(){$("#delete-theme-container").dialog("close")}})}}]}),$('input[name="verify"]').val("")}),$(".theme-size").on("click",function(e){var t=proboards.data("themes")[$(this).closest(".item").attr("id").split("-")[1]],i="<br /><table><tr><td>"+t.name+'</td><td style="text-align: right;">'+t.total_size.amount+" "+t.total_size.unit+' Total</td></tr><tr><td colspan="2"><div class="meter-container"><div class="meter css_color" style="width: '+t.css_percent+'%;"></div><div class="meter template_color" style="width: '+t.template_percent+'%;"></div><div class="meter image_color" style="width: '+t.image_percent+'%;"></div></div><span class="meter_text css_color"><span class="meter_number">'+t.css_size.amount+"</span>"+t.css_size.unit+' CSS</span><br /><span class="meter_text template_color"><span class="meter_number">'+t.template_size.amount+"</span>"+t.template_size.unit+' Templates</span><br /><span class="meter_text image_color"><span class="meter_number">'+t.image_size.amount+"</span>"+t.image_size.unit+" Images</span><br /></td></tr></table>";proboards.dialog("size-dialog",{title:"Theme Summary",html:i,height:350,width:504,buttons:{Done:function(){$(this).dialog("close")}}})}),$(".theme-enable").on("click",function(e){var t=$(this).closest(".item");proboards.ajax({url:proboards.data("themes")[t.attr("id").split("-")[1]].flags_url,data:{default:t.hasClass("default")?1:0,disabled:t.hasClass("disabled")?0:1},success:function(){t.hasClass("disabled")?t.removeClass("disabled"):t.addClass("disabled")}})}),$(".theme-default").on("click",function(e){e.preventDefault();var t=$(this).closest(".item"),i=proboards.data("themes")[t.attr("id").split("-")[1]];t.is(".default")||proboards.ajax({url:i.flags_url,data:{default:1,disabled:0},success:function(){$(".item.default").removeClass("default"),t.addClass("default"),t.removeClass("disabled")}})}),$(".permissions-summary").tipTip({content:function(e){var t=$(this).closest(".item"),i="",n=proboards.data("Theme_"+t.attr("id").split("-")[1]+"_hover");if(t.hasClass("default"))i="This is the default theme, and can be accessed by all members and guests";else{i="To access this theme, you must meet all the requirements below: <br /><br />";for(var a=n.length-1;-1<a;a--)i+="<b>"+n[a].name+"</b><br />",i+=n[a].permissions+"<br />"}return i}})})},admin_themes_new=function(){$(document).ready(function(){$("#select_default").click(function(){$(".options_containers").show(),$("#default_container").show(),$("#select_create_option").hide(),$('input[name="mode"]').val("default")}),$("#select_copy").click(function(){$(".options_containers").show(),$("#copy_container").show(),$("#select_create_option").hide(),$('input[name="mode"]').val("copy")}),$(".back_button").click(function(e){e.preventDefault(),$(".create_theme_containers").hide(),$("#select_create_option").show()}),$('select[name="copy"] > option').first().attr("disabled","disabled"),$("#template_layout_0").addClass("selected"),$("#image_selector .avatar-wrapper").click(function(){$("#image_selector .avatar-wrapper").removeClass("selected"),$(this).addClass("selected"),$('input[name="template_set"]').val($(this).attr("id").split("_")[2])}),$("#image_selector .icon-wrapper").click(function(e){e.stopPropagation(),proboards.ajax({method:"post",url:proboards.data("layout_preview_url"),data:{id:$(this).closest(".avatar-wrapper").attr("id").split("_")[2]},success:function(e){var t="";if(0<e.file_paths.length)for(var i=0;i<e.file_paths.length;i++)t+='<img src="'+e.file_paths[i]+'" alt="Preview #'+i+'" title="Preview #'+i+'" />';else t="No Preview Images Found";proboards.dialog("layout-preview-dialog",{title:"Layout Preview",html:t,height:570,width:700})}})}),$("form").submit(function(e){0==$('input[name="name"]').val().length?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),proboards.error("Please provide a name for your theme.")):"copy"==$('input[name="mode"]').val()&&-1==$('select[name="copy"]').val()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),proboards.error("Please select an existing theme to copy.")),$('input[type="submit"]').removeAttr("disabled")}),$('form input[name="name"]').on("keydown",function(e){e.which==Keys.enter&&(e.preventDefault(),$("form").trigger("submit"))}),$("#select_import").click(function(e){e.preventDefault();var n=proboards.dialog("import-dialog",{title:"Import Theme",modal:!0,width:600}),t=Math.min(10485760,proboards.data("available_theme_space"));pbFileUpload.init({enableDragAndDrop:!1},{acceptFileTypes:/\.(pbt)$/i,url:proboards.data("theme_import_url"),maxNumberOfFiles:1,maxFileSize:t}),$("#fileupload").on("fileuploaddone",function(e,t){var i=t.result[0].redirect;$(".fileupload-buttonbar",n).hide(),n.append('\t\t\t\t<br>\t\t\t\t<p>\t\t\t\t\tThis theme has been successfully installed.  All plugins will be\t\t\t\t\tturned on for this theme.  To change this, go to your <a href="'+proboards.data("plugins_manage_url")+'">Plugin Manage</a> page. \t\t\t\t\tYou may now edit the theme and customize it how you wish.\t\t\t\t</p>\t\t\t\t<br>\t\t\t'),n.dialog("option","buttons",{Finished:function(){$(this).dialog("close")}}).dialog("option","close",function(){window.location=i})})})})},admin_themes_settings=function(){$(document).ready(function(){$('input:not([name^="groups"]), select',".group-row").bind("change",function(){var e=$(this).closest(".group-row");$('input[name^="groups"]',e).val($('input[name^="group_color"]',e).val()+"-"+$('input[name^="group_stars"]',e).val()+"-"+$('select[name^="group_star_type"] option:selected',e).val()).trigger("change")}),$('input:not([name^="ranks"]), select',".rank-row").bind("change",function(){var e=$(this).closest(".rank-row");$('input[name^="ranks"]',e).val($('input[name^="rank_stars"]',e).val()+"-"+$('select[name^="rank_star_type"] option:selected',e).val()).trigger("change")}),$('.group-row input[name^="groups"]').each(function(){$(this).autoSubmit({url:proboards.data("admin_theme_groups_save_url"),statusElement:$(".state",$(this).closest(".group-row")),instantUpdate:!0})}),$('.rank-row input[name^="ranks"]').each(function(){$(this).autoSubmit({url:proboards.data("admin_theme_ranks_save_url"),statusElement:$(".state",$(this).closest(".rank-row")),instantUpdate:!0})}),$('input[name="default"]').change(function(){$("#permissions-delete").toggle(!$('input[name="default"]').prop("checked"))}),-1==$('select[name="permissions_level"]').val()&&$('select[name="permissions_level"]').val(0),$('select[name="permissions_level"] option[value="-1"]').remove(),$(".rate_button").on("click",function(){proboards.ajax({url:proboards.data("rate_dialog_url"),success:function(e){void 0===e.review&&(e.review={score:0,comments:""}),$("#rate-dialog textarea").val(e.review.comments);var t=e.review.score;n("#rate-dialog .star_rating",t),$("#rate-dialog .stars .star").on("click",function(){t=$(this).data("star"),n("#rate-dialog .star_rating",t)}),proboards.dialog("rate-dialog",{width:"auto",title:"Rate Forum Theme",buttons:[{text:"Submit",id:"rate-submit-button",click:function(){$("#rate-submit-button").attr("disabled","disabled"),proboards.ajax({url:proboards.data("rate_theme_url"),data:{score:t,comments:$("#rate-dialog textarea").val()},complete:function(){proboards.alert("Theme Rated","Thank you for rating this theme."),$("#rate-dialog").dialog("close")}})}}]}).dialog("open").show()}})});var t=$(".help_link");$('input[name="help_link"]').on("change",function(){var e=$(this).val();$.check_url(e)?t.attr("href",e).show():t.attr("href","#").hide()}).change(),$('#settings-container input[name="name"], textarea[name="description"], select[name="forum_title"], textarea[name="change_log"], input[name="help_link"]').autoSubmit({url:proboards.data("admin_theme_settings_save_url"),success:function(){"name"==$(this).attr("name")&&$('select[name="theme"] option:selected').text($(this).val())}}),$('input[name^="version_"]').change(function(){$(this).closest("form").find('input[name="version"]').val($(this).closest("form").find('input[name="version_major"]').val()+"."+$(this).closest("form").find('input[name="version_minor"]').val()+"."+$(this).closest("form").find('input[name="version_revision"]').val()).trigger("change")}).trigger("change"),$('input[name="version"]').autoSubmit({url:proboards.data("admin_theme_settings_save_url"),instantUpdate:!0,statusElement:$(".version-status")}),$("#save-theme").click(function(e){e.preventDefault();var t=$(".admin-content").overlay();proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight");var i=$(this).val(),n=this;$(this).attr("disabled","disabled"),$(this).val("Saving...");var a={},o=$("#settings-container form").serializeArray();$.each(o,function(){a[this.name]=this.value}),$('input[name="default"]').attr("checked")&&(a.default=1),$('input[name="disabled"]').attr("checked")&&(a.disabled=1),proboards.ajax({method:"post",url:proboards.route("admin_theme_flags_save",{theme_id:proboards.data("theme_id")}),data:a,success:function(e){$('select[name="theme"] option:selected').text(a.name),a.default&&(updateThemeDropdown(e.old_default),$("#permissions-delete").remove())},complete:function(){$(n).removeAttr("disabled"),$(n).val(i),t.remove()}})}),$(".delete-theme-link").bind("click",function(e){e.preventDefault(),proboards.dialog("delete-theme-container",{width:550,title:"Delete Forum Theme",modal:!0,buttons:[{text:"Delete Forum Theme",id:"delete-theme-button",click:function(){"delete"!=$('input[name="verify"]').val().toLowerCase()?$.inputError($('input[name="verify"]'),'You must type "delete" in the box.'):proboards.ajax({url:proboards.data("delete_theme_url"),success:function(){i("Theme successfully deleted.")},error:function(){i("There was an error.")}})}}]}),$('input[name="verify"]').val("")})});var i=function(e){$("#delete-theme-container").html(e+"<br />Please click the Continue button below to go to the default theme settings."),$("#delete-theme-button").text("Continue").unbind("click").bind("click",function(){$("#delete-theme-container").dialog("close")}),proboards.unsaved_changes=0,$("#delete-theme-container").bind("dialogclose",function(){window.location=proboards.data("admin_theme_settings_url")})},n=function(e,t){var i=100-t/5*100;i<100?$(e).css("left","-"+i+"px").parent().css("opacity","1"):$(e).css("left","-100px").parent().css("opacity",".5")},a=function(){$(this).parent().next().html(""!=$(this).val()?'<img src="'+proboards.data("group_stars")[$(this).val()]+'" alt="*" />':"")};$(document).ready(function(){if(!proboards.data("loaded-groups")){proboards.data("loaded-groups",!0),$("#groups-container select").each(a),$("#groups-container select").change(a);var e=proboards.data("group_stars");for(s in e)$('<img src="'+e[s]+'" />');$("#settings-group-list .disclaimer a").click(function(e){return e.preventDefault(),$("#confirm_dialog_div").html("You are about to reset all group settings to their default values."),proboards.dialog("confirm_dialog_div",{title:"Warning!",buttons:{OK:function(){$(".group-row").each(function(){var e=$(this).attr("class"),t=e.match(/group\-stars\-(\d*)/)[1],i=e.match(/group\-star\-type\-(\d*)/)[1],n=e.match(/group\-color\-([A-Fa-f0-9]*)/)[1];$('input[type="text"]',this).val(t),$("select",this).val(i),$("select",this).each(a),$('.group-color input[type="hidden"]',this).val(n),$(".group-color .color_preview",this).attr("style",$(".group-default-color .color_preview",this).attr("style")),$(".group-color .color_preview",this).html($(".group-default-color .color_preview",this).html()+(""!=n?'<div class="delete-wrapper"><div class="delete"></div></div>':""))}),proboards.ajax({url:proboards.data("custom_groups_reset_url"),data:{reset:!0}}),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).dialog("open"),!1}),$("#settings-rank-list .disclaimer a").click(function(e){return e.preventDefault(),$("#confirm_dialog_div").html("You are about to reset all rank settings to their default values.").dialog({title:"Warning!",buttons:{OK:function(){$(".rank-row").each(function(){var e=$(this).attr("class"),t=e.match(/rank\-stars\-(\d*)/)[1],i=e.match(/rank\-star\-type\-(\d*)/)[1];$('input[type="text"]',this).val(t),$("select",this).val(i),$("select",this).each(a)}),proboards.ajax({url:proboards.data("custom_ranks_reset_url"),data:{reset:!0}}),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).dialog("open"),!1}),$("#color_picker_div").colorPicker({autoUpdate:!1}),$(".group-color .color_preview .delete").live("click",function(e){e.stopPropagation(),$(this).parent().parent().css("background-color","#ffffff"),$(this).parent().parent().prev().val(""),$(this).parent().parent().prev().change(),$(this).parent().parent().html('<div class="text">None</div>')}),$(".group-color .color_preview").live("click tabFocus",function(){var t=this,e=$(this).prev().val(),i=$(this).offset();$("#color_picker_div").colorPicker("show",{hex:e,offset:{left:i.left,top:i.top+22},update:function(e){$("#colorPicker-preview").css({backgroundColor:"#"+e}),$(t).css("background-color","#"+e),$(t).html('<div class="delete-wrapper"><div class="delete"></div></div>'),$(t).prev().val(e),$(t).prev().change(),$(t).focus().select(),$(this).colorPicker("hide")}}),$("#colorPicker-input input").focus().select()})}}),$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0})}),$(document).ready(function(){function i(e){for(var i=$(e).data("action"),t=proboards.data("image_list"),n=proboards.data("theme_list"),a='Select the images you want to export:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<t.length;o++)a+='<label><input type="checkbox" name="images[]" value="'+t[o].value+'"'+(t[o].present?' checked="checked"':"")+">"+t[o].name+"</label><br />",12!=o&&25!=o||(a+="</td><td>");a+='</td></tr></table><br /><br /> Select a theme to export the selected images to: <br /><br /><select name="theme">';for(o=0;o<n.length;o++)n[o].id!=proboards.data("theme_id")&&(a+='<option value="'+n[o].id+'">'+n[o].name+"</option>");a+="</select>",proboards.dialog("advanced-export-dialog",{title:"Export Images",html:a,height:450,width:500,buttons:[{id:"advanced-export-button",text:"Export Images",click:function(){var t=this;proboards.confirm("Are you sure you want to replace all the selected images?",function(){var e=$("#advanced-export-dialog input, #advanced-export-dialog select").serializeArray();e.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:e,success:function(){proboards.alert("Success","Export Successful")},complete:function(){$(t).dialog("close")}})},{title:"Confirm"})}}]}),r("#advanced-export-dialog","#advanced-export-button"),$("#advanced-export-dialog input").change(function(){r("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .select_all").click(function(){$('input[name="images[]"]').attr("checked","checked"),r("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .deselect_all").click(function(){$('input[name="images[]"]').removeAttr("checked"),r("#advanced-export-dialog","#advanced-export-button")})}function r(e,t){0<$(e+" input:checked").length?$(t).button("enable"):$(t).button("disable")}$(".section h3").click(function(){var e=$(".arrow",this),t=$(this).parents(".section");e.hasClass("down")?(e.addClass("right"),e.removeClass("down"),$(".image-modules",t).hide("blind")):(e.addClass("down"),e.removeClass("right"),$(".image-modules",t).show("blind"))}),$("#images-container .section h3 .default").click(function(e){e.preventDefault(),e.stopPropagation();var i=$(this).parents(".section");proboards.confirm("Are you sure you wish to delete all custom images and links in this section?",function(){var t=[];$(".image-module",i).each(function(){var e=proboards.image_module.get_id($(this));"new"!=e.substr(0,3)&&t.push(e)}),t.length&&proboards.ajax({url:proboards.data("image-module-reset-url"),data:{ids:t.join(","),theme_id:proboards.data("theme_id")},success:function(e){proboards.image_module.apply_defaults(e.images)}})})}),$("#images-container .reset-all").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to delete all custom images and links?",function(){var t=[];$(".image-module").each(function(){var e=proboards.image_module.get_id($(this));"new"!=e.substr(0,3)&&t.push(e)}),t.length&&proboards.ajax({url:proboards.data("image-module-reset-url"),data:{ids:t.join(","),theme_id:proboards.data("theme_id")},success:function(e){proboards.image_module.apply_defaults(e.images)}})})}),$("#images-container a.import").bind("click",function(e){e.preventDefault();for(var i=$(this).data("action"),t=proboards.data("image_list"),n=proboards.data("theme_list"),a='Select the images you want to import:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<t.length;o++)a+='<label><input type="checkbox" name="images[]" value="'+t[o].value+'">'+t[o].name+"</label><br />",12!=o&&25!=o||(a+="</td><td>");a+='</td></tr></table><br /><br /> Select a theme to import the selected images from: <br /><br /><select name="theme">';for(o=0;o<n.length;o++)n[o].id!=proboards.data("theme_id")&&(a+='<option value="'+n[o].id+'">'+n[o].name+"</option>");a+="</select>",proboards.dialog("advanced-import-dialog",{title:"Import Images",html:a,height:450,width:500,buttons:[{id:"advanced-import-button",text:"Import Images",click:function(){var t=this;proboards.confirm("Are you sure you want to replace all the selected images?",function(){var e=$("#advanced-import-dialog input, #advanced-import-dialog select").serializeArray();e.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:e,success:function(){location.reload()},complete:function(){$(t).dialog("close")}})},{title:"Confirm"})}}]}),r("#advanced-import-dialog","#advanced-import-button"),$("#advanced-import-dialog input").change(function(){r("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .select_all").click(function(){$('input[name="images[]"]').attr("checked","checked"),r("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .deselect_all").click(function(){$('input[name="images[]"]').removeAttr("checked"),r("#advanced-import-dialog","#advanced-import-button")})}),$("#images-container a.export").bind("click",function(e){e.preventDefault();var t=$(this);proboards.unsaved_changes?proboards.confirm("You have unsaved changes.  If you try to export now, your changes will not be included.  Continue?",function(){i(t)},{title:"Unsaved Changes"}):i(t)});var o="div.category-3",s=function(){var i='<option value="">None</option>';$(".image-module:not(.new,.deleted)",$("#images-container "+o)).each(function(){var e=proboards.image_module.get_id(this),t=$(".name .text",this).html();i+='<option value="'+e+'">'+proboards.escape_html(t)+"</option>"}),$("#groups-container select").each(function(){var e=$(this).val();$(this).html(i),$(this).val(e)}),$("#groups-container select").each(a)};$(".image-module").live("module.update",function(e,t){if($(this).parents("div.category-0").length&&0!=$('select[name="forum_title"]').val()&&(void 0!==t.type&&"default"==t.type?$('select[name="forum_title"]').val(1):$('select[name="forum_title"]').val(2)),$(this).parents(o).length){var i=proboards.image_module.get_id(this),n=t?t.url:$(".image img",this).attr("src"),a=proboards.data("group_stars");a[i]=n,proboards.data("group_stars",a),$(".group-default-star.star-type-"+i+" img").attr("src",n),$(".rank-default-star.star-type-"+i+" img").attr("src",n),s()}}),$(".image-module").live("module.delete",function(){if($(this).parents(o).length){var e=proboards.image_module.get_id(this),t=proboards.data("group_stars");delete t[e],proboards.data("group_stars",t),$(".group-default-star.star-type-"+e+" img").attr("src",""),$(".rank-default-star.star-type-"+e+" img").attr("src",""),s()}})})},theme_settings={options:{previewContents:null,selectors:{},stylesheet:null,styleElem:null,stylesheetData:null,stylesheetW:null,styleElemW:null,stylesheetDataW:null,stylesheetM:null,validations:{background:"background","background-color":"hexCode","background-image":"urlSurround","banner-image":"urlSurround","background-image-texture":"urlSurround",border:"border","border-width":"borderWidth","border-style":"borderStyle","border-color":"hexCode","border-radius":"borderRadius","box-shadow":"boxShadow",height:"size",color:"hexCode",font:"font","font-style":"fontStyle","font-weight":"fontWeight","font-size":"fontSize","font-family":"fontFamily","text-align":"textAlign","text-decoration":"textDecoration","font-variant":"fontVariant","text-transform":"textTransform","text-shadow":"boxShadow",width:"size"},zoomSetup:!1,gradient_background:"#000000",page_background:"#000000",banner_text:"#000000"},build_editor:function(r){var s=this;void 0===r&&(r=0);var l=function(e,t,i){void 0===i&&(i=0);for(var n=0;n<e.length;n++){var a=e[n],o=$('<div class="property_wrapper '+proboards.escape_html(a.type)+'" />');t.append(o),"section"===a.type?(o.attr("class","section"),a=$.extend({name:"Section"},a),0===i&&o.addClass("heading"),o.append("<h2>"+(0!==i?'<span class="arrow right"><span></span></span>':"")+'<span class="section_name">'+a.name+"</span></h2>"),void 0!==a.children&&l(a.children,o,i+1),o.data("item",a)):s.select_editor_options(o,a,r)}0===i&&t.append('<div style="margin-bottom: 0px;">&nbsp;</div>')};l(JSON.parse(proboards.data("editor_forum")),$("#forum-related"))},select_editor_options:function(e,t,i){if("background"===(t=1==i?$.extend({value:""},t):$.extend({value:this.get_variable_value(t.variable)},t)).type)if(1==i){var n=t.name;void 0===t.name&&(n="Background"),e.append(this.gen_color($.extend({},t,{name:n,value:""}),1)),e.append(this.gen_background_image($.extend({},t,{name:n,value:""}),1)),e.append(this.gen_background_attachment($.extend({},t,{name:n,value:""}),1)),e.append(this.gen_background_repeat($.extend({},t,{name:n,value:""}),1)),e.append(this.gen_background_position($.extend({},t,{name:n,value:""}),1))}else e.append(this.gen_color($.extend({name:"Background Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1)),e.append(this.gen_background_image($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-image")}),1)),e.append(this.gen_background_attachment($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-attachment")}),1)),e.append(this.gen_background_repeat($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-repeat")}),1)),e.append(this.gen_background_position($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-position")}),1));else if("background-color"===t.type)e.append(this.gen_color($.extend({name:"Background Color"},t)));else if("background-image"===t.type)e.append(this.gen_background_image(t));else if("banner-image"===t.type)e.append(this.gen_banner_image(t));else if("background-image-texture"===t.type)e.append(this.gen_background_image_texture(t));else if("background-attachment"===t.type)e.append(this.gen_background_attachment(t));else if("background-repeat"===t.type)e.append(this.gen_background_repeat(t));else if("background-position"===t.type)e.append(this.gen_background_position(t));else if("border"===t.type)if(1==i){n=t.name;void 0===t.name&&(n="Border"),e.append(this.gen_border_width($.extend({},t,{name:n},{value:""}),!1,1)),e.append(this.gen_border_style($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:n},{value:""}),1))}else e.append(this.gen_border_width($.extend(t,{value:this.get_variable_multivalue(t.variable,"border-width")}),!1,1)),e.append(this.gen_border_style($.extend(t,{value:this.get_variable_multivalue(t.variable,"border-style")}),1)),e.append(this.gen_color($.extend({name:"Border Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1));else if("border-width"===t.type)e.append(this.gen_border_width(t));else if("border-style"===t.type)e.append(this.gen_border_style(t));else if("border-color"===t.type)e.append(this.gen_color($.extend({name:"Color"},t)));else if("border-radius"===t.type)e.append(this.gen_border_radius(t));else if("box-shadow"===t.type)if(1==i){n=t.name;void 0===t.name&&(n="Shadow"),e.append(this.gen_shadow_size($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_shadow_position($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:n},{value:""}),1))}else{var a=this.get_shadow_dimensions(t.variable);e.append(this.gen_shadow_size($.extend(t,{value:a.size}),1)),e.append(this.gen_shadow_position($.extend(t,{value:a.position}),1)),e.append(this.gen_color($.extend({name:"Shadow Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1))}else if("color"===t.type)e.append(this.gen_color($.extend({name:"Text Color"},t)));else if("height"===t.type)e.append(this.gen_size($.extend({name:"Height"},t)));else if("width"===t.type)e.append(this.gen_size($.extend({name:"Width"},t)));else if("font"===t.type)if(1==i){n=t.name;void 0===t.name&&(n="Font"),e.append(this.gen_font_style($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_font_weight($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_font_size($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_font_family($.extend({},t,{name:n},{value:""}),1))}else e.append(this.gen_font_style($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-style")}),1)),e.append(this.gen_font_weight($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-weight")}),1)),e.append(this.gen_font_size($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-size")}),1)),e.append(this.gen_font_family($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-family")}),1));else if("font-style"===t.type)e.append(this.gen_font_style(t));else if("font-variant"===t.type)e.append(this.gen_font_variant(t));else if("text-transform"===t.type)e.append(this.gen_text_transform(t));else if("font-weight"===t.type)e.append(this.gen_font_weight(t));else if("font-size"===t.type)e.append(this.gen_font_size(t));else if("font-family"===t.type)e.append(this.gen_font_family(t));else if("text-decoration"===t.type)e.append(this.gen_text_decoration(t));else if("text-align"===t.type)e.append(this.gen_text_align(t));else if("text-shadow"===t.type)if(1==i){n=t.name;void 0===t.name&&(n="Text Shadow"),e.append(this.gen_shadow_size($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_shadow_position($.extend({},t,{name:n},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:n},{value:""}),1))}else{a=this.get_shadow_dimensions(t.variable);e.append(this.gen_shadow_size($.extend({name:"Text Shadow Size"},t,{value:a.size}),1)),e.append(this.gen_shadow_position($.extend({name:"Text Shadow Position"},t,{value:a.position}),1)),e.append(this.gen_color($.extend({name:"Text Shadow Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1))}},gen_color:function(e,t){var i=$.extend({name:"Color"},e);void 0===t&&(t=0),"#"==i.value.charAt(0)&&(i.value=i.value.substr(1));var n=proboards.escape_html(i.name)+(t?" Color":"");return $('<div class="property color"><label title="'+n+'">'+n+'</label><input class="width-7" type="text" value="'+proboards.escape_html(i.value)+'" /></div>').data("item",i)},gen_background_image:function(e,t){var i=$.extend({name:"Background Image"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Image":"");i.presets=1;var a=i.value;return"url("==a.slice(0,4)&&(a=a.slice(5,-2)),$('<div class="property background-image"><label title="'+n+'">'+n+'</label><span class="style-wrapper">'+(i.presets?'<span class="combobox presets"><input class="width-20" type="text" value="'+proboards.escape_html(a)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-background-image-menu"></span>':'<input class="width-20" type="text" value="'+proboards.escape_html(a)+'" />')+' <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="background-image" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_background_image_texture:function(e,t){var i=$.extend({name:"Background Image"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Image":""),a=i.value;return"url("==a.slice(0,4)&&(a=a.slice(5,-2)),$('<div class="property background-image-texture"><label title="'+n+'">'+n+'</label><span class="style-wrapper"><span class="combobox presets background-texture"><input class="width-20" type="text" value="'+proboards.escape_html(a)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-background-image-texture-menu"></span> <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="background-image-texture" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_banner_image:function(e,t){var i=$.extend({name:"Banner Image"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Image":""),a=i.value;return"url("==a.slice(0,4)&&(a=a.slice(5,-2)),$('<div class="property banner-image"><label title="'+n+'">'+n+'</label><span class="style-wrapper"><span class="combobox presets banner"><input class="width-20" type="text" value="'+proboards.escape_html(a)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-banner-image-menu"></span> <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="banner-image" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_background_repeat:function(e,t){var i=$.extend({name:"Background Repeat"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Repeat":""),a=$('<div class="property background-repeat"><label title="'+n+'">'+n+'</label><select><option value="">-- Select --</option><option value="repeat">repeat</option><option value="repeat-x">repeat horizontally</option><option value="repeat-y">repeat vertically</option><option value="no-repeat">no repeat</option></select></div>').data("item",i);return a.find("> select").val(i.value),a},gen_background_attachment:function(e,t){var i=$.extend({name:"Background Attachment"},e);void 0===t&&(t=0);var n=$.unique_id(),a=$.unique_id(),o=proboards.escape_html(i.name)+(t?" Attachment":""),r=$('<div class="property background-attachment"><label title="'+o+'">'+o+'</label><span class="style-wrapper"><input type="radio" name="'+n+'" id="'+n+'" value="fixed" /><label for="'+n+'">Fixed</label>&nbsp;<input type="radio" name="'+n+'" id="'+a+'" value="scroll" /><label for="'+a+'">Scroll with Page</label></span></div>').data("item",i);return r.find('input[value="'+i.value+'"]').attr("checked","checked"),r},gen_background_position:function(e,t){var i=$.extend({name:"Background Position"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Position":"");return $('<div class="property background-position"><label title="'+n+'">'+n+'</label><span class="style-wrapper img-menu"><input type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/> <span class="combobox background-position-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-position-menu"></span></span></div>').data("item",i)},gen_border_width:function(e,t,i){var n=$.extend({name:"Border Width"},e);void 0===t&&(t=!0),void 0===i&&(i=0);var a=proboards.escape_html(n.name)+(i?" Width":""),o=this.get_multidimensional_value(n.value);return $('<div class="property border-width"><label title="'+a+'">'+a+'</label><span class="style-wrapper img-menu">'+(t?'<input class="width-6" name="width" type="text" value="'+proboards.escape_html(o.value)+'"/> <span class="combobox border-width-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-sides-menu"></span><input type="hidden" name="type" value="'+o.flags+'"/>':'<input class="width-6" name="width" type="text" value="'+proboards.escape_html(n.value)+'"/>')+"</span></div>").data("item",n)},gen_border_style:function(e,t){var i=$.extend({name:"Border Style"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Style":""),a=$('<div class="property border-style"><label title="'+n+'">'+n+'</label><select><option value="">-- Select --</option><option value="none">none</option><option value="dashed">dashed</option><option value="dotted">dotted</option><option value="double">double</option><option value="groove">groove</option><option value="hidden">hidden</option><option value="inset">inset</option><option value="outset">outset</option><option value="ridge">ridge</option><option value="solid">solid</option></select></div>').data("item",i);return a.find("select").val(i.value),a},gen_border_radius:function(e){var t=$.extend({name:"Border Radius"},e),i=this.get_multidimensional_value(t.value),n=proboards.escape_html(t.name);return $('<div class="property border-radius"><label title="'+n+'">'+n+'</label><span class="style-wrapper img-menu"><input class="width-6" name="radius" type="text" value="'+proboards.escape_html(i.value)+'"/> <span class="combobox border-radius-button image-button">'+proboards.get_image({src:"/admin/themes/corners/border-radius-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-corners-menu"></span><input type="hidden" name="type" value="'+i.flags+'"/></span></div>').data("item",t)},gen_shadow_position:function(e,t){var i=$.extend({name:"Shadow Position"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Position":"");return $('<div class="property box-shadow-position"><label title="'+n+'">'+n+'</label><span class="style-wrapper img-menu"><input type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/> <span class="combobox shadow-position-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-position-menu"></span></span></div>').data("item",i)},gen_shadow_size:function(e,t){var i=$.extend({name:"Shadow Size"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Size":""),a=$('<div class="property box-shadow-size"><label title="'+n+'">'+n+'</label><select><option value="">-- Select --</option><option value="none">none</option><option value="small">small</option><option value="medium">medium</option><option value="large">large</option></select></div>').data("item",i);return a.find("select").val(i.value),a},gen_size:function(e){var t=$.extend({name:"Size"},e),i=proboards.escape_html(t.name);return $('<div class="property size"><label title="'+i+'">'+i+'</label><input class="width-6" type="text" value="'+proboards.escape_html(t.value)+'" /></div>').data("item",t)},gen_font_style:function(e,t){var i=$.extend({name:"Font Style"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Style":"");return $('<div class="property font-style"><label title="'+n+'">'+n+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-style-menu"></span></div>').data("item",i)},gen_font_variant:function(e){var t=$.extend({name:"Small Caps"},e),i=proboards.escape_html(t.name);return $('<div class="property font-variant"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-variant-menu"></span></div>').data("item",t)},gen_text_transform:function(e){var t=$.extend({name:"Font Case"},e),i=proboards.escape_html(t.name);return $('<div class="property text-transform"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-text-transform-menu"></span></div>').data("item",t)},gen_font_weight:function(e,t){var i=$.extend({name:"Font Weight"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Weight":"");return $('<div class="property font-weight"><label title="'+n+'">'+n+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-weight-menu"></span></div>').data("item",i)},gen_font_size:function(e,t){var i=$.extend({name:"Font Size"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Size":"");return $('<div class="property font-size"><label title="'+n+'">'+n+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-size-menu"></span><input type="hidden" name="$[leaf_id]_line-height" value="$[leaf.css.properties.line_height]" /></div>').data("item",i)},gen_font_family:function(e,t){var i=$.extend({name:"Font Family"},e);void 0===t&&(t=0);var n=proboards.escape_html(i.name)+(t?" Family":"");return $('<div class="property font-family"><label title="'+n+'">'+n+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-family-menu"></span></div>').data("item",i)},gen_text_decoration:function(e){var t=$.extend({name:"Text Decoration"},e),i=proboards.escape_html(t.name);return $('<div class="property text-decoration"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-text-decoration-menu"></span></div>').data("item",t)},gen_text_align:function(e){var t=$.extend({name:"Text Align"},e),i=proboards.escape_html(t.name),n=$('<div class="property text-align"><label title="'+i+'">'+i+'</label><select><option value="">-- Select --</option><option value="left">left</option><option value="right">right</option><option value="center">center</option><option value="justify">justify</option></select></div>').data("item",t);return n.find("select").val(t.value),n},get_variable_value:function(e){return void 0===this.options.variables[e]?"":this.options.variables[e].value},get_variable_multivalue:function(e,t){if(void 0===this.options.variables[e])return"";var i=this.options.variables[e].rule.value.value;if(!(i.length&&i[0]instanceof less.tree.Expression))return"";i=i[0].value;var n="";if("font-family"===t||"font-weight"===t||"font-style"===t){var a=$("<span />");return a.css("font",this.options.variables[e].value),n=a.css(t),a.remove(),n}for(var o=0;o<i.length;++o)switch(t){case"color":if(i[o]instanceof less.tree.Color)return i[o].toCSS({frames:[]}).replace(/^#/,"");break;case"background-image":if(i[o]instanceof less.tree.URL)return i[o].value.value;break;case"background-attachment":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/scroll|fixed/))return i[o].value;break;case"background-position":i[o]instanceof less.tree.Keyword&&i[o].value.match(/top|left|bottom|right|center/)&&(n+=(""!=n?" ":"")+i[o].value);case"shadow-dimensions":case"border-width":i[o]instanceof less.tree.Dimension&&(n+=(""!=n?" ":"")+i[o].value+(null!=i[o].unit?i[o].unit:""));break;case"background-repeat":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/repeat|repeat-x|repeat-y|no-repeat/))return i[o].value;break;case"font-size":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/xx-small|x-small|small|medium|large|x-large|xx-large|smaller|larger/))return i[o].value;if(i[o]instanceof less.tree.Dimension)return i[o].value+(null!=i[o].unit?i[o].unit:"");break;case"border-style":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/hidden|dotted|dashed|solid|double|groove|ridge|inset|outset/))return i[o].value;break;case"font-weight":if((i[o]instanceof less.tree.Keyword||i[o]instanceof less.tree.Anonymous)&&i[o].value.match(/normal|bold|bolder|lighter|\d{1}00/))return i[o].value}return n},get_multidimensional_value:function(e){var t={value:"",flags:""},i=e.split(" ");if(i.length){for(var n=0;n<i.length;++n){var a=parseFloat(i[n]),o=isNaN(a)||0==a?0:1;""===t.value&&o&&(t.value=i[n]),t.flags+=o}1===i.length?t.flags+=t.flags+t.flags+t.flags:2===i.length?t.flags+=t.flags:2===i.length&&(t.flags+="0")}return t},get_shadow_dimensions:function(e){var t={size:"",position:""},i=this.get_variable_multivalue(e,"shadow-dimensions").split(" ");if(i.length){var n={"":"none",0:"none","0px":"none","2px":"small","4px":"medium","6px":"large"},a=function(e,t){return 0<(e=parseInt(e))?t?"bottom":"right":e<0?t?"top":"left":"center"};t.position=a(i[0])+" "+a(i[1],!0),t.size=void 0!==n[i[2]]?n[i[2]]:""}return t},setup_editor:function(e){this.options.selectors=proboards.data("selectors"),this.options.stylesheet=proboards.data("css_forum"),this.options.stylesheetW=proboards.data("css_wysiwyg"),this.options.stylesheetM=proboards.data("css_mobile"),this.setup_variables(),this.build_editor(e),this.setup_alternating_bg(),this.setup_collapsable("#settings .section .section h2"),this.setup_color_picker(".property.color > input"),this.setup_preview(e),this.setup_image_selector(proboards.data("bg_presets"),{imgPath:proboards.image_path()+"/gradients/",listId:"c-background-image-menu",listClass:"bg-presets"}),this.setup_image_selector(proboards.data("banner_presets"),{imgPath:proboards.image_path()+"/banners/",listId:"c-banner-image-menu",listClass:"banner-presets"}),this.setup_image_selector(proboards.data("bg_presets_texture"),{imgPath:proboards.image_path()+"/banners/",listId:"c-background-image-texture-menu",listClass:"banner-presets"}),this.apply_image_menu_values(),void 0!==e&&1==e||this.bind_data_change(),this.bind_upload_buttons(".bg-upload",e);var t=$(".combobox");this.setup_comboboxes(t,"simple",e),this.setup_comboboxes(t.filter(".image-button"),"image",e),this.setup_comboboxes(t.filter(".banner"),"banner",e),this.setup_comboboxes(t.filter(".background-texture"),"background-texture",e)},setup_comboboxes:function(e,t,a,i){var o=this,n=(n={simple:{onOpen:function(){if(this.hasClass("etc"))$("#c-background-image-menu li").css("backgroundColor",o.options.gradient_background);else if(this.hasClass("presets")){var e="";e=0!=this.closest(".property").siblings().length?this.closest(".property_wrapper").find(".color input").val():this.closest(".property_wrapper").prev().find(".color input").val(),e=validate.hexCode(e)||"transparent",$("#c-background-image-menu li").css("backgroundColor",e)}},onClick:function(e){var t=this.find("input");t.val($(e).text()),void 0!==a&&1==a||o.trigger_data_change(t)}},image:{onClick:function(e){"img"!=e.nodeName.toLowerCase()&&(e=$("img",e).get(0));var t=$(e).attr("alt"),i=$(e).attr("src"),n=this.siblings("input");0<n.filter('[type="hidden"]').length&&(n=n.filter('[type="hidden"]')),n.val(t),this.find("img").attr("src",i),void 0!==a&&1==a||o.trigger_data_change(n)}},banner:{onOpen:function(){var e="#"+$(this).closest(".property_wrapper").prev().find("input").val();$("#c-banner-image-menu li").css("background-color",e)},onClick:function(e){var t=this.find("input");t.val($(e).text()),void 0!==a&&1==a||o.trigger_data_change(t)}},"background-texture":{onOpen:function(){if(this.hasClass("etc"))$("#c-background-image-texture-menu li").css("backgroundColor",o.options.page_background);else if(this.hasClass("presets")){var e=this.closest(".section").find("div.color input"),t="transparent";0<e.length&&""!=e.val()&&(t="#"+e.val()),$("#c-background-image-texture-menu li").css("backgroundColor",t)}},onClick:function(e){var t=this.find("input");t.val($(e).text()),void 0!==a&&1==a||o.trigger_data_change(t)}}})[t]||{},r=$.extend({position:{my:"right top",at:"right bottom",of:"self",collision:"flipfit",offset:"0 2"}},n,i);$(e).combobox(r)},setup_image_selector:function(e,t){for(var i=t.imgPath,n=t.imgType||"png",a=t.listId,o=t.listClass,r=0;r<e.length;r++)e[r]=i+e[r]+"."+n;proboards.preload(e);var s='<li alt="none" title="none"></li>';for(r=0;r<e.length;r++)s+='<li alt="'+e[r]+'" title="'+e[r]+"\">url('"+e[r]+"')</li>";$(".content-container:first").append('<ul id="'+a+'" class="hide c-menu '+o+'">'+s+"</ul>");var l="#c-background-image-menu"==a?"repeat-x":"repeat";$("#"+a+" li").each(function(){var e=$(this).text();$(this).css({backgroundImage:e,backgroundRepeat:l,backgroundPosition:"left center",color:"transparent"})})},setup_variables:function(){var e=this;for(s in e.options.stylesheetData=proboards.css.parse(e.options.stylesheet),e.options.stylesheetDataW=proboards.css.parse(e.options.stylesheetW),e.options.variables=proboards.css.variables(e.options.stylesheetData),e.options.variableSelectors=proboards.css.variableSelectors(e.options.stylesheetData),e.options.variableSelectorsW=proboards.css.variableSelectors(e.options.stylesheetDataW),e.options.variableSelectorsW)void 0!==e.options.variableSelectors[s]?$.extend(e.options.variableSelectors[s],e.options.variableSelectorsW[s]):e.options.variableSelectors[s]=e.options.variableSelectorsW[s];for(s in e.options.variableSelectors){var t=[];for(var i in e.options.variableSelectors[s])t.push(i);e.options.variableSelectors[s]=t.join(",")}},apply_image_menu_values:function(){for(var a=[{type:"background-position-button",input:"background-position",menu:"c-position-menu"},{type:"border-radius-button",input:"border-radius-type",menu:"c-corners-menu"},{type:"border-width-button",input:"border-width-type",menu:"c-sides-menu"},{type:"shadow-position-button",input:"shadow-position",menu:"c-position-menu"},{type:"text-shadow-position-button",input:"text-shadow-position",menu:"c-position-menu"}],o=0;o<a.length;o++)$("."+a[o].type).each(function(){var e=$(this).parent(),t=$('input[type="hidden"]',e);t.length||(t=$('input[type="text"]',e));var i=$("#"+a[o].menu+' li img[alt="'+t.val()+'"]');if(0<i.length){var n=i.attr("src");$("img",this).attr("src",n)}})},bind_data_change:function(){var e=this;$('#settings input[type!="file"], #settings select, .etc_dialog input[type="text"]').bind("change.data change.color",function(){e.trigger_data_change($(this))})},bind_upload_buttons:function(selector,builder){var self=this,url=proboards.data("image-module-upload-url");proboards.data("custom_image_category_id")&&(url+="/id/new-"+proboards.data("custom_image_category_id")),proboards.data("theme_id")&&(url+="/theme_id/"+proboards.data("theme_id")),1==builder?$(selector).on("change",function(){$(this).closest(".style-wrapper").find('input[type="text"]').val("url('http://your.file/here.png')")}):$(selector).fileupload({maxFileSize:proboards.data("image_size_limit"),acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),add:function(e,t){$(this).closest(".style-wrapper").find(".status").html('<img alt="Uploading image..." src="'+proboards.image_module.image_pending()+'">'),t.submit()},done:function(e,t){var i=t.result.cssUrl,n=$(this).closest(".style-wrapper"),a=n.find('input[type="text"]');a.val(i),a.trigger("change"),self.bind_upload_buttons(selector),n.find(".status").html("")},fail:function(e,t){var i="Upload failed.",n=t&&$.isArray(t.files)&&t.files.length?t.files[0].error:"";if("maxFileSize"==n)i="The file exceeds the maximum size of "+$.byteSize(t.maxFileSize)+".";else if("acceptFileTypes"==n)i="Filetype not allowed.";else if(t&&t.result&&"string"==typeof t.result.responseText){var a=$.parseJSON(t.result.responseText);a&&a.error&&(i=a.error)}proboards.error(i),$(this).closest(".style-wrapper").find(".status").html("")},url:url,dropZone:null,sequentialUploads:!0,dataType:"json"})},setup_alternating_bg:function(e){void 0===e?$(".heading").each(function(){$(this).children("div").filter(":even").css("background-color","#EEEEEE").end().filter(":odd").css("background-color","transparent")}):$(e).closest(".heading").children("div").filter(":even").css("background-color","#EEEEEE").end().filter(":odd").css("background-color","transparent")},setup_color_picker:function(e,t){void 0===t&&(t=!0),$(e).colorPickMe({update:function(e){$(this).trigger("change.color")}},{allowTransparent:t,autoUpdate:!1})},setup_collapsable:function(e,t){var i=$(e);void 0===t&&i.siblings("div").hide(),i.bind("click",function(e){$(".arrow",this).hasClass("down")?($(this).siblings("div").hide(),$(".arrow",this).removeClass("down").addClass("right")):($(this).siblings("div").show(),$(".arrow",this).removeClass("right").addClass("down"))})},setup_preview:function(o){var r,s=this,e=function(){var e=s.options.previewContents=$("#preview iframe").contents(),t=e.get(0);if(""!=proboards.data("css_style")&&t){(n=t.getElementById("forum_style"))&&n.setAttribute("href",proboards.data("css_style"));var i="//storage.proboards.com/forum/css/0/forum_base.css";0==$('link[href="'+i+'"]').length&&$(n).before('<link rel="stylesheet" type="text/css" media="screen" href="'+i+'">')}if(""!=proboards.data("css_wysiwyg_style")){var n,a=e.find(".visual-editor iframe").contents().get(0);if(a)(n=a.getElementById("wysiwyg_style"))&&n.setAttribute("href",proboards.data("css_wysiwyg_style"))}ssHelper(o),void 0!==r&&r.remove()};$("#preview iframe").data("loaded")&&e(),$("#preview iframe").load(e);var n=$("#preview-container"),a=n.height(),l=document.createElement("div");l.id="preview-placeholder",l.style.height=a+"px";var c=n.offset(),t=function(){if($(window).width()<1310||$("html").is(".ie7"))return $("#preview-placeholder").remove(),void n.css({marginTop:"",position:"",width:""});var e=$(".half-editor.left").height();if(n.length&&$(this).scrollTop()>=c.top){var t=e-a,i=t+c.top;$(this).scrollTop()>=i?($("#preview-placeholder").remove(),i<0?n.css({position:"",width:""}):n.css({marginTop:t+"px",position:"",width:""})):(n.before(l),n.css({marginTop:"",position:"fixed",top:0,left:c.left+"px",width:n.css("width")}))}else n.length&&($("#preview-placeholder").remove(),n.css({marginTop:"",position:"",width:""}))};0==$('textarea[name="css"]').length&&$(window).bind("scroll.preview",t).resize(function(){$("#preview-placeholder").remove(),n.css({marginTop:"",position:"",width:""}),c=n.offset(),t.apply(this)}),$("#change-page").change(function(){r=$("#preview-container").overlay(),$(this).val()&&($("#preview iframe")[0].src=$(this).val(),$("option",this).first().attr("selected","selected"))})},setup_zoom_controls:function(){var a=this,t=$("#zoom-slider"),i=($("#preview-wrapper").width(),a.options.previewContents.find("#wrapper").width(),function(e){var t=parseInt(100*e);if($("html").is(".ie7, ie8"))$("#preview #preview-wrapper").css("zoom",e),$("#preview #preview-wrapper").css("height",100/t*500);else{var i="scale("+e+","+e+")";$("#preview iframe").css({transform:i})}var n=100/t*500;$("#preview iframe").attr("height",n),$("html").is(".ie7")||$("#preview iframe").attr("width",Math.round(1e5/t)/10+"%"),$("#zoom-value").html(t+"%"),a.options.zoomSetup=!0});$(window).resize(function(){a.resizeIframeWindow(),$("#preview-wrapper").width(),i(t.slider("value"))});t.slider({min:.2,max:1,value:1,step:.01,create:function(e,t){$(this).slider("value",.75)},slide:function(e,t){i(t.value),$(this).find(".ui-slider-handle").css("backgroundColor","#CCC")},change:function(e,t){i(t.value)},stop:function(e,t){$(this).find(".ui-slider-handle").css("backgroundColor","")}}),$("#zoom-out").click(function(){var e=t.slider("value")-.05;t.slider("value",e)}),$("#zoom-in").click(function(){var e=t.slider("value")+.05;t.slider("value",e)})},resizeIframeWindow:function(e){this.options.previewContents||(this.options.previewContents=$("#preview iframe").contents());var t=this.options.previewContents,i=$("html",t),n=t.get(0).styleSheets,a=e;if($("#wrapper",t).length){if(!e)for(var o=n.length-1;0<o;o--){var r=n[o];if(r.hasOwnProperty("rules")){for(var s=r.rules,l=0,c=s.length;l<c;l++){var d=s[l];if(d.selectorText&&"#wrapper"==d.selectorText.toLowerCase()){a=d.style.width;break}}if(a)break}}if(a){var u="%"==a.substr(-1)?$(window).width()+"px":"auto";i.css({width:u,margin:"auto"})}}},trigger_data_change:function(e){var t=$(e).closest(".property"),i=$.trim(t.attr("class").replace(/property/,"")),n=t.data("item"),a=n.variable,o=e.val(),r=(this.options.selectors,this.options.validations);for(v in void 0!==r[n.type]&&(o=validate[r[n.type]](o,e,n.type)),"color"!=n.type&&"background-color"!=n.type&&"border-color"!=n.type&&"banner-image"!=n.type&&"background-image"!=n.type||$(e).val(cleanField(o,n.type,i)),"object"!=typeof o&&(o={"":o}),o){void 0!==(a=this.options.variables[n.variable+(""!=v?"-"+v:"")])&&this.changeVariable(n,a,o[v])}this.updateLivePreview(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")},changeVariable:function(e,t,i){if(i=checkForDefaultValue(i,e.type),t.setValue(i)){var n=this.options.stylesheet.indexOf(":",t.index),a=this.options.stylesheet.indexOf(";",n);if(-1!==n&&-1!==a){var o=(i=" "+i).length-(a-n-1);for(v in this.options.variables)this.options.variables[v].index>t.index&&(this.options.variables[v].index+=o);this.options.stylesheet=this.options.stylesheet.substr(0,n+1)+i+this.options.stylesheet.substr(a)}}},updateLivePreview:function(e){var t=this;if(null!=t.options.styleElem&&t.options.styleElem.length){t.options.styleElem.next("#styleAfter").remove();try{t.options.styleElem.after('<style type="text/css" id="styleAfter">'+t.options.stylesheetData.toCSS()+"</style>");var i=proboards.css.variables(t.options.stylesheetData,["#wrapper"])["#wrapper @wrapper_width"].value;t.resizeIframeWindow(i)}catch(e){proboards.error(e.message)}}if(null!=t.options.styleElemW&&t.options.styleElemW.length){var n=proboards.css.parse(t.options.stylesheetW);proboards.css.extendVariables(n,t.options.stylesheetData),proboards.css.extendVariables(n,proboards.css.parse(proboards.data("css_required_vars"))),t.options.styleElemW.next("#styleAfterW").remove();try{t.options.styleElemW.after('<style type="text/css" id="styleAfterW">'+n.toCSS()+"</style>")}catch(e){proboards.error(e.message)}}}};function cleanField(e,t,i){if(e=checkForDefaultValue(e,t),"color"==t||"background-color"==t||"border-color"==t){if("#"==e.charAt(0))return e.slice(1)}else if(("background-image"==t||"banner-image"==t)&&"url("==e.slice(0,4))return e.slice(5,-2);return e}function checkForDefaultValue(e,t){if(""===(e=$.trim(e)))switch(t){case"background":e="none";break;case"background-color":e="transparent";break;case"background-image":case"banner-image":e="none";break;case"background-attachment":e="scroll";break;case"background-repeat":e="repeat";break;case"background-position":e="0% 0%";break;case"border":e="0";break;case"border-width":e="medium";break;case"border-style":e="none";break;case"border-color":e="transparent";break;case"border-radius":e="0";break;case"box-shadow":e="none";break;case"color":e="transparent";break;case"height":case"width":e="0px";break;case"font":case"font-style":case"font-variant":case"text-transform":case"font-weight":case"font-size":case"font-family":case"text-decoration":case"text-align":case"text-shadow":default:e="inherit"}return e}function ssHelper(e){var t=theme_settings,i=$("#preview iframe").contents(),n=proboards.data("base_path"),a=i.get(0);if(-1!=n.indexOf(a.location.host)&&0!=a.location.pathname.indexOf(proboards.route("admin"))){if(!i.find("#forum_style").length)return setTimeout(function(){ssHelper(e)},500);if(1!=e){$("#settings .section.active").removeClass("active");for(var o=$("#settings .property"),r=0;r<o.length;++r){var s=$(o[r]),l=s.data("item").variable;if(!s.closest(".section").hasClass("active")&&void 0!==t.options.variableSelectors[l]){var c=t.options.variableSelectors[l];$("html").is(".ie7")&&(c=c.replace(/:[a-z-]+/g,"")),c&&i.find(c).length&&s.parents(".section").addClass("active")}}}i.find(".editors .visual-editor").length&&$("#wysiwyg-related .section").addClass("active");var d=i;if(!d.find("#custom-style").length){var u=$('<style type="text/css" id="custom-style" />');d.find("head").append(u),t.options.styleElem=u}var p=i.find(".visual-editor iframe").contents();if(p.length&&!p.find("#custom-wysiwyg-style").length){u=$('<style type="text/css" id="custom-wysiwyg-style" />');p.find("head").append(u),t.options.styleElemW=u}t.updateLivePreview(),t.options.zoomSetup?$(window).trigger("resize"):setTimeout(function(){t.setup_zoom_controls()},500),t.resizeIframeWindow()}}var validate={background:function(e,t){var i=$(t).closest(".background"),n=i.find(".color input"),a=i.find('.background-image input[type="text"]'),o=i.find(".background-attachment input:checked"),r=i.find(".background-repeat select"),s=i.find('.background-position input[type="text"]');return o.length||(o=i.find(".background-attachment input:last")),this.hexCode(n.val(),n)+" "+s.val()+" "+r.val()+" "+o.val()+" "+this.urlSurround(a.val(),a)},border:function(e,t){var i=$(t).closest(".border"),n=i.find('.border-width input[name="width"]'),a=i.find(".border-style select"),o=i.find(".color input");return n.val()+" "+this.borderStyle(a.val(),a)+" "+this.hexCode(o.val(),o)},borderWidth:function(e,t){var i=$(t).closest(".property"),n=$('input[name="width"]',i).val(),a=$('input[name="type"]',i).val();return n=this.size(n,a)},borderRadius:function(e,t){var i=$(t).closest(".property"),n=$('input[name="radius"]',i).val(),a=$('input[name="type"]',i).val();return n=this.size(n,a)},borderStyle:function(e){return/(none|dashed|dotted|double|groove|hidden|inset|outset|ridge|solid)/i.test(e)?RegExp.$1:""},boxShadow:function(e,t){var i=$(t).closest(".box-shadow,.text-shadow"),n=i.find(".color input"),a=i.find(".box-shadow-size select"),o=i.find(".box-shadow-position input"),r=n.val(),s=a.val(),l=o.val();r=this.hexCode(r);var c=0,d=0;switch(s){case"small":c="2px",d=1;break;case"medium":c="4px",d=2;break;case"large":c="6px",d=3;break;default:return""}var u="",p=l.split(" ");switch(p[0]){case"center":u="0 ";break;case"right":u=2*d+"px ";break;case"left":u=-2*d+"px ";break;default:u="0 "}switch(p[1]){case"center":u+="0";break;case"bottom":u+=2*d+"px";break;case"top":u+=-2*d+"px";break;default:u+="0"}return[u,c,r].join(" ")},fontVariant:function(e){return/(normal|small-caps)/i.test(e)?RegExp.$1:""},fontStyle:function(e){return/(normal|italic|oblique)/i.test(e)?RegExp.$1:""},fontSize:function(e){if("0"!=e&&/(\d+\.?\d*|\.\d*)(%|in|cm|mm|em|ex|pt|pc|px)?/i.test(e)){var t=RegExp.$1;if(t+=RegExp.$2?RegExp.$2:"px","string"==typeof type&&/^[01]{4}$/.test(type)){for(var i=type.split(""),n=0;n<i.length;n++)"1"==i[n]&&(i[n]=t);t=i.join(" ")}return t}return"xx-small"==e||"x-small"==e||"small"==e||"medium"==e||"large"==e||"x-large"==e||"xx-large"==e?e:""},fontFamily:function(e){for(var t=e.split(","),i=0;i<t.length;i++)t[i]=t[i].replace(/(^\s+|\s+$)/g,""),-1!=t[i].indexOf(" ")&&/([a-z\s]+)/i.test(t[i])&&(t[i]='"'+RegExp.$1+'"');return t.join(", ")},fontWeight:function(e){return/(normal|bold|bolder|lighter|[1-9]00)/i.test(e)?RegExp.$1:""},hexCode:function(e){return/((?:[a-f\d]{3})(?:[a-f\d]{3})?)/i.test(e)?"#"+RegExp.$1:""},size:function(e,t){if("auto"==e&&("height"==t||"width"==t))return e;if("0"!=e&&/(\d+\.?\d*|\.\d*)(%|in|cm|mm|em|ex|pt|pc|px)?/i.test(e)){var i=RegExp.$1;if(i+=RegExp.$2?RegExp.$2:"px","string"==typeof t&&/^[01]{4}$/.test(t)){for(var n=t.split(""),a=0;a<n.length;a++)"1"==n[a]&&(n[a]=i);i=n.join(" ")}return i}return""},font:function(e,t){var i=$(t).closest(".font"),n=i.find(".font-style input"),a=i.find(".font-weight input"),o=i.find(".font-size input"),r=i.find(".font-family input"),s=o.val(),l=r.val();return n.val()+" "+a.val()+" "+(""===s&&""!=l?"1em":s)+" "+(""===l&&""!=s?"Arial":l)},textAlign:function(e){return/(left|right|center|justify)/i.test(e)?RegExp.$1:""},textDecoration:function(e){var t=e.match(/(none|underline|overline|line-through)/gi);return null!=t?t.join(" "):""},textTransform:function(e){return/(none|capitalize|lowercase|uppercase)/i.test(e)?RegExp.$1:""},urlSurround:function(e){return-1!=e.indexOf("@{image_path}")||proboards.is_valid_image_url(e)?("none"==e||""==e||/^url\(.*\)$/i.test(e)||(e="url('"+e+"')"),e):""}};function saveButton(e,t,i,n){t.preventDefault(),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight");var a={};a.css=theme_settings.options.stylesheet;try{a.css_parsed=proboards.css.clean(theme_settings.options.stylesheetData.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}var o=proboards.css.parse(theme_settings.options.stylesheetW);proboards.css.extendVariables(o,theme_settings.options.stylesheetData),proboards.css.extendVariables(o,proboards.css.parse(proboards.data("css_required_vars")));try{a.wysiwyg_css_parsed=proboards.css.clean(o.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}var r=proboards.css.parse(theme_settings.options.stylesheetM);proboards.css.extendVariables(r,theme_settings.options.stylesheetData),proboards.css.extendVariables(r,proboards.css.parse(proboards.data("css_required_vars")));try{a.css_mobile=proboards.css.clean(r.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}$('input[name="default"]').attr("checked")&&(a.default=1),$('input[name="disabled"]').attr("checked")&&(a.disabled=1);for(var s=[],l=JSON.parse(proboards.data("unfiltered_vars")),c=proboards.css.variables(proboards.css.parse(theme_settings.options.stylesheet)),d=0;d<l.length;d++)void 0!==c[l[d].variable]&&s.push(l[d]);for(var u={scheme_id:"theme_preview"},p=0;p<s.length;p++)u[s[p].variable.slice(1)]=c[s[p].variable].value.slice(1);a.color_scheme=JSON.stringify(u),void 0!==n&&(a.favorites=JSON.stringify(n)),proboards.saving(i,!0),proboards.ajax({method:"post",url:proboards.data("css_save_url"),data:a,success:function(e){a.default&&updateThemeDropdown(e.old_default),$(".admin-theme-color-bar td").empty().append(proboards.color_scheme.build(u,0));var t=/^\s*$/;$("#settings .custom input").filter(function(e){return t.test($(this).val())}).replaceWith("<span>This property has been removed.</span>")},complete:function(e,t){proboards.saving(i,!1,t)}})}var admin_themes_visual_helper=function(){},admin_upgrades_ad_free=function(){$(document).ready(function(){$(".adfree-item-row .item").each(function(){$(this).data("item",proboards.data("data_hash")[$(this).attr("id").substr(2)])}),$(".adfree-item-row").sortable({handle:".drag-handle",stop:function(e,t){var i=this,n=t.item.data("item");$(t.item).hasClass("active")||0!=n.type||1!=n.active||is_scheduled(t.item)||!would_be_active(t.item)?($("#adfree-item-container .item:nth-child(1n)").css("background-color","#FFFFFF"),$("#adfree-item-container .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active()):active_warn_dialog(t.item,function(){$("#adfree-item-container .item:nth-child(1n)").css("background-color","#FFFFFF"),$("#adfree-item-container .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active()},function(){$(i).sortable("cancel")})}}),$(".adfree-item-row .item:nth-child(1n)").css("background-color","#FFFFFF"),$(".adfree-item-row .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active(),$("#adfree-item-container select").each(function(){var e=$(this).closest(".item").data("item");$(this).val(e.start_date)}),proboards.data("total_used_pageviews")>.8*proboards.data("total_pageviews")&&$(".adfree_purchase_button").addClass("highlight"),proboards.unsaved_changes=0,$(".adfree-item-row .adfree_purchased a").click(function(){var e=this,t=$(e).closest(".item"),i="Purchased by "+t.data("item").purchased_by+"<br />";i+="Purchased "+t.data("item").purchased_date+"<br /><br />",t.data("item").purchased_message.length&&(i+="Gift Note: "+t.data("item").purchased_message+"<br /><br />");var n=[];1==t.data("item").type&&n.push({text:"Cancel Recurring Plan",click:function(){$(this).dialog("close"),delete_dialog(e)}}),n.push({text:"Close",click:function(){$(this).dialog("close")}});proboards.dialog("note_dialog",{html:i,title:"Note",width:500,resizable:!1,buttons:n})}),$("#adfree-item-container .delete").click(function(){delete_dialog(this)}),$("#adfree-item-container select").change(function(){var e=$(this).closest(".item"),t=e.data("item").start_date;e.data("item").start_date=$(this).val(),$(this).val()==proboards.data("current_month")?(e.children(".adfree_status").html("One Time"),1==e.data("item").active&&update_totals(e.data("item"),1)):t==proboards.data("current_month")&&(e.children(".adfree_status").html('<span class="adfree_purple">One Time</span>'),1==e.data("item").active&&update_totals(e.data("item"),0)),update_active()}),$('#adfree-item-container input[type="checkbox"]').change(function(){var e=this,t=$(this).parents(".item"),i=t.data("item");$(this).is(":checked")?0==t.data("item").type&&!is_scheduled(t)&&would_be_active(t)?active_warn_dialog(t,function(){i.active=1,t.removeClass("inactive"),is_scheduled(t)||update_totals(i,1),update_active()},function(){$(e).removeAttr("checked")}):(i.active=1,t.removeClass("inactive"),is_scheduled(t)||update_totals(i,1)):(i.active=0,t.addClass("inactive"),is_scheduled(t)||update_totals(i,0)),update_active()}),$("#adfree_save_button").click(function(e){var i=this;e.preventDefault(),proboards.saving(i,!0),proboards.unsaved_changes=0;var t=[];$("#adfree-item-container .item").each(function(){t.push({id:$(this).data("item").id,active:$(this).data("item").active,start_date:$(this).data("item").start_date})}),proboards.ajax({method:"post",url:proboards.data("save_url"),data:{data:JSON.stringify(t)},success:function(e){},complete:function(e,t){proboards.saving(i,!1,t)}})}),$(".under-headings select").each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})})})},is_scheduled=function(e){return $(e).data("item").start_date>proboards.data("current_month")},update_active=function(){$("#adfree-item-container .item.active").removeClass("active");var e=0;$("#adfree-item-container .item").each(function(){if(!$(this).hasClass("inactive")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").pageviews))return $(this).addClass("active"),!(e=1)}),e||$("#adfree-item-container .item").each(function(){if(!$(this).hasClass("inactive")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").maximum_views))return $(this).addClass("active"),!1}),1<$("#adfree-item-container .item").length&&(proboards.unsaved_changes=1)},update_totals=function(e,t){t?(proboards.data("total_used_pageviews",parseInt(proboards.data("total_used_pageviews"))+parseInt(e.views_used)),proboards.data("total_pageviews",parseInt(proboards.data("total_pageviews"))+parseInt(e.pageviews)),proboards.data("total_max_pageviews",parseInt(proboards.data("total_max_pageviews"))+parseInt(e.maximum_views))):(proboards.data("total_used_pageviews",parseInt(proboards.data("total_used_pageviews"))-parseInt(e.views_used)),proboards.data("total_pageviews",parseInt(proboards.data("total_pageviews"))-parseInt(e.pageviews)),proboards.data("total_max_pageviews",parseInt(proboards.data("total_max_pageviews"))-parseInt(e.maximum_views))),$("#total_used_pageviews").text(proboards.commify(proboards.data("total_used_pageviews"))),$("#total_pageviews").text(proboards.commify(proboards.data("total_pageviews"))),$("#total_max_pageviews").text(proboards.commify(proboards.data("total_max_pageviews"))),proboards.data("total_used_pageviews")>.8*proboards.data("total_pageviews")?$(".adfree_purchase_button").addClass("highlight"):$(".adfree_purchase_button").removeClass("highlight")},would_be_active=function(e){var t=0,i=0,n=0;return $("#adfree-item-container .item").each(function(){$(this).find('input[type="checkbox"]').is(":checked")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").pageviews)&&($(this).is(e)&&0==i&&(n=1),t=i=1)}),t||$("#adfree-item-container .item").each(function(){$(this).find('input[type="checkbox"]').is(":checked")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").maximum_views)&&($(this).is(e)&&0==i&&(n=1),i=1)}),n},active_warn_dialog=function(e,t,i){proboards.dialog("warn_dialog",{html:"Are you sure you want to activate this plan?",title:"Are you sure?",width:500,resizable:!1,buttons:[{text:"Yes",click:function(){return $(this).dialog("close"),t(),proboards.unsaved_changes=1}},{text:"No",click:function(){return $(this).dialog("close"),i(),proboards.unsaved_changes=0}}]})},delete_dialog=function(e){var i=$(e).closest(".item"),t="Are you sure you want to cancel this recurring plan?<br /><br />";t+="Purchased by "+i.data("item").purchased_by+"<br />",t+="Purchased "+i.data("item").purchased_date+"<br />",t+=proboards.commify(i.data("item").pageviews)+" Pageviews<br />",t+=proboards.commify(i.data("item").maximum_views)+" Maximum<br /><br />";proboards.dialog("delete_dialog",{html:t,title:"Are you sure?",width:500,resizable:!1,buttons:[{text:"No, don't cancel",click:function(){$(this).dialog("close")}},{text:"Yes, I'm sure",click:function(){var t=this;proboards.ajax({url:proboards.data("cancel_url"),data:{id:i.attr("id").substr(2)},dataType:"json",success:function(e){i.hasClass("active")&&update_active(),i.hasClass("inactive")||update_totals(i.data("item"),0),i.children(".adfree_status").html('<span class="adfree_red">Cancelled</span>'),$(t).dialog("close")}})}}]})},admin_upgrades_change_forum_url=function(){$(document).ready(function(){var t=!1,i=!1,n=$("form input[name=username]"),a=$("form select[name=domain]"),o=$('form input[type="submit"]');n.bind("keyup",e),a.bind("change",e);var r=0;function e(e){e.which!=Keys.enter?(t=!1,s("#url-checking"),r&&clearTimeout(r),r=setTimeout(function(){!function(){if(""==$("form input[name=username]").val())return $(".url-status").hide(),$("#url-spacer").show();r=0,proboards.ajax({url:proboards.data("check_forum_url_availability_url"),data:{username:$("form input[name=username]").val(),domain:$("form select[name=domain]").val()},success:function(e){o.prop("disabled",!e.available),t=e.available,s("#url-"+(e.available?"available":"taken")),i&&$("form").submit(),i=!1},error:function(e){o.prop("disabled",!0),$("#url-general-error").text(e.error),s("#url-general-error"),i=!1},ignorePending:!0})}()},300)):i=!0}function s(e){$(".url-status").hide(),$(e).show()}o.click(function(e){e.preventDefault(),$("form").submit()}),o.prop("disabled",!0),$("form").submit(function(e){e.preventDefault(),t&&(window.location=proboards.data("change_forum_url_add_cart_url")+"/value/"+n.val()+"."+a.val())})})},admin_upgrades_custom_domains=function(){$(document).ready(function(){$("#domains-content .domains-expandable").prepend('<span class="arrow-wrapper"><span class="arrow-direction">&#9654;</span><span class="arrow-direction hide">&#9660;</span></span>'),$(".domains-expandable").bind("click",function(){var e=$(this).attr("id");$("#"+e+"-expanded").toggle(),$(".arrow-direction",this).toggle()}),$("form.form_admin_upgrades_custom_domains").submit(function(e){e.preventDefault();var t=$(this);if(t.data("form").validateAll()){var i=$('input[name="domain"]',t).val(),n=$('select[name="years"]',t).val();proboards.loading(!0),proboards.ajax({url:proboards.route("custom_domain_check"),data:{domain:i},error:function(e){proboards.loading(!1),proboards.error(e.error),$('input[name="sendform"]',t).prop("disabled",!1)},success:function(e){window.location=proboards.data("custom_domain_add_cart_url").replace(/:item_id/,n)+"/value/"+e.domain}})}}),$("#existing-domains input").click(function(){var e=$(this).closest(".domain"),t=e.data("domain"),i=e.find("select").val();window.location=proboards.data("custom_domain_add_cart_url").replace(/:item_id/,i)+"/value/"+t}),$('select[name="default_domain"]').autoSubmit({url:proboards.data("save_url"),statusElement:$(".status-box")})})},admin_upgrades_experiments=function(){$(document).ready(function(){var t=$(".js-form-admin-upgrades-experiments"),i=null,n=25,a=t.find('[name="save"]'),e=t.find(".js-experiments-status"),o=null;!function e(){setTimeout(function(){if(!(i=t.data("form")))return n--?e():console.error("Experiments form setup failed");i.options.submit=function(){return proboards.ajax({url:proboards.route("admin_experiments_save"),data:t.serialize(),beforeSend:function(){a.prop("disabled",!0),o.setStatus("loading")},success:function(){o.setStatus("success")},error:function(){o.setStatus("error")},complete:function(){a.prop("disabled",!1)}}),!1}},250)}(),e.loadingStatus({loadingClass:"saved",loadingCss:{display:"inline"},successClass:"saved"}),o=e.data("loadingStatus")})},mobile_calendar_base=function(){$(document).ready(function(){$('.month-selector option[value="'+proboards.data("calendar_month")+'"]').attr("selected","selected"),$('.year-selector option[value="'+proboards.data("calendar_month")+'"]').attr("selected","selected"),$('.calendar-jump input[type="button"]').click(function(){var e=$(".month-selector option:selected").val(),t=$(".year-selector  option:selected").val();window.location=proboards.data("calendar_list_url").replace(":month",e).replace(":year",t)})})},mobile_common_edit=function(){$(document).ready(function(){0!=$('.wysiwyg form input[name="bookmark"]').val()&&$('input[name="modifiers_bookmark"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="sticky"]').val()&&$('input[name="modifiers_sticky"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="lock"]').val()&&$('input[name="modifiers_lock"]').attr("checked","checked"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val())});var t=$('.wysiwyg form input[name="announcement"]'),i=$('input[name="modifiers_announcement"]'),e=$('.wysiwyg form input[name="announcement_expires"]'),n=$('input[name="modifiers_announcement_expires"]'),a=$('.wysiwyg form input[name="announcement_expires_date"]'),o=$('input[name="modifiers_announcement_expires_date"]'),r=$('.wysiwyg form input[name="announcement_expires_time"]'),s=$('input[name="modifiers_announcement_expires_time"]');i.on("change",function(){var e=i.prop("checked");$("#announcement-options").toggle(e),t.val(e?1:""),n.trigger("change")}),n.on("change",function(){isAnnounceExpires=n.prop("checked"),e.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),o.add(s).trigger("change")}),o.add(s).on("change",function(){a.val(isAnnounceExpires?o.val():""),r.val(isAnnounceExpires?s.val():"")}),i.prop("checked",0!=t.val()),o.val(a.val()),s.val(r.val()),n.prop("checked",0!=e.val()),i.add(n).trigger("change"),a.on("localeconvert",function(){o.val(a.val()),s.val(r.val())})})},mobile_conversation_index=function(){$(document).ready(function(){var e=proboards.data("folder")||"inbox";e=e.replace("-","/"),$('.control-bar select option[value="'+e+'"]').prop("selected",!0),$(".control-bar select").on("change",function(){var e=$(this).val();"label"==(0==e.indexOf("label/")?"label":"folder")?(labelId=e.substr("label/".length),window.location=proboards.route("conversations_by_label",{label_id:labelId})):window.location=proboards.route("conversations",{folder:e})}),$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()})})},mobile_conversation_new=function(){$(document).ready(function(){$('input[name="recipients"]').attr("value",proboards.data("recipients"))})},mobile_conversation_show=function(){$(document).ready(function(){$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()}),$(".control-bar select").change(function(){var e=$(this).val();"archive"==e?proboards.ajax({url:proboards.route("mark_conversations",{type:"archive"}),data:{ids:[proboards.data("conversation_id")]},success:function(e){location.reload(!0)}}):"unarchive"==e?proboards.ajax({url:proboards.route("mark_conversations",{type:"unarchive"}),data:{ids:[proboards.data("conversation_id")]},success:function(e){location.reload(!0)}}):"delete"==e?proboards.ajax({url:proboards.route("delete_conversations"),data:{ids:[proboards.data("conversation_id")]},success:function(e){window.location=proboards.route("conversations",{folder:"inbox"})}}):"leave"==e&&proboards.ajax({url:proboards.route("remove_conversations"),data:{ids:[proboards.data("conversation_id")]},success:function(e){window.location=proboards.route("conversations",{folder:"inbox"})}})}),proboards.embedded.processEmbedded()})},mobile_message_list=function(){$(document).ready(function(){$('.message-options-select-list option[value*="deselectMessage"]').attr("disabled","disabled");var r=[],s=/(^| )message-([0-9]+)($| )/,l=/(^| )user-([0-9]+)($| )/;$(".message-options-select-list").change(function(){var e=$(this),t=s.test(e.attr("class"))?RegExp.$2:"",i=(l.test(e.attr("class"))&&RegExp.$2,e.val()),n=$("option:first",e);if(i==t+"-selectMessage")n.text("Selected"),r.push(t),$(".message-"+t+"-checkbox input.ui-manager-checkbox").attr("checked","checked"),$('option[value="'+t+'-selectMessage"]',e).attr("disabled","disabled"),$('option[value="'+t+'-deselectMessage"]',e).removeAttr("disabled");else if(i==t+"-deselectMessage"){n.text("Options");var a=[];for(var o in r)r[o]!=t&&a.push(r[o]);r=a,$(".message-"+t+"-checkbox input.ui-manager-checkbox").removeAttr("checked"),$('option[value="'+t+'-selectMessage"]',e).removeAttr("disabled"),$('option[value="'+t+'-deselectMessage"]',e).attr("disabled","disabled")}else i==t+"-toTop"&&window.scrollTo(0,0);n.attr("selected","selected")}),$(".quote-button").each(function(){var i=$(this).closest(".message").attr("id").substr(13);$(this).unbind("click"),$(this).bind("click",function(){if(0!=r.length){var e="";for(var t in r)r[t]!=i&&(e+=r[t],e+=",");return e+=i,window.location=proboards.route("quote_messages",{message_ids:e,conversation_id:proboards.data("page").conversation.id}),!1}return!0})}),$(".display-blocked-message.button").each(function(){var e=$(this).attr("id").substr(13);$(this).unbind("click"),$(this).bind("click",function(){$("#message-"+e).removeClass("blocked"),$("#message-"+e+" td.blocked").hide(),$("#message-"+e+" td.unblocked").show()})})})},mobile_post_base=function(){$(document).ready(function(){$('.post-options-select-list option[value="deselectPost"]').prop("disabled",!0),proboards.embedded.processEmbedded(),$(".likes-button").on("click",function(){var t=$(this).closest(".post"),e=t.attr("id").substr("post-".length);return proboards.ajax({url:proboards.route("post_like"),data:{post_id:e},dataType:"json",success:function(e){$(".likes",t).html(e.likes_html)}}),$(this).toggleClass("liked"),!1});var s=[],l=proboards.data("post_count");$(".post-options-select-list").change(function(){var e=$(this),t=parseInt(e.data("post_id")),i=(parseInt(e.data("user_id")),e.val()),n=$("option:first",e);switch(i){case"selectPost":n.text("Selected"),s.push(t),$('option[value="selectPost"]',e).prop("disabled",!0),$('option[value="deselectPost"]',e).prop("disabled",!1);break;case"deselectPost":n.text("Options");var a=$.inArray(t,s);-1!=a&&s.splice(a,1),$('option[value="selectPost"]',e).prop("disabled",!1),$('option[value="deselectPost"]',e).prop("disabled",!0);break;case"reportPost":var o=prompt("Reason:","");null!=o&&1<=o.length?proboards.ajax({url:proboards.route("create_report",{post_id:t}),data:{post_id:t,reason:o},dataType:"json",success:function(e){alert(e.message)}}):null!=o&&alert("You must provide a reason.");break;case"deletePost":var r=prompt("Type 'delete' to delete the post.","");r&&"delete"==r.toLowerCase()&&proboards.ajax({url:proboards.route("delete_post"),data:{"ids[]":t},dataType:"json",success:function(e){l<2?window.location=e.redirect_url:location.reload(!0)}});break;case"editPost":window.location=proboards.route("edit_post",{post_id:t});break;case"toTop":window.scrollTo(0,0)}n.prop("selected",!0)}),$(".quote-button").off("click").on("click",function(){if(0!=s.length){var e=parseInt($(this).closest(".post").attr("id").substr("post-".length));return-1==$.inArray(e,s)&&s.push(e),window.location=proboards.route("quote_posts",{post_ids:s.join(","),thread_id:proboards.data("page").thread.id}),!1}return!0}),$(".display-blocked-post.button").each(function(){var e=$(this).parents(".blocked.post").attr("id").substr("post-".length);$(this).unbind("click"),$(this).bind("click",function(){return $("#post-"+e).removeClass("blocked"),$("#post-"+e+" .blocked").hide(),$("#post-"+e+" .unblocked").show(),!1})})})},mobile_post_new=function(){$(document).ready(function(){0!=$('.wysiwyg form input[name="bookmark"]').val()&&$('input[name="modifiers_bookmark"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="sticky"]').val()&&$('input[name="modifiers_sticky"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="lock"]').val()&&$('input[name="modifiers_lock"]').attr("checked","checked"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val())});var t=$('.wysiwyg form input[name="announcement"]'),i=$('input[name="modifiers_announcement"]'),e=$('.wysiwyg form input[name="announcement_expires"]'),n=$('input[name="modifiers_announcement_expires"]'),a=$('.wysiwyg form input[name="announcement_expires_date"]'),o=$('input[name="modifiers_announcement_expires_date"]'),r=$('.wysiwyg form input[name="announcement_expires_time"]'),s=$('input[name="modifiers_announcement_expires_time"]');i.on("change",function(){var e=i.prop("checked");$("#announcement-options").toggle(e),t.val(e?1:""),n.trigger("change")}),n.on("change",function(){isAnnounceExpires=n.prop("checked"),e.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),o.add(s).trigger("change")}),o.add(s).on("change",function(){a.val(isAnnounceExpires?o.val():""),r.val(isAnnounceExpires?s.val():"")}),i.prop("checked",0!=t.val()),o.val(a.val()),s.val(r.val()),n.prop("checked",0!=e.val()),i.add(n).trigger("change"),a.on("localeconvert",function(){o.val(a.val()),s.val(r.val())})})},mobile_registration_register=function(){$(document).ready(function(){var n=$('input[name="username"]'),a="";n.on("keyup change",function(){var t=$("tr#username-available"),i=$("td#username-available-msg",t),e=n.val();a&&clearTimeout(a),e.length?a=setTimeout(function(){proboards.ajax({url:proboards.route("e_register_check_username"),ignorePending:!0,data:{username:e},dataType:"json",success:function(e){""!=e.available&&(i.html('<span class="success">'+e.available+"</span>"),t.show())},error:function(e){""!=e.error&&(i.html('<span class="error">'+e.error+"</span>"),t.show())},complete:function(){n.val().length||(t.hide(),i.html(""))}})},500):(t.hide(),i.html(""))})})},mobile_search_index=function(){$(document).ready(function(){$("#search_type").change(function(){var e=$(this).val();$(".input").hide(),1==e?$("#match_at_least_one_input").show():2==e?$("#match_exact_input").show():$("#match_all_input").show()})})},mobile_thread_edit=function(){$(document).ready(function(){var e=0;proboards.data("poll_id")&&($("#poll-button").text("Remove Poll"),e=1),1==$('input[name="has_event"]').attr("value")&&($("#event-button").text("Remove Event"),$(".add-event").show()),$("#poll-button").click(function(){1==e?confirm("Are you sure you want to remove this poll?")&&($("#poll-button").text("Add Poll"),$('input[name="replace_poll"]').attr("value",1),e=0):($(".add-poll").toggle(),"none"==$(".add-poll").css("display")?($('input[name="has_poll"]').attr("value",""),$("#poll-button").text("Add Poll")):($('input[name="has_poll"]').attr("value",1),$("#poll-button").text("Remove Poll")))}),$("#event-button").click(function(){$(".add-event").toggle(),"none"==$(".add-event").css("display")?($('input[name="has_event"]').attr("value",""),$("#event-button").text("Add Event"),t()):($('input[name="has_event"]').attr("value",1),$("#event-button").text("Remove Event"))}),$('input[name="all_day_event"]').on("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change")});var t=function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})}},mobile_thread_new=function(){$(document).ready(function(){$("#poll-button").click(function(e){e.preventDefault();var t=$(this);$(".add-poll").toggle(),"none"==$(".add-poll").css("display")?(t.text("Add Poll"),$('input[name="has_poll"]').attr("value","")):(t.text("Remove Poll"),$('input[name="has_poll"]').attr("value",1))}),$("#event-button").click(function(e){e.preventDefault();var t=$(this);$(".add-event").toggle(),"none"==$(".add-event").css("display")?(t.text("Add Event"),$('input[name="has_event"]').attr("value","")):(t.text("Remove Event"),$('input[name="has_event"]').attr("value",1),l())}),$('input[name="all_day_event"]').on("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val())});var t=$('.wysiwyg form input[name="announcement"]'),i=$('input[name="modifiers_announcement"]'),e=$('.wysiwyg form input[name="announcement_expires"]'),n=$('input[name="modifiers_announcement_expires"]'),a=$('.wysiwyg form input[name="announcement_expires_date"]'),o=$('input[name="modifiers_announcement_expires_date"]'),r=$('.wysiwyg form input[name="announcement_expires_time"]'),s=$('input[name="modifiers_announcement_expires_time"]');i.on("change",function(){var e=i.prop("checked");$("#announcement-options").toggle(e),t.val(e?1:""),n.trigger("change")}),n.on("change",function(){isAnnounceExpires=n.prop("checked"),e.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),o.add(s).trigger("change")}),o.add(s).on("change",function(){a.val(isAnnounceExpires?o.val():""),r.val(isAnnounceExpires?s.val():"")})});var l=function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})}},mobile_thread_show=function(){$(document).ready(function(){1==proboards.data("bookmarked")?$('.control-bar select option[value="bookmark"]').attr("disabled",!0):$('.control-bar select option[value="unbookmark"]').attr("disabled",!0),$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()}),$(".control-bar select").change(function(){var e=$(this).val(),t=document.location.protocol+"//"+document.location.host+proboards.route("thread",{thread_id:proboards.data("thread_id")}),i=proboards.data("thread_subject");if("view_prev"==e)window.location=proboards.route("previous_thread",{thread_id:proboards.data("thread_id")});else if("view_next"==e)window.location=proboards.route("next_thread",{thread_id:proboards.data("thread_id")});else if("bookmark"==e)proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"mark",ids:[proboards.data("thread_id")]},success:function(e){location.reload(!0)}});else if("unbookmark"==e)proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"unmark",ids:[proboards.data("thread_id")]},success:function(e){location.reload(!0)}});else if("facebook"==e)window.location="http://www.facebook.com/sharer/sharer.php?u="+encodeURI(t);else if("twitter"==e){var n=proboards.data("enterprise")?"":"&hashtags=proboards";window.location="https://twitter.com/intent/tweet?text="+encodeURI(i+" "+t)+n}else if("googleplus"==e)window.location="https://plus.google.com/u/0/share?url="+encodeURI(t);else if("tumblr"==e){var a=$("meta[property='og:description']").attr("content").trim();n=proboards.data("enterprise")?"":"&tags=proboards";window.location="http://www.tumblr.com/share/link?url="+encodeURI(t)+"&name="+encodeURI(i)+"&description="+encodeURI(a)+encodeURI(n)}else if("linkedin"==e)window.location="http://www.linkedin.com/shareArticle?url="+encodeURI(t)+"&title="+encodeURI(i);else if("pinterest"==e){var o=$('meta[property="og:image"]').attr("content")||"";window.location="https://pinterest.com/pin/create/bookmarklet/?media="+encodeURI(o)+"&url="+encodeURI(t)+"&description="+encodeURI(i)}else if("reddit"==e)window.location="http://reddit.com/submit?url="+encodeURI(t)+"&title="+encodeURI(i);else if("myspace"==e)window.location="http://www.myspace.com/Modules/PostTo/Pages/?t="+encodeURI(i)+"&u="+encodeURI(t)+"&c=&l=";else if("email"==e){var r=$("meta[property='og:description']").attr("content").trim();r+="\n \n"+t,window.location.href="mailto:?subject="+encodeURI(i)+"&body="+encodeURI(r)}});var t=proboards.data("poll_mobile");if(t){var e=t.votedFor,i=0,n=t.maxAnswers;for(var a in t.canVote&&$("td.checkboxes").removeClass("hide"),e)$('.results .checkboxes input[value="'+e[a]+'"]').attr("checked","checked"),i++;n<=i&&$(".results .checkboxes input").each(function(){$(this).attr("checked")||$(this).attr("disabled",!0)}),$("#open_poll").click(function(){proboards.ajax({url:t.openOrCloseUrl,data:{type:"open",thread_id:t.thread_id},dataType:"json",success:function(e){location.reload(!0)}})}),$("#lock_poll").click(function(){confirm("Are you sure you want to lock this poll?")&&proboards.ajax({url:t.openOrCloseUrl,data:{type:"close",thread_id:t.thread_id},dataType:"json",success:function(e){location.reload(!0)}})}),$(".results .checkboxes input").click(function(){var e=$(this).attr("checked")?"cast":"retract";proboards.ajax({url:t.url,data:{type:e,answer_id:$(this).val(),thread_id:t.thread_id},dataType:"json",success:function(e){location.reload(!0)}})})}$("#content video, #content iframe, #content object").each(function(){$(this).css("height",.5625*parseInt($(this).css("width")))})})},mobile_unsubscribe_index=function(){$(document).ready(function(){$("#s-none").on("click",function(){$(".form_user_edit_notifications select").not(":disabled").val("n")})})},mobile_user_edit_admin=function(){$(document).ready(function(){$('input[name="account_disabled"]').on("change",function(){var e=$('input[name="account_disabled"]:checked');$("#account-disabled-until").toggle(1==e.val())}).trigger("change"),$('input[name="pms_disabled"]').change(function(){var e=$('input[name="pms_disabled"]:checked');$("#pms-disabled-until").toggle(1==e.val())}).trigger("change")})},mobile_user_edit_common=function(){$(document).ready(function(){proboards.form.init(),$.fn.storeFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).data("stored",$(this).val())}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).data("stored","checked")})},$.fn.resetFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).val($(this).data("stored"))}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).prop("checked",!0)})},$.fn.trackFormChanges=function(){var e=$(this);return e.on("change","input, select, textarea",function(){$(this).parents(e).data("changed",!0)}),e},$.fn.setFormStatus=function(e,t){var i=$(this);if(i.data("status")!==e)return $('input[type="submit"]',i).setButtonStatus(e,t),i.data("status",e),i},$.fn.setButtonStatus=function(e,t){var i=$(this);if(i.data("status")!==e){switch(e){case"ready":var n=function(){if(t)return i.prop("disabled",!1),i.prev().remove(),void i.unwrap();i.data("wait")?setTimeout(n,500):i.parent("processing")&&(i.parent().css("width","-=40"),setTimeout(function(){i.prev().remove(),i.unwrap().prop("disabled",!1)},500))};n();break;case"saving":var a='style="width: '+(i.width()+30)+'px;"';i.prop("disabled",!0).wrap('<div class="processing" '+a+"></div>");i.parent().prepend('<div class="processing-img"></div>').css("width","+=40");i.data("wait",!0);setTimeout(function(){i.data("wait",!1)},1e3)}return i.data("status",e),i}};proboards.data("editInitialShow");var e=proboards.data("editInitialTab"),i="";function n(e){$(".profile-menu-bar .profile-menu-bar").val(e),$(".js-edit").hide(),$(".js-edit."+e+"-edit").show()}"edit_notifications"===e&&(e="notifications"),$(".profile-menu-bar .profile-menu-bar").val(e),$(".profile-menu-bar").on("submit",function(e){return!1}),$(".profile-menu-bar .profile-menu-bar").change(function(){var e=$(this).val();if(e!==i){i=e;var t=proboards.data("profileUserId");n(e),"notifications"===e?history.pushState({page:e},"Edit"+e,"/user/"+t+"/edit_notifications"):history.pushState({page:e},"Edit"+e,"/user/"+t+"/"+e)}}),window.onpopstate=function(){var e=history.state?history.state.page:null;if(!e)return $(".js-edit").hide(),void $(".js-edit.avatar-edit").show();n(e)};$(".edit-user form").data("generic_submit",function(){var t=$(this),i=$('input[type="submit"]',$(this)),e=t.serialize();e+="&tabSection="+function(e){for(var t=e.split(" ");t.length;){var i=t.pop().trim();if(0===i.indexOf("form_"))return i.substr("form_user_edit_".length)}}(t.prop("class")),proboards.ajax({url:proboards.route("update_unified",{user_id:proboards.data("profileUserId")}),data:e,success:function(e){e.alert_message&&alert(e.alert_message),t.data("changed",!1),i.setStatus("saved",{position:"after",style:"display",styleOpt:"inline"}),$(".js-edit .status-box").css({background:"#90EE90",color:"#006400",padding:"5px",top:"3px",position:"relative"})},error:function(e){i.setStatus("error",{position:"after",style:"display",styleOpt:"inline",text:e.error}),$(".js-edit .status-box").css({background:"#EE9090",color:"#640000",padding:"5px",top:"3px",position:"relative"}),proboards.form.handleFormError(t,e)},complete:function(){t.setFormStatus("ready".true),t.storeFormValues()}})})})},mobile_user_edit_privacy=function(){$(document).ready(function(){$('input[name="change_birthday"]').attr("checked")||$("#change-birthday").hide(),$('input[name="change_birthday"]').bind("change",function(){var e=$(this);$("#change-birthday").toggle(e.prop("checked"))})})},mobile_user_show_activity=function(){$(document).ready(function(){var n=proboards.data("page").member.id,e=proboards.data("form_id"),t=proboards.data("last_activity_id"),a=null;$("#"+e).on("submit",function(e){var t=$('input[name="update"]',this),i=t.val();return a!=i&&proboards.ajax({url:proboards.route("update_status"),data:{status:i,user_id:n,html:1},success:function(e){$("#no-activity-row").remove(),void 0!==e.html&&$(".activities-container").prepend(e.html),0!=e.deleted_id&&$(".activity-"+e.deleted_id).remove(),t.attr("value","")},complete:function(e){a=i}}),!1}),$(".show-more").on("click",function(e){proboards.active_ajax_calls||(proboards.ajax({url:proboards.route("show_more_activities"),data:{user_id:n,last_id:t},success:function(e){$(".activities-container").append(e.html),e.more?t=e.last_id:$(".show-more").unbind("click").remove()}}),e.preventDefault(),e.stopPropagation())})})},mobile_user_show_following=function(){$(document).ready(function(){var i=proboards.data("last_following_id");$(".show-more").on("click",function(e){var t=$(".activities-container");proboards.ajax({url:proboards.route("show_more_following"),data:{user_id:proboards.data("page").member.id,last_id:i},success:function(e){t.append(e.html),e.more?i=e.last_id:$(".show-more").unbind("click").remove()}}),e.preventDefault(),e.stopPropagation()})})},mobile_user_show_groups=function(){$(document).ready(function(){$(".join-group").bind("click",function(e){e.preventDefault();var t=$(this).parentsUntil(".groups",".group");proboards.ajax({url:proboards.route("join_group"),data:{group_id:t.attr("id").substr(6),user_id:proboards.data("page").member.id},dataType:"html",success:function(e){window.location.reload(!0)}})}),$(".leave-group").bind("click",function(e){e.preventDefault();var t=$(this).parentsUntil(".groups",".group");confirm("Are you sure?")&&proboards.ajax({url:proboards.route("leave_group"),data:{group_id:t.attr("id").substr(6),pending:$(this).text()},dataType:"html",success:function(e){window.location.reload(!0)}})})})},mobile_user_show_notifications=function(){$(document).ready(function(){var i=proboards.data("page").member.id,n=proboards.data("last_notification_id");$(".show-more").on("click",function(e){var t=$(".notifications-container");proboards.ajax({url:proboards.route("show_more_notifications"),data:{user_id:i,last_id:n},success:function(e){t.append(e.html),e.more?n=e.last_id:$(".show-more").unbind("click").remove()}}),e.preventDefault(),e.stopPropagation()})})},mobile_user_show_user_common=function(){$(document).ready(function(){$(".profile-menu-bar").change(function(){document.location=$("option:selected",this).val()}),$(".follow_button").on("click",function(e){e.preventDefault();var t=$(this);t.is(".ui-state-disabled")||(t.addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("follow_user"),data:{user_id:proboards.data("page").member.id},success:function(e){t.text(e.new_button_text)},complete:function(){t.removeClass("ui-state-disabled")}}))})})},standard_board_moderators=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_board_id"),type:"mods",user_search_box:!0},id:proboards.data("lm_id")})})},standard_board_password=function(){$(document).ready(function(){$('input[name="password"]').focus();var e=$('input[name="redirect"]');location.hash&&-1==e.val().indexOf("#")&&e.val(e.val()+location.hash)})},standard_board_show=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_thread_count"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{board_id:proboards.data("board_id")}}),$("#moderators-link").bind("click",function(e){return e.preventDefault(),0==$("#moderators-link-tooltip").length&&($(document.body).append('<div id="moderators-link-tooltip"></div>'),proboards.dialog("moderators-link-tooltip",{autoOpen:!1,close:function(){$("#moderators-link-tooltip").remove()},width:460,title:"Moderators"})),proboards.ajax({url:proboards.route("moderators"),data:{id:proboards.data("board_id")},dataType:"html",success:function(e){$("#moderators-link-tooltip").html(e),$("#moderators-link-tooltip").dialog("open")}}),!1}),$(".guests-online-link").on("click",function(e){e.preventDefault(),proboards.guestsOnlineDialog(proboards.data("board_id"))})})},standard_calendar_base=function(){$(document).ready(function(){load_month_previews(),load_month_form(),add_cal_nav(),setup_cal(),$(".calendar-selection").click(function(e){e.preventDefault()}),proboards.data("can_calendar_event")&&($("#calendar-new-event-button").click(function(e){e.preventDefault(),proboards.calendar.new_event()}),$(".cal-current-panel .day").click(function(e){if("a"!=e.target.nodeName.toLowerCase()){var t=$(this).attr("class").match(/date-(\d+-\d+-\d+)/);t&&t[1]&&proboards.calendar.new_event(t[1])}}))})},load_month_previews=function(){var e=proboards.data("event_tips");for(var t in e)$(".cal-preview-panel .date-"+e[t].date).tipTip({content:e[t].tip})},load_month_form=function(){proboards.calendar.init({type:"",year:proboards.data("calendar_year"),month:proboards.data("calendar_month")})},add_cal_nav=function(){$("#select_calendar_type li").click(function(){window.location=$(this).attr("id")})},setup_cal=function(){proboards.data("can_calendar_event")&&(proboards.calendar.set_board_tree(proboards.data("cat_board_tree_params")),proboards.calendar.set_date({month:proboards.data("calendar_month"),day:proboards.data("calendar_day"),year:proboards.data("calendar_year")}))},standard_conversation_index=function(){$(document).ready(function(){listMan=new listManager("conversations",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{user_id:proboards.data("lm_user_id"),folder:proboards.data("lm_folder"),label_id:proboards.data("lm_label_id")},id:proboards.data("lm_id")}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},listMan,update_labels_preview_hex=function(e,t,i){$("#manage-label-"+e+"-preview").css({color:"#"+t}),i&&$("#"+proboards.data("manage_form_id")+"_color_"+e+"_input").val(t)},update_labels_preview_text=function(e,t){""==t&&(t=" "),$("#manage-label-"+e+"-preview").text(t)},standard_conversation_new=function(){$(document).ready(function(){$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.messagePageManager.init({type:"conversation",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_conversation_participants=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:1,id:proboards.data("lm_id"),data:{id:proboards.data("lm_conversation_id"),json:1,user_search_box:!0}},{route_name:"list_participants"})})},standard_conversation_show=function(){$(document).ready(function(){proboards.data("enable_autosave")&&proboards.autosave.init(6),proboards.messageManager.init(),listMan=new listManager("messages",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{conversation_id:proboards.data("lm_conversation_id")},id:proboards.data("lm_id")}),$(".quick-reply .message").resizable({alsoResize:".message textarea",handles:"s",maxWidth:898,minWidth:200,minHeight:160}),proboards.hotkeys.reply(),proboards.hotkeys.quick_reply(),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),$(".user-link").live("click",function(e){if(e.altKey)return $(this).parent().hasClass("shoutbox-post")||$(".quick-reply form textarea").replaceSelection($(this).attr("title")).focus(),!1}),$(".conversation-participants").on("click",function(e){e.preventDefault(),e.stopPropagation(),proboards.loading(!0),proboards.ajax({url:proboards.route("list_participants"),data:{id:proboards.data("lm_conversation_id")},dataType:"html",success:function(e){proboards.dialog("conversation-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}})})})},listMan,standard_custompage_edit_visual_iframe=function(){var _="#C2FFA5",i="Wraps the contents with a title bar and border.",p={bookmarked_threads:"Bookmarked Threads",calendar:"Calendar",display_poll:"Display Poll",display_specific_post:"Display Post",forum_navigation_menu:"Forum Navigation Menu",forum_search:"Forum Search",forum_statistics:"Forum Statistics",html_box:"HTML Box",member_lists:"Member Lists",member_profile:"Member Profile",notifications:"Notifications",participated_threads:"Participated Threads",personal_messages:"Personal Messages",recent_threads_posts:"Recent Threads/Posts",staff_assistant:"Staff Assistant"};$(document).ready(function(){0==$("#forum_style").length&&$(document.body).attr("id","pbcpe-plain");var a=proboards.data("zone"),u=proboards.data("widget");!function(){var e=$(".pbcpe-zone"),t='<div class="pbcpe-zone-header"><div class="pbcpe-zone-label"></div><div class="pbcpe-zone-controls"><div class="pbcpe-add-widget pbcpe-btn"><span></span>Add Widget</div><div class="pbcpe-zone-settings pbcpe-btn"><span></span>Zone Settings</div></div><br class="clear" /></div><div class="pbcpe-settings-container pbcpe-hide"><div class="pbcpe-common-zone-settings"><div class="pbcpe-czs-left"><input class="pbcpe-make-container" type="checkbox" name="make_container" value="1" /><label class="pbcpe-make-container">Container</label><img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png" title="'+i+'"><span>Title</span></div><div class="pbcpe-czs-right"><input type="text" name="zone_title" /></div><div class="status"></div></div></div><div class="pbcpe-settings-handle"><span></span></div>';e.prepend(t),e.each(function(){var e=$(this).attr("id").replace("zone_",""),t="Zone "+e,i=a[e].title;i&&(t=t+" | "+i);var n=$(".pbcpe-zone-label",this).text(t);$("input.pbcpe-make-container",this).attr("id","make-container-"+e).data("zone",$(this)),$("label.pbcpe-make-container",this).attr("for","make-container-"+e),$(this).data({zoneId:e,labelElem:n,settingsElem:$(".pbcpe-settings-container",this),settingsStatusElem:$(".status",this)})}),$(".pbcpe-zone-settings, .pbcpe-settings-handle").on("click",function(){$(this).parents(".pbcpe-zone").data("settingsElem").slideToggle("easeOutExpo",function(){x()})}),$("input.pbcpe-make-container").each(function(){var t=$(this),i=t.data("zone"),n=i.data("zoneId");1==a[n].container&&t.attr("checked","checked"),t.autoSubmit({url:proboards.data("custom_page_zone_settings_save_url"),beforeSendData:function(e){e.zone_id=n},statusElement:i.data("settingsStatusElem"),success:function(e){t.attr("checked")?(i.addClass("container"),a[n].container=1):(i.removeClass("container"),a[n].container=0),x()}})}),$('.pbcpe-settings-container input[name="zone_title"]').each(function(){var i=$(this).parents(".pbcpe-zone"),n=i.data("zoneId");$(this).val(a[n].title).autoSubmit({url:proboards.data("custom_page_zone_settings_save_url"),beforeSendData:function(e){e.zone_id=n},statusElement:i.data("settingsStatusElem"),success:function(e){var t="Zone "+n;e.title&&(t=t+" | "+e.title),i.data("labelElem").text(t),$(".pbcpe-zone-title",i).text(e.title).pulse(_),a[n].title=e.title,x()}})});var d=null;$(document).on("mouseenter",".pbcpe-widget:not(.pbcpe-new, .pbcpe-edit, .pbcpe-deleted)",function(){if(!proboards.data("sorting")&&(d&&d.remove(),0==$("#pbcpe-widget-menu:visible").length&&0==proboards.active_ajax_calls)){var i=$(this),n=i.attr("id"),e=u[n].zone,a=u[n].type,o=p[a]||"(Unknown Widget)";d=i.overlay({class:"pbcpe-js-overlay",css:{backgroundImage:"none",opacity:.85,zIndex:"9999"}},!0);var t=$('<div class="pbcpe-overlay-controls"></div>'),r=$('<div class="pbcpe-edit-button"><span></span>Settings</div>'),s=$('<div class="pbcpe-delete-button"><span></span>Delete</div>'),l=$('<div class="pbcpe-reorder-button" title="Drag to reorder"><span></span></div>');t.append(r,l,s);var c=$('<div class="pbcpe-overlay-label">'+o+"</div>");d.append(c,t),"(Unknown Widget)"!=o?r.on("click",function(){var t=u[n].data;"html_box"==a?proboards.ajax({url:proboards.data("custom_page_widget_html_box"),data:{id:n,zone_id:e},success:function(e){t.html=e.html,d&&d.remove(),widgetForms.generateForm(i,u,"edit",t),i.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+o+"</div>"),x()}}):(d&&d.remove(),widgetForms.generateForm(i,u,"edit",t),i.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+o+"</div>"),x())}):r.css({opacity:"0.15",cursor:"default"}),s.on("click",function(){confirm("Are you sure you want to delete the widget?")&&proboards.ajax({url:proboards.data("custom_page_widget_delete_url"),data:{id:n,type:a,zone_id:e},success:function(e){d&&d.remove(),i.addClass("pbcpe-deleted"),i.fadeOut(function(){$(this).remove(),x()}),delete u[n]}})}),d.on("mouseleave",function(e){proboards.data("sorting")||(d.unbind("mouseleave"),d&&d.remove())})}}),$(document).on("click",":not(.pbcpe-js-overlay)",function(){$(".pbcpe-js-overlay",this).remove()}),$(".pbcpe-widgets").sortable({connectWith:".pbcpe-widgets",forcePlaceholderSize:!0,handle:".pbcpe-reorder-button",items:".pbcpe-widget:not(.pbcpe-new)",placeholder:"pbcpe-widget-placeholder",tolerance:"pointer",start:function(e,t){$("body").data("currentSortable",$(this)),proboards.data("sorting",!0);var i=$(t.item).height()-2;$(".pbcpe-widget-placeholder").css({height:i,backgroundColor:"lightyellow",border:"1px solid goldenrod"})},update:function(e,t){var i=$(t.item),n=i.attr("id"),a=[];$(".pbcpe-widget:not(.pbcpe-new, .pbcpe-edit)",this).each(function(){var e=$(this).attr("id");e&&a.push(e)});var o=u[n].zone,r=i.parents(".pbcpe-zone").attr("id").replace("zone_",""),s={ids:a,zone_id:r};if(o!=r&&null!=t.sender)u[n].zone=r,s.old_zone_id=o,s.widget_id=n;else if(o!=r&&null==t.sender)return;proboards.ajax({url:proboards.data("custom_page_widget_order_url"),data:s,success:function(){i.attr("style","position: relative;").pulse(_),x()}})},stop:function(e,t){$("body").data("currentSortable",null),proboards.data("sorting",!1)}})}()}),widgetForms={commonFieldData:[{std_input_wrapper:0,type:"freestyle",html:'<div class="pbcpe-common-widget-settings"><div class="pbcpe-cws-left"></div><div class="pbcpe-cws-right"></div></div>',css:{borderBottom:"1px dashed goldenrod"}},{std_input_wrapper:0,type:"text",name:"title",parent:".pbcpe-cws-right"},{std_input_wrapper:0,type:"checkbox",name:"container",label:"Container",tip:i,parent:".pbcpe-cws-left"},{std_input_wrapper:0,type:"freestyle",html:"<span>Title</span>",parent:".pbcpe-cws-left"}],fieldData:{bookmarked_threads:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],calendar:[{type:"select",name:"calendar_type",label:"Type",options:[{value:"list",text:"List"},{value:"chart",text:"Chart"}]},{type:"freestyle",html:'<div class="num-events-wrapper"></div>'},{type:"select",name:"num_events",label:"Display",options:proboards.form.genOptionRange(1,20,1,10),std_input_wrapper:0,parent:".num-events-wrapper"},{type:"freestyle",html:"<span>Upcoming Events</span>",css:{marginBottom:"4px",verticalAlign:"middle"},parent:".num-events-wrapper",std_input_wrapper:0},{type:"color",name:"border_color",label:"Border",value:"aaaaaa"}],display_poll:[{type:"text",name:"thread_id",placeholder:"Enter Thread ID Here"},{type:"freestyle",html:'<div class="poll-colors-wrapper"><div class="input">Poll Colors</div></div>',std_input_wrapper:0},{type:"color",name:"first",label:"1st",parent:".poll-colors-wrapper"},{type:"color",name:"second",label:"2nd",parent:".poll-colors-wrapper"},{type:"color",name:"third",label:"3rd",parent:".poll-colors-wrapper"},{type:"color",name:"fourth",label:"4th+",parent:".poll-colors-wrapper"}],display_specific_post:[{type:"text",name:"post_id",placeholder:"Enter Post ID Here"}],forum_navigation_menu:[{type:"select",name:"orientation",label:"Type",options:[{value:"horizontal",text:"Horizontal"},{value:"vertical",text:"Vertical"}]},{type:"checkbox",name:"customize_colors",label:"Customize Colors"},{type:"color",name:"color_background",label:"Background"},{type:"color",name:"color_text",label:"Text"},{type:"color",name:"color_highlight",label:"Highlight"},{type:"color",name:"color_border",label:"Border"}],forum_search:[{type:"radio",name:"result_type",breaks:!0,options:[{value:"posts",text:"display results as posts",selected:!0},{value:"threads",text:"display results as threads"}]}],forum_statistics:[{type:"freestyle",html:'<div class="checkbox-wrapper"><div class="input">Display</div></div>'},{parent:".checkbox-wrapper",type:"checkbox",name:"total_threads",label:"Total Threads"},{parent:".checkbox-wrapper",type:"checkbox",name:"total_posts",label:"Total Posts"},{parent:".checkbox-wrapper",type:"checkbox",name:"total_members",label:"Total Members"},{parent:".checkbox-wrapper",type:"checkbox",name:"newest_user",label:"Newest Member"},{parent:".checkbox-wrapper",type:"checkbox",name:"most_users_online",label:"Most Users Online"}],html_box:[{type:"code_editor",name:"html",label:"HTML",options:proboards.form.genOptionRange(1,40,1,10)}],member_lists:[{type:"select",name:"view",label:"Type",options:[{value:"birthdays",text:"Birthdays"},{value:"staff",text:"Staff"},{value:"top_posters",text:"Top Posters"},{value:"online",text:"Users Online",selected:!0}]},{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,40,1,10)}],member_profile:[{type:"radio",name:"view_self",breaks:!0,options:[{value:"1",text:"Show members their own profile",selected:!0},{value:"0",text:"Specific Member"}]},{type:"user",name:"user_id",allowManualInput:!0,eventError:!0},{type:"color",name:"border_color",label:"Border",value:"aaaaaa"}],notifications:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],participated_threads:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],personal_messages:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(0,20,1,10)}],recent_threads_posts:[{type:"select",name:"recent_type",label:"Type",options:[{value:"threads",text:"Recent Threads"},{value:"posts",text:"Recent Posts"}]},{type:"radio",name:"where",label:"Display From",breaks:!0,options:[{value:"forum",text:"Entire Forum",selected:!0},{value:"board",text:"Specific Board"}]},{type:"board_select",name:"board_id"},{type:"radio",name:"post_display",label:"Display",breaks:!0,options:[{value:"all",text:"All Posts",selected:!0},{value:"open",text:"Only Opening Posts"}]},{type:"select",name:"display_how_many_threads",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)},{type:"select",name:"display_how_many_posts",label:"Display How Many",options:proboards.form.genOptionRange(1,10,1,5)}],staff_assistant:[]},generateForm:function(o,r,s,e){var t=o.attr("id"),i=t?r[t].zone:o.data("zone"),l=t?r[t].type:o.data("type");o.hide();var n="add"==s?"pbcpe-new":"pbcpe-edit";n+=" pbcpe-form widget-"+l+" "+o.attr("class");var c=$("<div></div>").addClass(n),d=$("<form></form>");t&&d.append('<input type="hidden" name="id" value="'+t+'"/>'),d.append('<input type="hidden" name="type" value="'+l+'"/>'),d.append('<input type="hidden" name="zone_id" value="'+i+'"/>'),c.append(d);var a=$.extend(!0,[],this.fieldData[l]);a=this.commonFieldData.concat(a);for(var u=0;u<a.length;u++){fieldOpts=a[u];var p=fieldOpts.name,h=null;for(var f in void 0!==fieldOpts.value&&(h=fieldOpts.value,delete fieldOpts.value),e)e.hasOwnProperty(f)&&0==f.indexOf(p)&&(f===p?h=e[f]:fieldOpts[f]=e[f]);var m=fieldOpts.parent?$(fieldOpts.parent,d):d;proboards.form.generateInput(fieldOpts,h,m)}var g=$('<input type="submit" value="Save" />'),v=$('<button class="pbcpe-widget-cancel">Cancel</button>'),b=$("<div></div>").append(g,v);d.append(b),o.after(c),"function"==typeof y[l]&&y[l](c,s),v.on("click",function(){return $.clearInputError(),"add"==s?(o.remove(),c.remove()):(c.remove(),o.show()),x(),!1}),$(d).on("submit",function(){"function"==typeof A[l]&&A[l](c),$.clearInputError();var a={},e=d.serializeArray();$.each(e,function(){a[this.name]=this.value});var i=c.overlay({},!0),t="add"==s?proboards.data("custom_page_widget_add_url"):proboards.data("custom_page_widget_edit_url");return proboards.ajax({url:t,data:{settings:a},success:function(e){c.remove();var t=$(".title-bar",o).clone();o.html(e.html).prepend(t),"add"==s&&o.attr("id",e.id),1==a.container?o.addClass("container"):o.removeClass("container");var i=a.title||"";$(".pbcpe-widget-title",o).text(i),$.extend(r,e.pb_data_update);var n=o.attr("id");o.data({added:!0,formData:e.pb_data_update[n].data}),"function"==typeof w[l]&&w[l](o),o.show()},error:function(e){var t=$('input[name="'+e.field+'"]',c);if(t.length)$.inputError(t,e.error);else{var i=$(".pbcpe-widget-corner-error",c);0==i.length&&(i=$('<div class="pbcpe-widget-corner-error"></div>')).appendTo(c),i.text(e.error).stop(!0,!0).show().delay(1e4).fadeOut()}},complete:function(){i.remove();var e=o.data("added")?o:c,t=o.data("added")?_:"#FFB2B2";e.pulse(t),x()}}),!1})}};var y={bookmarked_threads:function(e,t){"add"==t&&$('input[name="title"]',e).val("Bookmarked Threads")},calendar:function(e,t){var i=$('input[name="title"]',e),n=i.val(),a=$('select[name="calendar_type"]',e),o=$(".num-events-wrapper",e),r=$(".input-border_color",e);a.on("change",function(){"list"==a.val()?(o.show(),r.hide(),""==i.val()&&i.val("Upcoming Events")):(o.hide(),r.show(),"Upcoming Events"==i.val()&&i.val(""))}).trigger("change"),"add"!=t&&i.val(n)},display_poll:function(e,t){"add"==t&&$('input[name="title"]',e).val("Poll Question");$(".input-thread_id",e).before("<label>"+proboards.data("forum_url")+"/thread/</label>")},display_specific_post:function(e,t){$(".input-post_id",e).before('<div class="custom-label-wrapper"><label>'+proboards.data("forum_url")+'/post/</label><img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png" title="Use the \'Link to Post\' feature to get the ID when viewing posts."></div>')},forum_navigation_menu:function(t,e){$('input[name="customize_colors"]',t).bind("change",function(){var e=$(".input-color_background,.input-color_border,.input-color_highlight,.input-color_text",t);$(this).is(":checked")?e.show():e.hide()}).trigger("change")},forum_search:function(e,t){"add"==t&&$('input[name="title"]',e).val("Search Forum...")},forum_statistics:function(e,t){var i=$('input[name="title"]',e);"add"==t&&(i.val("Forum Statistics"),$('input[name="total_threads"], input[name="total_posts"], input[name="total_members"], input[name="newest_user"], input[name="most_users_online"]',e).attr("checked","checked"))},html_box:function(e,t){},member_lists:function(e,t){var i=$('input[name="title"]',e),n=$('select[name="view"]',e);if("add"==t){var a=n.find("option:selected").text();i.val(a)}n.on("change",function(){var e=i.val();if("Birthdays"==e||"Staff"==e||"Top Posters"==e||"Users Online"==e){var t=n.find("option:selected").text();i.val(t)}})},member_profile:function(e,t){$('input[name="view_self"]',e).on("change",function(){$(".input-user_id",e).toggle(0==$('input[name="view_self"]:checked',e).val())}).trigger("change")},notifications:function(e,t){"add"==t&&$('input[name="title"]',e).val("Notifications")},participated_threads:function(e,t){"add"==t&&$('input[name="title"]',e).val("Participated Threads")},personal_messages:function(e,t){"add"==t&&$('input[name="title"]',e).val("Personal Messages")},recent_threads_posts:function(e,t){var i=$('input[name="title"]',e),n=(i.val(),$('select[name="recent_type"]',e)),a=$(".input-post_display",e),o=$(".input-display_how_many_threads",e),r=$(".input-display_how_many_posts",e);n.on("change",function(){"threads"==n.val()?(a.hide(),o.show(),r.hide(),"add"!=t||i.data("changed")||i.val("Recent Threads")):(a.show(),o.hide(),r.show(),"add"!=t||i.data("changed")||i.val("Recent Posts"))}).trigger("change");var s=$('input[name="board_id_display"]',e),l=$('input[name="where"]',e);"forum"==l.filter(":checked").val()&&s.hide(),l.on("change",function(){"forum"==$(this).val()?s.hide():s.show()}),"add"==t&&(s.on("change.widget",function(e,t){i.val(t.name)}),i.on("change",function(){i.data("changed",!0),s.unbind("change.widget")}))},staff_assistant:function(e,t){}},A={html_box:function(e){$('textarea[name="html"].CodeMirror-textarea',e).data("editor").save()}},w={display_poll:function(e){var t=e.data("formData");void 0!==t.poll_opts&&(t.poll_opts.pollImgSrc=proboards.data("poll_img_src"),t.poll_opts.checkImgSrc=proboards.data("check_img_src"),$(".poll.show",e).poll(t.poll_opts),$(".view-voters, .poll-closed",e).remove())},display_specific_post:function(e){proboards.embedded.processEmbedded()},recent_threads_posts:function(e){proboards.embedded.processEmbedded()}},x=function(){$("body").trigger("resizeIframe")}},standard_custompage_widgets=function(){$(document).ready(function(){var o=null;$(".widget-member_profile form").on("submit",function(e){var t=$('input[name="user_id"]',this).val(),i=$('input[name="update"]',this),n=i.val(),a=$(".personal-text",$(this).parents(".widget-content"));return o!=n&&proboards.ajax({url:$(this).attr("action"),data:{status:n,user_id:t},success:function(e){a.html(e.entered_text),i.attr("value","")},complete:function(e){o=n}}),!1}),$(".poll.show").each(function(){var e=$(this),t=e.parents(".widget-display_poll").attr("id"),i=proboards.data("widget");if(void 0!==i[t].data.poll_opts){var n=i[t].data.poll_opts;n.pollImgSrc=proboards.data("poll_img_src"),n.checkImgSrc=proboards.data("check_img_src"),e.poll(n),$(".view-voters, .poll-closed",e).remove(),$("h3",e).on("click",function(){window.location=proboards.route("thread",{thread_id:i[t].data.thread_id})})}}),proboards.embedded.processEmbedded()})},standard_post_base=function(){$(document).ready(function(){proboards.postManager.init({id:proboards.data("lm_id")}),listMan=new listManager("posts",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_thread_by_ip=function(){$(document).ready(function(){$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},standard_post_edit=function(){$(document).ready(function(){proboards.postPageManager.init({type:"post",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_post_likes=function(){$(document).ready(function(){listMan=new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_post_id"),type:"likes",user_search_box:!0},id:proboards.data("lm_id")})})},listMan,standard_post_new=function(){$(document).ready(function(){proboards.postPageManager.init({type:"post",form_id:proboards.data("form_id")}),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg()})},standard_registration_register=function(){$(document).ready(function(){var n=$('input[name="username"]'),a="";n.on("keyup change",function(){var t=$("tr#username-available"),i=$("td#username-available-msg",t),e=n.val();a&&clearTimeout(a),e.length?a=setTimeout(function(){proboards.ajax({url:proboards.route("e_register_check_username"),ignorePending:!0,data:{username:e},dataType:"json",success:function(e){""!=e.available&&(i.html('<span class="success">'+e.available+"</span>"),t.show())},error:function(e){""!=e.error&&(i.html('<span class="error">'+e.error+"</span>"),t.show())},complete:function(){n.val().length||(t.hide(),i.html(""))}})},500):(t.hide(),i.html(""))})})},standard_search_index=function(){$(document).ready(function(){window.onunload=function(){},$('input[name="what_at_least_one"]').focus();var b=proboards.data("locale_settings").input_date_placeholder;({options:{formId:""},init:function(){var o=this,e=o.options.formId=proboards.data("form_id"),t=$('input[name="what_at_least_one"]'),i=$('input[name="what_all"]'),n=$('input[name="what_exact_phrase"]'),a=$('input[name="what_without"]'),r=$('input[name="where_thread_title"]'),s=$('input[name="where_board_subboard_placeholder"]'),l=$('input[name="where_category_placeholder"]'),c=$('input[name="where_without_placeholder"]'),d=$('input[name="when_hours"]'),u=$('input[name="when_days"]'),p=$('input[name="when_between_start"]'),h=$('input[name="when_between_end"]'),f=$('input[name="when_exact_date"]'),m=$('input[name="when_before_date"]'),g=$('input[name="who_at_least_one_placeholder"]'),v=$('select[name="who_only_made_by"]'),b=$('input[name="who_except_placeholder"]'),_=$('input[name="who_member_group_placeholder"]'),y=$('input[name="who_threads_created_by_placeholder"]'),A=[t,i,n,a,r,s,l,c,d,u,p,h,f,m,g,v,b,_,y];s.data({dialog:$("#board-list"),hidden:$('input[name="where_board_subboard"]'),dialogTitle:"Select Boards",type:"checkbox"}),l.data({dialog:$("#category-list"),hidden:$('input[name="where_category"]'),dialogTitle:"Select Categories",type:"checkbox"}),c.data({dialog:$("#exclude-list"),hidden:$('input[name="where_without"]'),dialogTitle:"Select Boards to Exclude",type:"checkbox"}),g.data({dialog:$("#"+e+"_who_at_least_one_pick_input-searchbox-container"),hidden:$('input[name="who_at_least_one"]'),hiddenName:"who_at_least_one",dialogTitle:"Select Who",searchField:$('input[name="who_at_least_one_pick"]'),type:"usersearch"}),v.data({hidden:$('input[name="who_made_by"]'),hiddenName:"who_made_by"}),b.data({dialog:$("#"+e+"_who_except_pick_input-searchbox-container"),hidden:$('input[name="who_except"]'),hiddenName:"who_except",dialogTitle:"Select Who",searchField:$('input[name="who_except_pick"]'),type:"usersearch"}),_.data({dialog:$("#group-list"),hidden:$('input[name="who_member_group"]'),hiddenName:"who_member_group",dialogTitle:"Select Groups",type:"checkbox"}),y.data({dialog:$("#"+e+"_who_threads_created_by_pick_input-searchbox-container"),hidden:$('input[name="who_threads_created_by"]'),dialogTitle:"Select Who",searchField:$('input[name="who_threads_created_by_pick"]'),type:"usersearch"});for(var w=$("#transcription"),x=0;x<A.length;x++){var k=A[x];k.prop("disabled")&&(k.data("hidden")?k.add(k.data("hidden")).prop("disabled",!1):k.prop("disabled",!1))}var C=[s,l,c,_];for(x=0;x<C.length;x++)0!=C[x].length&&function(){var t=C[x],e=t.data("dialog"),i=t.data("hidden"),n=t.data("dialogTitle");e.dialog({title:n,autoOpen:!1,width:510,height:455,buttons:[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){$(this).dialog("close")}}],close:function(){var e=o.set_values($("input:checked",this));i.val(e[0]),t.val(e[1]),w.html(o.transcribe_search())}}),o.setup_dialog(t)}();var S=[g,b,y];for(x=0;x<S.length;x++)0!=S[x].length&&function(){var t=S[x],i=t.data("searchField"),e=t.data("dialog"),n=t.data("hidden"),a=t.data("dialogTitle");e.dialog({title:a,autoOpen:!1,width:525,buttons:{Done:function(){$(this).dialog("close")}},close:function(){var e=i.val();n.val(e),t.val(o.set_values_pick(this)),w.html(o.transcribe_search())}}),o.setup_dialog(t)}();setTimeout(function(){o.apply_query_string(C,S)},1500);var T=$(["#"+e+"_when_days_input","#"+e+"_when_hours_input","#"+e+"_when_between_start_input","#"+e+"_when_between_end_input","#"+e+"_when_exact_date_input","#"+e+"_when_before_date_input"].join(",")),D=[{clickSelectors:["#"+e+"_when_days_input","#"+e+"_when_hours_input"],names:["when_days","when_hours"]},{clickSelectors:["#"+e+"_when_between_start_input","#"+e+"_when_between_end_input"],names:["when_between_start","when_between_end"]},{clickSelectors:["#"+e+"_when_exact_date_input"],names:["when_exact_date"]},{clickSelectors:["#"+e+"_when_before_date_input"],names:["when_before_date"]}];for(x=0;x<D.length;x++){var E=D[x].clickSelectors,I=D[x].names;$(E.join(",")).bind("click focus",{clickSelectors:E,names:I},function(e){var t=e.data.clickSelectors,i=e.data.names;T.addClass("disabled").removeAttr("name"),$(t.join(",")).removeClass("disabled");for(var n=0;n<i.length;n++)$(t[n]).attr("name",i[n])}).bind("focusout change",{clickSelectors:E,names:I},function(e){o.check_disabled($(e.data.clickSelectors.join(",")),e.data.names)})}var P=g.add(v).add(b).add(_),M=g.data("hidden").add(v).add(b.data("hidden")).add(_.data("hidden"));P.on("focus click",function(){if(P.addClass("disabled"),M.removeAttr("name"),"select"==this.nodeName.toLowerCase())$(this).removeClass("disabled").attr("name","who_only_made_by");else{var e=$(this).removeClass("disabled").data("hiddenName");$(this).data("hidden").attr("name",e)}}),this.check_without(),t.add(i).add(n).on("keyup",function(){o.check_without()}),w.html(this.transcribe_search()),$("input, select").on("click change focus",function(){w.html(o.transcribe_search())});var O=function(){for(var e=0;e<A.length;e++){var t=A[e];(""==t.val()||t.is(".disabled"))&&(t.data("hidden")?t.add(t.data("hidden")).prop("disabled",!0).val(""):t.prop("disabled",!0).val(""))}var i=[s,l,c,g,b,_,y];for(e=0;e<i.length;e++)i[e].prop("disabled",!0)},N=40,j=function(){if(!$("#"+e).data("form")&&N--)return setTimeout(j,250);proboards.data("user").is_logged_in?$("#"+e).form("option","submit",O):$("#"+e).on("captcha-submit",function(e,t,i){"formSubmit"==t&&O()})};j()},transcribe_search:function(){for(var e=this,t=e.options.formId,i=[],n=[t+"_what_at_least_one_input",t+"_what_all_input",t+"_what_exact_phrase_input",t+"_what_without_input",t+"_where_thread_title_input",t+"_where_board_subboard_placeholder_input",t+"_where_category_placeholder_input",t+"_where_without_placeholder_input",[t+"_when_days_input",t+"_when_hours_input"],[t+"_when_between_start_input",t+"_when_between_end_input"],t+"_when_exact_date_input",t+"_when_before_date_input",t+"_who_at_least_one_placeholder_input",t+"_who_only_made_by_input",t+"_who_except_placeholder_input",t+"_who_member_group_placeholder_input",t+"_who_threads_created_by_placeholder_input",[t+"_display_as_input_radio_0",t+"_display_as_input_radio_1"]],a=0;a<n.length;a++){var o=n[a];"string"!=typeof o&&(o=o[0]);var r=$("#"+o);if(0!=r.length){var s=r.val(),l=""!=s;switch(o){case t+"_what_at_least_one_input":if(l){var c=e.escape_and_bold(s);i.push("with at least "+e.check_plural(c," ","the word ","one of the words ")+c)}break;case t+"_what_all_input":if(l){c=e.escape_and_bold(s);i.push(e.check_plural(c," ","with the word ","with all the words ")+c)}break;case t+"_what_exact_phrase_input":if(l){c=e.escape_and_bold(s);i.push("with the phrase "+c)}break;case t+"_what_without_input":if(l){c=e.escape_and_bold(s);i.push("without the "+e.check_plural(c," ","word ","words ")+c)}break;case t+"_where_thread_title_input":if(l){c=e.escape_and_bold(s);i.push("where the thread title contains "+c)}break;case t+"_where_board_subboard_placeholder_input":if(l){c=e.escape_and_bold(s);i.push("in the "+e.check_plural(c,",","board ","boards ")+c)}break;case t+"_where_category_placeholder_input":if(l){c=e.escape_and_bold(s);i.push("in the "+e.check_plural(c,",","category ","categories ")+c)}break;case t+"_where_without_placeholder_input":if(l){c=e.escape_and_bold(s);i.push("without searching in the "+e.check_plural(c,",","board ","boards ")+c)}break;case t+"_when_days_input":var d=n[a],u=$("#"+d[0]),p=$("#"+d[1]),h=1==(u=u.hasClass("disabled")?"":parseInt(e.strip_html(u.val())))?" day":" days",f=1==(p=p.hasClass("disabled")?"":parseInt(e.strip_html(p.val())))?" hour":" hours";""==p||isNaN(p)||""==u||isNaN(u)?""==p||isNaN(p)?""==u||isNaN(u)||i.push("posted within the last "+e.bold(u)+h):i.push("posted within the last "+e.bold(p)+f):i.push("posted within the last "+e.bold(u)+h+" and "+e.bold(p)+f);break;case t+"_when_between_start_input":d=n[a];var m=$("#"+d[0]),g=$("#"+d[1]);m=m.hasClass("disabled")?"":e.strip_html(m.val()),g=g.hasClass("disabled")?"":e.strip_html(g.val()),""!=m&&m!=b&&""!=g&&g!=b&&i.push("posted between the dates "+e.bold(m)+" and "+e.bold(g));break;case t+"_when_exact_date_input":if(s!=b&&l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push("posted only on the exact date "+c)}break;case t+"_when_before_date_input":if(s!=b&&l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push("posted before the date "+c)}break;case t+"_who_at_least_one_placeholder_input":if(l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push(e.check_plural(c,",","by the member ","by at least one of the members ")+c)}break;case t+"_who_only_made_by_input":if(!r.hasClass("disabled")){c=e.escape_and_bold($("option:selected",r).text());i.push("made by  "+c)}break;case t+"_who_except_placeholder_input":if(l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push("except posts by the "+e.check_plural(c,",","member ","members ")+c)}break;case t+"_who_member_group_placeholder_input":if(l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push("by the member "+e.check_plural(c,",","group ","groups ")+c)}break;case t+"_who_threads_created_by_placeholder_input":if(l&&!r.hasClass("disabled")){c=e.escape_and_bold(s);i.push("in threads created by "+e.check_plural(c,",","the member ","at least one of the members ")+c)}break;case t+"_display_as_input_radio_0":var v=$('input[name="display_as"]:checked');v=0==v.val()?"and display results as <strong>posts</strong>.":"and display results as <strong>threads</strong>.",i.push(v)}}}return"Search for posts "+i.join(", ")},bold:function(e){return"<strong>"+e+"</strong>"},check_disabled:function(e,t){for(var i=!1,n=0;n<e.length;n++){if((a=$(e[n]).val())&&a!=b){i=!0;break}}for(n=0;n<e.length;n++){var a=$(e[n]).val();i||""!=a&&a!=b?$(e[n]).removeClass("disabled").attr("name",t[n]):$(e[n]).addClass("disabled").removeAttr("name")}},check_plural:function(e,t,i,n){return 0<=e.indexOf(t)?n:i},check_without:function(){for(var e=$('input[name="what_at_least_one"]'),t=$('input[name="what_all"]'),i=$('input[name="what_exact_phrase"]'),n=$('input[name="what_without"]'),a=[e,t,i],o=!1,r=0;r<a.length;r++)$(a[r]).val()&&(o=!0);o?$(n).removeAttr("readonly").removeClass("disabled"):$(n).attr("readonly","readonly").addClass("disabled").val("")},clear_fields:function(e){for(var t=0;t<e.length;t++){var i=e[t];i.hasClass("date")?i.val(b):i.val(""),i.data("hidden")&&i.data("hidden").val(""),i.data("dialog")&&!i.data("searchField")&&$("input:checked",i.data("dialog")).removeAttr("checked"),i.data("searchField")&&i.data("searchField").val("")}},escape_and_bold:function(e){return e=(e=e.replace(/>/g,"&gt;")).replace(/</g,"&lt;"),this.bold(e)},setup_dialog:function(l){l.on("focus",function(){l.data("dialog").dialog("open")}),l.one("focus.onetime",function(e){var t=l.data("dialog"),i=l.data("hidden").val();switch(l.data("type")){case"checkbox":for(var n=i.split(","),a={},o=0;o<n.length;o++)a[n[o]]=!0;$('input[type="checkbox"]',t).each(function(){a[$(this).val()]&&$(this).prop("checked",!0)});break;case"usersearch":if(!i)break;var r=$(".user-search",t).attr("id"),s=$("."+r+"-selectlist");proboards.loading(!0),proboards.ajax({url:proboards.route("get_selected_users"),data:{ids:i},success:function(e){s.selectlist("apply_selected",e.results)},complete:function(){proboards.loading(!1)}})}})},set_values:function(e){var t=[],i=[];return e.each(function(){var e=$(this);t.push(e.val()),i.push(e.next("label").text())}),t.join(", "),i.join(", "),[t,i]},set_values_pick:function(e){var t=[];return $(" .micro-profile .name",e).each(function(){t.push($(this).text())}),t.join(", "),t},strip_html:function(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},apply_query_string:function(e,s){var l=this;if(!(location.search.length<=1)){for(var c=proboards.consolidateParams(["search"]),d=0;d<e.length;d++)if(0!=e[d].length){var t=e[d],i=t.data("dialog"),n=t.data("hidden");if(c[n.attr("name")]){for(var a=n.val(),o=0,r=(a=a.split(",")).length;o<r;o++)$('input[value="'+parseInt(a[o])+'"]',i).prop("checked",!0);var u=l.set_values($("input:checked",i));n.val(u[0]),t.val(u[1])}}for(d=0;d<s.length;d++)0!=s[d].length&&function(){var i=s[d],n=i.data("searchField"),a=i.data("dialog"),o=i.data("hidden"),e=$(".user-search",a).attr("id"),r=$("."+e+"-selectlist");if(c[o.attr("name")]){var t=o.val();t&&proboards.ajax({url:proboards.route("get_selected_users"),data:{ids:t},success:function(e){r.selectlist("apply_selected",e.results);var t=n.val();o.val(t),i.val(l.set_values_pick(a)),i.off("focus.onetime")}})}}();$("#transcription").html(l.transcribe_search())}}}).init()})},standard_search_results_posts=function(){$(document).ready(function(){proboards.postManager.init({id:proboards.data("lm_id")}),listMan=new listManager("posts",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_search_results_threads=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},standard_thread_edit=function(){$(document).ready(function(){proboards.postPageManager.init({type:"thread",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_thread_find_threads=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},standard_thread_new=function(){$(document).ready(function(){proboards.postPageManager.init({type:"thread",form_id:proboards.data("form_id")}),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg()})},standard_thread_participants=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:1,id:proboards.data("lm_id"),data:{thread_id:proboards.data("lm_thread_id"),json:1,user_search_box:!0}},{route_name:"thread_participants_list"})})},standard_thread_participated=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")},{search:!1})})},standard_thread_recent=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{recent:1}})})},standard_thread_show=function(){$(document).ready(function(){if($(".control-icons .event_icon").click(function(){0==$("#event_range").length&&$("body").append($("<div>").attr("id","event_range"));$("#event_range").dialog({autoOpen:!1,width:360,height:120,maxHeight:600,title:"Event"}),$("#event_range").html(proboards.data("range_string")),$("#event_range").dialog("open"),553<$("#event_range").height()&&($("#event_range").dialog("option","height",600),$("#event_range").dialog("close"),$("#event_range").dialog("open"))}),proboards.data("poll_opts")){var e=proboards.data("poll_opts");e.pollImgSrc=proboards.data("poll_img_src"),e.checkImgSrc=proboards.data("check_img_src"),$(".poll.show").poll(e)}proboards.data("quick_reply")&&$(".user-link").live("click",function(e){if(e.altKey)return $(this).parent().hasClass("shoutbox-post")||$(".quick-reply form textarea").replaceSelection($(this).attr("title")).focus(),!1}),proboards.data("enable_autosave")&&proboards.autosave.init(3),$(".quick-reply .message").resizable({alsoResize:".message textarea",handles:"s",maxWidth:898,minWidth:200,minHeight:160}),proboards.hotkeys.reply(),proboards.hotkeys.quick_reply()})},standard_unsubscribe_index=function(){$(document).ready(function(){proboards.form.confirm_ignore_changes(".confirm-ignore-changes form:first"),$("#s-none").on("click",function(){$(".form_user_edit_notifications select").not(":disabled").val("n")})})},standard_user_edit_admin=function(){function e(){var e=$("#account-disabled-until"),t=$("#blank-placeholder"),i=$('input[id*="account_disabled_input_radio_0"]'),n=$('input[id*="account_disabled_input_radio_1"]'),a=$('input[name="account_disabled_until_date"]'),o=$('input[name="account_disabled_until_time"]');0!==i.length&&0!==n.length&&(i.prop("checked")?(proboards.data("user_id")===proboards.data("profile_id")&&proboards.alert("You have checked the option to disable your own account. Please make certain as an admin you fully intend to disable your account before saving."),""==o.val()&&o.val(o.hasClass("military")?"00:00":"12:00 AM"),e.show(),t.hide()):(e.hide(),t.show(),a.val(""),o.val("")))}function t(){var e=$("#pms-disabled-until"),t=$("#pms-blank-placeholder"),i=$('input[id*="pms_disabled_input_radio_1"]'),n=$('input[name="pms_disabled_until_date"]'),a=$('input[name="pms_disabled_until_time"]');i.attr("checked")?(e.hide(),t.show(),n.val(""),a.val("")):(""==a.val()&&a.val(a.hasClass("military")?"00:00":"12:00 AM"),e.show(),t.hide())}$(document).ready(function(){$(".js-staff-exists").length&&(e(),$('input[id*="account_disabled_input"]').bind("click",function(){e()}),t(),$('input[id*="pms_disabled_input"]').bind("click",function(){t()}))})},standard_user_edit_avatar=function(){$(document).ready(function(){proboards.avatar.setAttributes(proboards.data("avatar_attributes")),imageAdded=!1,flashAdded=!1,forumImageAdded=!1,is_loaded=0,isForumAvatarsLoaded=!1,$previewImageAvatar=$("#avatar-preview #image-avatar"),$previewFlashAvatar=$("#avatar-preview .flash-avatar"),$previewNoAvatar=$("#avatar-preview-empty"),$previewForumAvatar=$("#avatar-preview #forum-avatar");var yes_clicked=!1;change("r"+proboards.data("avatar_type"),!0),proboards.avatar.setEditorData(proboards.data("user_id"),proboards.data("encrypted_flash_data")),proboards.avatar.loadEditorThumb("flash-avatar"),proboards.dialog("forum-avatar-editor-container",{title:"Pick a Forum Avatar",autoOpen:!1,width:549,height:415}),proboards.dialog("image-avatar-editor-container",{title:"Upload/Change Avatar",autoOpen:!1,width:560,minWidth:560,height:"auto",open:function(){$(".fileinput-button").css("overflow","hidden")},close:function(){$(".fileinput-button").css("overflow","visible")}}),proboards.dialog("flash-avatar-editor-container",{autoOpen:!1,title:"Avatar Maker",resizable:!1,width:820,height:560,open:function(){yes_clicked=!1},beforeClose:function(){if(1==proboards.avatar.avatar_changed&&!yes_clicked)return proboards.confirm("Are you sure you want to close without saving changes?",function(){yes_clicked=!0,$("#flash-avatar-editor-container").dialog("close")},{onNo:function(){return!1}}),!1}}),$("#link-image").click(function(){var e=$("#link-text").val();if(""!=e&&"http://"!=e){if(!check_image_link(e))return!1;proboards.ajax({url:proboards.data("avatar_link_url"),data:{link:e,user_id:proboards.data("profile_id")},success:function(e){$("#image-avatar").html('<img class="max-size" src="'+e.url+'" />'),$("#image-avatar-preview").html('<img class="max-size" src="'+e.url+'" />'),$("#image-avatar-editor-container").dialog("close"),$("#link-text").val("http://"),$("#link-image").removeClass("button").addClass("button-disabled"),change("r1")},error:function(e){link_image_error(e.error)}})}return!1}),$("#link-text").bind("keyup change",function(){""==$("#link-text").val()||"http://"==$("#link-text").val()?$("#link-image").addClass("button-disabled"):$("#link-image").removeClass("button-disabled")}),$("#link-text").bind("keydown",function(e){if(13==e.which)return $("#link-image").click(),!1}),pbFileUpload.init({onDragEnter:edit_image_avatar},{acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),url:proboards.route("upload_avatar",{user_id:proboards.data("profile_id")}),maxNumberOfFiles:1,maxFileSize:proboards.data("avatar_size_limit")}),$("#fileupload").on("fileuploadsend",function(){$(".fileupload-buttonbar").hide()}).on("fileuploaddone",function(e,t){if($.isArray(t.result)&&t.result.length){var i=t.result[0].thumbnail_url;$("#image-avatar").add("#image-avatar-preview").html('<img class="max-size" src="'+i+'">'),change("r1")}window.setTimeout(function(){$("#image-avatar-editor-container").dialog("close"),$(".fileupload-buttonbar").show(),$("table.files tbody").remove()},2e3)})})},imageAdded,flashAdded,forumImageAdded,is_loaded,isForumAvatarsLoaded,$previewImageAvatar,$previewFlashAvatar,$previewNoAvatar,$previewForumAvatar;function update_radio(e){$("#"+e).attr("checked","checked")}function change(e,t){"r0"==e?(remove_forum_avatar(),remove_image_avatar(),remove_flash_avatar()):"r1"==e?(remove_forum_avatar(),remove_flash_avatar(),add_image_avatar()):"r2"==e?(remove_forum_avatar(),remove_image_avatar(),add_flash_avatar()):"r3"==e?(remove_forum_avatar(),add_image_avatar(),add_flash_avatar()):"r4"==e&&(remove_image_avatar(),remove_flash_avatar(),add_forum_avatar(),$('input[name="forum_avatar"]').val()!=$("#forum-avatar img").attr("src")&&($('input[name="forum_avatar"]').val($("#forum-avatar img").attr("src")),t||$('input[name="forum_avatar"]').change())),update_radio(e),update_empty_avatar()}function update_empty_avatar(){imageAdded?$previewImageAvatar.toggleClass("hide",!1):$previewImageAvatar.toggleClass("hide",!0),flashAdded?$previewFlashAvatar.toggleClass("hide",!1):$previewFlashAvatar.toggleClass("hide",!0),imageAdded||flashAdded||forumImageAdded?$previewNoAvatar.toggleClass("hide",!0):$previewNoAvatar.toggleClass("hide",!1)}function remove_image_avatar(){$previewImageAvatar.toggleClass("hide",!0),$("#avatar-preview").removeClass("image_present"),imageAdded=!1}function remove_flash_avatar(){$previewFlashAvatar.toggleClass("hide",!0),$("#avatar-preview").removeClass("flash_present"),flashAdded=!1}function remove_forum_avatar(){$previewForumAvatar.toggleClass("hide",!0),forumImageAdded=!1}function add_image_avatar(){$previewImageAvatar.toggleClass("hide",!1),$("#avatar-preview").addClass("image_present"),imageAdded=!0}function add_flash_avatar(){$previewFlashAvatar.toggleClass("hide",!1),$("#avatar-preview").addClass("flash_present"),flashAdded=!0}function add_forum_avatar(){$previewForumAvatar.toggleClass("hide",!1),forumImageAdded=!0}function edit_flash_avatar(){proboards.data("user").id==proboards.data("profile_id")&&($("#flash-avatar-editor-container").dialog("open"),0==is_loaded&&(proboards.avatar.loadEditor("flash-avatar-editor-container"),is_loaded=1))}function edit_image_avatar(){$("#image-avatar-editor-container").dialog("open")}function delete_image(){proboards.confirm("Are you sure you want to remove your current avatar image?",function(){proboards.loading(!0),proboards.ajax({url:proboards.data("remove_uploaded_avatar_url"),data:{user_id:proboards.data("profile_id")},success:function(e){$("#image-avatar").html(""),$("#image-avatar-preview").html("")},complete:function(){proboards.loading(!1)}})})}function edit_forum_avatar(){isForumAvatarsLoaded||(proboards.ajax({async:!1,url:proboards.data("forum_avatar_url"),success:function(e){$("#forum-avatar-editor-container").html(e.html)}}),isForumAvatarsLoaded=!0),$("#forum-avatar-editor-container").dialog("open")}function select_forum_avatar(e){$("#forum-avatar").html('<img class="max-size" src="'+e+'" />'),change("r4"),$("#forum-avatar-editor-container").dialog("close")}function check_image_link(url){var msg="The link entered is not valid.",patt=/^(https?:\/\/)/i;patt.test(url)||(url="http://"+url),patt=/^(https?:\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?\/.*\./i;var patt_basic=/^(https?:\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*/i;if(patt.test(url)){if(patt=new RegExp(eval(proboards.data("image_regex"))),!patt.test(url))return link_image_error(msg),!1}else if(!patt_basic.test(url))return link_image_error(msg),!1;return!0}function link_image_error(e){$("#link-error").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()}var standard_user_edit_badges=function(){$(document).ready(function(){$(".badges-have .badge-gift").on("click",function(e){var t=$(this),i=/badge-(\d+)/.test(t.attr("class"))?RegExp.$1:null,n=proboards.data("page").member.id;return i&&proboards.badge.gift.dialog(i,n),!1}),$(".badges-have .badge-use-action").on("click",function(e){var t=$(this),i=/badge-(\d+)/.test(t.attr("class"))?RegExp.$1:null;return i&&proboards.badge.action.dialog(i),!1});var i=$('input[name="miniprofile_badges[]"]'),n=proboards.data("miniprofile_badge_limit"),e=function(){for(var e=i.filter(":checked"),t=n;t<e.length;t++)$(e[t]).removeAttr("checked");e.length>=n?i.not(":checked").attr("disabled","disabled"):i.removeAttr("disabled")};i.length>n&&(i.on("change",e),e())})},standard_user_edit_common=function(){$(document).ready(function(){proboards.form.init(),$.fn.storeFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).data("stored",$(this).val())}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).data("stored","checked")})},$.fn.resetFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).val($(this).data("stored"))}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).prop("checked",!0)})},$.fn.trackFormChanges=function(){var e=$(this);return e.on("change","input, select, textarea",function(){$(this).parents(e).data("changed",!0)}),e},$.fn.setFormStatus=function(e,t){var i=$(this);if(i.data("status")!==e)return $('input[type="submit"]',i).setButtonStatus(e,t),i.data("status",e),i},$.fn.setButtonStatus=function(e,t){var i=$(this);if(i.data("status")!==e){switch(e){case"ready":var n=function(){if(t)return i.prop("disabled",!1),i.prev().remove(),void i.unwrap();i.data("wait")?setTimeout(n,500):i.parent("processing")&&(i.parent().css("width","-=40"),setTimeout(function(){i.prev().remove(),i.unwrap().prop("disabled",!1)},500))};n();break;case"saving":var a='style="width: '+(i.width()+30)+'px;"';i.prop("disabled",!0).wrap('<div class="processing" '+a+"></div>");i.parent().prepend('<div class="processing-img"></div>').css("width","+=40");i.data("wait",!0);setTimeout(function(){i.data("wait",!1)},1e3)}return i.data("status",e),i}};var i="";function n(e){$(".js-edit").addClass("hide"),$(".js-edit."+e.page+"-edit").removeClass("hide"),$(".js-tab").parent().removeClass("ui-active"),$('[data-page="'+e.page+'"]').parent().addClass("ui-active")}$(".js-tab").click(function(){$(".js-tab").parent().removeClass("ui-active"),$(this).parent().addClass("ui-active");var e=$(this).data(e),t=proboards.data("profileUserId");e!==i&&(n(i=e),history.pushState({page:e},"Edit"+e,"/user/"+t+"/"+e.page))}),window.onpopstate=function(){var e=history.state?history.state.page:null;if(!e)return $(".js-edit").addClass("hide"),void $(".js-edit.avatar-edit").removeClass("hide");n(e)};$(".edit-user form").data("generic_submit",function(){var t=$(this),i=$('input[type="submit"]',$(this)),e=t.serialize();e+="&tabSection="+function(e){for(var t=e.split(" ");t.length;){var i=t.pop().trim();if(0===i.indexOf("form_"))return i.substr("form_user_edit_".length)}}(t.prop("class")),proboards.ajax({url:proboards.route("update_unified",{user_id:proboards.data("profileUserId")}),data:e,success:function(e){e.alert_message&&proboards.alert(e.alert_message),t.data("changed",!1),i.setStatus("saved",{position:"after",style:"display",styleOpt:"inline"}),$(".js-edit .status-box").css({background:"#90EE90",color:"#006400",padding:"5px",top:"3px",position:"relative"})},error:function(e){i.setStatus("error",{position:"after",style:"display",styleOpt:"inline",text:e.error}),$(".js-edit .status-box").css({background:"#EE9090",color:"#640000",padding:"5px",top:"3px",position:"relative"}),proboards.form.handleFormError(t,e)},complete:function(){t.setFormStatus("ready".true),t.storeFormValues()}})}),$(".delete-user-link").bind("click",function(){proboards.confirm_dialog("users","delete",[proboards.data("page").member.id],function(){window.onbeforeunload=null,window.location=proboards.route("home")})})})},standard_user_edit_notifications=function(){var n=function(e,t,i){var n=$(boardTemplate);return n.data("board-id",e),$(".title-bar h1",n).text(t+" Notifications"),$("#notification-controls").before(n),$(".title-bar",n).click(),i&&a(n,i),$("#add-board-desc").trigger("boardaddremove"),n},o=function(t,i){proboards.ajax({url:proboards.route("update_user_notifications_add_board",{user_id:proboards.data("user").id}),data:{board_id:t},success:function(e){n(t,i,e.settings)}})},a=function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],a=$('.notification-option-wrapper[data-type="'+i+'"]',e),o=$('input[name="forum"]',a),r=$('select[name="freq"]',a);o.is(":disabled")||o.prop("checked",1==n[0]),r.is(":disabled")||r.val(n[2])}};$(document).ready(function(){$(".confirm-ignore-changes form:first").off("change"),$(".js-only").show();var a=$("#add-board-desc").show();a.on("boardaddremove",function(){a.toggle(0==$(".board-notifications").length)});var e=proboards.data("board_settings"),t=proboards.data("board_names");for(var i in e)e.hasOwnProperty(i)&&n(i,t[i],e[i]);$(".notification-option-wrapper","#forum-notifications").each(function(){$('input[type="checkbox"], select',this).autoSubmit({url:proboards.route("update_user_notifications_forum",{user_id:proboards.data("user").id}),statusElement:$(".status",this)})}),$("#content").on("click",".notification-block-wrapper .title-bar",function(){var e=$(this).closest(".notification-block-wrapper");if(e.toggleClass("expand"),e.is(".board-notifications")){var t=e.data("board-id");$(".notification-option-wrapper",e).each(function(){$('input[type="checkbox"], select',this).autoSubmit({url:proboards.route("update_user_notifications_board",{user_id:proboards.data("user").id,board_id:t,type:$(this).data("type")}),statusElement:$(".status",this)})})}}),$("#add-board").on("click",function(e){e.preventDefault();var t=[];$(".board-notifications").each(function(){t.push($(this).data("board-id"))}),proboards.board.select(o,{accessible:!0,useExisting:!0,title:"Add a board",prepend:"Please select a board to customize its notification settings.<br><br>",disabledIds:t})}),$("#content").on("click",".notification-block-wrapper .delete-board",function(e){e.stopPropagation();var t=$(this).closest(".notification-block-wrapper"),i=$("h1",t).text(),n=t.data("board-id");proboards.confirm("Are you sure you want to delete the "+i+" settings?",function(){proboards.ajax({url:proboards.route("update_user_notifications_remove_board",{user_id:proboards.data("user").id}),data:{board_id:n},success:function(){t.remove(),a.trigger("boardaddremove")}})})})})},standard_user_edit_personal=function(){$(document).ready(function(){dialog_opened=0,proboards.dialog("signature_preview_pane",{title:"Signature Preview",autoOpen:!1,width:550,height:415,close:function(){dialog_opened=0}}),$("#signature_preview").click(function(){$(".form_user_edit_personal").data("form").validateSpecified(["signature"])&&0==dialog_opened&&proboards.ajax({url:proboards.data("signature_preview_url"),data:{signature:$("#"+proboards.data("form_id")+"_signature_input").val()},dataType:"json",success:function(e){$("#signature_preview_pane").html(e.signature),$("#signature_preview_pane").dialog("open"),dialog_opened=1}})})})},dialog_opened,standard_user_edit_privacy=function(){$(document).ready(function(){$('input[name="change_birthday"]').attr("checked")||$("#change-birthday").hide(),$('input[name="change_birthday"]').bind("change",function(){var e=$(this);$("#change-birthday").toggle(e.prop("checked"))})})},standard_user_edit_settings=function(){$(document).ready(function(){$('textarea[name="default_post_content"]').input_placeholder(proboards.data("placeholder_text"));var e=$('input[id*="default_post_mode_input_radio_1"]'),t=$("#bbcode");function i(){e.attr("checked")?t.show():t.hide()}$('input[id*="default_post_mode_input_radio"]').bind("click",function(){i()}),i(),"undefined"!=typeof Storage&&$("#drafts").show()})},standard_user_edit_social=function(){$(document).ready(function(){$(".social a").click(function(){var e=$(this).prev().text()+$(this).prev().children("input").val();return window.open(e),!1})})},standard_user_group_leaders=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_group_id"),type:"leads",user_search_box:!0},id:proboards.data("lm_id")})})},standard_user_show_activity=function(){$(document).ready(function(){var n=proboards.data("page"),e=proboards.data("form_id"),t=proboards.data("last_activity_id"),a=null;proboards.data("show_activity_delete")&&($(document).on("mouseover",".activity-item",function(){$(this).find(".delete-button").show()}).on("mouseout",".activity-item",function(){$(this).find(".delete-button").hide()}),$(document).on("click",".delete-button",function(){var e=$(this).attr("class").match(/activity-(\d+)/);if(2==e.length){var t=e[0],i=e[1];proboards.ajax({url:proboards.route("delete_activities"),data:{activity_id:i},success:function(e){$("."+t).remove()}})}})),$("#"+e).submit(function(){var t=$('input[name="update"]',this),i=t.val();return a!=i&&proboards.ajax({url:proboards.route("update_status"),data:{status:i,user_id:n.member.id,html:1},success:function(e){$("#no-activity-row").remove(),void 0!==e.html&&$(".activities-container").prepend(e.html),0!=e.deleted_id&&$(".activity-"+e.deleted_id).remove(),t.attr("value","")},complete:function(e){a=i}}),!1}),$(".show-more").on("click",function(e){proboards.active_ajax_calls||(proboards.ajax({url:proboards.route("show_more_activities"),data:{user_id:n.member.id,last_id:t},success:function(e){$(".activities-container").append(e.html),e.more?t=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreActivity")}}),e.preventDefault(),e.stopPropagation())})})},standard_user_show_following=function(){$(document).ready(function(){var i=proboards.data("page"),n=proboards.data("last_following_id");$(".show-more").on("click",function(e){var t=$(".activities-container");proboards.ajax({url:proboards.route("show_more_following"),data:{user_id:i.member.id,last_id:n},success:function(e){t.append(e.html),e.more?n=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreActivity")}}),e.preventDefault(),e.stopPropagation()})})},standard_user_show_friends=function(){$(document).ready(function(){var e=0;$(".mini-user-inside").each(function(){$(this).height()>e&&(e=$(this).height())}).css("height",e+"px"),$(".follow-member").click(function(e){var t=this;e.preventDefault(),$(t).attr("disabled","disabled");var i=$(t).attr("id").substr("follow-".length);return proboards.ajax({url:proboards.route("follow_user"),data:{user_id:i},success:function(e){$(t).remove(),$(".user-"+i).remove()},complete:function(){$(t).removeAttr("disabled")}}),!1}),$("#invite-button").bind("click",function(e){return e.preventDefault(),proboards.ajax({url:proboards.data("invite_dialog_url"),data:{},dataType:"json",success:function(e){proboards.dialog("invite-dialog",{title:"Invite Friends",html:e.html,width:530,height:410,buttons:e.already?{Close:function(){$("#invite-dialog").dialog("close")}}:{"Send Invite":function(e){e.preventDefault(),proboards.dialog_toggle_buttons("invite-dialog"),proboards.ajax({url:$("#invite-dialog form").attr("action"),data:$("#invite-dialog form").serialize(),dataType:"html",success:function(e){$("#invite-dialog").html(e),$("#invite-dialog").dialog("option","buttons",{Close:function(){$("#invite-dialog").dialog("close")}})},error:function(e){proboards.dialog_toggle_buttons("invite-dialog"),proboards.error(e)}})}}})}}),!1})})},standard_user_show_groups=function(){$(document).ready(function(){var t=proboards.data("page").member.id;$(document).on("click",".group-leaders",function(e){e.preventDefault();var t=$(this).attr("id").substr("group-leaders-".length),i="group-leaders-dialog-"+t;proboards.dialog(i,{autoOpen:!1,width:460,maxHeight:600,title:"Leaders"}),proboards.ajax({url:proboards.route("show_group_leaders"),data:{id:t},dataType:"json",success:function(e){$("#"+i).html(e.html).dialog("open"),standard_user_group_leaders()}})}),$(document).on("click",".join-group",function(e){var a=$(this),o=a.attr("id").substr("join-group-".length);a.hide(),proboards.ajax({url:proboards.route("join_group"),data:{group_id:o,user_id:t},dataType:"html",success:function(e){var t=jQuery.parseJSON(e);if(a.replaceWith(t.status),$("#leave-group-"+o).html(t.leave_tag),!$("#group-"+o).hasClass("restricted")){var i=$("#count-"+o),n=proboards.add_commified_numbers([i.html(),t.increment]);i.html(n),$("#no-groups-msg").hide()}1==$("#manage-link-"+o+":visible").length&&$("#manage-link-"+o+":visible").siblings(".group-control-separator").show(),$("#leave-group-"+o).show(),1==t.mod_flag&&$(".manage-link").each(function(){$(this).show();var e=$(this).siblings();1==e.filter(".leave-group:visible").length&&e.filter(".group-control-separator").show()})}}),e.preventDefault()}),$(document).on("click",".leave-group",function(e){var t=$(this),o=t.attr("id").substr("leave-group-".length);t.prop("disabled",!0),proboards.confirm("Are you sure?",function(){proboards.ajax({url:proboards.route("leave_group"),data:{group_id:o,pending:t.text()},dataType:"html",success:function(e){var t=jQuery.parseJSON(e)||{};if($("#manage-link-"+o).siblings().hide(),!$("#group-"+o).hasClass("restricted")){0==t.mod_flag&&$("#manage-link-"+o).hide();var i=$("#count-"+o),n=proboards.add_commified_numbers([i.html(),-1]);n<0&&(n=0),i.html(n),$("#group-"+o).removeClass("leader")}$("#status-"+o).html(t.status),0==t.mod_flag&&$(".group:not(.leader)").each(function(){var e=$(this).attr("id").substr("group-".length);$("#leave-group-"+e).siblings().hide()});var a=!1;$(".leave-group:visible").each(function(){var e=$(this).attr("id").substr(".leave-group-".length);if(!$("#group-"+e).hasClass("restricted"))return a=!0}),a&&$("#no-groups-msg").show()},complete:function(){t.prop("disabled",!1)}})},{onNo:function(){t.prop("disabled",!1)}}),e.preventDefault()}),$(document).on("click",".remove-from-group",function(e){var n=$(this),a=n.attr("id").substr("remove-from-group-".length);n.prop("disabled",!0),proboards.confirm("Are you sure?",function(){proboards.ajax({url:proboards.route("change_group_members",{type:"remove"}),data:{group_id:a,user_ids:[t]},success:function(e){n.hide(),$("#add-to-group-"+a).show(),$("#status-"+a).html("Not a Member");var t=$("#count-"+a),i=proboards.add_commified_numbers([t.html(),-1]);i<0&&(i=0),t.html(i),0===$(".remove-from-group:visible").length&&$("#no-groups-msg").show()},complete:function(){n.prop("disabled",!1)}})},{onNo:function(){n.prop("disabled",!1)}}),e.preventDefault()}),$(document).on("click",".add-to-group",function(e){var n=$(this),a=n.attr("id").substr("add-to-group-".length);n.prop("disabled",!0),proboards.ajax({url:proboards.route("change_group_members",{type:"adding"}),data:{group_id:a,user_ids:[t]},success:function(e){n.hide(),$("#remove-from-group-"+a).show(),$("#status-"+a).html("Member");var t=$("#count-"+a),i=proboards.add_commified_numbers([t.html(),1]);t.html(i),$("#no-groups-msg").hide()},complete:function(){n.prop("disabled",!1)}}),e.preventDefault()})})},standard_user_show_notifications=function(){$(document).ready(function(){var i=proboards.data("page"),n=proboards.data("last_notification_id");$(".show-more").on("click",function(e){var t=$(".notifications-container");proboards.ajax({url:proboards.route("show_more_notifications"),data:{user_id:i.member.id,last_id:n},success:function(e){t.append(e.html),e.more?n=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreNotification")}}),e.preventDefault(),e.stopPropagation()})})},standard_user_show_summary=function(){$(document).ready(function(){var e=proboards.data("form_id"),n=proboards.data("page").member.id,a=null;$("#"+e).on("submit",function(){var t=$('input[name="update"]',this),i=t.val();return a!=i&&proboards.ajax({url:proboards.route("update_status"),data:{status:i,user_id:n},success:function(e){$(".personal-text").html(e.entered_text),t.attr("value","")},complete:function(e){a=i}}),$('input[name="submit"]').removeAttr("disabled"),!1})})},standard_user_show_user_common=function(){$(document).ready(function(){var i=proboards.data("page").member.id;if($(".follow_button").click(function(e){var t=this;return e.preventDefault(),$(t).hasClass("ui-state-disabled")||($(t).addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("follow_user"),data:{user_id:i},success:function(e){$(t).text(e.new_button_text)},complete:function(){$(t).removeClass("ui-state-disabled")}})),!1}),proboards.data("show_user_options")){var e="#options-container",t=$(e);t.show(),$(".user-menu").selectMenu({container:e,status:'<img src="'+proboards.data("options_img_src")+'" alt="Profile Options" title="Profile Options" />',staticStatus:!0,beforeShow:function(){t.addClass("open-menu")},onClose:function(){t.removeClass("open-menu")},menuOptions:{click:function(e,t){switch($(t.item).attr("class")){case"block_user":0==$("#block-dialog").length&&($(document.body).append('<div id="block-dialog"></div>'),proboards.dialog("block-dialog",{autoOpen:!1,width:500,title:"Block Member",buttons:[{text:"Block Member",click:function(){$("#block-dialog form").submit()}}]}),proboards.ajax({url:proboards.route("block_user_dialog"),data:{user_id:i},dataType:"html",success:function(e){$("#block-dialog").html(e)}})),$("#block-dialog").dialog("open");break;case"ban_user":proboards.member.ban({id:i,checked:["user_name"],success:function(){$("li.ban_user").remove()}});break;case"warn_user":case"disable":window.location.href=proboards.data("user_staff_url");break;case"delete_user":proboards.confirm_dialog("users","delete",[i],function(e){window.location=proboards.route("members")});break;case"searchIP actionable ui-menu-has-sub-menu":proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this user: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(t.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();break;case"ipSearchThreads":window.location=proboards.route("threads_by_ip",{type:"user",id:i});break;case"ipSearchPosts":window.location=proboards.route("posts_by_ip",{type:"user",id:i});break;case"ipSearchMembers":window.location=proboards.route("members")+"?view=ip&type=user&id="+i;break;case"ipSearchLogs":window.location=proboards.route("security_logs_by_ip",{type:"user",id:i});break;case"badge_action":proboards.badge.action.dialog($(t.item).data("badge-id"),$(t.item).data("user-id"))}}}})}})},admin_settings_forum_calendar=function(){$(document).ready(function(){$('select[name="enabled"]').autoSubmit({url:proboards.data("settings_save_url"),statusElement:$('select[name="enabled"]').parent().nextAll(".status-box")}),$('input[name="display_birthdays"]').autoSubmit({url:proboards.data("settings_save_url"),statusElement:$('input[name="display_birthdays"]').parent().nextAll(".status-box")})})},admin_settings_forum_delete_forum=function(){$(document).ready(function(){var i=$("#delete_forum div.exit-block");i.hide(),$("#delete_forum button#continue").on("click",function(e){e.preventDefault();var t=$("#delete_forum form");t.data("form").validateAll()&&proboards.ajax({url:proboards.route("delete_forum_validate"),data:{password:$('input[name="password"]',t).val()},dataType:"json",success:function(e){e.validated&&($("div.delete-forum",t).hide(),i.show())},error:function(e){e.form_error&&proboards.form.handleFormError(t,{form_error:{password:[e.form_error]}}),e.error&&"invalid_user"==e.error&&proboards.error("User cannot be found.")}})})})},admin_settings_forum_directory=function(){$(document).ready(function(){var i=proboards.data("category_data"),n=proboards.data("directory_url"),e=proboards.data("thumbnail_preview"),a=proboards.data("forum_name"),o=$('input[name="forum_name"]');null!=e&&($(".thumbnail_preview").append('<img src="'+e+'" alt="Current Thumbnail" />'),$('input[name="thumb_type"][value="4"]').attr("checked","checked")),$(".thumb_type input").change(function(){0==$(".thumb_type input:checked").val()?($("#upload_own").show(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").hide()):1==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").show(),$("#take_new").hide(),$("#use_default").hide()):2==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").show(),$("#use_default").hide()):3==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").show(),$('select[name="forum_image_category"]').change()):4==$(".thumb_type input:checked").val()&&($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").hide())}),$('select[name="forum_image_category"]').change(function(){$("#default_icons").empty();for(var e=i[$(this).val()].images,t=0;t<e.length;t++)$("#default_icons").append('<img src="'+n+$(this).val()+"/"+e[t]+'.png" alt="'+$(this).val()+"/"+e[t]+'" />')}),$(".remove_entry").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you want to delete this directory entry?",function(){proboards.instapost(proboards.data("delete_url"))})}),$(document).on("click","#default_icons img",function(){$('input[name="use_default"]').val($(this).attr("src")),$("#default_icons img").removeClass("chosen"),$(this).addClass("chosen")}),$('input[name="submit_entry"]').on("click",function(e){var t=$("#general-settings form");if(t.data("form").validateAll()){if(o.val()==a&&""!=a)return!0;e.preventDefault();var i=""==a?"Forums without titles cannot be accepted into the directory. Please set a forum title.":"The chosen forum directory name differs from the forum title.";proboards.confirm(i+"<br /><br />Would you like to set the chosen directory name as your forum title?",function(){$('input[name="new_forum_name"]').val("1"),t.submit()},{title:"Forum Title Change",onNo:function(){""==!a&&t.submit()}})}})})},admin_settings_forum_forum=function(){$(document).ready(function(){$("select, input, textarea").not('[name="hex"]').not('[name="maintenance_mode"]').each(function(){$(this).parents(".image-module").length||$(this).parents(".js-not-auto-submit").length||$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})});var t=$(".maintenance_mode_message").parents(".option"),i=$('input[name="maintenance_mode"]'),e=$('input[name="maintenance_mode"]:checked'),n=$("#remove_limit");i.on("change",function(){t.toggle(1==$(this).val())}),e.trigger("change"),i.each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),2==proboards.data("maintenance_mode")&&(i.closest(".option").hide(),t.siblings(".default-message").hide()),n.on("click",function(){var e="Are you sure you want to disable maintenance mode?";e="Disabling maintenance mode will reset your monthly bill<br />limit and allow unlimited pageviews. You will be charged<br />for additional pageviews according to your chosen plan.<br /><br />"+e,proboards.confirm(e,function(){i.filter('input[value="0"]').prop("checked",!0).trigger("change"),n.hide(),n.siblings(".warning-message").remove(),t.siblings(".default-message").show(),i.closest(".option").show()},{title:"Maintenance Mode"})})})},admin_settings_forum_login_registration=function(){$(document).ready(function(){$('select, input[name!="hex"], textarea').filter(":not(.autosave-exclude)").each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})});var e=function(e){var t=e.val();if(t.match(/^([0-9A-F]{3}|[0-9A-F]{6})?/i)){switch(e.attr("name")){case"gradient_bg_color":""==t&&(t="0e7fff"),$("#pbn-preview").css("background-color","#"+t);break;case"gradient_text_color":""==t&&(t="ffffff"),$("#pbn-preview .forum-title").css("color","#"+t);break;case"container1_color":""==t&&(t="ff7113"),$("#pbn-preview .container1_color").css("background-color","#"+t);break;case"container2_color":""==t&&(t="0e7fff"),$("#pbn-preview .container2_color").css("background-color","#"+t);break;case"container_text_color":""==t&&(t="ffffff"),$("#pbn-preview .container1_color").css("color","#"+t),$("#pbn-preview .container2_color").css("color","#"+t)}e.siblings(".color-picker-preview").css("background-color","#"+t)}};$("#pbn-options .color-option").each(function(){$(this).colorPickMe({update:function(){$(this).trigger("keyup"),e($(this))}}),$(this).on("change",function(){e($(this))})});var t=$("#registration_send_invite"),i=$('input[name="registration_email_invite"]',t),n=$('input[name="registration_email_invite_send"]',t),a=$(".status-box",t);a.loadingStatus({loadingClass:"saved",loadingText:"Sending...",successClass:"saved",successText:"Sent!"});var o=a.data("loadingStatus");n.on("click",function(){var e=i.val();if(!$.check_email(e))return o.setStatus("error","Please enter a valid email.");n.prop("disabled",!0),o.setStatus("loading"),proboards.ajax({url:proboards.data("email_invite_key_url"),data:{email:e},success:function(){o.setStatus("success")},error:function(e){o.setStatus("error",e.error)},complete:function(){n.prop("disabled",!1)}})}),i.on("keydown",function(e){13!=e.keyCode&&13!=e.which||n.trigger("click")});var r=$('input[name="guests_must_login"]'),s=$('input[name="registration_welcome_pm"]'),l=$('input[name="disable_registration"]'),c=$('input[name="require_new_account_approval"]'),d=$('input[name="registration_assign_user_to_group"]'),u=$("#registration_welcome_subject"),p=$("#registration_welcome_message"),h=$("#registration_send_invite"),f=$("#registration_request_message"),m=$("#restrict_registration_message"),g=$("#registration_default_group"),v=$('select[name="registration_default_group"] option');r.on("change update",function(){var e="1"==r.filter(":checked").val();$("#guests_must_login_message").toggle(e)}).trigger("update"),l.on("change update",function(){var e="1"==l.filter(":checked").val();h.toggle(e)}).trigger("update"),c.on("change update",function(){var e="1"==$('input[name="require_new_account_approval"]:checked').val();$([f,m]).toggle(e)}).trigger("update"),s.on("change update",function(){var e="1"==s.filter(":checked").val();$([u,p]).toggle(e)}).trigger("update"),d.on("change update",function(){var e="1"==d.filter(":checked").val(),t=1<v.length,i=!(!e||!t);g.toggle(i)}).trigger("update")})},admin_settings_forum_social_media=function(){$(document).ready(function(){$(".under-headings .option input").each(function(){$(this).parents(".image-module").length||$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})})})};